import{$ as Dd,A as kH,B as k0,C as O0,D as OH,E as F0,F as Dn,G as FH,H as LH,I as Ji,J as cu,K as L0,L as ym,M as VH,N as UH,O as Se,P as ui,Q as Hn,R as jN,S as jH,T as vm,U as Me,V as cr,W as V0,X as BN,Y as Zi,Z as lu,_ as ha,a as X,aa as BH,b as Xe,ba as ci,c as R,ca as nn,d as VN,e as F,f as we,g as Td,h as V,i as U,j as uu,k as cs,l as Rt,m as R0,n as xH,o as NH,p as Q,q as Cd,r as M0,s as RH,t as MH,u as Xn,v as Sd,w as P0,x as UN,y as PH,z as ls}from"./chunk-UD3IDF66.js";var qH=null;var qN=1;function Ti(t){let e=qH;return qH=t,e}var HH={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Fue(t){if(!(zN(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===qN)){if(!t.producerMustRecompute(t)&&!HN(t)){t.dirty=!1,t.lastCleanEpoch=qN;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=qN}}function $H(t){return t&&(t.nextProducerIndex=0),Ti(t)}function zH(t,e){if(Ti(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(zN(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)$N(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function HN(t){U0(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Fue(n),r!==n.version))return!0}return!1}function GH(t){if(U0(t),zN(t))for(let e=0;e<t.producerNode.length;e++)$N(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function $N(t,e){if(Lue(t),U0(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)$N(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];U0(i),i.producerIndexOfThis[r]=e}}function zN(t){var e,n;return t.consumerIsAlwaysLive||((n=(e=t==null?void 0:t.liveConsumerNode)==null?void 0:e.length)!=null?n:0)>0}function U0(t){var e,n,r;(e=t.producerNode)!=null||(t.producerNode=[]),(n=t.producerIndexOfThis)!=null||(t.producerIndexOfThis=[]),(r=t.producerLastReadVersion)!=null||(t.producerLastReadVersion=[])}function Lue(t){var e,n;(e=t.liveConsumerNode)!=null||(t.liveConsumerNode=[]),(n=t.liveConsumerIndexOfThis)!=null||(t.liveConsumerIndexOfThis=[])}function Vue(){throw new Error}var Uue=Vue;function WH(t){Uue=t}function Oe(t){return typeof t=="function"}function Ad(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var j0=Ad(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function el(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var vn=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Oe(r))try{r()}catch(o){e=o instanceof j0?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{KH(o)}catch(s){e=e!=null?e:[],s instanceof j0?e=[...e,...s.errors]:e.push(s)}}if(e)throw new j0(e)}}add(e){var n;if(e&&e!==this)if(this.closed)KH(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&el(n,e)}remove(e){let{_finalizers:n}=this;n&&el(n,e),e instanceof t&&e._removeParent(this)}};vn.EMPTY=(()=>{let t=new vn;return t.closed=!0,t})();var GN=vn.EMPTY;function B0(t){return t instanceof vn||t&&"closed"in t&&Oe(t.remove)&&Oe(t.add)&&Oe(t.unsubscribe)}function KH(t){Oe(t)?t():t.unsubscribe()}var Co={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var xd={setTimeout(t,e,...n){let{delegate:r}=xd;return r!=null&&r.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=xd;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function q0(t){xd.setTimeout(()=>{let{onUnhandledError:e}=Co;if(e)e(t);else throw t})}function tl(){}var QH=WN("C",void 0,void 0);function YH(t){return WN("E",void 0,t)}function XH(t){return WN("N",t,void 0)}function WN(t,e,n){return{kind:t,value:e,error:n}}var nl=null;function Nd(t){if(Co.useDeprecatedSynchronousErrorHandling){let e=!nl;if(e&&(nl={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=nl;if(nl=null,n)throw r}}else t()}function JH(t){Co.useDeprecatedSynchronousErrorHandling&&nl&&(nl.errorThrown=!0,nl.error=t)}var rl=class extends vn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,B0(e)&&e.add(this)):this.destination=que}static create(e,n,r){return new da(e,n,r)}next(e){this.isStopped?QN(XH(e),this):this._next(e)}error(e){this.isStopped?QN(YH(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?QN(QH,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jue=Function.prototype.bind;function KN(t,e){return jue.call(t,e)}var YN=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){H0(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){H0(r)}else H0(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){H0(n)}}},da=class extends rl{constructor(e,n,r){super();let i;if(Oe(e)||!e)i={next:e!=null?e:void 0,error:n!=null?n:void 0,complete:r!=null?r:void 0};else{let o;this&&Co.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&KN(e.next,o),error:e.error&&KN(e.error,o),complete:e.complete&&KN(e.complete,o)}):i=e}this.destination=new YN(i)}};function H0(t){Co.useDeprecatedSynchronousErrorHandling?JH(t):q0(t)}function Bue(t){throw t}function QN(t,e){let{onStoppedNotification:n}=Co;n&&xd.setTimeout(()=>n(t,e))}var que={closed:!0,next:tl,error:Bue,complete:tl};var Rd=typeof Symbol=="function"&&Symbol.observable||"@@observable";function lr(t){return t}function XN(...t){return JN(t)}function JN(t){return t.length===0?lr:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Ve=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=$ue(n)?n:new da(n,r,i);return Nd(()=>{let{operator:s,source:u}=this;o.add(s?s.call(o,u):u?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ZH(r),new r((i,o)=>{let s=new da({next:u=>{try{n(u)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Rd](){return this}pipe(...n){return JN(n)(this)}toPromise(n){return n=ZH(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function ZH(t){var e;return(e=t!=null?t:Co.Promise)!==null&&e!==void 0?e:Promise}function Hue(t){return t&&Oe(t.next)&&Oe(t.error)&&Oe(t.complete)}function $ue(t){return t&&t instanceof rl||Hue(t)&&B0(t)}function ZN(t){return Oe(t==null?void 0:t.lift)}function Pe(t){return e=>{if(ZN(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ne(t,e,n,r,i){return new eR(t,e,n,r,i)}var eR=class extends rl{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(u){try{n(u)}catch(c){e.error(c)}}:super._next,this._error=i?function(u){try{i(u)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Md(){return Pe((t,e)=>{let n=null;t._refCount++;let r=Ne(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Pd=class extends Ve{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ZN(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e==null||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vn;let n=this.getSubject();e.add(this.source.subscribe(Ne(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vn.EMPTY)}return e}refCount(){return Md()(this)}};var e$=Ad(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Nt=(()=>{class t extends Ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new $0(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new e$}next(n){Nd(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Nd(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Nd(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?GN:(this.currentObservers=null,o.push(n),new vn(()=>{this.currentObservers=null,el(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Ve;return n.source=this,n}}return t.create=(e,n)=>new $0(e,n),t})(),$0=class extends Nt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:GN}};var _n=class extends Nt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var _m={now(){return(_m.delegate||Date).now()},delegate:void 0};var z0=class extends Nt{constructor(e=1/0,n=1/0,r=_m){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),u=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)u=c;u&&r.splice(0,u+1)}}};var G0=class extends vn{constructor(e,n){super()}schedule(e,n=0){return this}};var wm={setInterval(t,e,...n){let{delegate:r}=wm;return r!=null&&r.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=wm;return((e==null?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0};var kd=class extends G0{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return wm.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&wm.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,el(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Od=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Od.now=_m.now;var Fd=class extends Od{constructor(e,n=Od.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var fa=new Fd(kd);var W0=class extends kd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var K0=class extends Fd{};var tR=new K0(W0);var li=new Ve(t=>t.complete());function t$(t){return t&&Oe(t.schedule)}function nR(t){return t[t.length-1]}function Ld(t){return Oe(nR(t))?t.pop():void 0}function hs(t){return t$(nR(t))?t.pop():void 0}function n$(t,e){return typeof nR(t)=="number"?t.pop():e}var Q0=t=>t&&typeof t.length=="number"&&typeof t!="function";function Y0(t){return Oe(t==null?void 0:t.then)}function X0(t){return Oe(t[Rd])}function J0(t){return Symbol.asyncIterator&&Oe(t==null?void 0:t[Symbol.asyncIterator])}function Z0(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function zue(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var eE=zue();function tE(t){return Oe(t==null?void 0:t[eE])}function nE(t){return xH(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield R0(n.read());if(i)return yield R0(void 0);yield yield R0(r)}}finally{n.releaseLock()}})}function rE(t){return Oe(t==null?void 0:t.getReader)}function Mt(t){if(t instanceof Ve)return t;if(t!=null){if(X0(t))return Gue(t);if(Q0(t))return Wue(t);if(Y0(t))return Kue(t);if(J0(t))return r$(t);if(tE(t))return Que(t);if(rE(t))return Yue(t)}throw Z0(t)}function Gue(t){return new Ve(e=>{let n=t[Rd]();if(Oe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Wue(t){return new Ve(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Kue(t){return new Ve(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,q0)})}function Que(t){return new Ve(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function r$(t){return new Ve(e=>{Xue(t,e).catch(n=>e.error(n))})}function Yue(t){return r$(nE(t))}function Xue(t,e){var n,r,i,o;return V(this,void 0,void 0,function*(){try{for(n=NH(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function hi(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ci(t,e=0){return Pe((n,r)=>{n.subscribe(Ne(r,i=>hi(r,t,()=>r.next(i),e),()=>hi(r,t,()=>r.complete(),e),i=>hi(r,t,()=>r.error(i),e)))})}function So(t,e=0){return Pe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function i$(t,e){return Mt(t).pipe(So(e),Ci(e))}function o$(t,e){return Mt(t).pipe(So(e),Ci(e))}function s$(t,e){return new Ve(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function a$(t,e){return new Ve(n=>{let r;return hi(n,e,()=>{r=t[eE](),hi(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Oe(r==null?void 0:r.return)&&r.return()})}function iE(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ve(n=>{hi(n,e,()=>{let r=t[Symbol.asyncIterator]();hi(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function u$(t,e){return iE(nE(t),e)}function c$(t,e){if(t!=null){if(X0(t))return i$(t,e);if(Q0(t))return s$(t,e);if(Y0(t))return o$(t,e);if(J0(t))return iE(t,e);if(tE(t))return a$(t,e);if(rE(t))return u$(t,e)}throw Z0(t)}function ze(t,e){return e?c$(t,e):Mt(t)}function pe(...t){let e=hs(t);return ze(t,e)}function Vd(t,e){let n=Oe(t)?t:()=>t,r=i=>i.error(n());return new Ve(e?i=>e.schedule(r,0,i):r)}function rR(t){return!!t&&(t instanceof Ve||Oe(t.lift)&&Oe(t.subscribe))}var pa=Ad(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function le(t,e){return Pe((n,r)=>{let i=0;n.subscribe(Ne(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:Jue}=Array;function Zue(t,e){return Jue(e)?t(...e):t(e)}function oE(t){return le(e=>Zue(t,e))}var{isArray:ece}=Array,{getPrototypeOf:tce,prototype:nce,keys:rce}=Object;function sE(t){if(t.length===1){let e=t[0];if(ece(e))return{args:e,keys:null};if(ice(e)){let n=rce(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function ice(t){return t&&typeof t=="object"&&tce(t)===nce}function aE(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Em(...t){let e=hs(t),n=Ld(t),{args:r,keys:i}=sE(t);if(r.length===0)return ze([],e);let o=new Ve(oce(r,e,i?s=>aE(i,s):lr));return n?o.pipe(oE(n)):o}function oce(t,e,n=lr){return r=>{l$(e,()=>{let{length:i}=t,o=new Array(i),s=i,u=i;for(let c=0;c<i;c++)l$(e,()=>{let h=ze(t[c],e),f=!1;h.subscribe(Ne(r,p=>{o[c]=p,f||(f=!0,u--),u||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function l$(t,e,n){t?hi(n,t,e):e()}function h$(t,e,n,r,i,o,s,u){let c=[],h=0,f=0,p=!1,m=()=>{p&&!c.length&&!h&&e.complete()},v=E=>h<r?_(E):c.push(E),_=E=>{o&&e.next(E),h++;let b=!1;Mt(n(E,f++)).subscribe(Ne(e,T=>{i==null||i(T),o?v(T):e.next(T)},()=>{b=!0},void 0,()=>{if(b)try{for(h--;c.length&&h<r;){let T=c.shift();s?hi(e,s,()=>_(T)):_(T)}m()}catch(T){e.error(T)}}))};return t.subscribe(Ne(e,v,()=>{p=!0,m()})),()=>{u==null||u()}}function An(t,e,n=1/0){return Oe(e)?An((r,i)=>le((o,s)=>e(r,o,i,s))(Mt(t(r,i))),n):(typeof e=="number"&&(n=e),Pe((r,i)=>h$(r,i,t,n)))}function hu(t=1/0){return An(lr,t)}function d$(){return hu(1)}function Ud(...t){return d$()(ze(t,hs(t)))}function uE(t){return new Ve(e=>{Mt(t()).subscribe(e)})}function iR(...t){let e=Ld(t),{args:n,keys:r}=sE(t),i=new Ve(o=>{let{length:s}=n;if(!s){o.complete();return}let u=new Array(s),c=s,h=s;for(let f=0;f<s;f++){let p=!1;Mt(n[f]).subscribe(Ne(o,m=>{p||(p=!0,h--),u[f]=m},()=>c--,void 0,()=>{(!c||!p)&&(h||o.next(r?aE(r,u):u),o.complete())}))}});return e?i.pipe(oE(e)):i}function jd(...t){let e=hs(t),n=n$(t,1/0),r=t;return r.length?r.length===1?Mt(r[0]):hu(n)(ze(r,e)):li}function $n(t,e){return Pe((n,r)=>{let i=0;n.subscribe(Ne(r,o=>t.call(e,o,i++)&&r.next(o)))})}function du(t){return Pe((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Ne(n,void 0,void 0,s=>{o=Mt(t(s,du(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function f$(t,e,n,r,i){return(o,s)=>{let u=n,c=e,h=0;o.subscribe(Ne(s,f=>{let p=h++;c=u?t(c,f,p):(u=!0,f),r&&s.next(c)},i&&(()=>{u&&s.next(c),s.complete()})))}}function ga(t,e){return Oe(e)?An(t,e,1):An(t,1)}function oR(t,e=fa){return Pe((n,r)=>{let i=null,o=null,s=null,u=()=>{if(i){i.unsubscribe(),i=null;let h=o;o=null,r.next(h)}};function c(){let h=s+t,f=e.now();if(f<h){i=this.schedule(void 0,h-f),r.add(i);return}u()}n.subscribe(Ne(r,h=>{o=h,s=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{u(),r.complete()},void 0,()=>{o=i=null}))})}function fu(t){return Pe((e,n)=>{let r=!1;e.subscribe(Ne(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function ma(t){return t<=0?()=>li:Pe((e,n)=>{let r=0;e.subscribe(Ne(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function sR(t){return le(()=>t)}function Im(t,e=lr){return t=t!=null?t:sce,Pe((n,r)=>{let i,o=!0;n.subscribe(Ne(r,s=>{let u=e(s);(o||!t(i,u))&&(o=!1,i=u,r.next(s))}))})}function sce(t,e){return t===e}function cE(t=ace){return Pe((e,n)=>{let r=!1;e.subscribe(Ne(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function ace(){return new pa}function pu(t){return Pe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function eo(t,e){let n=arguments.length>=2;return r=>r.pipe(t?$n((i,o)=>t(i,o,r)):lr,ma(1),n?fu(e):cE(()=>new pa))}function Bd(t){return t<=0?()=>li:Pe((e,n)=>{let r=[];e.subscribe(Ne(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function aR(t,e){let n=arguments.length>=2;return r=>r.pipe(t?$n((i,o)=>t(i,o,r)):lr,Bd(1),n?fu(e):cE(()=>new pa))}function bm(){return Pe((t,e)=>{let n,r=!1;t.subscribe(Ne(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function ds(t,e){return Pe(f$(t,e,arguments.length>=2,!0))}function Tm(t={}){let{connector:e=()=>new Nt,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,u,c,h=0,f=!1,p=!1,m=()=>{u==null||u.unsubscribe(),u=void 0},v=()=>{m(),s=c=void 0,f=p=!1},_=()=>{let E=s;v(),E==null||E.unsubscribe()};return Pe((E,b)=>{h++,!p&&!f&&m();let T=c=c!=null?c:e();b.add(()=>{h--,h===0&&!p&&!f&&(u=uR(_,i))}),T.subscribe(b),!s&&h>0&&(s=new da({next:S=>T.next(S),error:S=>{p=!0,m(),u=uR(v,n,S),T.error(S)},complete:()=>{f=!0,m(),u=uR(v,r),T.complete()}}),Mt(E).subscribe(s))})(o)}}function uR(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new da({next:()=>{r.unsubscribe(),t()}});return Mt(e(...n)).subscribe(r)}function lE(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t!=null?t:1/0,Tm({connector:()=>new z0(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function cR(t){return Pe((e,n)=>{let r=!1,i=0;e.subscribe(Ne(n,o=>(r||(r=!t(o,i++)))&&n.next(o)))})}function il(...t){let e=hs(t);return Pe((n,r)=>{(e?Ud(t,n,e):Ud(t,n)).subscribe(r)})}function Tt(t,e){return Pe((n,r)=>{let i=null,o=0,s=!1,u=()=>s&&!i&&r.complete();n.subscribe(Ne(r,c=>{i==null||i.unsubscribe();let h=0,f=o++;Mt(t(c,f)).subscribe(i=Ne(r,p=>r.next(e?e(c,p,f,h++):p),()=>{i=null,u()}))},()=>{s=!0,u()}))})}function hE(t,e){return Oe(e)?Tt(()=>t,e):Tt(()=>t)}function lR(t){return Pe((e,n)=>{Mt(t).subscribe(Ne(n,()=>n.complete(),tl)),!n.closed&&e.subscribe(n)})}function cn(t,e,n){let r=Oe(t)||e||n?{next:t,error:e,complete:n}:t;return r?Pe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let u=!0;i.subscribe(Ne(o,c=>{var h;(h=r.next)===null||h===void 0||h.call(r,c),o.next(c)},()=>{var c;u=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var h;u=!1,(h=r.error)===null||h===void 0||h.call(r,c),o.error(c)},()=>{var c,h;u&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(h=r.finalize)===null||h===void 0||h.call(r)}))}):lr}function hR(...t){let e=Ld(t);return Pe((n,r)=>{let i=t.length,o=new Array(i),s=t.map(()=>!1),u=!1;for(let c=0;c<i;c++)Mt(t[c]).subscribe(Ne(r,h=>{o[c]=h,!u&&!s[c]&&(s[c]=!0,(u=s.every(lr))&&(s=null))},tl));n.subscribe(Ne(r,c=>{if(u){let h=[c,...o];r.next(e?e(...h):h)}}))})}function Pt(t){for(let e in t)if(t[e]===Pt)return e;throw Error("Could not find renamed property on target object.")}function dE(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Tr(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Tr).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function SR(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var uce=Pt({__forward_ref__:Pt});function Eu(t){return t.__forward_ref__=Eu,t.toString=function(){return Tr(this())},t}function Br(t){return tz(t)?t():t}function tz(t){return typeof t=="function"&&t.hasOwnProperty(uce)&&t.__forward_ref__===Eu}function nz(t){return t&&!!t.\u0275providers}var rz="https://g.co/ng/security#xss",z=class extends Error{constructor(e,n){super(WE(e,n)),this.code=e}};function WE(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var cce=Pt({\u0275cmp:Pt}),lce=Pt({\u0275dir:Pt}),hce=Pt({\u0275pipe:Pt}),dce=Pt({\u0275mod:Pt}),SE=Pt({\u0275fac:Pt}),Cm=Pt({__NG_ELEMENT_ID__:Pt}),p$=Pt({__NG_ENV_ID__:Pt});function Om(t){return typeof t=="string"?t:t==null?"":String(t)}function fce(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Om(t)}function pce(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new z(-200,`Circular dependency in DI detected for ${t}${n}`)}function MM(t,e){let n=e?` in ${e}`:"";throw new z(-201,!1)}function gce(t,e){t==null&&mce(e,t,null,"!=")}function mce(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function Y(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ut(t){return{providers:t.providers||[],imports:t.imports||[]}}function KE(t){return g$(t,oz)||g$(t,sz)}function iz(t){return KE(t)!==null}function g$(t,e){return t.hasOwnProperty(e)?t[e]:null}function yce(t){let e=t&&(t[oz]||t[sz]);return e||null}function m$(t){return t&&(t.hasOwnProperty(y$)||t.hasOwnProperty(vce))?t[y$]:null}var oz=Pt({\u0275prov:Pt}),y$=Pt({\u0275inj:Pt}),sz=Pt({ngInjectableDef:Pt}),vce=Pt({ngInjectorDef:Pt}),Je=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Je||{}),DR;function az(){return DR}function di(t){let e=DR;return DR=t,e}function uz(t,e,n){let r=KE(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Je.Optional)return null;if(e!==void 0)return e;MM(Tr(t),"Injector")}var hr=globalThis;var J=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Y({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var _ce={},Dm=_ce,AR="__NG_DI_FLAG__",DE="ngTempTokenPath",wce="ngTokenPath",Ece=/\n/gm,Ice="\u0275",v$="__source",Gd;function bce(){return Gd}function gu(t){let e=Gd;return Gd=t,e}function Tce(t,e=Je.Default){if(Gd===void 0)throw new z(-203,!1);return Gd===null?uz(t,void 0,e):Gd.get(t,e&Je.Optional?null:void 0,e)}function M(t,e=Je.Default){return(az()||Tce)(Br(t),e)}function ee(t,e=Je.Default){return M(t,QE(e))}function QE(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function xR(t){let e=[];for(let n=0;n<t.length;n++){let r=Br(t[n]);if(Array.isArray(r)){if(r.length===0)throw new z(900,!1);let i,o=Je.Default;for(let s=0;s<r.length;s++){let u=r[s],c=Cce(u);typeof c=="number"?c===-1?i=u.token:o|=c:i=u}e.push(M(i,o))}else e.push(M(r))}return e}function cz(t,e){return t[AR]=e,t.prototype[AR]=e,t}function Cce(t){return t[AR]}function Sce(t,e,n,r){let i=t[DE];throw e[v$]&&i.unshift(e[v$]),t.message=Dce(`
`+t.message,i,n,r),t[wce]=i,t[DE]=null,t}function Dce(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Ice?t.slice(2):t;let i=Tr(e);if(Array.isArray(e))i=e.map(Tr).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let u=e[s];o.push(s+":"+(typeof u=="string"?JSON.stringify(u):Tr(u)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Ece,`
  `)}`}function Fm(t){return{toString:t}.toString()}var lz=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(lz||{}),ms=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ms||{}),Kd={},fi=[];function hz(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function NR(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],u=n[r++];t.setAttribute(e,s,u,o)}else{let o=i,s=n[++r];Ace(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function dz(t){return t===3||t===4||t===6}function Ace(t){return t.charCodeAt(0)===64}function Am(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?_$(t,n,i,null,e[++r]):_$(t,n,i,null,null))}}return t}function _$(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let u=t[o++];if(typeof u=="number"){if(u===e){s=-1;break}else if(u>e){s=o-1;break}}}for(;o<t.length;){let u=t[o];if(typeof u=="number")break;if(u===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var fz="ng-template";function xce(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&hz(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function pz(t){return t.type===4&&t.value!==fz}function Nce(t,e,n){let r=t.type===4&&!n?fz:t.value;return e===r}function Rce(t,e,n){let r=4,i=t.attrs||[],o=kce(i),s=!1;for(let u=0;u<e.length;u++){let c=e[u];if(typeof c=="number"){if(!s&&!Do(r)&&!Do(c))return!1;if(s&&Do(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Nce(t,c,n)||c===""&&e.length===1){if(Do(r))return!1;s=!0}}else{let h=r&8?c:e[++u];if(r&8&&t.attrs!==null){if(!xce(t.attrs,h,n)){if(Do(r))return!1;s=!0}continue}let f=r&8?"class":c,p=Mce(f,i,pz(t),n);if(p===-1){if(Do(r))return!1;s=!0;continue}if(h!==""){let m;p>o?m="":m=i[p+1].toLowerCase();let v=r&8?m:null;if(v&&hz(v,h,0)!==-1||r&2&&h!==m){if(Do(r))return!1;s=!0}}}}return Do(r)||s}function Do(t){return(t&1)===0}function Mce(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let u=e[++i];for(;typeof u=="string";)u=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Oce(e,t)}function Pce(t,e,n=!1){for(let r=0;r<e.length;r++)if(Rce(t,e[r],n))return!0;return!1}function kce(t){for(let e=0;e<t.length;e++){let n=t[e];if(dz(n))return e}return t.length}function Oce(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function w$(t,e){return t?":not("+e.trim()+")":e}function Fce(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let u=t[++n];i+="["+s+(u.length>0?'="'+u+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Do(s)&&(e+=w$(o,i),i=""),r=s,o=o||!Do(r);n++}return i!==""&&(e+=w$(o,i)),e}function Lce(t){return t.map(Fce).join(",")}function Vce(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Do(i))break;i=o}r++}return{attrs:e,classes:n}}function Cr(t){return Fm(()=>{var i;let e=_z(t),n=Xe(X({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===lz.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:(i=t.signals)!=null?i:!1,data:t.data||{},encapsulation:t.encapsulation||ms.Emulated,styles:t.styles||fi,_:null,schemas:t.schemas||null,tView:null,id:""});wz(n);let r=t.dependencies;return n.directiveDefs=I$(r,!1),n.pipeDefs=I$(r,!0),n.id=Bce(n),n})}function Uce(t){return vu(t)||gz(t)}function jce(t){return t!==null}function ct(t){return Fm(()=>({type:t.type,bootstrap:t.bootstrap||fi,declarations:t.declarations||fi,imports:t.imports||fi,exports:t.exports||fi,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function E$(t,e){if(t==null)return Kd;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}function Nn(t){return Fm(()=>{let e=_z(t);return wz(e),e})}function Lm(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function vu(t){return t[cce]||null}function gz(t){return t[lce]||null}function mz(t){return t[hce]||null}function yz(t){let e=vu(t)||gz(t)||mz(t);return e!==null?e.standalone:!1}function vz(t,e){let n=t[dce]||null;if(!n&&e===!0)throw new Error(`Type ${Tr(t)} does not have '\u0275mod' property.`);return n}function _z(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Kd,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||fi,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:E$(t.inputs,e),outputs:E$(t.outputs),debugInfo:null}}function wz(t){var e;(e=t.features)==null||e.forEach(n=>n(t))}function I$(t,e){if(!t)return null;let n=e?mz:Uce;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(jce)}function Bce(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var ws=0,Ge=1,Ae=2,xn=3,xo=4,Po=5,AE=6,xm=7,No=8,Qd=9,ya=10,ln=11,Nm=12,b$=13,rf=14,ys=15,Vm=16,qd=17,gs=18,YE=19,Ez=20,mu=21,dR=22,al=23,Ro=25,PM=1;var ul=7,xE=8,Yd=9,Si=10,Xd=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t[t.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",t}(Xd||{});function yu(t){return Array.isArray(t)&&typeof t[PM]=="object"}function Mo(t){return Array.isArray(t)&&t[PM]===!0}function kM(t){return(t.flags&4)!==0}function XE(t){return t.componentOffset>-1}function JE(t){return(t.flags&1)===1}function va(t){return!!t.template}function qce(t){return(t[Ae]&512)!==0}function cl(t,e){let n=t.hasOwnProperty(SE);return n?t[SE]:null}var RR=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ia(){return Iz}function Iz(t){return t.type.prototype.ngOnChanges&&(t.setInput=$ce),Hce}Ia.ngInherit=!0;function Hce(){let t=Tz(this),e=t==null?void 0:t.current;if(e){let n=t.previous;if(n===Kd)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function $ce(t,e,n,r){let i=this.declaredInputs[n],o=Tz(t)||zce(t,{previous:Kd,current:null}),s=o.current||(o.current={}),u=o.previous,c=u[i];s[i]=new RR(c&&c.currentValue,e,u===Kd),t[r]=e}var bz="__ngSimpleChanges__";function Tz(t){return t[bz]||null}function zce(t,e){return t[bz]=e}var T$=null;var fs=function(t,e,n){T$!=null&&T$(t,e,n)},Gce="svg",Wce="math",Kce=!1;function Qce(){return Kce}function vs(t){for(;Array.isArray(t);)t=t[ws];return t}function Yce(t){for(;Array.isArray(t);){if(typeof t[PM]=="object")return t;t=t[ws]}return null}function Cz(t,e){return vs(e[t])}function to(t,e){return vs(e[t.index])}function Sz(t,e){return t.data[e]}function Xce(t,e){return t[e]}function Iu(t,e){let n=e[t];return yu(n)?n:n[ws]}function Jce(t){return(t[Ae]&4)===4}function OM(t){return(t[Ae]&128)===128}function Zce(t){return Mo(t[xn])}function Jd(t,e){return e==null?null:t[e]}function Dz(t){t[qd]=0}function ele(t){t[Ae]&1024||(t[Ae]|=1024,OM(t)&&Rm(t))}function tle(t,e){for(;t>0;)e=e[rf],t--;return e}function Az(t){var e;return t[Ae]&9216||((e=t[al])==null?void 0:e.dirty)}function MR(t){var e;Az(t)?Rm(t):t[Ae]&64&&(Qce()?(t[Ae]|=1024,Rm(t)):(e=t[ya].changeDetectionScheduler)==null||e.notify())}function Rm(t){var n;(n=t[ya].changeDetectionScheduler)==null||n.notify();let e=t[xn];for(;e!==null&&!(Mo(e)&&e[Ae]&Xd.HasChildViewsToRefresh||yu(e)&&e[Ae]&8192);){if(Mo(e))e[Ae]|=Xd.HasChildViewsToRefresh;else if(e[Ae]|=8192,!OM(e))break;e=e[xn]}}function xz(t,e){if((t[Ae]&256)===256)throw new z(911,!1);t[mu]===null&&(t[mu]=[]),t[mu].push(e)}function nle(t,e){if(t[mu]===null)return;let n=t[mu].indexOf(e);n!==-1&&t[mu].splice(n,1)}var Ze={lFrame:Uz(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function rle(){return Ze.lFrame.elementDepthCount}function ile(){Ze.lFrame.elementDepthCount++}function ole(){Ze.lFrame.elementDepthCount--}function Nz(){return Ze.bindingsEnabled}function sle(){return Ze.skipHydrationRootTNode!==null}function ale(t){return Ze.skipHydrationRootTNode===t}function ule(){Ze.skipHydrationRootTNode=null}function ft(){return Ze.lFrame.lView}function zn(){return Ze.lFrame.tView}function pi(t){return Ze.lFrame.contextLView=t,t[No]}function gi(t){return Ze.lFrame.contextLView=null,t}function mi(){let t=Rz();for(;t!==null&&t.type===64;)t=t.parent;return t}function Rz(){return Ze.lFrame.currentTNode}function cle(){let t=Ze.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function yl(t,e){let n=Ze.lFrame;n.currentTNode=t,n.isParent=e}function FM(){return Ze.lFrame.isParent}function Mz(){Ze.lFrame.isParent=!1}function Pz(){let t=Ze.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function lle(t){return Ze.lFrame.bindingIndex=t}function ZE(){return Ze.lFrame.bindingIndex++}function kz(t){let e=Ze.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function hle(){return Ze.lFrame.inI18n}function dle(t,e){let n=Ze.lFrame;n.bindingIndex=n.bindingRootIndex=t,PR(e)}function fle(){return Ze.lFrame.currentDirectiveIndex}function PR(t){Ze.lFrame.currentDirectiveIndex=t}function Oz(t){let e=Ze.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Fz(){return Ze.lFrame.currentQueryIndex}function LM(t){Ze.lFrame.currentQueryIndex=t}function ple(t){let e=t[Ge];return e.type===2?e.declTNode:e.type===1?t[Po]:null}function Lz(t,e,n){if(n&Je.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&Je.Host);)if(i=ple(o),i===null||(o=o[rf],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Ze.lFrame=Vz();return r.currentTNode=e,r.lView=t,!0}function VM(t){let e=Vz(),n=t[Ge];Ze.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Vz(){let t=Ze.lFrame,e=t===null?null:t.child;return e===null?Uz(t):e}function Uz(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function jz(){let t=Ze.lFrame;return Ze.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Bz=jz;function UM(){let t=jz();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function gle(t){return(Ze.lFrame.contextLView=tle(t,Ze.lFrame.contextLView))[No]}function vl(){return Ze.lFrame.selectedIndex}function ll(t){Ze.lFrame.selectedIndex=t}function eI(){let t=Ze.lFrame;return Sz(t.tView,t.selectedIndex)}function mle(){return Ze.lFrame.currentNamespace}var qz=!0;function tI(){return qz}function nI(t){qz=t}function yle(t,e,n){var s,u,c,h,f;let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let p=Iz(e);((s=n.preOrderHooks)!=null?s:n.preOrderHooks=[]).push(t,p),((u=n.preOrderCheckHooks)!=null?u:n.preOrderCheckHooks=[]).push(t,p)}i&&((c=n.preOrderHooks)!=null?c:n.preOrderHooks=[]).push(0-t,i),o&&(((h=n.preOrderHooks)!=null?h:n.preOrderHooks=[]).push(t,o),((f=n.preOrderCheckHooks)!=null?f:n.preOrderCheckHooks=[]).push(t,o))}function rI(t,e){var n,r,i,o,s,u,c;for(let h=e.directiveStart,f=e.directiveEnd;h<f;h++){let m=t.data[h].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:_,ngAfterViewInit:E,ngAfterViewChecked:b,ngOnDestroy:T}=m;v&&((n=t.contentHooks)!=null?n:t.contentHooks=[]).push(-h,v),_&&(((r=t.contentHooks)!=null?r:t.contentHooks=[]).push(h,_),((i=t.contentCheckHooks)!=null?i:t.contentCheckHooks=[]).push(h,_)),E&&((o=t.viewHooks)!=null?o:t.viewHooks=[]).push(-h,E),b&&(((s=t.viewHooks)!=null?s:t.viewHooks=[]).push(h,b),((u=t.viewCheckHooks)!=null?u:t.viewCheckHooks=[]).push(h,b)),T!=null&&((c=t.destroyHooks)!=null?c:t.destroyHooks=[]).push(h,T)}}function wE(t,e,n){Hz(t,e,3,n)}function EE(t,e,n,r){(t[Ae]&3)===n&&Hz(t,e,n,r)}function fR(t,e){let n=t[Ae];(n&3)===e&&(n&=16383,n+=1,t[Ae]=n)}function Hz(t,e,n,r){let i=r!==void 0?t[qd]&65535:0,o=r!=null?r:-1,s=e.length-1,u=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(u=e[c],r!=null&&u>=r)break}else e[c]<0&&(t[qd]+=65536),(u<o||o==-1)&&(vle(t,n,e,c),t[qd]=(t[qd]&4294901760)+c+2),c++}function C$(t,e){fs(4,t,e);let n=Ti(null);try{e.call(t)}finally{Ti(n),fs(5,t,e)}}function vle(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],u=t[s];i?t[Ae]>>14<t[qd]>>16&&(t[Ae]&3)===e&&(t[Ae]+=16384,C$(u,o)):C$(u,o)}var Wd=-1,hl=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function _le(t){return t instanceof hl}function wle(t){return(t.flags&8)!==0}function Ele(t){return(t.flags&16)!==0}function $z(t){return t!==Wd}function NE(t){let e=t&32767;return t&32767}function Ile(t){return t>>16}function RE(t,e){let n=Ile(t),r=e;for(;n>0;)r=r[rf],n--;return r}var kR=!0;function ME(t){let e=kR;return kR=t,e}var ble=256,zz=ble-1,Gz=5,Tle=0,ps={};function Cle(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Cm)&&(r=n[Cm]),r==null&&(r=n[Cm]=Tle++);let i=r&zz,o=1<<i;e.data[t+(i>>Gz)]|=o}function PE(t,e){let n=Wz(t,e);if(n!==-1)return n;let r=e[Ge];r.firstCreatePass&&(t.injectorIndex=e.length,pR(r.data,t),pR(e,null),pR(r.blueprint,null));let i=jM(t,e),o=t.injectorIndex;if($z(i)){let s=NE(i),u=RE(i,e),c=u[Ge].data;for(let h=0;h<8;h++)e[o+h]=u[s+h]|c[s+h]}return e[o+8]=i,o}function pR(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Wz(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function jM(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Jz(i),r===null)return Wd;if(n++,i=i[rf],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Wd}function OR(t,e,n){Cle(t,e,n)}function Sle(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(dz(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function Kz(t,e,n){if(n&Je.Optional||t!==void 0)return t;MM(e,"NodeInjector")}function Qz(t,e,n,r){if(n&Je.Optional&&r===void 0&&(r=null),!(n&(Je.Self|Je.Host))){let i=t[Qd],o=di(void 0);try{return i?i.get(e,r,n&Je.Optional):uz(e,r,n&Je.Optional)}finally{di(o)}}return Kz(r,e,n)}function Yz(t,e,n,r=Je.Default,i){if(t!==null){if(e[Ae]&2048&&!(r&Je.Self)){let s=Nle(t,e,n,r,ps);if(s!==ps)return s}let o=Xz(t,e,n,r,ps);if(o!==ps)return o}return Qz(e,n,r,i)}function Xz(t,e,n,r,i){let o=Ale(n);if(typeof o=="function"){if(!Lz(e,t,r))return r&Je.Host?Kz(i,n,r):Qz(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&Je.Optional))MM(n);else return s}finally{Bz()}}else if(typeof o=="number"){let s=null,u=Wz(t,e),c=Wd,h=r&Je.Host?e[ys][Po]:null;for((u===-1||r&Je.SkipSelf)&&(c=u===-1?jM(t,e):e[u+8],c===Wd||!D$(r,!1)?u=-1:(s=e[Ge],u=NE(c),e=RE(c,e)));u!==-1;){let f=e[Ge];if(S$(o,u,f.data)){let p=Dle(u,e,n,s,r,h);if(p!==ps)return p}c=e[u+8],c!==Wd&&D$(r,e[Ge].data[u+8]===h)&&S$(o,u,e)?(s=f,u=NE(c),e=RE(c,e)):u=-1}}return i}function Dle(t,e,n,r,i,o){let s=e[Ge],u=s.data[t+8],c=r==null?XE(u)&&kR:r!=s&&(u.type&3)!==0,h=i&Je.Host&&o===u,f=IE(u,s,n,c,h);return f!==null?dl(e,s,f,u):ps}function IE(t,e,n,r,i){let o=t.providerIndexes,s=e.data,u=o&1048575,c=t.directiveStart,h=t.directiveEnd,f=o>>20,p=r?u:u+f,m=i?u+f:h;for(let v=p;v<m;v++){let _=s[v];if(v<c&&n===_||v>=c&&_.type===n)return v}if(i){let v=s[c];if(v&&va(v)&&v.type===n)return c}return null}function dl(t,e,n,r){let i=t[n],o=e.data;if(_le(i)){let s=i;s.resolving&&pce(fce(o[n]));let u=ME(s.canSeeViewProviders);s.resolving=!0;let c,h=s.injectImpl?di(s.injectImpl):null,f=Lz(t,r,Je.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&yle(n,o[n],e)}finally{h!==null&&di(h),ME(u),s.resolving=!1,Bz()}}return i}function Ale(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Cm)?t[Cm]:void 0;return typeof e=="number"?e>=0?e&zz:xle:e}function S$(t,e,n){let r=1<<t;return!!(n[e+(t>>Gz)]&r)}function D$(t,e){return!(t&Je.Self)&&!(t&Je.Host&&e)}var ol=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Yz(this._tNode,this._lView,e,QE(r),n)}};function xle(){return new ol(mi(),ft())}function _l(t){return Fm(()=>{let e=t.prototype.constructor,n=e[SE]||FR(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[SE]||FR(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function FR(t){return tz(t)?()=>{let e=FR(Br(t));return e&&e()}:cl(t)}function Nle(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Ae]&2048&&!(s[Ae]&512);){let u=Xz(o,s,n,r|Je.Self,ps);if(u!==ps)return u;let c=o.parent;if(!c){let h=s[Ez];if(h){let f=h.get(n,ps,r);if(f!==ps)return f}c=Jz(s),s=s[rf]}o=c}return i}function Jz(t){let e=t[Ge],n=e.type;return n===2?e.declTNode:n===1?t[Po]:null}function BM(t){return Sle(mi(),t)}var fE="__parameters__";function Rle(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Zz(t,e,n){return Fm(()=>{let r=Rle(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return u.annotation=s,u;function u(c,h,f){let p=c.hasOwnProperty(fE)?c[fE]:Object.defineProperty(c,fE,{value:[]})[fE];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Mle(t){let e=hr.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function Ple(t){return typeof t=="function"}function kle(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function Ole(t){return t.flat(Number.POSITIVE_INFINITY)}function qM(t,e){t.forEach(n=>Array.isArray(n)?qM(n,e):e(n))}function eG(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function kE(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Fle(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function Lle(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function HM(t,e,n){let r=Um(t,e);return r>=0?t[r|1]=n:(r=~r,Lle(t,r,e,n)),r}function gR(t,e){let n=Um(t,e);if(n>=0)return t[n|1]}function Um(t,e){return Vle(t,e,1)}function Vle(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var wl=cz(Zz("Optional"),8);var iI=cz(Zz("SkipSelf"),4);function Ule(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(Hle))}return o}return OE.forEach((i,o)=>{var h,f;let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(p=>{i.template=p}));let u=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=u,i.styleUrl&&((h=i.styleUrls)!=null&&h.length))throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if((f=i.styleUrls)!=null&&f.length){let p=i.styles.length,m=i.styleUrls;i.styleUrls.forEach((v,_)=>{u.push(""),s.push(r(v).then(E=>{u[p+_]=E,m.splice(m.indexOf(v),1),m.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(p=>{u.push(p),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>$le(o));e.push(c)}),Ble(),Promise.all(e).then(()=>{})}var OE=new Map,jle=new Set;function Ble(){let t=OE;return OE=new Map,t}function qle(){return OE.size===0}function Hle(t){return typeof t=="string"?t:t.text()}function $le(t){jle.delete(t)}var Zd=new J("ENVIRONMENT_INITIALIZER"),tG=new J("INJECTOR",-1),nG=new J("INJECTOR_DEF_TYPES"),FE=class{get(e,n=Dm){if(n===Dm){let r=new Error(`NullInjectorError: No provider for ${Tr(e)}!`);throw r.name="NullInjectorError",r}return n}};function of(t){return{\u0275providers:t}}function zle(...t){return{\u0275providers:rG(!0,t),\u0275fromNgModule:!0}}function rG(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return qM(e,s=>{let u=s;LR(u,o,[],r)&&(i||(i=[]),i.push(u))}),i!==void 0&&iG(i,o),n}function iG(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];$M(i,o=>{e(o,r)})}}function LR(t,e,n,r){if(t=Br(t),!t)return!1;let i=null,o=m$(t),s=!o&&vu(t);if(!o&&!s){let c=t.ngModule;if(o=m$(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let u=r.has(i);if(s){if(u)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let h of c)LR(h,e,n,r)}}else if(o){if(o.imports!=null&&!u){r.add(i);let h;try{qM(o.imports,f=>{LR(f,e,n,r)&&(h||(h=[]),h.push(f))})}finally{}h!==void 0&&iG(h,e)}if(!u){let h=cl(i)||(()=>new i);e({provide:i,useFactory:h,deps:fi},i),e({provide:nG,useValue:i,multi:!0},i),e({provide:Zd,useValue:()=>M(i),multi:!0},i)}let c=o.providers;if(c!=null&&!u){let h=t;$M(c,f=>{e(f,h)})}}else return!1;return i!==t&&t.providers!==void 0}function $M(t,e){for(let n of t)nz(n)&&(n=n.\u0275providers),Array.isArray(n)?$M(n,e):e(n)}var Gle=Pt({provide:String,useValue:Pt});function oG(t){return t!==null&&typeof t=="object"&&Gle in t}function Wle(t){return!!(t&&t.useExisting)}function Kle(t){return!!(t&&t.useFactory)}function ef(t){return typeof t=="function"}function Qle(t){return!!t.useClass}var oI=new J("Set Injector scope."),bE={},Yle={},mR;function zM(){return mR===void 0&&(mR=new FE),mR}var qr=class{},Mm=class extends qr{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,UR(e,s=>this.processProvider(s)),this.records.set(tG,Hd(void 0,this)),i.has("environment")&&this.records.set(qr,Hd(void 0,this));let o=this.records.get(oI);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(nG,fi,Je.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=gu(this),r=di(void 0),i;try{return e()}finally{gu(n),di(r)}}get(e,n=Dm,r=Je.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(p$))return e[p$](this);r=QE(r);let i,o=gu(this),s=di(void 0);try{if(!(r&Je.SkipSelf)){let c=this.records.get(e);if(c===void 0){let h=the(e)&&KE(e);h&&this.injectableDefInScope(h)?c=Hd(VR(e),bE):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let u=r&Je.Self?zM():this.parent;return n=r&Je.Optional&&n===Dm?null:n,u.get(e,n)}catch(u){if(u.name==="NullInjectorError"){if((u[DE]=u[DE]||[]).unshift(Tr(e)),o)throw u;return Sce(u,e,"R3InjectorError",this.source)}else throw u}finally{di(s),gu(o)}}resolveInjectorInitializers(){let e=gu(this),n=di(void 0),r;try{let i=this.get(Zd,fi,Je.Self);for(let o of i)o()}finally{gu(e),di(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Tr(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new z(205,!1)}processProvider(e){e=Br(e);let n=ef(e)?e:Br(e&&e.provide),r=Jle(e);if(!ef(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Hd(void 0,bE,!0),i.factory=()=>xR(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}else{let i=this.records.get(n)}this.records.set(n,r)}hydrate(e,n){return n.value===bE&&(n.value=Yle,n.value=n.factory()),typeof n.value=="object"&&n.value&&ehe(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Br(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function VR(t){let e=KE(t),n=e!==null?e.factory:cl(t);if(n!==null)return n;if(t instanceof J)throw new z(204,!1);if(t instanceof Function)return Xle(t);throw new z(204,!1)}function Xle(t){let e=t.length;if(e>0){let r=Fle(e,"?");throw new z(204,!1)}let n=yce(t);return n!==null?()=>n.factory(t):()=>new t}function Jle(t){if(oG(t))return Hd(void 0,t.useValue);{let e=sG(t);return Hd(e,bE)}}function sG(t,e,n){let r;if(ef(t)){let i=Br(t);return cl(i)||VR(i)}else if(oG(t))r=()=>Br(t.useValue);else if(Kle(t))r=()=>t.useFactory(...xR(t.deps||[]));else if(Wle(t))r=()=>M(Br(t.useExisting));else{let i=Br(t&&(t.useClass||t.provide));if(Zle(t))r=()=>new i(...xR(t.deps));else return cl(i)||VR(i)}return r}function Hd(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Zle(t){return!!t.deps}function ehe(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function the(t){return typeof t=="function"||typeof t=="object"&&t instanceof J}function UR(t,e){for(let n of t)Array.isArray(n)?UR(n,e):n&&nz(n)?UR(n.\u0275providers,e):e(n)}function Es(t,e){t instanceof Mm&&t.assertNotDestroyed();let n,r=gu(t),i=di(void 0);try{return e()}finally{gu(r),di(i)}}function nhe(t){if(!az()&&!bce())throw new z(-203,!1)}function A$(t,e=null,n=null,r){let i=aG(t,e,n,r);return i.resolveInjectorInitializers(),i}function aG(t,e=null,n=null,r,i=new Set){let o=[n||fi,zle(t)];return r=r||(typeof t=="object"?void 0:Tr(t)),new Mm(o,e||zM(),r||null,i)}var dr=(()=>{let e=class e{static create(r,i){var o;if(Array.isArray(r))return A$({name:""},i,r,"");{let s=(o=r.name)!=null?o:"";return A$({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Dm,e.NULL=new FE,e.\u0275prov=Y({token:e,providedIn:"any",factory:()=>M(tG)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var jR;function uG(t){jR=t}function cG(){if(jR!==void 0)return jR;if(typeof document<"u")return document;throw new z(210,!1)}var sI=new J("AppId",{providedIn:"root",factory:()=>rhe}),rhe="ng",GM=new J("Platform Initializer"),Gn=new J("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var WM=new J("AnimationModuleType"),KM=new J("CSP nonce",{providedIn:"root",factory:()=>{var t,e;return((e=(t=cG().body)==null?void 0:t.querySelector("[ngCspNonce]"))==null?void 0:e.getAttribute("ngCspNonce"))||null}});function lG(t){return t.ownerDocument.defaultView}function hG(t){return t instanceof Function?t():t}function ihe(t){return(t!=null?t:ee(dr)).get(Gn)==="browser"}function dG(t){return(t.flags&128)===128}var _a=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(_a||{}),ohe=/^>|^->|<!--|-->|--!>|<!-$/g,she=/(<|>)/g,ahe="\u200B$1\u200B";function uhe(t){return t.replace(ohe,e=>e.replace(she,ahe))}var fG=new Map,che=0;function lhe(){return che++}function hhe(t){fG.set(t[YE],t)}function dhe(t){fG.delete(t[YE])}var x$="__ngContext__";function _u(t,e){yu(e)?(t[x$]=e[YE],hhe(e)):t[x$]=e}var fhe;function QM(t,e){return fhe(t,e)}function YM(t){let e=t[xn];return Mo(e)?e[xn]:e}function pG(t){return mG(t[Nm])}function gG(t){return mG(t[xo])}function mG(t){for(;t!==null&&!Mo(t);)t=t[xo];return t}function $d(t,e,n,r,i){if(r!=null){let o,s=!1;Mo(r)?o=r:yu(r)&&(s=!0,r=r[ws]);let u=vs(r);t===0&&n!==null?i==null?wG(e,n,u):LE(e,n,u,i||null,!0):t===1&&n!==null?LE(e,n,u,i||null,!0):t===2?Mhe(e,u,s):t===3&&e.destroyNode(u),o!=null&&khe(e,t,o,n,i)}}function phe(t,e){return t.createText(e)}function ghe(t,e,n){t.setValue(e,n)}function mhe(t,e){return t.createComment(uhe(e))}function yG(t,e,n){return t.createElement(e,n)}function yhe(t,e){let n=e[ln];jm(t,e,n,2,null,null),e[ws]=null,e[Po]=null}function vhe(t,e,n,r,i,o){r[ws]=i,r[Po]=e,jm(t,r,n,1,i,o)}function _he(t,e){jm(t,e,e[ln],2,null,null)}function whe(t){let e=t[Nm];if(!e)return yR(t[Ge],t);for(;e;){let n=null;if(yu(e))n=e[Nm];else{let r=e[Si];r&&(n=r)}if(!n){for(;e&&!e[xo]&&e!==t;)yu(e)&&yR(e[Ge],e),e=e[xn];e===null&&(e=t),yu(e)&&yR(e[Ge],e),n=e&&e[xo]}e=n}}function Ehe(t,e,n,r){let i=Si+r,o=n.length;r>0&&(n[i-1][xo]=e),r<o-Si?(e[xo]=n[i],eG(n,Si+r,e)):(n.push(e),e[xo]=null),e[xn]=n;let s=e[Vm];s!==null&&n!==s&&Ihe(s,e);let u=e[gs];u!==null&&u.insertView(t),MR(e),e[Ae]|=128}function Ihe(t,e){let n=t[Yd],i=e[xn][xn][ys];e[ys]!==i&&(t[Ae]|=Xd.HasTransplantedViews),n===null?t[Yd]=[e]:n.push(e)}function vG(t,e){let n=t[Yd],r=n.indexOf(e),i=e[xn];n.splice(r,1)}function BR(t,e){if(t.length<=Si)return;let n=Si+e,r=t[n];if(r){let i=r[Vm];i!==null&&i!==t&&vG(i,r),e>0&&(t[n-1][xo]=r[xo]);let o=kE(t,Si+e);yhe(r[Ge],r);let s=o[gs];s!==null&&s.detachView(o[Ge]),r[xn]=null,r[xo]=null,r[Ae]&=-129}return r}function _G(t,e){if(!(e[Ae]&256)){let n=e[ln];n.destroyNode&&jm(t,e,n,3,null,null),whe(e)}}function yR(t,e){if(!(e[Ae]&256)){e[Ae]&=-129,e[Ae]|=256,e[al]&&GH(e[al]),The(t,e),bhe(t,e),e[Ge].type===1&&e[ln].destroy();let n=e[Vm];if(n!==null&&Mo(e[xn])){n!==e[xn]&&vG(n,e);let r=e[gs];r!==null&&r.detachView(t)}dhe(e)}}function bhe(t,e){let n=t.cleanup,r=e[xm];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[xm]=null);let i=e[mu];if(i!==null){e[mu]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function The(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof hl)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let u=i[o[s]],c=o[s+1];fs(4,u,c);try{c.call(u)}finally{fs(5,u,c)}}else{fs(4,i,o);try{o.call(i)}finally{fs(5,i,o)}}}}}function Che(t,e,n){return She(t,e.parent,n)}function She(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[ws];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===ms.None||o===ms.Emulated)return null}return to(r,n)}}function LE(t,e,n,r,i){t.insertBefore(e,n,r,i)}function wG(t,e,n){t.appendChild(e,n)}function N$(t,e,n,r,i){r!==null?LE(t,e,n,r,i):wG(t,e,n)}function Dhe(t,e,n,r){t.removeChild(e,n,r)}function XM(t,e){return t.parentNode(e)}function Ahe(t,e){return t.nextSibling(e)}function xhe(t,e,n){return Rhe(t,e,n)}function Nhe(t,e,n){return t.type&40?to(t,n):null}var Rhe=Nhe,R$;function aI(t,e,n,r){let i=Che(t,r,e),o=e[ln],s=r.parent||e[Po],u=xhe(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)N$(o,i,n[c],u,!1);else N$(o,i,n,u,!1);R$!==void 0&&R$(o,r,e,n,i)}function TE(t,e){if(e!==null){let n=e.type;if(n&3)return to(e,t);if(n&4)return qR(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return TE(t,r);{let i=t[e.index];return Mo(i)?qR(-1,i):vs(i)}}else{if(n&32)return QM(e,t)()||vs(t[e.index]);{let r=EG(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=YM(t[ys]);return TE(i,r)}else return TE(t,e.next)}}}return null}function EG(t,e){if(e!==null){let r=t[ys][Po],i=e.projection;return r.projection[i]}return null}function qR(t,e){let n=Si+t+1;if(n<e.length){let r=e[n],i=r[Ge].firstChild;if(i!==null)return TE(r,i)}return e[ul]}function Mhe(t,e,n){let r=XM(t,e);r&&Dhe(t,r,e,n)}function JM(t,e,n,r,i,o,s){for(;n!=null;){let u=r[n.index],c=n.type;if(s&&e===0&&(u&&_u(vs(u),r),n.flags|=2),(n.flags&32)!==32)if(c&8)JM(t,e,n.child,r,i,o,!1),$d(e,t,i,u,o);else if(c&32){let h=QM(n,r),f;for(;f=h();)$d(e,t,i,f,o);$d(e,t,i,u,o)}else c&16?Phe(t,e,r,n,i,o):$d(e,t,i,u,o);n=s?n.projectionNext:n.next}}function jm(t,e,n,r,i,o){JM(n,r,t.firstChild,e,i,o,!1)}function Phe(t,e,n,r,i,o){let s=n[ys],c=s[Po].projection[r.projection];if(Array.isArray(c))for(let h=0;h<c.length;h++){let f=c[h];$d(e,t,i,f,o)}else{let h=c,f=s[xn];dG(r)&&(h.flags|=128),JM(t,e,h,f,i,o,!0)}}function khe(t,e,n,r,i){let o=n[ul],s=vs(n);o!==s&&$d(e,t,r,o,i);for(let u=Si;u<n.length;u++){let c=n[u];jm(c[Ge],c,t,e,r,o)}}function Ohe(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:_a.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=_a.Important),t.setStyle(n,r,i,o))}}function Fhe(t,e,n){t.setAttribute(e,"style",n)}function IG(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function bG(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&NR(t,e,r),i!==null&&IG(t,e,i),o!==null&&Fhe(t,e,o)}var pE;function Lhe(){if(pE===void 0&&(pE=null,hr.trustedTypes))try{pE=hr.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return pE}function uI(t){var e;return((e=Lhe())==null?void 0:e.createHTML(t))||t}var gE;function TG(){if(gE===void 0&&(gE=null,hr.trustedTypes))try{gE=hr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return gE}function M$(t){var e;return((e=TG())==null?void 0:e.createHTML(t))||t}function P$(t){var e;return((e=TG())==null?void 0:e.createScriptURL(t))||t}var wa=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rz})`}},HR=class extends wa{getTypeName(){return"HTML"}},$R=class extends wa{getTypeName(){return"Style"}},zR=class extends wa{getTypeName(){return"Script"}},GR=class extends wa{getTypeName(){return"URL"}},WR=class extends wa{getTypeName(){return"ResourceURL"}};function no(t){return t instanceof wa?t.changingThisBreaksApplicationSecurity:t}function ba(t,e){let n=Vhe(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${rz})`)}return n===e}function Vhe(t){return t instanceof wa&&t.getTypeName()||null}function CG(t){return new HR(t)}function SG(t){return new $R(t)}function DG(t){return new zR(t)}function AG(t){return new GR(t)}function xG(t){return new WR(t)}function Uhe(t){let e=new QR(t);return jhe()?new KR(e):e}var KR=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(uI(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},QR=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=uI(e),n}};function jhe(){try{return!!new window.DOMParser().parseFromString(uI(""),"text/html")}catch{return!1}}var Bhe=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function cI(t){return t=String(t),t.match(Bhe)?t:"unsafe:"+t}function Ta(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Bm(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var NG=Ta("area,br,col,hr,img,wbr"),RG=Ta("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),MG=Ta("rp,rt"),qhe=Bm(MG,RG),Hhe=Bm(RG,Ta("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),$he=Bm(MG,Ta("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),k$=Bm(NG,Hhe,$he,qhe),PG=Ta("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zhe=Ta("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ghe=Ta("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Whe=Bm(PG,zhe,Ghe),Khe=Ta("script,style,template"),YR=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(e){let n=e.nodeName.toLowerCase();if(!k$.hasOwnProperty(n))return this.sanitizedSomething=!0,!Khe.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,u=s.toLowerCase();if(!Whe.hasOwnProperty(u)){this.sanitizedSomething=!0;continue}let c=o.value;PG[u]&&(c=cI(c)),this.buf.push(" ",s,'="',O$(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=e.nodeName.toLowerCase();k$.hasOwnProperty(n)&&!NG.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(O$(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}},Qhe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Yhe=/([^\#-~ |!])/g;function O$(t){return t.replace(/&/g,"&amp;").replace(Qhe,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(Yhe,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var mE;function ZM(t,e){let n=null;try{mE=mE||Uhe(t);let r=e?String(e):"";n=mE.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=mE.getInertBodyElement(r)}while(r!==o);let u=new YR().sanitizeChildren(F$(n)||n);return uI(u)}finally{if(n){let r=F$(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function F$(t){return"content"in t&&Xhe(t)?t.content:null}function Xhe(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Di=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Di||{});function eP(t){let e=tP();return e?M$(e.sanitize(Di.HTML,t)||""):ba(t,"HTML")?M$(no(t)):ZM(cG(),Om(t))}function qm(t){let e=tP();return e?e.sanitize(Di.URL,t)||"":ba(t,"URL")?no(t):cI(Om(t))}function Jhe(t){let e=tP();if(e)return P$(e.sanitize(Di.RESOURCE_URL,t)||"");if(ba(t,"ResourceURL"))return P$(no(t));throw new z(904,!1)}function Zhe(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?Jhe:qm}function kG(t,e,n){return Zhe(e,n)(t)}function tP(){let t=ft();return t&&t[ya].sanitizer}var XR=class{};var ede="h",tde="b";var nde=(t,e,n)=>null;function nP(t,e,n=!1){return nde(t,e,n)}var JR=class{},VE=class{};function rde(t){let e=Error(`No component factory found for ${Tr(t)}.`);return e[ide]=t,e}var ide="ngComponent";var ZR=class{resolveComponentFactory(e){throw rde(e)}},sf=(()=>{let e=class e{};e.NULL=new ZR;let t=e;return t})();function ode(){return af(mi(),ft())}function af(t,e){return new Ai(to(t,e))}var Ai=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=ode;let t=e;return t})();function sde(t){return t instanceof Ai?t.nativeElement:t}var fl=class{},bu=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>ade();let t=e;return t})();function ade(){let t=ft(),e=mi(),n=Iu(e.index,t);return(yu(n)?n:t)[ln]}var ude=(()=>{let e=class e{};e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),vR={};function OG(t){return rP(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function cde(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function rP(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var eM=class{constructor(){}supports(e){return OG(e)}create(e){return new tM(e)}},lde=(t,e)=>e,tM=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||lde}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<L$(r,i,o)?n:r,u=L$(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let h=u-i,f=c-i;if(h!=f){for(let m=0;m<h;m++){let v=m<o.length?o[m]:o[m]=0,_=v+m;f<=_&&_<h&&(o[m]=v+1)}let p=s.previousIndex;o[p]=f-h}}u!==c&&e(s,u,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!OG(e))throw new z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let u=0;u<this.length;u++)o=e[u],s=this._trackByFn(u,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,u),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,u)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,cde(e,u=>{s=this._trackByFn(i,u),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,u,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,u,s,i)),Object.is(n.item,u)||this._addIdentityChange(n,u)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new nM(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new UE),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new UE),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},nM=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},rM=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},UE=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new rM,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function L$(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var iM=class{constructor(){}supports(e){return e instanceof Map||rP(e)}create(){return new oM}},oM=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||rP(e)))throw new z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new sM(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},sM=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function V$(){return new lI([new eM])}var lI=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||V$()),deps:[[e,new iI,new wl]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new z(901,!1)}};e.\u0275prov=Y({token:e,providedIn:"root",factory:V$});let t=e;return t})();function U$(){return new hI([new iM])}var hI=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||U$()),deps:[[e,new iI,new wl]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i)return i;throw new z(901,!1)}};e.\u0275prov=Y({token:e,providedIn:"root",factory:U$});let t=e;return t})();function jE(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(vs(o)),Mo(o)&&hde(o,r);let s=n.type;if(s&8)jE(t,e,n.child,r);else if(s&32){let u=QM(n,e),c;for(;c=u();)r.push(c)}else if(s&16){let u=EG(e,n);if(Array.isArray(u))r.push(...u);else{let c=YM(e[ys]);jE(c[Ge],c,u,r,!0)}}n=i?n.projectionNext:n.next}return r}function hde(t,e){for(let n=Si;n<t.length;n++){let r=t[n],i=r[Ge].firstChild;i!==null&&jE(r[Ge],r,i,e)}t[ul]!==t[ws]&&e.push(t[ul])}var FG=[];function dde(t){var e;return(e=t[al])!=null?e:fde(t)}function fde(t){var n;let e=(n=FG.pop())!=null?n:Object.create(gde);return e.lView=t,e}function pde(t){t.lView[al]!==t&&(t.lView=null,FG.push(t))}var gde=Xe(X({},HH),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Rm(t.lView)},consumerOnSignalRead(){this.lView[al]=this}}),mde="ngOriginalError";function _R(t){return t[mde]}var _s=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&_R(e);for(;n&&_R(n);)n=_R(n);return n||null}},LG=new J("",{providedIn:"root",factory:()=>ee(_s).handleError.bind(void 0)});var VG=!1,yde=new J("",{providedIn:"root",factory:()=>VG});var Is={};function ae(t){UG(zn(),ft(),vl()+t,!1)}function UG(t,e,n,r){if(!r)if((e[Ae]&3)===3){let o=t.preOrderCheckHooks;o!==null&&wE(e,o,n)}else{let o=t.preOrderHooks;o!==null&&EE(e,o,0,n)}ll(n)}function ye(t,e=Je.Default){let n=ft();if(n===null)return M(t,e);let r=mi();return Yz(r,n,Br(t),e)}function jG(){let t="invalid";throw new Error(t)}function vde(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ll(~i);else{let o=i,s=n[++r],u=n[++r];dle(s,o);let c=e[o];u(2,c)}}}finally{ll(-1)}}function dI(t,e,n,r,i,o,s,u,c,h,f){let p=e.blueprint.slice();return p[ws]=i,p[Ae]=r|4|128|8|64,(h!==null||t&&t[Ae]&2048)&&(p[Ae]|=2048),Dz(p),p[xn]=p[rf]=t,p[No]=n,p[ya]=s||t&&t[ya],p[ln]=u||t&&t[ln],p[Qd]=c||t&&t[Qd]||null,p[Po]=o,p[YE]=lhe(),p[AE]=f,p[Ez]=h,p[ys]=e.type==2?t[ys]:p,p}function Hm(t,e,n,r,i){let o=t.data[e];if(o===null)o=_de(t,e,n,r,i),hle()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=cle();o.injectorIndex=s===null?-1:s.injectorIndex}return yl(o,!0),o}function _de(t,e,n,r,i){let o=Rz(),s=FM(),u=s?o:o&&o.parent,c=t.data[e]=Cde(t,u,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function BG(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function qG(t,e,n,r,i){let o=vl(),s=r&2;try{ll(-1),s&&e.length>Ro&&UG(t,e,Ro,!1),fs(s?2:0,i),n(r,i)}finally{ll(o),fs(s?3:1,i)}}function iP(t,e,n){if(kM(e)){let r=Ti(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let u=t.data[s];u.contentQueries&&u.contentQueries(1,n[s],s)}}finally{Ti(r)}}}function oP(t,e,n){Nz()&&(Rde(t,e,n,to(n,e)),(n.flags&64)===64&&zG(t,e,n))}function sP(t,e,n=to){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],u=s===-1?n(e,t):t[s];t[i++]=u}}}function HG(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=aP(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function aP(t,e,n,r,i,o,s,u,c,h,f){let p=Ro+r,m=p+i,v=wde(p,m),_=typeof h=="function"?h():h;return v[Ge]={type:t,blueprint:v,template:n,queries:null,viewQuery:u,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:f}}function wde(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Is);return n}function Ede(t,e,n,r){let o=r.get(yde,VG)||n===ms.ShadowDom,s=t.selectRootElement(e,o);return Ide(s),s}function Ide(t){bde(t)}var bde=t=>null;function Tde(t,e,n,r){let i=QG(e);i.push(n),t.firstCreatePass&&YG(t).push(r,i.length-1)}function Cde(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,u=0;return sle()&&(u|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:u,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function j$(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=n===null?{}:n;let o=t[i];r===null?B$(n,e,i,o):r.hasOwnProperty(i)&&B$(n,e,r[i],o)}return n}function B$(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function Sde(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,u=[],c=null,h=null;for(let f=r;f<i;f++){let p=o[f],m=n?n.get(p):null,v=m?m.inputs:null,_=m?m.outputs:null;c=j$(p.inputs,f,c,v),h=j$(p.outputs,f,h,_);let E=c!==null&&s!==null&&!pz(e)?qde(c,f,s):null;u.push(E)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=u,e.inputs=c,e.outputs=h}function Dde(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function uP(t,e,n,r,i,o,s,u){let c=to(e,n),h=e.inputs,f;!u&&h!=null&&(f=h[r])?(lP(t,n,f,r,i),XE(e)&&Ade(n,e.index)):e.type&3?(r=Dde(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function Ade(t,e){let n=Iu(e,t);n[Ae]&16||(n[Ae]|=64)}function cP(t,e,n,r){if(Nz()){let i=r===null?null:{"":-1},o=Pde(t,n),s,u;o===null?s=u=null:[s,u]=o,s!==null&&$G(t,e,n,s,i,u),i&&kde(n,r,i)}n.mergedAttrs=Am(n.mergedAttrs,n.attrs)}function $G(t,e,n,r,i,o){var h,f;for(let p=0;p<r.length;p++)OR(PE(n,e),t,r[p].type);Fde(n,t.data.length,r.length);for(let p=0;p<r.length;p++){let m=r[p];m.providersResolver&&m.providersResolver(m)}let s=!1,u=!1,c=BG(t,e,r.length,null);for(let p=0;p<r.length;p++){let m=r[p];n.mergedAttrs=Am(n.mergedAttrs,m.hostAttrs),Lde(t,n,e,c,m),Ode(c,m,i),m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let v=m.type.prototype;!s&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&(((h=t.preOrderHooks)!=null?h:t.preOrderHooks=[]).push(n.index),s=!0),!u&&(v.ngOnChanges||v.ngDoCheck)&&(((f=t.preOrderCheckHooks)!=null?f:t.preOrderCheckHooks=[]).push(n.index),u=!0),c++}Sde(t,n,o)}function xde(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let u=~e.index;Nde(s)!=u&&s.push(u),s.push(n,r,o)}}function Nde(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Rde(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;XE(n)&&Vde(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||PE(n,e),_u(r,e);let s=n.initialInputs;for(let u=i;u<o;u++){let c=t.data[u],h=dl(e,t,u,n);if(_u(h,e),s!==null&&Bde(e,u-i,h,c,n,s),va(c)){let f=Iu(n.index,e);f[No]=dl(e,t,u,n)}}}function zG(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=fle();try{ll(o);for(let u=r;u<i;u++){let c=t.data[u],h=e[u];PR(u),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Mde(c,h)}}finally{ll(-1),PR(s)}}function Mde(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Pde(t,e){var o;let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let u=n[s];if(Pce(e,u.selectors,!1))if(r||(r=[]),va(u))if(u.findHostDirectiveDefs!==null){let c=[];i=i||new Map,u.findHostDirectiveDefs(u,c,i),r.unshift(...c,u);let h=c.length;aM(t,e,h)}else r.unshift(u),aM(t,e,0);else i=i||new Map,(o=u.findHostDirectiveDefs)==null||o.call(u,u,r,i),r.push(u)}return r===null?null:[r,i]}function aM(t,e,n){var r;e.componentOffset=n,((r=t.components)!=null?r:t.components=[]).push(e.index)}function kde(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new z(-301,!1);r.push(e[i],o)}}}function Ode(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;va(e)&&(n[""]=t)}}function Fde(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Lde(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=cl(i.type,!0)),s=new hl(o,va(i),ye);t.blueprint[r]=s,n[r]=s,xde(t,e,r,BG(t,n,i.hostVars,Is),i)}function Vde(t,e,n){let r=to(e,t),i=HG(n),o=t[ya].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let u=fI(t,dI(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=u}function Ude(t,e,n,r,i,o){let s=to(t,e);jde(e[ln],s,o,t.value,n,r,i)}function jde(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let u=s==null?Om(o):s(o,r||"",i);t.setAttribute(e,i,u,n)}}function Bde(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let u=0;u<s.length;){let c=s[u++],h=s[u++],f=s[u++];GG(r,n,c,h,f)}}function GG(t,e,n,r,i){let o=Ti(null);try{let s=t.inputTransforms;s!==null&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),t.setInput!==null?t.setInput(e,i,n,r):e[r]=i}finally{Ti(o)}}function qde(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let u=0;u<s.length;u+=2)if(s[u]===e){r.push(o,s[u+1],n[i+1]);break}}i+=2}return r}function WG(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function KG(t,e){let n=t.contentQueries;if(n!==null){let r=Ti(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let u=t.data[s];LM(o),u.contentQueries(2,e[s],s)}}}finally{Ti(r)}}}function fI(t,e){return t[Nm]?t[b$][xo]=e:t[Nm]=e,t[b$]=e,e}function uM(t,e,n){LM(0);let r=Ti(null);try{e(t,n)}finally{Ti(r)}}function QG(t){return t[xm]||(t[xm]=[])}function YG(t){return t.cleanup||(t.cleanup=[])}function Hde(t,e,n){return(t===null||va(t))&&(n=Yce(n[e.index])),n[ln]}function XG(t,e){let n=t[Qd],r=n?n.get(_s,null):null;r&&r.handleError(e)}function lP(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],u=n[o++],c=e[s],h=t.data[s];GG(h,c,r,u,i)}}function $de(t,e,n){let r=Cz(e,t);ghe(t[ln],r,n)}var zde=100;function Gde(t,e=!0){var s,u,c;let n=t[ya],r=n.rendererFactory,i=n.afterRenderEventManager,o=!1;o||((s=r.begin)==null||s.call(r),i==null||i.begin());try{Wde(t)}catch(h){throw e&&XG(t,h),h}finally{o||((u=r.end)==null||u.call(r),(c=n.inlineEffectRunner)==null||c.flush(),i==null||i.end())}}function Wde(t){cM(t,0);let e=0;for(;Az(t);){if(e===zde)throw new z(103,!1);e++,cM(t,1)}}function Kde(t,e,n,r){var c;let i=e[Ae];if((i&256)===256)return;let o=!1;!o&&((c=e[ya].inlineEffectRunner)==null||c.flush()),VM(e);let s=null,u=null;!o&&Qde(t)&&(u=dde(e),s=$H(u));try{Dz(e),lle(t.bindingStartIndex),n!==null&&qG(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let m=t.preOrderCheckHooks;m!==null&&wE(e,m,null)}else{let m=t.preOrderHooks;m!==null&&EE(e,m,0,null),fR(e,0)}if(Yde(e),JG(e,0),t.contentQueries!==null&&KG(t,e),!o)if(h){let m=t.contentCheckHooks;m!==null&&wE(e,m)}else{let m=t.contentHooks;m!==null&&EE(e,m,1),fR(e,1)}vde(t,e);let f=t.components;f!==null&&eW(e,f,0);let p=t.viewQuery;if(p!==null&&uM(2,p,r),!o)if(h){let m=t.viewCheckHooks;m!==null&&wE(e,m)}else{let m=t.viewHooks;m!==null&&EE(e,m,2),fR(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[dR]){for(let m of e[dR])m();e[dR]=null}o||(e[Ae]&=-73)}catch(h){throw Rm(e),h}finally{u!==null&&(zH(u,s),pde(u)),UM()}}function Qde(t){return t.type!==2}function JG(t,e){for(let n=pG(t);n!==null;n=gG(n)){n[Ae]&=~Xd.HasChildViewsToRefresh;for(let r=Si;r<n.length;r++){let i=n[r];ZG(i,e)}}}function Yde(t){for(let e=pG(t);e!==null;e=gG(e)){if(!(e[Ae]&Xd.HasTransplantedViews))continue;let n=e[Yd];for(let r=0;r<n.length;r++){let i=n[r],o=i[xn];ele(i)}}}function Xde(t,e,n){let r=Iu(e,t);ZG(r,n)}function ZG(t,e){OM(t)&&cM(t,e)}function cM(t,e){let r=t[Ge],i=t[Ae],o=t[al],s=!!(e===0&&i&16);if(s||(s=!!(i&64&&e===0)),s||(s=!!(i&1024)),s||(s=!!(o!=null&&o.dirty&&HN(o))),o&&(o.dirty=!1),t[Ae]&=-9217,s)Kde(r,t,r.template,t[No]);else if(i&8192){JG(t,1);let u=r.components;u!==null&&eW(t,u,1)}}function eW(t,e,n){for(let r=0;r<e.length;r++)Xde(t,e[r],n)}function hP(t){var e;for((e=t[ya].changeDetectionScheduler)==null||e.notify();t;){t[Ae]|=64;let n=YM(t);if(qce(t)&&!n)return t;t=n}return null}var pl=class{get rootNodes(){let e=this._lView,n=e[Ge];return jE(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[No]}set context(e){this._lView[No]=e}get destroyed(){return(this._lView[Ae]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[xn];if(Mo(e)){let n=e[xE],r=n?n.indexOf(this):-1;r>-1&&(BR(e,r),kE(n,r))}this._attachedToViewContainer=!1}_G(this._lView[Ge],this._lView)}onDestroy(e){xz(this._lView,e)}markForCheck(){hP(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ae]&=-129}reattach(){MR(this._lView),this._lView[Ae]|=128}detectChanges(){this._lView[Ae]|=1024,Gde(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,_he(this._lView[Ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e,MR(this._lView)}},uf=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Jde;let t=e;return t})();function Jde(t){return Zde(mi(),ft(),(t&16)===16)}function Zde(t,e,n){if(XE(t)&&!n){let r=Iu(t.index,e);return new pl(r,r)}else if(t.type&47){let r=e[ys];return new pl(r,e)}return null}var tW=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=efe,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),lM=class extends tW{constructor(e){super(),this._lView=e}onDestroy(e){return xz(this._lView,e),()=>nle(this._lView,e)}};function efe(){return new lM(ft())}var q$=new Set;function pI(t){var e;q$.has(t)||(q$.add(t),(e=performance==null?void 0:performance.mark)==null||e.call(performance,"mark_feature_usage",{detail:{feature:t}}))}var hM=class extends Nt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){var c,h,f;let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let p=e;i=(c=p.next)==null?void 0:c.bind(p),o=(h=p.error)==null?void 0:h.bind(p),s=(f=p.complete)==null?void 0:f.bind(p)}this.__isAsync&&(o=wR(o),i&&(i=wR(i)),s&&(s=wR(s)));let u=super.subscribe({next:i,error:o,complete:s});return e instanceof vn&&e.add(u),u}};function wR(t){return e=>{setTimeout(t,void 0,e)}}var wn=hM;function H$(...t){}function tfe(){let t=typeof hr.requestAnimationFrame=="function",e=hr[t?"requestAnimationFrame":"setTimeout"],n=hr[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ke=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wn(!1),this.onMicrotaskEmpty=new wn(!1),this.onStable=new wn(!1),this.onError=new wn(!1),typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=tfe().nativeRequestAnimationFrame,ife(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new z(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,nfe,H$,H$);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},nfe={};function dP(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function rfe(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(hr,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,dM(t),t.isCheckStableRunning=!0,dP(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),dM(t))}function ife(t){let e=()=>{rfe(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,u)=>{if(ofe(u))return n.invokeTask(i,o,s,u);try{return $$(t),n.invokeTask(i,o,s,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),z$(t)}},onInvoke:(n,r,i,o,s,u,c)=>{try{return $$(t),n.invoke(i,o,s,u,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),z$(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,dM(t),dP(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function dM(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function $$(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function z$(t){t._nesting--,dP(t)}var fM=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wn,this.onMicrotaskEmpty=new wn,this.onStable=new wn,this.onError=new wn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function ofe(t){var e;return!Array.isArray(t)||t.length!==1?!1:((e=t[0].data)==null?void 0:e.__ignore_ng_zone__)===!0}function sfe(t="zone.js",e){return t==="noop"?new fM:t==="zone.js"?new ke(e):t}var zd=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(zd||{}),afe={destroy(){}};function fP(t,e){var h,f,p;!e&&nhe(fP);let n=(h=e==null?void 0:e.injector)!=null?h:ee(dr);if(!ihe(n))return afe;pI("NgAfterNextRender");let r=n.get(nW),i=(f=r.handler)!=null?f:r.handler=new gM,o=(p=e==null?void 0:e.phase)!=null?p:zd.MixedReadWrite,s=()=>{i.unregister(c),u()},u=n.get(tW).onDestroy(s),c=new pM(n,o,()=>{s(),t()});return i.register(c),{destroy:s}}var pM=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(ke),this.errorHandler=e.get(_s,null,{optional:!0})}invoke(){var e;try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){(e=this.errorHandler)==null||e.handleError(n)}}},gM=class{constructor(){this.executingCallbacks=!1,this.buckets={[zd.EarlyRead]:new Set,[zd.Write]:new Set,[zd.MixedReadWrite]:new Set,[zd.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new z(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},nW=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){var r;(r=this.handler)==null||r.validateBegin(),this.renderDepth++}end(){var r;if(this.renderDepth--,this.renderDepth===0){for(let i of this.internalCallbacks)i();this.internalCallbacks.length=0,(r=this.handler)==null||r.execute()}}ngOnDestroy(){var r;(r=this.handler)==null||r.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function ufe(t,e){let n=Iu(e,t),r=n[Ge];cfe(r,n);let i=n[ws];i!==null&&n[AE]===null&&(n[AE]=nP(i,n[Qd])),pP(r,n,n[No])}function cfe(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function pP(t,e,n){VM(e);try{let r=t.viewQuery;r!==null&&uM(1,r,n);let i=t.template;i!==null&&qG(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&KG(t,e),t.staticViewQueries&&uM(2,t.viewQuery,n);let o=t.components;o!==null&&lfe(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Ae]&=-5,UM()}}function lfe(t,e){for(let n=0;n<e.length;n++)ufe(t,e[n])}function BE(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let u=e[s];if(typeof u=="number")o=u;else if(o==1)i=SR(i,u);else if(o==2){let c=u,h=e[++s];r=SR(r,c+": "+h+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var qE=class extends sf{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=vu(e);return new tf(n,this.ngModule)}};function G$(t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push({propName:r,templateName:n})}return e}function hfe(t){let e=t.toLowerCase();return e==="svg"?Gce:e==="math"?Wce:null}var mM=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=QE(r);let i=this.injector.get(e,vR,r);return i!==vR||n===vR?i:this.parentInjector.get(e,n,r)}},tf=class extends VE{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=G$(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return G$(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Lce(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof qr?i:i==null?void 0:i.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new mM(e,o):e,u=s.get(fl,null);if(u===null)throw new z(407,!1);let c=s.get(ude,null),h=s.get(nW,null),f=s.get(XR,null),p={rendererFactory:u,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:f},m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",_=r?Ede(m,r,this.componentDef.encapsulation,s):yG(m,v,hfe(v)),E=512;this.componentDef.signals?E|=4096:this.componentDef.onPush||(E|=16);let b=null;_!==null&&(b=nP(_,s,!0));let T=aP(0,null,null,1,0,null,null,null,null,null,null),S=dI(null,T,null,E,null,null,p,m,s,null,b);VM(S);let A,x;try{let N=this.componentDef,ie,Ye=null;N.findHostDirectiveDefs?(ie=[],Ye=new Map,N.findHostDirectiveDefs(N,ie,Ye),ie.push(N)):ie=[N];let ge=dfe(S,_),en=ffe(ge,_,N,ie,S,p,m);x=Sz(T,Ro),_&&mfe(m,N,_,r),n!==void 0&&yfe(x,this.ngContentSelectors,n),A=gfe(en,N,ie,Ye,S,[vfe]),pP(T,S,null)}finally{UM()}return new yM(this.componentType,A,af(x,S),S,x)}},yM=class extends JR{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new pl(i,void 0,!1),this.componentType=e}setInput(e,n){var o;let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if((o=this.previousInputValues)!=null||(this.previousInputValues=new Map),this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;lP(s[Ge],s,i,e,n),this.previousInputValues.set(e,n);let u=Iu(this._tNode.index,s);hP(u)}}get injector(){return new ol(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function dfe(t,e){let n=t[Ge],r=Ro;return t[r]=e,Hm(n,r,2,"#host",null)}function ffe(t,e,n,r,i,o,s){let u=i[Ge];pfe(r,t,e,s);let c=null;e!==null&&(c=nP(e,i[Qd]));let h=o.rendererFactory.createRenderer(e,n),f=16;n.signals?f=4096:n.onPush&&(f=64);let p=dI(i,HG(n),null,f,i[t.index],t,o,h,null,null,c);return u.firstCreatePass&&aM(u,t,r.length-1),fI(i,p),i[t.index]=p}function pfe(t,e,n,r){for(let i of t)e.mergedAttrs=Am(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(BE(e,e.mergedAttrs,!0),n!==null&&bG(r,n,e))}function gfe(t,e,n,r,i,o){let s=mi(),u=i[Ge],c=to(s,i);$G(u,i,s,n,null,r);for(let f=0;f<n.length;f++){let p=s.directiveStart+f,m=dl(i,u,p,s);_u(m,i)}zG(u,i,s),c&&_u(c,i);let h=dl(i,u,s.directiveStart+s.componentOffset,s);if(t[No]=i[No]=h,o!==null)for(let f of o)f(h,e);return iP(u,s,t),h}function mfe(t,e,n,r){if(r)NR(t,n,["ng-version","17.0.8"]);else{let{attrs:i,classes:o}=Vce(e.selectors[0]);i&&NR(t,n,i),o&&o.length>0&&IG(t,n,o.join(" "))}}function yfe(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function vfe(){let t=mi();rI(ft()[Ge],t)}function _fe(t){return Object.getPrototypeOf(t.prototype).constructor}function bs(t){let e=_fe(t.type),n=!0,r=[t];for(;e;){let i;if(va(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new z(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=yE(t.inputs),s.inputTransforms=yE(t.inputTransforms),s.declaredInputs=yE(t.declaredInputs),s.outputs=yE(t.outputs);let u=i.hostBindings;u&&bfe(t,u);let c=i.viewQuery,h=i.contentQueries;if(c&&Efe(t,c),h&&Ife(t,h),dE(t.inputs,i.inputs),dE(t.declaredInputs,i.declaredInputs),dE(t.outputs,i.outputs),i.inputTransforms!==null&&(s.inputTransforms===null&&(s.inputTransforms={}),dE(s.inputTransforms,i.inputTransforms)),va(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let u=o[s];u&&u.ngInherit&&u(t),u===bs&&(n=!1)}}e=Object.getPrototypeOf(e)}wfe(r)}function wfe(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Am(i.hostAttrs,n=Am(n,i.hostAttrs))}}function yE(t){return t===Kd?{}:t===fi?[]:t}function Efe(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Ife(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function bfe(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function gP(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}t.inputTransforms=n}function Tfe(t,e,n){return t[e]=n}function El(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Ts(t,e,n,r){let i=ft(),o=ZE();if(El(i,o,e)){let s=zn(),u=eI();Ude(u,i,t,e,n,r)}return Ts}function rW(t,e,n,r){return El(t,ZE(),n)?e+Om(n)+r:Is}function vE(t,e){return t<<17|e<<2}function gl(t){return t>>17&32767}function Cfe(t){return(t&2)==2}function Sfe(t,e){return t&131071|e<<17}function vM(t){return t|2}function nf(t){return(t&131068)>>2}function ER(t,e){return t&-131069|e<<2}function Dfe(t){return(t&1)===1}function _M(t){return t|1}function Afe(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,u=gl(s),c=nf(s);t[r]=n;let h=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||Um(p,f)>0)&&(h=!0)}else f=n;if(i)if(c!==0){let m=gl(t[u+1]);t[r+1]=vE(m,u),m!==0&&(t[m+1]=ER(t[m+1],r)),t[u+1]=Sfe(t[u+1],r)}else t[r+1]=vE(u,0),u!==0&&(t[u+1]=ER(t[u+1],r)),u=r;else t[r+1]=vE(c,0),u===0?u=r:t[c+1]=ER(t[c+1],r),c=r;h&&(t[r+1]=vM(t[r+1])),W$(t,f,r,!0,o),W$(t,f,r,!1,o),xfe(e,f,t,r,o),s=vE(u,c),o?e.classBindings=s:e.styleBindings=s}function xfe(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Um(o,e)>=0&&(n[r+1]=_M(n[r+1]))}function W$(t,e,n,r,i){let o=t[n+1],s=e===null,u=r?gl(o):nf(o),c=!1;for(;u!==0&&(c===!1||s);){let h=t[u],f=t[u+1];Nfe(h,e)&&(c=!0,t[u+1]=r?_M(f):vM(f)),u=r?gl(f):nf(f)}c&&(t[n+1]=r?vM(o):_M(o))}function Nfe(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Um(t,e)>=0:!1}var Ao={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Rfe(t){return t.substring(Ao.key,Ao.keyEnd)}function Mfe(t){return Pfe(t),iW(t,oW(t,0,Ao.textEnd))}function iW(t,e){let n=Ao.textEnd;return n===e?-1:(e=Ao.keyEnd=kfe(t,Ao.key=e,n),oW(t,e,n))}function Pfe(t){Ao.key=0,Ao.keyEnd=0,Ao.value=0,Ao.valueEnd=0,Ao.textEnd=t.length}function oW(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function kfe(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function De(t,e,n){let r=ft(),i=ZE();if(El(r,i,e)){let o=zn(),s=eI();uP(o,s,r,t,e,r[ln],n,!1)}return De}function wM(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";lP(t,n,o[s],s,r)}function Il(t,e,n){return sW(t,e,n,!1),Il}function gI(t,e){return sW(t,e,null,!0),gI}function Ca(t){Ffe(qfe,Ofe,t,!0)}function Ofe(t,e){for(let n=Mfe(e);n>=0;n=iW(e,n))HM(t,Rfe(e),!0)}function sW(t,e,n,r){let i=ft(),o=zn(),s=kz(2);if(o.firstUpdatePass&&uW(o,t,s,r),e!==Is&&El(i,s,e)){let u=o.data[vl()];cW(o,u,i,i[ln],t,i[s+1]=$fe(e,n),r,s)}}function Ffe(t,e,n,r){let i=zn(),o=kz(2);i.firstUpdatePass&&uW(i,null,o,r);let s=ft();if(n!==Is&&El(s,o,n)){let u=i.data[vl()];if(lW(u,r)&&!aW(i,o)){let c=r?u.classesWithoutHost:u.stylesWithoutHost;c!==null&&(n=SR(c,n||"")),wM(i,u,s,n,r)}else Hfe(i,u,s,s[ln],s[o+1],s[o+1]=Bfe(t,e,n),r,o)}}function aW(t,e){return e>=t.expandoStartIndex}function uW(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[vl()],s=aW(t,n);lW(o,r)&&e===null&&!s&&(e=!1),e=Lfe(i,o,e,r),Afe(i,o,e,n,s,r)}}function Lfe(t,e,n,r){let i=Oz(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=IR(null,t,e,n,r),n=Pm(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=IR(i,t,e,n,r),o===null){let c=Vfe(t,e,r);c!==void 0&&Array.isArray(c)&&(c=IR(null,t,e,c[1],r),c=Pm(c,e.attrs,r),Ufe(t,e,r,c))}else o=jfe(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function Vfe(t,e,n){let r=n?e.classBindings:e.styleBindings;if(nf(r)!==0)return t[gl(r)]}function Ufe(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[gl(i)]=r}function jfe(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Pm(r,s,n)}return Pm(r,e.attrs,n)}function IR(t,e,n,r,i){let o=null,s=n.directiveEnd,u=n.directiveStylingLast;for(u===-1?u=n.directiveStart:u++;u<s&&(o=e[u],r=Pm(r,o.hostAttrs,i),o!==t);)u++;return t!==null&&(n.directiveStylingLast=u),r}function Pm(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),HM(t,s,n?!0:e[++o]))}return t===void 0?null:t}function Bfe(t,e,n){if(n==null||n==="")return fi;let r=[],i=no(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function qfe(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&HM(t,r,n)}function Hfe(t,e,n,r,i,o,s,u){i===Is&&(i=fi);let c=0,h=0,f=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;f!==null||p!==null;){let m=c<i.length?i[c+1]:void 0,v=h<o.length?o[h+1]:void 0,_=null,E;f===p?(c+=2,h+=2,m!==v&&(_=p,E=v)):p===null||f!==null&&f<p?(c+=2,_=f):(h+=2,_=p,E=v),_!==null&&cW(t,e,n,r,_,E,s,u),f=c<i.length?i[c]:null,p=h<o.length?o[h]:null}}function cW(t,e,n,r,i,o,s,u){if(!(e.type&3))return;let c=t.data,h=c[u+1],f=Dfe(h)?K$(c,e,n,i,nf(h),s):void 0;if(!HE(f)){HE(o)||Cfe(h)&&(o=K$(c,null,n,i,u,s));let p=Cz(vl(),n);Ohe(r,s,p,i,o)}}function K$(t,e,n,r,i,o){let s=e===null,u;for(;i>0;){let c=t[i],h=Array.isArray(c),f=h?c[1]:c,p=f===null,m=n[i+1];m===Is&&(m=p?fi:void 0);let v=p?gR(m,r):f===r?m:void 0;if(h&&!HE(v)&&(v=gR(c,r)),HE(v)&&(u=v,s))return u;let _=t[i+1];i=s?gl(_):nf(_)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(u=gR(c,r))}return u}function HE(t){return t!==void 0}function $fe(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Tr(no(t)))),t}function lW(t,e){return(t.flags&(e?8:16))!==0}var p2e=new RegExp(`^(\\d+)*(${tde}|${ede})*(.*)`);var zfe=(t,e)=>null;function Q$(t,e){return zfe(t,e)}function Gfe(t,e,n,r){var f,p;let i=e.tView,s=t[Ae]&4096?4096:16,u=dI(t,i,n,s,null,e,null,null,null,(f=r==null?void 0:r.injector)!=null?f:null,(p=r==null?void 0:r.dehydratedView)!=null?p:null),c=t[e.index];u[Vm]=c;let h=t[gs];return h!==null&&(u[gs]=h.createEmbeddedView(i)),pP(i,u,n),u}function Y$(t,e){return!e||e.firstChild===null||dG(t)}function Wfe(t,e,n,r=!0){let i=e[Ge];if(Ehe(i,e,t,n),r){let s=qR(n,t),u=e[ln],c=XM(u,t[ul]);c!==null&&vhe(i,t[Po],u,e,c,s)}let o=e[AE];o!==null&&o.firstChild!==null&&(o.firstChild=null)}var Tu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Kfe;let t=e;return t})();function Kfe(){let t=mi();return dW(t,ft())}var Qfe=Tu,hW=class extends Qfe{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return af(this._hostTNode,this._hostLView)}get injector(){return new ol(this._hostTNode,this._hostLView)}get parentInjector(){let e=jM(this._hostTNode,this._hostLView);if($z(e)){let n=RE(e,this._hostLView),r=NE(e),i=n[Ge].data[r+8];return new ol(i,n)}else return new ol(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=X$(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Si}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Q$(this._lContainer,e.ssrId),u=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(u,i,Y$(this._hostTNode,s)),u}createComponent(e,n,r,i,o){var _,E,b;let s=e&&!Ple(e),u;if(s)u=n;else{let T=n||{};u=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef}let c=s?e:new tf(vu(e)),h=r||this.parentInjector;if(!o&&c.ngModule==null){let S=(s?h:this.parentInjector).get(qr,null);S&&(o=S)}let f=vu((_=c.componentType)!=null?_:{}),p=Q$(this._lContainer,(E=f==null?void 0:f.id)!=null?E:null),m=(b=p==null?void 0:p.firstChild)!=null?b:null,v=c.create(h,i,m,o);return this.insertImpl(v.hostView,u,Y$(this._hostTNode,p)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Zce(i)){let u=this.indexOf(e);if(u!==-1)this.detach(u);else{let c=i[xn],h=new hW(c,c[Po],c[xn]);h.detach(h.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Wfe(s,i,o,r),e.attachToViewContainerRef(),eG(bR(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=X$(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=BR(this._lContainer,n);r&&(kE(bR(this._lContainer),n),_G(r[Ge],r))}detach(e){let n=this._adjustIndex(e,-1),r=BR(this._lContainer,n);return r&&kE(bR(this._lContainer),n)!=null?new pl(r):null}_adjustIndex(e,n=0){return e==null?this.length+n:e}};function X$(t){return t[xE]}function bR(t){return t[xE]||(t[xE]=[])}function dW(t,e){let n,r=e[t.index];return Mo(r)?n=r:(n=WG(r,e,null,t),e[t.index]=n,fI(e,n)),Xfe(n,e,t,r),new hW(n,t,e)}function Yfe(t,e){let n=t[ln],r=n.createComment(""),i=to(e,t),o=XM(n,i);return LE(n,o,r,Ahe(n,i),!1),r}var Xfe=epe,Jfe=(t,e,n)=>!1;function Zfe(t,e,n){return Jfe(t,e,n)}function epe(t,e,n,r){if(t[ul])return;let i;n.type&8?i=vs(r):i=Yfe(e,n),t[ul]=i}function tpe(t,e,n,r,i,o,s,u,c){let h=e.consts,f=Hm(e,t,4,s||null,Jd(h,u));cP(e,n,f,Jd(h,c)),rI(e,f);let p=f.tView=aP(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,h,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function Ct(t,e,n,r,i,o,s,u){let c=ft(),h=zn(),f=t+Ro,p=h.firstCreatePass?tpe(f,h,c,e,n,r,i,o,s):h.data[f];yl(p,!1);let m=npe(h,c,p,t);tI()&&aI(h,c,m,p),_u(m,c);let v=WG(m,c,m,p);return c[f]=v,fI(c,v),Zfe(v,p,c),JE(p)&&oP(h,c,p),s!=null&&sP(c,p,u),Ct}var npe=rpe;function rpe(t,e,n,r){return nI(!0),e[ln].createComment("")}function ipe(t,e,n,r,i,o){let s=e.consts,u=Jd(s,i),c=Hm(e,t,2,r,u);return cP(e,n,c,Jd(s,o)),c.attrs!==null&&BE(c,c.attrs,!1),c.mergedAttrs!==null&&BE(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function G(t,e,n,r){let i=ft(),o=zn(),s=Ro+t,u=i[ln],c=o.firstCreatePass?ipe(s,o,i,e,n,r):o.data[s],h=ope(o,i,c,u,e,t);i[s]=h;let f=JE(c);return yl(c,!0),bG(u,h,c),(c.flags&32)!==32&&tI()&&aI(o,i,h,c),rle()===0&&_u(h,i),ile(),f&&(oP(o,i,c),iP(o,c,i)),r!==null&&sP(i,c),G}function W(){let t=mi();FM()?Mz():(t=t.parent,yl(t,!1));let e=t;ale(e)&&ule(),ole();let n=zn();return n.firstCreatePass&&(rI(n,t),kM(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&wle(e)&&wM(n,e,ft(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Ele(e)&&wM(n,e,ft(),e.stylesWithoutHost,!1),W}function ot(t,e,n,r){return G(t,e,n,r),W(),ot}var ope=(t,e,n,r,i,o)=>(nI(!0),yG(r,i,mle()));function spe(t,e,n,r,i){let o=e.consts,s=Jd(o,r),u=Hm(e,t,8,"ng-container",s);s!==null&&BE(u,s,!0);let c=Jd(o,i);return cP(e,n,u,c),e.queries!==null&&e.queries.elementStart(e,u),u}function mI(t,e,n){let r=ft(),i=zn(),o=t+Ro,s=i.firstCreatePass?spe(o,i,r,e,n):i.data[o];yl(s,!0);let u=ape(i,r,s,t);return r[o]=u,tI()&&aI(i,r,u,s),_u(u,r),JE(s)&&(oP(i,r,s),iP(i,s,r)),n!=null&&sP(r,s),mI}function yI(){let t=mi(),e=zn();return FM()?Mz():(t=t.parent,yl(t,!1)),e.firstCreatePass&&(rI(e,t),kM(t)&&e.queries.elementEnd(t)),yI}var ape=(t,e,n,r)=>(nI(!0),mhe(e[ln],""));function ko(){return ft()}function mP(t,e,n){let r=ft(),i=ZE();if(El(r,i,e)){let o=zn(),s=eI(),u=Oz(o.data),c=Hde(u,s,r);uP(o,s,r,t,e,c,n,!0)}return mP}var $E="en-US";var upe=$E;function cpe(t){gce(t,"Expected localeId to be defined"),typeof t=="string"&&(upe=t.toLowerCase().replace(/_/g,"-"))}function bl(t){return!!t&&typeof t.then=="function"}function fW(t){return!!t&&typeof t.subscribe=="function"}function _t(t,e,n,r){let i=ft(),o=zn(),s=mi();return hpe(o,i,i[ln],s,t,e,r),_t}function lpe(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let u=e[xm],c=i[o+2];return u.length>c?u[c]:null}typeof s=="string"&&(o+=2)}return null}function hpe(t,e,n,r,i,o,s){let u=JE(r),h=t.firstCreatePass&&YG(t),f=e[No],p=QG(e),m=!0;if(r.type&3||s){let E=to(r,e),b=s?s(E):E,T=p.length,S=s?x=>s(vs(x[r.index])):r.index,A=null;if(!s&&u&&(A=lpe(t,e,i,r.index)),A!==null){let x=A.__ngLastListenerFn__||A;x.__ngNextListenerFn__=o,A.__ngLastListenerFn__=o,m=!1}else{o=Z$(r,e,f,o,!1);let x=n.listen(b,i,o);p.push(o,x),h&&h.push(i,S,T,T+1)}}else o=Z$(r,e,f,o,!1);let v=r.outputs,_;if(m&&v!==null&&(_=v[i])){let E=_.length;if(E)for(let b=0;b<E;b+=2){let T=_[b],S=_[b+1],H=e[T][S].subscribe(o),N=p.length;p.push(o,H),h&&h.push(i,r.index,N,-(N+1))}}}function J$(t,e,n,r){try{return fs(6,e,n),n(r)!==!1}catch(i){return XG(t,i),!1}finally{fs(7,e,n)}}function Z$(t,e,n,r,i){return function o(s){if(s===Function)return r;let u=t.componentOffset>-1?Iu(t.index,e):e;hP(u);let c=J$(e,n,r,s),h=o.__ngNextListenerFn__;for(;h;)c=J$(e,n,h,s)&&c,h=h.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function et(t=1){return gle(t)}function Tl(t,e,n){return yP(t,"",e,"",n),Tl}function yP(t,e,n,r,i){let o=ft(),s=rW(o,e,n,r);if(s!==Is){let u=zn(),c=eI();uP(u,c,o,t,s,o[ln],i,!1)}return yP}function dpe(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function fe(t,e=""){let n=ft(),r=zn(),i=t+Ro,o=r.firstCreatePass?Hm(r,i,1,e,null):r.data[i],s=fpe(r,n,o,e,t);n[i]=s,tI()&&aI(r,n,s,o),yl(o,!1)}var fpe=(t,e,n,r,i)=>(nI(!0),phe(e[ln],r));function Oo(t){return Wn("",t,""),Oo}function Wn(t,e,n){let r=ft(),i=rW(r,t,e,n);return i!==Is&&$de(r,vl(),i),Wn}function ppe(t,e,n){let r=zn();if(r.firstCreatePass){let i=va(t);EM(n,r.data,r.blueprint,i,!0),EM(e,r.data,r.blueprint,i,!1)}}function EM(t,e,n,r,i){if(t=Br(t),Array.isArray(t))for(let o=0;o<t.length;o++)EM(t[o],e,n,r,i);else{let o=zn(),s=ft(),u=mi(),c=ef(t)?t:Br(t.provide),h=sG(t),f=u.providerIndexes&1048575,p=u.directiveStart,m=u.providerIndexes>>20;if(ef(t)||!t.multi){let v=new hl(h,i,ye),_=CR(c,e,i?f:f+m,p);_===-1?(OR(PE(u,s),o,c),TR(o,t,e.length),e.push(c),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(v),s.push(v)):(n[_]=v,s[_]=v)}else{let v=CR(c,e,f+m,p),_=CR(c,e,f,f+m),E=v>=0&&n[v],b=_>=0&&n[_];if(i&&!b||!i&&!E){OR(PE(u,s),o,c);let T=ype(i?mpe:gpe,n.length,i,r,h);!i&&b&&(n[_].providerFactory=T),TR(o,t,e.length,0),e.push(c),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(T),s.push(T)}else{let T=pW(n[i?_:v],h,!i&&r);TR(o,t,v>-1?v:_,T)}!i&&r&&b&&n[_].componentProviders++}}}function TR(t,e,n,r){let i=ef(e),o=Qle(e);if(i||o){let c=(o?Br(e.useClass):e).prototype.ngOnDestroy;if(c){let h=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=h.indexOf(n);f===-1?h.push(n,[r,c]):h[f+1].push(r,c)}else h.push(n,c)}}}function pW(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function CR(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function gpe(t,e,n,r){return IM(this.multi,[])}function mpe(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,u=dl(n,n[Ge],this.providerFactory.index,r);o=u.slice(0,s),IM(i,o);for(let c=s;c<u.length;c++)o.push(u[c])}else o=[],IM(i,o);return o}function IM(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function ype(t,e,n,r,i){let o=new hl(t,n,ye);return o.multi=[],o.index=e,o.componentProviders=0,pW(o,i,r&&!n),o}function cf(t,e=[]){return n=>{n.providersResolver=(r,i)=>ppe(r,i?i(t):t,e)}}var wu=class{},km=class{};var zE=class extends wu{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qE(this);let i=vz(e);this._bootstrapComponents=hG(i.bootstrap),this._r3Injector=aG(e,n,[{provide:wu,useValue:this},{provide:sf,useValue:this.componentFactoryResolver},...r],Tr(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},GE=class extends km{constructor(e){super(),this.moduleType=e}create(e){return new zE(this.moduleType,e,[])}};function vpe(t,e,n){return new zE(t,e,n)}var bM=class extends wu{constructor(e){super(),this.componentFactoryResolver=new qE(this),this.instance=null;let n=new Mm([...e.providers,{provide:wu,useValue:this},{provide:sf,useValue:this.componentFactoryResolver}],e.parent||zM(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function vI(t,e,n=null){return new bM({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var _pe=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=rG(!1,r.type),o=i.length>0?vI([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Y({token:e,providedIn:"environment",factory:()=>new e(M(qr))});let t=e;return t})();function $m(t){pI("NgStandalone"),t.getStandaloneInjector=e=>e.get(_pe).getOrCreateStandaloneInjector(t)}function _I(t,e,n,r){return gW(ft(),Pz(),t,e,n,r)}function wpe(t,e){let n=t[e];return n===Is?void 0:n}function gW(t,e,n,r,i,o){let s=e+n;return El(t,s,i)?Tfe(t,s+1,o?r.call(o,i):r(i)):wpe(t,s+1)}function Cl(t,e){var c;let n=zn(),r,i=t+Ro;n.firstCreatePass?(r=Epe(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&((c=n.destroyHooks)!=null?c:n.destroyHooks=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=cl(r.type,!0)),s,u=di(ye);try{let h=ME(!1),f=o();return ME(h),dpe(n,ft(),i,f),f}finally{di(u)}}function Epe(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Sl(t,e,n){let r=t+Ro,i=ft(),o=Xce(i,r);return Ipe(i,r)?gW(i,Pz(),e,o.transform,n,o):o.transform(n)}function Ipe(t,e){return t[Ge].data[e].pure}function bpe(){return this._results[Symbol.iterator]()}var TM=class t{get changes(){var e;return(e=this._changes)!=null?e:this._changes=new wn}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=bpe)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=Ole(e);(this._changesDetected=!kle(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},ml=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Spe;let t=e;return t})(),Tpe=ml,Cpe=class extends Tpe{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){var e;return((e=this._declarationTContainer.tView)==null?void 0:e.ssrId)||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Gfe(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new pl(i)}};function Spe(){return vP(mi(),ft())}function vP(t,e){return t.type&4?new Cpe(e,t,af(t,e)):null}var CM=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},SM=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),u=this.queries[s.indexInDeclarationView];i.push(u.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)vW(e,n).matches!==null&&this.queries[n].setDirty()}},DM=class{constructor(e,n,r=null){this.predicate=e,this.flags=n,this.read=r}},AM=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},xM=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,Dpe(n,o)),this.matchTNodeWithReadOption(e,n,IE(n,e,o,!1,!1))}else r===ml?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,IE(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ai||i===Tu||i===ml&&n.type&4)this.addMatch(n.index,-2);else{let o=IE(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function Dpe(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function Ape(t,e){return t.type&11?af(t,e):t.type&4?vP(t,e):null}function xpe(t,e,n,r){return n===-1?Ape(e,t):n===-2?Npe(t,e,r):dl(t,t[Ge],n,e)}function Npe(t,e,n){if(n===Ai)return af(e,t);if(n===ml)return vP(e,t);if(n===Tu)return dW(e,t)}function mW(t,e,n,r){let i=e[gs].queries[r];if(i.matches===null){let o=t.data,s=n.matches,u=[];for(let c=0;c<s.length;c+=2){let h=s[c];if(h<0)u.push(null);else{let f=o[h];u.push(xpe(e,f,s[c+1],n.metadata.read))}}i.matches=u}return i.matches}function NM(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=mW(t,e,i,n);for(let u=0;u<o.length;u+=2){let c=o[u];if(c>0)r.push(s[u/2]);else{let h=o[u+1],f=e[-c];for(let p=Si;p<f.length;p++){let m=f[p];m[Vm]===m[xn]&&NM(m[Ge],m,h,r)}if(f[Yd]!==null){let p=f[Yd];for(let m=0;m<p.length;m++){let v=p[m];NM(v[Ge],v,h,r)}}}}}return r}function _P(t){let e=ft(),n=zn(),r=Fz();LM(r+1);let i=vW(n,r);if(t.dirty&&Jce(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=i.crossesNgTemplate?NM(n,e,r,[]):mW(n,e,i,r);t.reset(o,sde),t.notifyOnChanges()}return!0}return!1}function yW(t,e,n){let r=zn();r.firstCreatePass&&(Ppe(r,new DM(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),Mpe(r,ft(),e)}function wP(){return Rpe(ft(),Fz())}function Rpe(t,e){return t[gs].queries[e].queryList}function Mpe(t,e,n){let r=new TM((n&4)===4);Tde(t,e,r,r.destroy),e[gs]===null&&(e[gs]=new SM),e[gs].queries.push(new CM(r))}function Ppe(t,e,n){t.queries===null&&(t.queries=new AM),t.queries.track(new xM(e,n))}function vW(t,e){return t.queries.getByIndex(e)}var _E=null;function kpe(t){_E!==null&&(t.defaultEncapsulation!==_E.defaultEncapsulation||t.preserveWhitespaces!==_E.preserveWhitespaces)||(_E=t)}var Ea=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},_W=new Ea("17.0.8");var wI=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),RM=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},EI=(()=>{let e=class e{compileModuleSync(r){return new GE(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=vz(r),s=hG(o.declarations).reduce((u,c)=>{let h=vu(c);return h&&u.push(new tf(h)),u},[]);return new RM(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ope=new J("compilerOptions");var Dl=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new _n(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var EP=new J(""),zm=new J(""),II=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Sm||(Fpe(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ke.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==s),r(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(M(ke),M(bI),M(zm))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})(),bI=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){var o;return(o=Sm==null?void 0:Sm.findTestabilityInTree(this,r,i))!=null?o:null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function Fpe(t){Sm=t}var Sm,TI=new J("Application Initializer"),wW=(()=>{let e=class e{constructor(){var r;this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o}),this.appInits=(r=ee(TI,{optional:!0}))!=null?r:[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(bl(s))r.push(s);else if(fW(s)){let u=new Promise((c,h)=>{s.subscribe({complete:c,error:h})});r.push(u)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),CI=new J("appBootstrapListener");function Lpe(t,e,n){let r=new GE(n);return Promise.resolve(r)}function Vpe(){WH(()=>{throw new z(600,!1)})}function Upe(t){return t.isBoundToModule}function jpe(t,e,n){try{let r=n();return bl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function EW(t,e){return Array.isArray(e)?e.reduce(EW,t):X(X({},t),e)}var xi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ee(LG),this.componentTypes=[],this.components=[],this.isStable=ee(Dl).hasPendingTasks.pipe(le(r=>!r)),this._injector=ee(qr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof VE;if(!this._injector.get(wW).done){let _="Cannot bootstrap as there are still asynchronous initializers running."+(!o&&yz(r)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new z(405,!1)}let u;o?u=r:u=this._injector.get(sf).resolveComponentFactory(r),this.componentTypes.push(u.componentType);let c=Upe(u)?void 0:this._injector.get(wu),h=i||u.selector,f=u.create(dr.NULL,[],h,c),p=f.location.nativeElement,m=f.injector.get(EP,null);return m==null||m.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),CE(this.components,f),m==null||m.unregisterApplication(p)}),this._loadComponent(f),f}tick(){if(this._runningTick)throw new z(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;CE(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(CI,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>CE(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new z(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function CE(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function ez(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var Bpe=(()=>{let e=class e{constructor(){this.zone=ee(ke),this.applicationRef=ee(xi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var r;(r=this._onMicrotaskEmptySubscription)==null||r.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qpe(t){return[{provide:ke,useFactory:t},{provide:Zd,multi:!0,useFactory:()=>{let e=ee(Bpe,{optional:!0});return()=>e.initialize()}},{provide:Zd,multi:!0,useFactory:()=>{let e=ee(zpe);return()=>{e.initialize()}}},{provide:LG,useFactory:Hpe}]}function Hpe(){let t=ee(ke),e=ee(_s);return n=>t.runOutsideAngular(()=>e.handleError(n))}function $pe(t){var e,n;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:(e=t==null?void 0:t.eventCoalescing)!=null?e:!1,shouldCoalesceRunChangeDetection:(n=t==null?void 0:t.runCoalescing)!=null?n:!1}}var zpe=(()=>{let e=class e{constructor(){this.subscription=new vn,this.initialized=!1,this.zone=ee(ke),this.pendingTasks=ee(Dl)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ke.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ke.assertInAngularZone(),r!=null||(r=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Gpe(){return typeof $localize<"u"&&$localize.locale||$E}var IP=new J("LocaleId",{providedIn:"root",factory:()=>ee(IP,Je.Optional|Je.SkipSelf)||Gpe()});var IW=new J("PlatformDestroyListeners"),bW=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=sfe(i==null?void 0:i.ngZone,$pe({eventCoalescing:i==null?void 0:i.ngZoneEventCoalescing,runCoalescing:i==null?void 0:i.ngZoneRunCoalescing}));return o.run(()=>{let s=vpe(r.moduleType,this.injector,qpe(()=>o)),u=s.injector.get(_s,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:h=>{u.handleError(h)}});s.onDestroy(()=>{CE(this._modules,s),c.unsubscribe()})}),jpe(u,o,()=>{let c=s.injector.get(wW);return c.runInitializers(),c.donePromise.then(()=>{let h=s.injector.get(IP,$E);return cpe(h||$E),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=EW({},i);return Lpe(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(xi);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new z(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new z(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(IW,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(M(dr))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),sl=null,TW=new J("AllowMultipleToken");function Wpe(t){if(sl&&!sl.get(TW,!1))throw new z(400,!1);Vpe(),sl=t;let e=t.get(bW);return Ype(t),e}function bP(t,e,n=[]){let r=`Platform: ${e}`,i=new J(r);return(o=[])=>{let s=CW();if(!s||s.injector.get(TW,!1)){let u=[...n,...o,{provide:i,useValue:!0}];t?t(u):Wpe(Kpe(u,r))}return Qpe(i)}}function Kpe(t=[],e){return dr.create({name:e,providers:[{provide:oI,useValue:"platform"},{provide:IW,useValue:new Set([()=>sl=null])},...t]})}function Qpe(t){let e=CW();if(!e)throw new z(401,!1);return e}function CW(){var t;return(t=sl==null?void 0:sl.get(bW))!=null?t:null}function Ype(t){let e=t.get(GM,null);e==null||e.forEach(n=>n())}function TP(){return!1}var SW=bP(null,"core",[]),DW=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(M(xi))},e.\u0275mod=ct({type:e}),e.\u0275inj=ut({});let t=e;return t})();function Al(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function AW(t){let e=vu(t);if(!e)return null;let n=new tf(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var SP=null;function Cs(){return SP}function OW(t){SP||(SP=t)}var SI=class{},qt=new J("DocumentToken"),NP=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>ee(Xpe),providedIn:"platform"});let t=e;return t})(),FW=new J("Location Initialized"),Xpe=(()=>{let e=class e extends NP{constructor(){super(),this._doc=ee(qt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cs().getBaseHref(this._doc)}onPopState(r){let i=Cs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Cs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function RP(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function xW(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Sa(t){return t&&t[0]!=="?"?"?"+t:t}var Da=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>ee(MP),providedIn:"root"});let t=e;return t})(),LW=new J("appBaseHref"),MP=(()=>{let e=class e extends Da{constructor(r,i){var o,s,u;super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=(u=(s=i!=null?i:this._platformLocation.getBaseHrefFromDOM())!=null?s:(o=ee(qt).location)==null?void 0:o.origin)!=null?u:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return RP(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Sa(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let u=this.prepareExternalUrl(o+Sa(s));this._platformLocation.pushState(r,i,u)}replaceState(r,i,o,s){let u=this.prepareExternalUrl(o+Sa(s));this._platformLocation.replaceState(r,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){var i,o;(o=(i=this._platformLocation).historyGo)==null||o.call(i,r)}};e.\u0275fac=function(i){return new(i||e)(M(NP),M(LW,8))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),VW=(()=>{let e=class e extends Da{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return i==null&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=RP(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let u=this.prepareExternalUrl(o+Sa(s));u.length==0&&(u=this._platformLocation.pathname),this._platformLocation.pushState(r,i,u)}replaceState(r,i,o,s){let u=this.prepareExternalUrl(o+Sa(s));u.length==0&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){var i,o;(o=(i=this._platformLocation).historyGo)==null||o.call(i,r)}};e.\u0275fac=function(i){return new(i||e)(M(NP),M(LW,8))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})(),hf=(()=>{let e=class e{constructor(r){this._subject=new wn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=ege(xW(NW(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){var r;(r=this._urlChangeSubscription)==null||r.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Sa(i))}normalize(r){return e.stripTrailingSlash(Zpe(this._basePath,NW(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Sa(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Sa(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){var i,o;(o=(i=this._locationStrategy).historyGo)==null||o.call(i,r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{var o;let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&((o=this._urlChangeSubscription)==null||o.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Sa,e.joinWithSlash=RP,e.stripTrailingSlash=xW,e.\u0275fac=function(i){return new(i||e)(M(Da))},e.\u0275prov=Y({token:e,factory:()=>Jpe(),providedIn:"root"});let t=e;return t})();function Jpe(){return new hf(M(Da))}function Zpe(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function NW(t){return t.replace(/\/index.html$/,"")}function ege(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function DI(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var CP=/\s+/,RW=[],AI=(()=>{let e=class e{constructor(r,i,o,s){this._iterableDiffers=r,this._keyValueDiffers=i,this._ngEl=o,this._renderer=s,this.initialClasses=RW,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(CP):RW}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(CP):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(CP).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(ye(lI),ye(hI),ye(Ai),ye(bu))},e.\u0275dir=Nn({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var DP=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},df=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,u)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new DP(o.item,this._ngForOf,-1,-1),u===null?void 0:u);else if(u==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,u),MW(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);MW(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ye(Tu),ye(ml),ye(lI))},e.\u0275dir=Nn({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function MW(t,e){t.context.$implicit=e.item}var Aa=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new AP,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){PW("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){PW("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ye(Tu),ye(ml))},e.\u0275dir=Nn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),AP=class{constructor(){this.$implicit=null,this.ngIf=null}};function PW(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Tr(e)}'.`)}function tge(t,e){return{key:t,value:e}}var xI=(()=>{let e=class e{constructor(r){this.differs=r,this.keyValues=[],this.compareFn=kW}transform(r,i=kW){if(!r||!(r instanceof Map)&&typeof r!="object")return null;this.differ||(this.differ=this.differs.find(r).create());let o=this.differ.diff(r),s=i!==this.compareFn;return o&&(this.keyValues=[],o.forEachItem(u=>{this.keyValues.push(tge(u.key,u.currentValue))})),(o||s)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}};e.\u0275fac=function(i){return new(i||e)(ye(hI,16))},e.\u0275pipe=Lm({name:"keyvalue",type:e,pure:!1,standalone:!0});let t=e;return t})();function kW(t,e){let n=t.key,r=e.key;if(n===r)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(n===null)return 1;if(r===null)return-1;if(typeof n=="string"&&typeof r=="string")return n<r?-1:1;if(typeof n=="number"&&typeof r=="number")return n-r;if(typeof n=="boolean"&&typeof r=="boolean")return n<r?-1:1;let i=String(n),o=String(r);return i==o?0:i<o?-1:1}var ff=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=ut({});let t=e;return t})(),UW="browser",nge="server";function xl(t){return t===nge}var jW=(()=>{let e=class e{};e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>new xP(M(qt),window)});let t=e;return t})(),xP=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let n=rge(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function rge(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var lf=class{};var Wm=class{},RI=class{},Nl=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(u=>o.indexOf(u)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var kP=class{encodeKey(e){return BW(e)}encodeValue(e){return BW(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function sge(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,u]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(u),n.set(s,c)}),n}var age=/%(\d[a-f0-9])/gi,uge={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function BW(t){return encodeURIComponent(t).replace(age,(e,n)=>{var r;return(r=uge[n])!=null?r:e})}function NI(t){return`${t}`}var Cu=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new kP,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=sge(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(NI):[NI(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(NI(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(NI(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var OP=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function cge(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function qW(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function HW(t){return typeof Blob<"u"&&t instanceof Blob}function $W(t){return typeof FormData<"u"&&t instanceof FormData}function lge(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Gm=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(cge(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers||(this.headers=new Nl),this.context||(this.context=new OP),!this.params)this.params=new Cu,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let u=n.indexOf("?"),c=u===-1?"?":u<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:qW(this.body)||HW(this.body)||$W(this.body)||lge(this.body)||typeof this.body=="string"?this.body:this.body instanceof Cu?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||$W(this.body)?null:HW(this.body)?this.body.type||null:qW(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Cu?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){var p;let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.body!==void 0?e.body:this.body,s=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,u=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,c=e.headers||this.headers,h=e.params||this.params,f=(p=e.context)!=null?p:this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),c)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),h)),new t(n,r,o,{params:h,headers:c,context:f,reportProgress:u,responseType:i,withCredentials:s})}},gf=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(gf||{}),Km=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new Nl,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},FP=class t extends Km{constructor(e={}){super(e),this.type=gf.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},MI=class t extends Km{constructor(e={}){super(e),this.type=gf.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},PI=class extends Km{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}};function PP(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var hge=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof Gm)s=r;else{let h;o.headers instanceof Nl?h=o.headers:h=new Nl(o.headers);let f;o.params&&(o.params instanceof Cu?f=o.params:f=new Cu({fromObject:o.params})),s=new Gm(r,i,o.body!==void 0?o.body:null,{headers:h,context:o.context,params:f,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let u=pe(s).pipe(ga(h=>this.handler.handle(h)));if(r instanceof Gm||o.observe==="events")return u;let c=u.pipe($n(h=>h instanceof MI));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(le(h=>{if(h.body!==null&&!(h.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return h.body}));case"blob":return c.pipe(le(h=>{if(h.body!==null&&!(h.body instanceof Blob))throw new Error("Response is not a Blob.");return h.body}));case"text":return c.pipe(le(h=>{if(h.body!==null&&typeof h.body!="string")throw new Error("Response is not a string.");return h.body}));case"json":default:return c.pipe(le(h=>h.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Cu().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,PP(o,i))}post(r,i,o={}){return this.request("POST",r,PP(o,i))}put(r,i,o={}){return this.request("PUT",r,PP(o,i))}};e.\u0275fac=function(i){return new(i||e)(M(Wm))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})();function KW(t,e){return e(t)}function dge(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function fge(t,e,n){return(r,i)=>Es(n,()=>e(r,o=>t(o,i)))}var pge=new J(""),LP=new J(""),gge=new J(""),mge=new J("");function yge(){let t=null;return(e,n)=>{var o;t===null&&(t=((o=ee(pge,{optional:!0}))!=null?o:[]).reduceRight(dge,KW));let r=ee(Dl),i=r.add();return t(e,n).pipe(pu(()=>r.remove(i)))}}var zW=(()=>{let e=class e extends Wm{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=ee(Dl);let o=ee(mge,{optional:!0});this.backend=o!=null?o:r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(LP),...this.injector.get(gge,[])]));this.chain=o.reduceRight((s,u)=>fge(s,u,this.injector),KW)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(pu(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(M(RI),M(qr))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})();var vge=/^\)\]\}',?\n/;function _ge(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var GW=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new z(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ze(i.\u0275loadImpl()):pe(null)).pipe(Tt(()=>new Ve(s=>{let u=i.build();if(u.open(r.method,r.urlWithParams),r.withCredentials&&(u.withCredentials=!0),r.headers.forEach((b,T)=>u.setRequestHeader(b,T.join(","))),r.headers.has("Accept")||u.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let b=r.detectContentTypeHeader();b!==null&&u.setRequestHeader("Content-Type",b)}if(r.responseType){let b=r.responseType.toLowerCase();u.responseType=b!=="json"?b:"text"}let c=r.serializeBody(),h=null,f=()=>{if(h!==null)return h;let b=u.statusText||"OK",T=new Nl(u.getAllResponseHeaders()),S=_ge(u)||r.url;return h=new FP({headers:T,status:u.status,statusText:b,url:S}),h},p=()=>{let{headers:b,status:T,statusText:S,url:A}=f(),x=null;T!==204&&(x=typeof u.response>"u"?u.responseText:u.response),T===0&&(T=x?200:0);let H=T>=200&&T<300;if(r.responseType==="json"&&typeof x=="string"){let N=x;x=x.replace(vge,"");try{x=x!==""?JSON.parse(x):null}catch(ie){x=N,H&&(H=!1,x={error:ie,text:x})}}H?(s.next(new MI({body:x,headers:b,status:T,statusText:S,url:A||void 0})),s.complete()):s.error(new PI({error:x,headers:b,status:T,statusText:S,url:A||void 0}))},m=b=>{let{url:T}=f(),S=new PI({error:b,status:u.status||0,statusText:u.statusText||"Unknown Error",url:T||void 0});s.error(S)},v=!1,_=b=>{v||(s.next(f()),v=!0);let T={type:gf.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(T.total=b.total),r.responseType==="text"&&u.responseText&&(T.partialText=u.responseText),s.next(T)},E=b=>{let T={type:gf.UploadProgress,loaded:b.loaded};b.lengthComputable&&(T.total=b.total),s.next(T)};return u.addEventListener("load",p),u.addEventListener("error",m),u.addEventListener("timeout",m),u.addEventListener("abort",m),r.reportProgress&&(u.addEventListener("progress",_),c!==null&&u.upload&&u.upload.addEventListener("progress",E)),u.send(c),s.next({type:gf.Sent}),()=>{u.removeEventListener("error",m),u.removeEventListener("abort",m),u.removeEventListener("load",p),u.removeEventListener("timeout",m),r.reportProgress&&(u.removeEventListener("progress",_),c!==null&&u.upload&&u.upload.removeEventListener("progress",E)),u.readyState!==u.DONE&&u.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(M(lf))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})(),QW=new J("XSRF_ENABLED"),wge="XSRF-TOKEN",Ege=new J("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>wge}),Ige="X-XSRF-TOKEN",bge=new J("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>Ige}),kI=class{},Tge=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=DI(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(M(qt),M(Gn),M(Ege))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})();function Cge(t,e){let n=t.url.toLowerCase();if(!ee(QW)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=ee(kI).getToken(),i=ee(bge);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var YW=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(YW||{});function Sge(t,e){return{\u0275kind:t,\u0275providers:e}}function Dge(...t){let e=[hge,GW,zW,{provide:Wm,useExisting:zW},{provide:RI,useExisting:GW},{provide:LP,useValue:Cge,multi:!0},{provide:QW,useValue:!0},{provide:kI,useClass:Tge}];for(let n of t)e.push(...n.\u0275providers);return of(e)}var WW=new J("LEGACY_INTERCEPTOR_FN");function Age(){return Sge(YW.LegacyInterceptors,[{provide:WW,useFactory:yge},{provide:LP,useExisting:WW,multi:!0}])}var XW=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=ut({providers:[Dge(Age())]});let t=e;return t})();var jP=class extends SI{constructor(){super(...arguments),this.supportsDOMEvents=!0}},BP=class t extends jP{static makeCurrent(){OW(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=xge();return n==null?null:Nge(n)}resetBaseElement(){Qm=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return DI(document.cookie,e)}},Qm=null;function xge(){return Qm=Qm||document.querySelector("base"),Qm?Qm.getAttribute("href"):null}function Nge(t){return new URL(t,document.baseURI).pathname}var qP=class{addToWindow(e){hr.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new z(5103,!1);return o},hr.getAllAngularTestabilities=()=>e.getAllTestabilities(),hr.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=hr.getAllAngularTestabilities(),o=i.length,s=!1,u=function(c){s=s||c,o--,o==0&&r(s)};i.forEach(c=>{c.whenStable(u)})};hr.frameworkStabilizers||(hr.frameworkStabilizers=[]),hr.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i!=null?i:r?Cs().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}},Rge=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})(),HP=new J("EventManagerPlugins"),e6=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new z(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(M(HP),M(ke))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})(),OI=class{constructor(e){this._doc=e}},VP="ng-app-id",t6=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xl(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){var o,s;let i=this.styleRef;(s=(o=i.get(r))==null?void 0:o.elements)==null||s.forEach(u=>u.remove()),i.delete(r)}collectServerRenderedStyles(){var i;let r=(i=this.doc.head)==null?void 0:i.querySelectorAll(`style[${VP}="${this.appId}"]`);if(r!=null&&r.length){let o=new Map;return r.forEach(s=>{s.textContent!=null&&o.set(s.textContent,s)}),o}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o==null?void 0:o.get(i);if((s==null?void 0:s.parentNode)===r)return o.delete(i),s.removeAttribute(VP),s;{let u=this.doc.createElement("style");return this.nonce&&u.setAttribute("nonce",this.nonce),u.textContent=i,this.platformIsServer&&u.setAttribute(VP,this.appId),r.appendChild(u),u}}addStyleToHost(r,i){var c;let o=this.getStyleElement(r,i),s=this.styleRef,u=(c=s.get(i))==null?void 0:c.elements;u?u.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(M(qt),M(sI),M(KM,8),M(Gn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})(),UP={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},zP=/%COMP%/g,n6="%COMP%",Mge=`_nghost-${n6}`,Pge=`_ngcontent-${n6}`,kge=!0,Oge=new J("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>kge});function Fge(t){return Pge.replace(zP,t)}function Lge(t){return Mge.replace(zP,t)}function r6(t,e){return e.map(n=>n.replace(zP,t))}var FI=(()=>{let e=class e{constructor(r,i,o,s,u,c,h,f=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=u,this.platformId=c,this.ngZone=h,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=xl(c),this.defaultRenderer=new Ym(r,u,h,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ms.ShadowDom&&(i=Xe(X({},i),{encapsulation:ms.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof LI?o.applyToHost(r):o instanceof Xm&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let u=this.doc,c=this.ngZone,h=this.eventManager,f=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case ms.Emulated:s=new LI(h,f,i,this.appId,p,u,c,m);break;case ms.ShadowDom:return new $P(h,f,r,i,u,c,this.nonce,m);default:s=new Xm(h,f,i,p,u,c,m);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(M(e6),M(t6),M(sI),M(Oge),M(qt),M(Gn),M(ke),M(KM))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})(),Ym=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(UP[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(JW(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(JW(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=UP[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=UP[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(_a.DashCase|_a.Important)?e.style.setProperty(n,r,i&_a.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&_a.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Cs().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function JW(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var $P=class extends Ym{constructor(e,n,r,i,o,s,u,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=r6(i.id,i.styles);for(let f of h){let p=document.createElement("style");u&&p.setAttribute("nonce",u),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Xm=class extends Ym{constructor(e,n,r,i,o,s,u,c){super(e,o,s,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?r6(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},LI=class extends Xm{constructor(e,n,r,i,o,s,u,c){let h=i+"-"+r.id;super(e,n,r,o,s,u,c,h),this.contentAttr=Fge(h),this.hostAttr=Lge(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Vge=(()=>{let e=class e extends OI{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(M(qt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})(),ZW=["alt","control","meta","shift"],Uge={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jge={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Bge=(()=>{let e=class e extends OI{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),u=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cs().onAndCancel(r,s.domEventName,u))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),u="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),u="code."),ZW.forEach(f=>{let p=i.indexOf(f);p>-1&&(i.splice(p,1),u+=f+".")}),u+=s,i.length!=0||s.length===0)return null;let h={};return h.domEventName=o,h.fullKey=u,h}static matchEventFullKeyCode(r,i){let o=Uge[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),ZW.forEach(u=>{if(u!==o){let c=jge[u];c(r)&&(s+=u+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(M(qt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})();function qge(){BP.makeCurrent()}function Hge(){return new _s}function $ge(){return uG(document),document}var zge=[{provide:Gn,useValue:UW},{provide:GM,useValue:qge,multi:!0},{provide:qt,useFactory:$ge,deps:[]}],i6=bP(SW,"browser",zge),Gge=new J(""),Wge=[{provide:zm,useClass:qP,deps:[]},{provide:EP,useClass:II,deps:[ke,bI,zm]},{provide:II,useClass:II,deps:[ke,bI,zm]}],Kge=[{provide:oI,useValue:"root"},{provide:_s,useFactory:Hge,deps:[]},{provide:HP,useClass:Vge,multi:!0,deps:[qt,ke,Gn]},{provide:HP,useClass:Bge,multi:!0,deps:[qt]},FI,t6,e6,{provide:fl,useExisting:FI},{provide:lf,useClass:Rge,deps:[]},[]],VI=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:sI,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(M(Gge,12))},e.\u0275mod=ct({type:e}),e.\u0275inj=ut({providers:[...Kge,...Wge],imports:[ff,DW]});let t=e;return t})();function Qge(){return new GP(M(qt))}var GP=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(M(qt))},e.\u0275prov=Y({token:e,factory:function(i){let o=null;return i?o=new i:o=Qge(),o},providedIn:"root"});let t=e;return t})();var WP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:function(i){let o=null;return i?o=new(i||e):o=M(o6),o},providedIn:"root"});let t=e;return t})();function Yge(t){return new o6(t.get(qt))}var o6=(()=>{let e=class e extends WP{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case Di.NONE:return i;case Di.HTML:return ba(i,"HTML")?no(i):ZM(this._doc,String(i)).toString();case Di.STYLE:return ba(i,"Style")?no(i):i;case Di.SCRIPT:if(ba(i,"Script"))return no(i);throw new z(5200,!1);case Di.URL:return ba(i,"URL")?no(i):cI(String(i));case Di.RESOURCE_URL:if(ba(i,"ResourceURL"))return no(i);throw new z(5201,!1);default:throw new z(5202,!1)}}bypassSecurityTrustHtml(r){return CG(r)}bypassSecurityTrustStyle(r){return SG(r)}bypassSecurityTrustScript(r){return DG(r)}bypassSecurityTrustUrl(r){return AG(r)}bypassSecurityTrustResourceUrl(r){return xG(r)}};e.\u0275fac=function(i){return new(i||e)(M(qt))},e.\u0275prov=Y({token:e,factory:function(i){let o=null;return i?o=new i:o=Yge(M(dr)),o},providedIn:"root"});let t=e;return t})();var $e="primary",dy=Symbol("RouteTitle"),ZP=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function wf(t){return new ZP(t)}function Xge(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],u=t[o];if(s.startsWith(":"))i[s.substring(1)]=u;else if(s!==u.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Jge(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ss(t[n],e[n]))return!1;return!0}function Ss(t,e){let n=t?e1(t):void 0,r=e?e1(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!p6(t[i],e[i]))return!1;return!0}function e1(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function p6(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function g6(t){return t.length>0?t[t.length-1]:null}function xu(t){return rR(t)?t:bl(t)?ze(Promise.resolve(t)):pe(t)}var Zge={exact:y6,subset:v6},m6={exact:eme,subset:tme,ignored:()=>!0};function s6(t,e,n){return Zge[n.paths](t.root,e.root,n.matrixParams)&&m6[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function eme(t,e){return Ss(t,e)}function y6(t,e,n){if(!Ml(t.segments,e.segments)||!BI(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!y6(t.children[r],e.children[r],n))return!1;return!0}function tme(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>p6(t[n],e[n]))}function v6(t,e,n){return _6(t,e,e.segments,n)}function _6(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ml(i,n)||e.hasChildren()||!BI(i,n,r))}else if(t.segments.length===n.length){if(!Ml(t.segments,n)||!BI(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!v6(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ml(t.segments,i)||!BI(t.segments,i,r)||!t.children[$e]?!1:_6(t.children[$e],e,o,r)}}function BI(t,e,n){return e.every((r,i)=>m6[n](t[i].parameters,r.parameters))}var Su=class{constructor(e=new Et([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wf(this.queryParams)),this._queryParamMap}toString(){return ime.serialize(this)}},Et=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qI(this)}},Rl=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=wf(this.parameters)),this._parameterMap}toString(){return E6(this)}};function nme(t,e){return Ml(t,e)&&t.every((n,r)=>Ss(n.parameters,e[r].parameters))}function Ml(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function rme(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===$e&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==$e&&(n=n.concat(e(i,r)))}),n}var fy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>new iy,providedIn:"root"});let t=e;return t})(),iy=class{parse(e){let n=new n1(e);return new Su(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Jm(e.root,!0)}`,r=ame(e.queryParams),i=typeof e.fragment=="string"?`#${ome(e.fragment)}`:"";return`${n}${r}${i}`}},ime=new iy;function qI(t){return t.segments.map(e=>E6(e)).join("/")}function Jm(t,e){if(!t.hasChildren())return qI(t);if(e){let n=t.children[$e]?Jm(t.children[$e],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==$e&&r.push(`${i}:${Jm(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=rme(t,(r,i)=>i===$e?[Jm(t.children[$e],!1)]:[`${i}:${Jm(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[$e]!=null?`${qI(t)}/${n[0]}`:`${qI(t)}/(${n.join("//")})`}}function w6(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function UI(t){return w6(t).replace(/%3B/gi,";")}function ome(t){return encodeURI(t)}function t1(t){return w6(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function HI(t){return decodeURIComponent(t)}function a6(t){return HI(t.replace(/\+/g,"%20"))}function E6(t){return`${t1(t.path)}${sme(t.parameters)}`}function sme(t){return Object.keys(t).map(e=>`;${t1(e)}=${t1(t[e])}`).join("")}function ame(t){let e=Object.keys(t).map(n=>{let r=t[n];return Array.isArray(r)?r.map(i=>`${UI(n)}=${UI(i)}`).join("&"):`${UI(n)}=${UI(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}var ume=/^[^\/()?;#]+/;function QP(t){let e=t.match(ume);return e?e[0]:""}var cme=/^[^\/()?;=#]+/;function lme(t){let e=t.match(cme);return e?e[0]:""}var hme=/^[^=?&#]+/;function dme(t){let e=t.match(hme);return e?e[0]:""}var fme=/^[^&#]+/;function pme(t){let e=t.match(fme);return e?e[0]:""}var n1=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Et([],{}):new Et([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[$e]=new Et(e,n)),r}parseSegment(){let e=QP(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new Rl(HI(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=lme(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=QP(this.remaining);i&&(r=i,this.capture(r))}e[HI(n)]=HI(r)}parseQueryParam(e){let n=dme(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=pme(this.remaining);s&&(r=s,this.capture(r))}let i=a6(n),o=a6(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=QP(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=$e);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[$e]:new Et([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}};function I6(t){return t.segments.length>0?new Et([],{[$e]:t}):t}function b6(t){let e={};for(let r of Object.keys(t.children)){let i=t.children[r],o=b6(i);if(r===$e&&o.segments.length===0&&o.hasChildren())for(let[s,u]of Object.entries(o.children))e[s]=u;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Et(t.segments,e);return gme(n)}function gme(t){if(t.numberOfChildren===1&&t.children[$e]){let e=t.children[$e];return new Et(t.segments.concat(e.segments),e.children)}return t}function Ef(t){return t instanceof Su}function mme(t,e,n=null,r=null){let i=T6(t);return C6(i,e,n,r)}function T6(t){let e;function n(o){let s={};for(let c of o.children){let h=n(c);s[c.outlet]=h}let u=new Et(o.url,s);return o===t&&(e=u),u}let r=n(t.root),i=I6(r);return e!=null?e:i}function C6(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return YP(i,i,i,n,r);let o=yme(e);if(o.toRoot())return YP(i,i,new Et([],{}),n,r);let s=vme(o,i,t),u=s.processChildren?ty(s.segmentGroup,s.index,o.commands):D6(s.segmentGroup,s.index,o.commands);return YP(i,s.segmentGroup,u,n,r)}function $I(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function oy(t){return typeof t=="object"&&t!=null&&t.outlets}function YP(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,h])=>{o[c]=Array.isArray(h)?h.map(f=>`${f}`):`${h}`});let s;t===e?s=n:s=S6(t,e,n);let u=I6(b6(s));return new Su(u,o,i)}function S6(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=S6(o,e,n)}),new Et(t.segments,r)}var zI=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&$I(r[0]))throw new z(4003,!1);let i=r.find(oy);if(i&&i!==g6(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yme(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new zI(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let u={};return Object.entries(o.outlets).forEach(([c,h])=>{u[c]=typeof h=="string"?h.split("/"):h}),[...i,{outlets:u}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((u,c)=>{c==0&&u==="."||(c==0&&u===""?n=!0:u===".."?e++:u!=""&&i.push(u))}),i):[...i,o]},[]);return new zI(n,e,r)}var vf=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function vme(t,e,n){if(t.isAbsolute)return new vf(e,!0,0);if(!n)return new vf(e,!1,NaN);if(n.parent===null)return new vf(n,!0,0);let r=$I(t.commands[0])?0:1,i=n.segments.length-1+r;return _me(n,i,t.numberOfDoubleDots)}function _me(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new vf(r,!1,i-o)}function wme(t){return oy(t[0])?t[0].outlets:{[$e]:t}}function D6(t,e,n){if(t||(t=new Et([],{})),t.segments.length===0&&t.hasChildren())return ty(t,e,n);let r=Eme(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Et(t.segments.slice(0,r.pathIndex),{});return o.children[$e]=new Et(t.segments.slice(r.pathIndex),t.children),ty(o,0,i)}else return r.match&&i.length===0?new Et(t.segments,{}):r.match&&!t.hasChildren()?r1(t,e,n):r.match?ty(t,0,i):r1(t,e,n)}function ty(t,e,n){if(n.length===0)return new Et(t.segments,{});{let r=wme(n),i={};if(Object.keys(r).some(o=>o!==$e)&&t.children[$e]&&t.numberOfChildren===1&&t.children[$e].segments.length===0){let o=ty(t.children[$e],e,n);return new Et(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=D6(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Et(t.segments,i)}}function Eme(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],u=n[r];if(oy(u))break;let c=`${u}`,h=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&h&&typeof h=="object"&&h.outlets===void 0){if(!c6(c,h,s))return o;r+=2}else{if(!c6(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function r1(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(oy(o)){let c=Ime(o.outlets);return new Et(r,c)}if(i===0&&$I(n[0])){let c=t.segments[e];r.push(new Rl(c.path,u6(n[0]))),i++;continue}let s=oy(o)?o.outlets[$e]:`${o}`,u=i<n.length-1?n[i+1]:null;s&&u&&$I(u)?(r.push(new Rl(s,u6(u))),i+=2):(r.push(new Rl(s,{})),i++)}return new Et(r,{})}function Ime(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=r1(new Et([],{}),0,r))}),e}function u6(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function c6(t,e,n){return t==n.path&&Ss(e,n.parameters)}var ny="imperative",ro=class{constructor(e,n){this.id=e,this.url=n}},If=class extends ro{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ds=class extends ro{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Du=class extends ro{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Au=class extends ro{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}},sy=class extends ro{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},GI=class extends ro{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},i1=class extends ro{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},o1=class extends ro{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},s1=class extends ro{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},a1=class extends ro{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},u1=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},c1=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},l1=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},h1=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},d1=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},f1=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},WI=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ay=class{},uy=class{constructor(e){this.url=e}};var p1=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new py,this.attachRef=null}},py=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new p1,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),KI=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=g1(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=g1(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=m1(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return m1(e,this._root).map(n=>n.value)}};function g1(t,e){if(t===e.value)return e;for(let n of e.children){let r=g1(t,n);if(r)return r}return null}function m1(t,e){if(t===e.value)return[e];for(let n of e.children){let r=m1(t,n);if(r.length)return r.unshift(e),r}return[]}var Ni=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function yf(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var QI=class extends KI{constructor(e,n){super(e),this.snapshot=n,S1(this,e)}toString(){return this.snapshot.toString()}};function A6(t,e){let n=bme(t,e),r=new _n([new Rl("",{})]),i=new _n({}),o=new _n({}),s=new _n({}),u=new _n(""),c=new Pl(r,i,s,u,o,$e,e,n.root);return c.snapshot=n.root,new QI(new Ni(c,[]),n)}function bme(t,e){let n={},r={},i={},o="",s=new cy([],n,i,o,r,$e,e,null,{});return new YI("",new Ni(s,[]))}var Pl=class{constructor(e,n,r,i,o,s,u,c){var h,f;this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=u,this._futureSnapshot=c,this.title=(f=(h=this.dataSubject)==null?void 0:h.pipe(le(p=>p[dy])))!=null?f:pe(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(le(e=>wf(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(le(e=>wf(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function C1(t,e,n="emptyOnly"){var o,s;let r,{routeConfig:i}=t;return e!==null&&(n==="always"||(i==null?void 0:i.path)===""||!e.component&&!((o=e.routeConfig)!=null&&o.loadComponent))?r={params:X(X({},e.params),t.params),data:X(X({},e.data),t.data),resolve:X(X(X(X({},t.data),e.data),i==null?void 0:i.data),t._resolvedData)}:r={params:X({},t.params),data:X({},t.data),resolve:X(X({},t.data),(s=t._resolvedData)!=null?s:{})},i&&N6(i)&&(r.resolve[dy]=i.title),r}var cy=class{get title(){var e;return(e=this.data)==null?void 0:e[dy]}constructor(e,n,r,i,o,s,u,c,h){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=u,this.routeConfig=c,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wf(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},YI=class extends KI{constructor(e,n){super(n),this.url=e,S1(this,n)}toString(){return x6(this._root)}};function S1(t,e){e.value._routerState=t,e.children.forEach(n=>S1(t,n))}function x6(t){let e=t.children.length>0?` { ${t.children.map(x6).join(", ")} } `:"";return`${t.value}${e}`}function XP(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ss(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ss(e.params,n.params)||t.paramsSubject.next(n.params),Jge(e.url,n.url)||t.urlSubject.next(n.url),Ss(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function y1(t,e){let n=Ss(t.params,e.params)&&nme(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||y1(t.parent,e.parent))}function N6(t){return typeof t.title=="string"||t.title===null}var D1=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=$e,this.activateEvents=new wn,this.deactivateEvents=new wn,this.attachEvents=new wn,this.detachEvents=new wn,this.parentContexts=ee(py),this.location=ee(Tu),this.changeDetector=ee(uf),this.environmentInjector=ee(qr),this.inputBinder=ee(tb,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){var r;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),(r=this.inputBinder)==null||r.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){var i;return((i=this.parentContexts.getContext(r))==null?void 0:i.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r!=null&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){var o;this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),(o=this.inputBinder)==null||o.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){var f;if(this.isActivated)throw new z(4013,!1);this._activatedRoute=r;let o=this.location,u=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,h=new v1(r,c,o.injector);this.activated=o.createComponent(u,{index:o.length,injector:h,environmentInjector:i!=null?i:this.environmentInjector}),this.changeDetector.markForCheck(),(f=this.inputBinder)==null||f.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Nn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ia]});let t=e;return t})(),v1=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Pl?this.route:e===py?this.childContexts:this.parent.get(e,n)}},tb=new J(""),l6=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){var i;(i=this.outletDataSubscriptions.get(r))==null||i.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Em([i.queryParams,i.params,i.data]).pipe(Tt(([s,u,c],h)=>(c=X(X(X({},s),u),c),h===0?pe(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let u=AW(i.component);if(!u){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of u.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})();function Tme(t,e,n){let r=ly(t,e._root,n?n._root:void 0);return new QI(r,e)}function ly(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Cme(t,e,n);return new Ni(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(u=>ly(t,u)),s}}let r=Sme(e.value),i=e.children.map(o=>ly(t,o));return new Ni(r,i)}}function Cme(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ly(t,r,i);return ly(t,r)})}function Sme(t){return new Pl(new _n(t.url),new _n(t.params),new _n(t.queryParams),new _n(t.fragment),new _n(t.data),t.outlet,t.component,t)}var R6="ngNavigationCancelingError";function M6(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ef(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=P6(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function P6(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[R6]=!0,r.cancellationCode=e,n&&(r.url=n),r}function Dme(t){return k6(t)&&Ef(t.url)}function k6(t){return t&&t[R6]}var Ame=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Cr({type:e,selectors:[["ng-component"]],standalone:!0,features:[$m],decls:1,vars:0,template:function(i,o){i&1&&ot(0,"router-outlet")},dependencies:[D1],encapsulation:2});let t=e;return t})();function xme(t,e){var n;return t.providers&&!t._injector&&(t._injector=vI(t.providers,e,`Route: ${t.path}`)),(n=t._injector)!=null?n:e}function A1(t){let e=t.children&&t.children.map(A1),n=e?Xe(X({},t),{children:e}):X({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==$e&&(n.component=Ame),n}function As(t){return t.outlet||$e}function Nme(t,e){let n=t.filter(r=>As(r)===e);return n.push(...t.filter(r=>As(r)!==e)),n}function gy(t){var e;if(!t)return null;if((e=t.routeConfig)!=null&&e._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let r=n.routeConfig;if(r!=null&&r._loadedInjector)return r._loadedInjector;if(r!=null&&r._injector)return r._injector}return null}var Rme=(t,e,n,r)=>le(i=>(new _1(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),_1=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),XP(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=yf(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=yf(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){let s=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:u})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=yf(e);for(let s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=yf(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new f1(o.value.snapshot))}),e.children.length&&this.forwardEvent(new h1(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(XP(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let u=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(u.contexts),s.attachRef=u.componentRef,s.route=u.route.value,s.outlet&&s.outlet.attach(u.componentRef,u.route.value),XP(u.route.value),this.activateChildRoutes(e,null,s.children)}else{let u=gy(i.snapshot);s.attachRef=null,s.route=i,s.injector=u,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},XI=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},_f=class{constructor(e,n){this.component=e,this.route=n}};function Mme(t,e,n){let r=t._root,i=e?e._root:null;return Zm(r,i,n,[r.value])}function Pme(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Tf(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!iz(t)?t:e.get(t):r}function Zm(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=yf(e);return t.children.forEach(s=>{kme(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,u])=>ry(u,n.getContext(s),i)),i}function kme(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,u=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Ome(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new XI(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Zm(t,e,u?u.children:null,r,i):Zm(t,e,n,r,i),c&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new _f(u.outlet.component,s))}else s&&ry(e,u,i),i.canActivateChecks.push(new XI(r)),o.component?Zm(t,null,u?u.children:null,r,i):Zm(t,null,n,r,i);return i}function Ome(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ml(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ml(t.url,e.url)||!Ss(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!y1(t,e)||!Ss(t.queryParams,e.queryParams);case"paramsChange":default:return!y1(t,e)}}function ry(t,e,n){let r=yf(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ry(s,e.children.getContext(o),n):ry(s,null,n):ry(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new _f(e.outlet.component,i)):n.canDeactivateChecks.push(new _f(null,i)):n.canDeactivateChecks.push(new _f(null,i))}function my(t){return typeof t=="function"}function Fme(t){return typeof t=="boolean"}function Lme(t){return t&&my(t.canLoad)}function Vme(t){return t&&my(t.canActivate)}function Ume(t){return t&&my(t.canActivateChild)}function jme(t){return t&&my(t.canDeactivate)}function Bme(t){return t&&my(t.canMatch)}function O6(t){return t instanceof pa||(t==null?void 0:t.name)==="EmptyError"}var jI=Symbol("INITIAL_VALUE");function bf(){return Tt(t=>Em(t.map(e=>e.pipe(ma(1),il(jI)))).pipe(le(e=>{for(let n of e)if(n!==!0){if(n===jI)return jI;if(n===!1||n instanceof Su)return n}return!0}),$n(e=>e!==jI),ma(1)))}function qme(t,e){return An(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?pe(Xe(X({},n),{guardsResult:!0})):Hme(s,r,i,t).pipe(An(u=>u&&Fme(u)?$me(r,o,t,e):pe(u)),le(u=>Xe(X({},n),{guardsResult:u})))})}function Hme(t,e,n,r){return ze(t).pipe(An(i=>Qme(i.component,i.route,n,e,r)),eo(i=>i!==!0,!0))}function $me(t,e,n,r){return ze(e).pipe(ga(i=>Ud(Gme(i.route.parent,r),zme(i.route,r),Kme(t,i.path,n),Wme(t,i.route,n))),eo(i=>i!==!0,!0))}function zme(t,e){return t!==null&&e&&e(new d1(t)),pe(!0)}function Gme(t,e){return t!==null&&e&&e(new l1(t)),pe(!0)}function Wme(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return pe(!0);let i=r.map(o=>uE(()=>{var h;let s=(h=gy(e))!=null?h:n,u=Tf(o,s),c=Vme(u)?u.canActivate(e,t):Es(s,()=>u(e,t));return xu(c).pipe(eo())}));return pe(i).pipe(bf())}function Kme(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Pme(s)).filter(s=>s!==null).map(s=>uE(()=>{let u=s.guards.map(c=>{var m;let h=(m=gy(s.node))!=null?m:n,f=Tf(c,h),p=Ume(f)?f.canActivateChild(r,t):Es(h,()=>f(r,t));return xu(p).pipe(eo())});return pe(u).pipe(bf())}));return pe(o).pipe(bf())}function Qme(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return pe(!0);let s=o.map(u=>{var p;let c=(p=gy(e))!=null?p:i,h=Tf(u,c),f=jme(h)?h.canDeactivate(t,e,n,r):Es(c,()=>h(t,e,n,r));return xu(f).pipe(eo())});return pe(s).pipe(bf())}function Yme(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return pe(!0);let o=i.map(s=>{let u=Tf(s,t),c=Lme(u)?u.canLoad(e,n):Es(t,()=>u(e,n));return xu(c)});return pe(o).pipe(bf(),F6(r))}function F6(t){return XN(cn(e=>{if(Ef(e))throw M6(t,e)}),le(e=>e===!0))}function Xme(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return pe(!0);let o=i.map(s=>{let u=Tf(s,t),c=Bme(u)?u.canMatch(e,n):Es(t,()=>u(e,n));return xu(c)});return pe(o).pipe(bf(),F6(r))}var hy=class{constructor(e){this.segmentGroup=e||null}},JI=class extends Error{constructor(e){super(),this.urlTree=e}};function mf(t){return Vd(new hy(t))}function Jme(t){return Vd(new z(4e3,!1))}function Zme(t){return Vd(P6(!1,3))}var w1=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return pe(r);if(i.numberOfChildren>1||!i.children[$e])return Jme(e.redirectTo);i=i.children[$e]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new JI(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Su(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let u=o.substring(1);r[i]=n[u]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([u,c])=>{s[u]=this.createSegmentGroup(e,c,r,i)}),new Et(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},E1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function eye(t,e,n,r,i){let o=x1(t,e,n);return o.matched?(r=xme(e,r),Xme(r,e,n,i).pipe(le(s=>s===!0?o:X({},E1)))):pe(o)}function x1(t,e,n){var u,c;if(e.path==="**")return tye(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?X({},E1):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Xge)(n,t,e);if(!i)return X({},E1);let o={};Object.entries((u=i.posParams)!=null?u:{}).forEach(([h,f])=>{o[h]=f.path});let s=i.consumed.length>0?X(X({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:(c=i.posParams)!=null?c:{}}}function tye(t){return{matched:!0,parameters:t.length>0?g6(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function h6(t,e,n,r){return n.length>0&&iye(t,n,r)?{segmentGroup:new Et(e,rye(r,new Et(n,t.children))),slicedSegments:[]}:n.length===0&&oye(t,n,r)?{segmentGroup:new Et(t.segments,nye(t,e,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Et(t.segments,t.children),slicedSegments:n}}function nye(t,e,n,r,i){let o={};for(let s of r)if(nb(t,n,s)&&!i[As(s)]){let u=new Et([],{});o[As(s)]=u}return X(X({},i),o)}function rye(t,e){let n={};n[$e]=e;for(let r of t)if(r.path===""&&As(r)!==$e){let i=new Et([],{});n[As(r)]=i}return n}function iye(t,e,n){return n.some(r=>nb(t,e,r)&&As(r)!==$e)}function oye(t,e,n){return n.some(r=>nb(t,e,r))}function nb(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function sye(t,e,n,r){return As(t)!==r&&(r===$e||!nb(e,n,t))?!1:x1(e,t,n).matched}function aye(t,e,n){return e.length===0&&!t.children[n]}var I1=class{};function uye(t,e,n,r,i,o,s="emptyOnly"){return new b1(t,e,n,r,i,s,o).recognize()}var cye=31,b1=class{constructor(e,n,r,i,o,s,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=u,this.applyRedirects=new w1(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new z(4002,`'${e.segmentGroup}'`)}recognize(){let e=h6(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(le(n=>{let r=new cy([],Object.freeze({}),Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,{},$e,this.rootComponentType,null,{}),i=new Ni(r,n),o=new YI("",i),s=mme(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,$e).pipe(du(r=>{if(r instanceof JI)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof hy?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=C1(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(le(o=>o instanceof Ni?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ze(i).pipe(ga(o=>{let s=r.children[o],u=Nme(n,o);return this.processSegmentGroup(e,u,s,o)}),ds((o,s)=>(o.push(...s),o)),fu(null),aR(),An(o=>{if(o===null)return mf(r);let s=L6(o);return lye(s),pe(s)}))}processSegment(e,n,r,i,o,s){return ze(n).pipe(ga(u=>{var c;return this.processSegmentAgainstRoute((c=u._injector)!=null?c:e,n,u,r,i,o,s).pipe(du(h=>{if(h instanceof hy)return pe(null);throw h}))}),eo(u=>!!u),du(u=>{if(O6(u))return aye(r,i,o)?pe(new I1):mf(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,u){return sye(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&u?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):mf(i):mf(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:u,consumedSegments:c,positionalParamSegments:h,remainingSegments:f}=x1(n,i,o);if(!u)return mf(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>cye&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,h);return this.applyRedirects.lineralizeSegments(i,p).pipe(An(m=>this.processSegment(e,r,n,m.concat(f),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=eye(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Tt(u=>{var c;return u.matched?(e=(c=r._injector)!=null?c:e,this.getChildConfig(e,r,i).pipe(Tt(({routes:h})=>{var S,A,x;let f=(S=r._loadedInjector)!=null?S:e,{consumedSegments:p,remainingSegments:m,parameters:v}=u,_=new cy(p,v,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,dye(r),As(r),(x=(A=r.component)!=null?A:r._loadedComponent)!=null?x:null,r,fye(r)),{segmentGroup:E,slicedSegments:b}=h6(n,p,m,h);if(b.length===0&&E.hasChildren())return this.processChildren(f,h,E).pipe(le(H=>H===null?null:new Ni(_,H)));if(h.length===0&&b.length===0)return pe(new Ni(_,[]));let T=As(r)===o;return this.processSegment(f,h,E,b,T?$e:o,!0).pipe(le(H=>new Ni(_,H instanceof Ni?[H]:[])))}))):mf(n)}))}getChildConfig(e,n,r){return n.children?pe({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?pe({routes:n._loadedRoutes,injector:n._loadedInjector}):Yme(e,n,r,this.urlSerializer).pipe(An(i=>i?this.configLoader.loadChildren(e,n).pipe(cn(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Zme(n))):pe({routes:[],injector:e})}};function lye(t){t.sort((e,n)=>e.value.outlet===$e?-1:n.value.outlet===$e?1:e.value.outlet.localeCompare(n.value.outlet))}function hye(t){let e=t.value.routeConfig;return e&&e.path===""}function L6(t){let e=[],n=new Set;for(let r of t){if(!hye(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=L6(r.children);e.push(new Ni(r.value,i))}return e.filter(r=>!n.has(r))}function dye(t){return t.data||{}}function fye(t){return t.resolve||{}}function pye(t,e,n,r,i,o){return An(s=>uye(t,e,n,r,s.extractedUrl,i,o).pipe(le(({state:u,tree:c})=>Xe(X({},s),{targetSnapshot:u,urlAfterRedirects:c}))))}function gye(t,e){return An(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return pe(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let h of V6(c))s.add(h);let u=0;return ze(s).pipe(ga(c=>o.has(c)?mye(c,r,t,e):(c.data=C1(c,c.parent,t).resolve,pe(void 0))),cn(()=>u++),Bd(1),An(c=>u===s.size?pe(n):li))})}function V6(t){let e=t.children.map(n=>V6(n)).flat();return[t,...e]}function mye(t,e,n,r){let i=t.routeConfig,o=t._resolve;return(i==null?void 0:i.title)!==void 0&&!N6(i)&&(o[dy]=i.title),yye(o,t,e,r).pipe(le(s=>(t._resolvedData=s,t.data=C1(t,t.parent,n).resolve,null)))}function yye(t,e,n,r){let i=e1(t);if(i.length===0)return pe({});let o={};return ze(i).pipe(An(s=>vye(t[s],e,n,r).pipe(eo(),cn(u=>{o[s]=u}))),Bd(1),sR(o),du(s=>O6(s)?li:Vd(s)))}function vye(t,e,n,r){var u;let i=(u=gy(e))!=null?u:r,o=Tf(t,i),s=o.resolve?o.resolve(e,n):Es(i,()=>o(e,n));return xu(s)}function JP(t){return Tt(e=>{let n=t(e);return n?ze(n).pipe(le(()=>e)):pe(e)})}var U6=(()=>{let e=class e{buildTitle(r){var s;let i,o=r.root;for(;o!==void 0;)i=(s=this.getResolvedTitleForRoute(o))!=null?s:i,o=o.children.find(u=>u.outlet===$e);return i}getResolvedTitleForRoute(r){return r.data[dy]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>ee(_ye),providedIn:"root"});let t=e;return t})(),_ye=(()=>{let e=class e extends U6{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(M(GP))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yy=new J("",{providedIn:"root",factory:()=>({})}),ZI=new J("ROUTES"),N1=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ee(EI)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return pe(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=xu(r.loadComponent()).pipe(le(j6),cn(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),pu(()=>{this.componentLoaders.delete(r)})),o=new Pd(i,()=>new Nt).pipe(Md());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return pe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=wye(i,this.compiler,r,this.onLoadEndListener).pipe(pu(()=>{this.childrenLoaders.delete(i)})),u=new Pd(s,()=>new Nt).pipe(Md());return this.childrenLoaders.set(i,u),u}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wye(t,e,n,r){return xu(t.loadChildren()).pipe(le(j6),An(i=>i instanceof km||Array.isArray(i)?pe(i):ze(e.compileModuleAsync(i))),le(i=>{r&&r(t);let o,s,u=!1;return Array.isArray(i)?(s=i,u=!0):(o=i.create(n).injector,s=o.get(ZI,[],{optional:!0,self:!0}).flat()),{routes:s.map(A1),injector:o}}))}function Eye(t){return t&&typeof t=="object"&&"default"in t}function j6(t){return Eye(t)?t.default:t}var R1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>ee(Iye),providedIn:"root"});let t=e;return t})(),Iye=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),B6=new J(""),q6=new J("");function bye(t,e,n){let r=t.get(q6),i=t.get(qt);return t.get(ke).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(h=>{o=h}),u=i.startViewTransition(()=>(o(),Tye(t))),{onViewTransitionCreated:c}=r;return c&&Es(t,()=>c({transition:u,from:e,to:n})),s})}function Tye(t){return new Promise(e=>{fP(e,{injector:t})})}var M1=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Nt,this.transitionAbortSubject=new Nt,this.configLoader=ee(N1),this.environmentInjector=ee(qr),this.urlSerializer=ee(fy),this.rootContexts=ee(py),this.location=ee(hf),this.inputBindingEnabled=ee(tb,{optional:!0})!==null,this.titleStrategy=ee(U6),this.options=ee(yy,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ee(R1),this.createViewTransition=ee(B6,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>pe(void 0),this.rootComponentType=null;let r=o=>this.events.next(new u1(o)),i=o=>this.events.next(new c1(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){var r;(r=this.transitions)==null||r.complete()}handleNavigationRequest(r){var o;let i=++this.navigationId;(o=this.transitions)==null||o.next(Xe(X(X({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new _n({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ny,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe($n(s=>s.id!==0),le(s=>Xe(X({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Tt(s=>{this.currentTransition=s;let u=!1,c=!1;return pe(s).pipe(cn(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Xe(X({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Tt(h=>{var m;let f=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=(m=h.extras.onSameUrlNavigation)!=null?m:r.onSameUrlNavigation;if(!f&&p!=="reload"){let v="";return this.events.next(new Au(h.id,this.urlSerializer.serialize(h.rawUrl),v,0)),h.resolve(null),li}if(this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return pe(h).pipe(Tt(v=>{var E,b;let _=(E=this.transitions)==null?void 0:E.getValue();return this.events.next(new If(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),_!==((b=this.transitions)==null?void 0:b.getValue())?li:Promise.resolve(v)}),pye(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),cn(v=>{s.targetSnapshot=v.targetSnapshot,s.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation=Xe(X({},this.currentNavigation),{finalUrl:v.urlAfterRedirects});let _=new GI(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(_)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(h.currentRawUrl)){let{id:v,extractedUrl:_,source:E,restoredState:b,extras:T}=h,S=new If(v,this.urlSerializer.serialize(_),E,b);this.events.next(S);let A=A6(_,this.rootComponentType).snapshot;return this.currentTransition=s=Xe(X({},h),{targetSnapshot:A,urlAfterRedirects:_,extras:Xe(X({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,pe(s)}else{let v="";return this.events.next(new Au(h.id,this.urlSerializer.serialize(h.extractedUrl),v,1)),h.resolve(null),li}}),cn(h=>{let f=new i1(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}),le(h=>(this.currentTransition=s=Xe(X({},h),{guards:Mme(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),s)),qme(this.environmentInjector,h=>this.events.next(h)),cn(h=>{if(s.guardsResult=h.guardsResult,Ef(h.guardsResult))throw M6(this.urlSerializer,h.guardsResult);let f=new o1(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.events.next(f)}),$n(h=>h.guardsResult?!0:(this.cancelNavigationTransition(h,"",3),!1)),JP(h=>{if(h.guards.canActivateChecks.length)return pe(h).pipe(cn(f=>{let p=new s1(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}),Tt(f=>{let p=!1;return pe(f).pipe(gye(this.paramsInheritanceStrategy,this.environmentInjector),cn({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(f,"",2)}}))}),cn(f=>{let p=new a1(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}))}),JP(h=>{let f=p=>{var v;let m=[];(v=p.routeConfig)!=null&&v.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(cn(_=>{p.component=_}),le(()=>{})));for(let _ of p.children)m.push(...f(_));return m};return Em(f(h.targetSnapshot.root)).pipe(fu(null),ma(1))}),JP(()=>this.afterPreactivation()),Tt(()=>{var m;let{currentSnapshot:h,targetSnapshot:f}=s,p=(m=this.createViewTransition)==null?void 0:m.call(this,this.environmentInjector,h.root,f.root);return p?ze(p).pipe(le(()=>s)):pe(s)}),le(h=>{let f=Tme(r.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return this.currentTransition=s=Xe(X({},h),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,s}),cn(()=>{this.events.next(new ay)}),Rme(this.rootContexts,r.routeReuseStrategy,h=>this.events.next(h),this.inputBindingEnabled),ma(1),cn({next:h=>{var f;u=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ds(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects))),(f=this.titleStrategy)==null||f.updateTitle(h.targetRouterState.snapshot),h.resolve(!0)},complete:()=>{u=!0}}),lR(this.transitionAbortSubject.pipe(cn(h=>{throw h}))),pu(()=>{var h;!u&&!c&&this.cancelNavigationTransition(s,"",1),((h=this.currentNavigation)==null?void 0:h.id)===s.id&&(this.currentNavigation=null)}),du(h=>{var f;if(c=!0,k6(h))this.events.next(new Du(s.id,this.urlSerializer.serialize(s.extractedUrl),h.message,h.cancellationCode)),Dme(h)?this.events.next(new uy(h.url)):s.resolve(!1);else{this.events.next(new sy(s.id,this.urlSerializer.serialize(s.extractedUrl),h,(f=s.targetSnapshot)!=null?f:void 0));try{s.resolve(r.errorHandler(h))}catch(p){s.reject(p)}}return li}))}))}cancelNavigationTransition(r,i,o){let s=new Du(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){var r,i;return((r=this.currentTransition)==null?void 0:r.extractedUrl.toString())!==((i=this.currentTransition)==null?void 0:i.currentUrlTree.toString())}isUpdatedBrowserUrl(){var i,o;return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==((i=this.currentTransition)==null?void 0:i.extractedUrl.toString())&&!((o=this.currentTransition)!=null&&o.extras.skipLocationChange)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Cye(t){return t!==ny}var Sye=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>ee(Dye),providedIn:"root"});let t=e;return t})(),T1=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Dye=(()=>{let e=class e extends T1{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=_l(e)))(o||e)}})(),e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),H6=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>ee(Aye),providedIn:"root"});let t=e;return t})(),Aye=(()=>{let e=class e extends H6{constructor(){super(...arguments),this.location=ee(hf),this.urlSerializer=ee(fy),this.options=ee(yy,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ee(R1),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Su,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=A6(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var r,i;return this.canceledNavigationResolution!=="computed"?this.currentPageId:(i=(r=this.restoredState())==null?void 0:r.\u0275routerPageId)!=null?i:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof If)this.stateMemento=this.createStateMemento();else if(r instanceof Au)this.rawUrlTree=i.initialUrl;else if(r instanceof GI){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof ay?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Du&&(r.code===3||r.code===2)?this.restoreHistory(i):r instanceof sy?this.restoreHistory(i,!0):r instanceof Ds&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,u=X(X({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",u)}else{let s=X(X({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){var i;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,(i=r.finalUrl)!=null?i:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=_l(e)))(o||e)}})(),e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ey=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ey||{});function $6(t,e){t.events.pipe($n(n=>n instanceof Ds||n instanceof Du||n instanceof sy||n instanceof Au),le(n=>n instanceof Ds||n instanceof Au?ey.COMPLETE:(n instanceof Du?n.code===0||n.code===1:!1)?ey.REDIRECTING:ey.FAILED),$n(n=>n!==ey.REDIRECTING),ma(1)).subscribe(()=>{e()})}function xye(t){throw t}var Nye={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Rye={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xs=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var r,i;this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ee(wI),this.stateManager=ee(H6),this.options=ee(yy,{optional:!0})||{},this.pendingTasks=ee(Dl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ee(M1),this.urlSerializer=ee(fy),this.location=ee(hf),this.urlHandlingStrategy=ee(R1),this._events=new Nt,this.errorHandler=this.options.errorHandler||xye,this.navigated=!1,this.routeReuseStrategy=ee(Sye),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(i=(r=ee(ZI,{optional:!0}))==null?void 0:r.flat())!=null?i:[],this.componentInputBindingEnabled=!!ee(tb,{optional:!0}),this.eventsSubscription=new vn,this.isNgZoneEnabled=ee(ke)instanceof ke&&ke.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:o=>{this.console.warn(o)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Du&&i.code!==0&&i.code!==1)this.navigated=!0;else if(i instanceof Ds)this.navigated=!0;else if(i instanceof uy){let u=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Cye(o.source)};this.scheduleNavigation(u,ny,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}Pye(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ny,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)}))}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},u=o!=null&&o.navigationId?o:null;if(o){let h=X({},o);delete h.navigationId,delete h.\u0275routerPageId,Object.keys(h).length!==0&&(s.state=h)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,u,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(A1),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:u,queryParamsHandling:c,preserveFragment:h}=i,f=h?this.currentUrlTree.fragment:u,p=null;switch(c){case"merge":p=X(X({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let v=o?o.snapshot:this.routerState.snapshot.root;m=T6(v)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return C6(m,r,p,f!=null?f:null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Ef(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ny,null,i)}navigate(r,i={skipLocationChange:!1}){return Mye(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=X({},Nye):i===!1?o=X({},Rye):o=i,Ef(r))return s6(this.currentUrlTree,r,o);let s=this.parseUrl(r);return s6(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.keys(r).reduce((i,o)=>{let s=r[o];return s!=null&&(i[o]=s),i},{})}scheduleNavigation(r,i,o,s,u){if(this.disposed)return Promise.resolve(!1);let c,h,f;u?(c=u.resolve,h=u.reject,f=u.promise):f=new Promise((m,v)=>{c=m,h=v});let p=this.pendingTasks.add();return $6(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:h,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Mye(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new z(4008,!1)}function Pye(t){return!(t instanceof ay)&&!(t instanceof uy)}var z6=(()=>{let e=class e{constructor(r,i,o,s,u,c){var f;this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=u,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new Nt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let h=(f=u.nativeElement.tagName)==null?void 0:f.toLowerCase();this.isAnchorElement=h==="a"||h==="area",this.isAnchorElement?this.subscription=r.events.subscribe(p=>{p instanceof Ds&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,u){if(this.urlTree===null||this.isAnchorElement&&(r!==0||i||o||s||u||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state};return this.router.navigateByUrl(this.urlTree,c),!this.isAnchorElement}ngOnDestroy(){var r;(r=this.subscription)==null||r.unsubscribe()}updateHref(){var i;this.href=this.urlTree!==null&&this.locationStrategy?(i=this.locationStrategy)==null?void 0:i.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let r=this.href===null?null:kG(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(ye(xs),ye(Pl),BM("tabindex"),ye(bu),ye(Ai),ye(Da))},e.\u0275dir=Nn({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&_t("click",function(u){return o.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),i&2&&Ts("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Al],skipLocationChange:["skipLocationChange","skipLocationChange",Al],replaceUrl:["replaceUrl","replaceUrl",Al],routerLink:"routerLink"},standalone:!0,features:[gP,Ia]});let t=e;return t})();var eb=class{};var kye=(()=>{let e=class e{constructor(r,i,o,s,u){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe($n(r=>r instanceof Ds),ga(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){var s,u,c;let o=[];for(let h of i){h.providers&&!h._injector&&(h._injector=vI(h.providers,r,`Route: ${h.path}`));let f=(s=h._injector)!=null?s:r,p=(u=h._loadedInjector)!=null?u:f;(h.loadChildren&&!h._loadedRoutes&&h.canLoad===void 0||h.loadComponent&&!h._loadedComponent)&&o.push(this.preloadConfig(f,h)),(h.children||h._loadedRoutes)&&o.push(this.processRoutes(p,(c=h.children)!=null?c:h._loadedRoutes))}return ze(o).pipe(hu())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=pe(null);let s=o.pipe(An(u=>{var c;return u===null?pe(void 0):(i._loadedRoutes=u.routes,i._loadedInjector=u.injector,this.processRoutes((c=u.injector)!=null?c:r,u.routes))}));if(i.loadComponent&&!i._loadedComponent){let u=this.loader.loadComponent(i);return ze([s,u]).pipe(hu())}else return s})}};e.\u0275fac=function(i){return new(i||e)(M(xs),M(EI),M(qr),M(eb),M(N1))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),G6=new J(""),Oye=(()=>{let e=class e{constructor(r,i,o,s,u={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof If?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Ds?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Au&&r.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof WI&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new WI(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){var r,i;(r=this.routerEventsSubscription)==null||r.unsubscribe(),(i=this.scrollEventsSubscription)==null||i.unsubscribe()}};e.\u0275fac=function(i){jG()},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})();function Fye(t){return t.routerState.root}function vy(t,e){return{\u0275kind:t,\u0275providers:e}}function Lye(){let t=ee(dr);return e=>{var o,s;let n=t.get(xi);if(e!==n.components[0])return;let r=t.get(xs),i=t.get(W6);t.get(P1)===1&&r.initialNavigation(),(o=t.get(K6,null,Je.Optional))==null||o.setUpPreloading(),(s=t.get(G6,null,Je.Optional))==null||s.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var W6=new J("",{factory:()=>new Nt}),P1=new J("",{providedIn:"root",factory:()=>1});function Vye(){return vy(2,[{provide:P1,useValue:0},{provide:TI,multi:!0,deps:[dr],useFactory:e=>{let n=e.get(FW,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(xs),o=e.get(W6);$6(i,()=>{r(!0)}),e.get(M1).afterPreactivation=()=>(r(!0),o.closed?pe(void 0):o),i.initialNavigation()}))}}])}function Uye(){return vy(3,[{provide:TI,multi:!0,useFactory:()=>{let e=ee(xs);return()=>{e.setUpLocationChangeListener()}}},{provide:P1,useValue:2}])}var K6=new J("");function jye(t){return vy(0,[{provide:K6,useExisting:kye},{provide:eb,useExisting:t}])}function Bye(){return vy(8,[l6,{provide:tb,useExisting:l6}])}function qye(t){let e=[{provide:B6,useValue:bye},{provide:q6,useValue:X({skipNextTransition:!!(t!=null&&t.skipInitialTransition)},t)}];return vy(9,e)}var d6=new J("ROUTER_FORROOT_GUARD"),Hye=[hf,{provide:fy,useClass:iy},xs,py,{provide:Pl,useFactory:Fye,deps:[xs]},N1,[]],k1=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[Hye,[],{provide:ZI,multi:!0,useValue:r},{provide:d6,useFactory:Wye,deps:[[xs,new wl,new iI]]},{provide:yy,useValue:i||{}},i!=null&&i.useHash?zye():Gye(),$ye(),i!=null&&i.preloadingStrategy?jye(i.preloadingStrategy).\u0275providers:[],i!=null&&i.initialNavigation?Kye(i):[],i!=null&&i.bindToComponentInputs?Bye().\u0275providers:[],i!=null&&i.enableViewTransitions?qye().\u0275providers:[],Qye()]}}static forChild(r){return{ngModule:e,providers:[{provide:ZI,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(M(d6,8))},e.\u0275mod=ct({type:e}),e.\u0275inj=ut({});let t=e;return t})();function $ye(){return{provide:G6,useFactory:()=>{let t=ee(jW),e=ee(ke),n=ee(yy),r=ee(M1),i=ee(fy);return n.scrollOffset&&t.setOffset(n.scrollOffset),new Oye(i,r,t,e,n)}}}function zye(){return{provide:Da,useClass:VW}}function Gye(){return{provide:Da,useClass:MP}}function Wye(t){return"guarded"}function Kye(t){return[t.initialNavigation==="disabled"?Uye().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Vye().\u0275providers:[]]}var f6=new J("");function Qye(){return[{provide:f6,useFactory:Lye},{provide:CI,multi:!0,useExisting:f6}]}var Y6=(()=>{let e=class e{constructor(){this.title="restaurant",this.isScrolledUp=!1}onWindowScroll(){window.pageYOffset>100?this.isScrolledUp=!0:this.isScrolledUp=!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Cr({type:e,selectors:[["app-root"]],hostBindings:function(i,o){i&1&&_t("scroll",function(){return o.onWindowScroll()},!1,lG)},decls:20,vars:0,consts:[[1,"main_app"],[2,"flex-grow","1"],[1,"main_app_content"],[1,"container-router"],[1,"phone"],["type","radio","name","s","id","s1","routerLink","orders"],["type","radio","name","s","id","s2","checked","checked","routerLink","/"],["type","radio","name","s","id","s3","routerLink","table-bookings"],["for","s1","routerLink","orders"],["src","assets/images/order.svg","alt",""],["for","s2","routerLink","/"],["src","assets/images/menu.svg"],["for","s3","routerLink","table-bookings"],["src","assets/images/waiter.svg","alt",""],[1,"circle"],[1,"phone_content"],[1,"phone_bottom"],[1,"indicator"]],template:function(i,o){i&1&&(G(0,"div",0)(1,"header"),fe(2,"Spicy Sam"),W(),G(3,"div",1),ot(4,"router-outlet",2),W(),G(5,"div",3)(6,"div",4),ot(7,"input",5)(8,"input",6)(9,"input",7),G(10,"label",8),ot(11,"img",9),W(),G(12,"label",10),ot(13,"img",11),W(),G(14,"label",12),ot(15,"img",13),W(),ot(16,"div",14),G(17,"div",15)(18,"div",16),ot(19,"span",17),W()()()()())},dependencies:[D1,z6],styles:['.main_app[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh}.main_app[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{background:#faebd7;height:70px;text-align:center;justify-content:center;display:flex;align-items:center;font-size:3rem}.main_app[_ngcontent-%COMP%]   .main_app_content[_ngcontent-%COMP%]{flex-grow:1}.container-router[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]{max-width:390px;height:65px;margin:auto;display:flex;align-items:center;position:relative;justify-content:center}.container-router[_ngcontent-%COMP%]   .phone_content[_ngcontent-%COMP%]{filter:contrast(20);width:100%;background-color:#fff;overflow:hidden;position:absolute}.container-router[_ngcontent-%COMP%]   .phone_bottom[_ngcontent-%COMP%]{width:100%;height:66px;background:#000000af;display:flex;justify-content:center;filter:blur(10px)}.container-router[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.container-router[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;display:flex;width:33%;height:66px;position:relative;z-index:2;align-items:center;justify-content:center}.container-router[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:25px;top:0;bottom:0;margin:auto;position:absolute;z-index:3;transition:.2s .1s cubic-bezier(.14,-.08,.74,1.4)}.container-router[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{content:"";position:absolute}.container-router[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{width:60px;height:60px;background:#000;position:absolute;top:-34px;z-index:1;border-radius:50%;left:0;right:0;margin:auto;transition:.2s cubic-bezier(.14,-.08,.74,1.4);box-shadow:0 82px 20px #8080804a}.container-router[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{width:70px;height:70px;background-image:linear-gradient(0deg,#f7b0b0,#b7ff9a00),linear-gradient(0deg,#9eff97bf,#b7ff9a00),linear-gradient(0deg,#b4fffb,#b7ff9a00);background-size:cover;background-position:0 10px;border-radius:50%;position:absolute;left:0;top:-42px;right:0;margin:auto;transition:.2s cubic-bezier(.14,-.08,.74,1.4)}.container-router[_ngcontent-%COMP%]   #s1[_ngcontent-%COMP%]:checked ~ [for=s1][_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{top:-85px}.container-router[_ngcontent-%COMP%]   #s1[_ngcontent-%COMP%]:checked ~ .circle[_ngcontent-%COMP%], .container-router[_ngcontent-%COMP%]   #s1[_ngcontent-%COMP%]:checked ~ div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{left:-66%}.container-router[_ngcontent-%COMP%]   #s2[_ngcontent-%COMP%]:checked ~ [for=s2][_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{top:-85px}.container-router[_ngcontent-%COMP%]   #s2[_ngcontent-%COMP%]:checked ~ .circle[_ngcontent-%COMP%], .container-router[_ngcontent-%COMP%]   #s2[_ngcontent-%COMP%]:checked ~ div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{left:0}.container-router[_ngcontent-%COMP%]   #s3[_ngcontent-%COMP%]:checked ~ [for=s3][_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{top:-85px}.container-router[_ngcontent-%COMP%]   #s3[_ngcontent-%COMP%]:checked ~ .circle[_ngcontent-%COMP%], .container-router[_ngcontent-%COMP%]   #s3[_ngcontent-%COMP%]:checked ~ div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{left:66%}']});let t=e;return t})();var Yye="firebase",Xye="10.7.1";ci(Yye,Xye,"app");var Lo=new Ea("ANGULARFIRE2_VERSION");var Jye=(t,e)=>{let n=e?[e]:BH(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Fo=class{constructor(){return Jye(Zye)}},Zye="app-check";function O1(){}var rb=class{constructor(e,n=tR){R(this,"zone");R(this,"delegate");this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},F1=class{constructor(e){R(this,"zone");R(this,"task",null);this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",O1,{},O1,O1)),n.pipe(cn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Nu=(()=>{let e=class e{constructor(r){R(this,"ngZone");R(this,"outsideAngular");R(this,"insideAngular");this.ngZone=r,this.outsideAngular=r.runOutsideAngular(()=>new rb(Zone.current)),this.insideAngular=r.run(()=>new rb(Zone.current,fa)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}};R(e,"\u0275fac",function(i){return new(i||e)(M(ke))}),R(e,"\u0275prov",Y({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();function X6(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function L1(t){return t.pipe(Ci(X6().outsideAngular))}function Qt(t){return eve(X6())(t)}function eve(t){return function(n){return n=n.lift(new F1(t.ngZone)),n.pipe(So(t.outsideAngular),Ci(t.insideAngular))}}var tve=new Map,nve={activated:!1,tokenObservers:[]},rve={initialized:!1,enabled:!1};function Vo(t){return tve.get(t)||Object.assign({},nve)}function n5(){return rve}var ive="https://content-firebaseappcheck.googleapis.com/v1";var ove="exchangeDebugToken",J6={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},WUe=24*60*60*1e3;var U1=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return F(this,null,function*(){this.stop();try{this.pending=new Xn,this.pending.promise.catch(n=>{}),yield sve(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Xn,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function sve(t){return new Promise(e=>{setTimeout(e,t)})}var ave={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ru=new OH("appCheck","AppCheck",ave);function r5(t){if(!Vo(t).activated)throw Ru.create("use-before-activation",{appName:t.name})}function i5(r,i){return F(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let u={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,u)}catch(v){throw Ru.create("fetch-network-error",{originalErrorMessage:v==null?void 0:v.message})}if(c.status!==200)throw Ru.create("fetch-status-error",{httpStatus:c.status});let h;try{h=yield c.json()}catch(v){throw Ru.create("fetch-parse-error",{originalErrorMessage:v==null?void 0:v.message})}let f=h.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Ru.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});let p=Number(f[1])*1e3,m=Date.now();return{token:h.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function o5(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${ive}/projects/${n}/apps/${r}:${ove}?key=${i}`,body:{debug_token:e}}}var uve="firebase-app-check-database",cve=1,j1="firebase-app-check-store";var ob=null;function lve(){return ob||(ob=new Promise((t,e)=>{try{let n=indexedDB.open(uve,cve);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Ru.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(j1,{keyPath:"compositeKey"})}}}catch(n){e(Ru.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),ob)}function hve(t,e){return dve(fve(t),e)}function dve(t,e){return F(this,null,function*(){let r=(yield lve()).transaction(j1,"readwrite"),o=r.objectStore(j1).put({compositeKey:t,value:e});return new Promise((s,u)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var h;u(Ru.create("storage-set",{originalErrorMessage:(h=c.target.error)===null||h===void 0?void 0:h.message}))}})})}function fve(t){return`${t.options.appId}-${t.name}`}var B1=new lu("@firebase/app-check");function V1(t,e){return k0()?hve(t,e).catch(n=>{B1.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function s5(){return n5().enabled}function a5(){return F(this,null,function*(){let t=n5();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var pve={error:"UNKNOWN_ERROR"};function gve(t){return M0.encodeString(JSON.stringify(t),!1)}function q1(t,e=!1){return F(this,null,function*(){let n=t.app;r5(n);let r=Vo(n),i=r.token,o;if(i&&!_y(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(_y(c)?i=c:yield V1(n,void 0))}if(!e&&i&&_y(i))return{token:i.token};let s=!1;if(s5()){r.exchangeTokenPromise||(r.exchangeTokenPromise=i5(o5(n,yield a5()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield V1(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Vo(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?B1.warn(c.message):B1.error(c),o=c}let u;return i?o?_y(i)?u={token:i.token,internalError:o}:u=e5(o):(u={token:i.token},r.token=i,yield V1(n,i)):u=e5(o),s&&_ve(n,u),u})}function mve(t){return F(this,null,function*(){let e=t.app;r5(e);let{provider:n}=Vo(e);if(s5()){let r=yield a5(),{token:i}=yield i5(o5(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function yve(t,e,n,r){let{app:i}=t,o=Vo(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&_y(o.token)){let u=o.token;Promise.resolve().then(()=>{n({token:u.token}),Z6(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Z6(t))}function u5(t,e){let n=Vo(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Z6(t){let{app:e}=t,n=Vo(e),r=n.tokenRefresher;r||(r=vve(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function vve(t){let{app:e}=t;return new U1(()=>F(this,null,function*(){let n=Vo(e),r;if(n.token?r=yield q1(t,!0):r=yield q1(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Vo(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},J6.RETRIAL_MIN_WAIT,J6.RETRIAL_MAX_WAIT)}function _ve(t,e){let n=Vo(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function _y(t){return t.expireTimeMillis-Date.now()>0}function e5(t){return{token:gve(pve),error:t}}var H1=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Vo(this.app);for(let n of e)u5(this.app,n.next);return Promise.resolve()}};function wve(t,e){return new H1(t,e)}function Eve(t){return{getToken:e=>q1(t,e),getLimitedUseToken:()=>mve(t),addTokenListener:e=>yve(t,"INTERNAL",e),removeTokenListener:e=>u5(t.app,e)}}var Ive="@firebase/app-check",bve="0.8.1";var Tve="app-check",t5="app-check-internal";function Cve(){ha(new cr(Tve,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return wve(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(t5).initialize()})),ha(new cr(t5,t=>{let e=t.getProvider("app-check").getImmediate();return Eve(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ci(Ive,bve)}Cve();var Sve=["localhost","0.0.0.0","127.0.0.1"],oje=typeof window<"u"&&Sve.includes(window.location.hostname);var Dve="firebase",Ave="10.7.1";nn.registerVersion(Dve,Ave,"app-compat");var xve=["ngOnDestroy"],l5=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var u;if(t[o])return(u=r==null?void 0:r.spy)!=null&&u.get&&r.spy.get(o,t[o]),t[o];if(xve.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(c=>{let h=c==null?void 0:c[o];return typeof h=="function"?h.bind(c):h!=null&&h.then?h.then(f=>n.run(()=>f)):n.run(()=>h)});return new Proxy(()=>{},{get:(c,h)=>s[h],apply:(c,h,f)=>s.then(p=>{var v;let m=p==null?void 0:p(...f);return(v=r==null?void 0:r.spy)!=null&&v.apply&&r.spy.apply(o,f,m),m})})})});var ab=class{constructor(e){return e}},Ns=new J("angularfire2.app.options"),Rs=new J("angularfire2.app.name");function xa(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=nn.apps.filter(u=>u&&u.name===i.name)[0]||e.runOutsideAngular(()=>nn.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let u=!!module.hot;Nve("error",`${s.name} Firebase App already initialized with different options${u?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ab(s)}var Nve=(t,...e)=>{TP()&&typeof console<"u"&&console[t](...e)},Rve={provide:ab,useFactory:xa,deps:[Ns,ke,[new wl,Rs]]},h5=(()=>{let e=class e{static initializeApp(r,i){return{ngModule:e,providers:[{provide:Ns,useValue:r},{provide:Rs,useValue:i}]}}constructor(r){nn.registerVersion("angularfire",Lo.full,"core"),nn.registerVersion("angularfire",Lo.full,"app-compat"),nn.registerVersion("angular",_W.full,r.toString())}};R(e,"\u0275fac",function(i){return new(i||e)(M(Gn))}),R(e,"\u0275mod",ct({type:e})),R(e,"\u0275inj",ut({providers:[Rve]}));let t=e;return t})();function Mu(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(u=>u[0]===t)||[];if(o)return Mve(i,s)||(c5("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Pve?" You may need to reload as Firebase is not HMR aware.":""}`),c5("warn",{is:i,was:s})),o;{let u=r();return globalThis.\u0275AngularfireInstanceCache.push([t,u,i]),u}}function Mve(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var Pve=typeof module<"u"&&!!module.hot,c5=(t,...e)=>{TP()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);var wy=new J("angularfire2.auth.use-emulator"),Ey=new J("angularfire2.auth.settings"),Iy=new J("angularfire2.auth.tenant-id"),by=new J("angularfire2.auth.langugage-code"),Ty=new J("angularfire2.auth.use-device-language"),Cy=new J("angularfire.auth.persistence"),Sy=(t,e,n,r,i,o,s,u)=>Mu(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[h,f]of Object.entries(s))c.settings[h]=f;return u&&c.setPersistence(u),c},[n,r,i,o,s,u]),Na=(()=>{let e=class e{constructor(r,i,o,s,u,c,h,f,p,m,v,_){R(this,"authState");R(this,"idToken");R(this,"user");R(this,"idTokenResult");R(this,"credential");let E=new Nt,b=pe(void 0).pipe(Ci(u.outsideAngular),Tt(()=>s.runOutsideAngular(()=>import("./chunk-YRAQLERV.js"))),le(()=>xa(r,s,i)),le(T=>Sy(T,s,c,f,p,m,h,v)),lE({bufferSize:1,refCount:!1}));if(xl(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pe(null);else{b.pipe(eo()).subscribe();let T=b.pipe(Tt(x=>x.getRedirectResult().then(H=>H,()=>null)),Qt,lE({bufferSize:1,refCount:!1})),S=b.pipe(Tt(x=>new Ve(H=>({unsubscribe:s.runOutsideAngular(()=>x.onAuthStateChanged(N=>H.next(N),N=>H.error(N),()=>H.complete()))})))),A=b.pipe(Tt(x=>new Ve(H=>({unsubscribe:s.runOutsideAngular(()=>x.onIdTokenChanged(N=>H.next(N),N=>H.error(N),()=>H.complete()))}))));this.authState=T.pipe(hE(S),So(u.outsideAngular),Ci(u.insideAngular)),this.user=T.pipe(hE(A),So(u.outsideAngular),Ci(u.insideAngular)),this.idToken=this.user.pipe(Tt(x=>x?ze(x.getIdToken()):pe(null))),this.idTokenResult=this.user.pipe(Tt(x=>x?ze(x.getIdTokenResult()):pe(null))),this.credential=jd(T,E,this.authState.pipe($n(x=>!x))).pipe(le(x=>x!=null&&x.user?x:null),So(u.outsideAngular),Ci(u.insideAngular))}return l5(this,b,s,{spy:{apply:(T,S,A)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&A.then(x=>E.next(x))}}})}};R(e,"\u0275fac",function(i){return new(i||e)(M(Ns),M(Rs,8),M(Gn),M(ke),M(Nu),M(wy,8),M(Ey,8),M(Iy,8),M(by,8),M(Ty,8),M(Cy,8),M(Fo,8))}),R(e,"\u0275prov",Y({token:e,factory:e.\u0275fac,providedIn:"any"}));let t=e;return t})(),d5=(()=>{let e=class e{constructor(){nn.registerVersion("angularfire",Lo.full,"auth-compat")}};R(e,"\u0275fac",function(i){return new(i||e)}),R(e,"\u0275mod",ct({type:e})),R(e,"\u0275inj",ut({providers:[Na]}));let t=e;return t})();var kve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jo={},ne,fk=fk||{},Fe=kve||self;function Ib(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function jy(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Ove(t){return Object.prototype.hasOwnProperty.call(t,G1)&&t[G1]||(t[G1]=++Fve)}var G1="closure_uid_"+(1e9*Math.random()>>>0),Fve=0;function Lve(t,e,n){return t.call.apply(t.bind,arguments)}function Vve(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Sr(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Sr=Lve:Sr=Vve,Sr.apply(null,arguments)}function cb(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Zn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),u=2;u<arguments.length;u++)s[u-2]=arguments[u];return e.prototype[i].apply(r,s)}}function Pu(){this.s=this.s,this.o=this.o}var Uve=0;Pu.prototype.s=!1;Pu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Uve!=0)&&Ove(this)};Pu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var C5=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function pk(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function f5(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Ib(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function Dr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Dr.prototype.h=function(){this.defaultPrevented=!0};var jve=function(){if(!Fe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};Fe.addEventListener("test",n,e),Fe.removeEventListener("test",n,e)}catch{}return t}();function My(t){return/^[\s\xa0]*$/.test(t)}function bb(){var t=Fe.navigator;return t&&(t=t.userAgent)?t:""}function Ms(t){return bb().indexOf(t)!=-1}function gk(t){return gk[" "](t),t}gk[" "]=function(){};function Bve(t,e){var n=x_e;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var qve=Ms("Opera"),Af=Ms("Trident")||Ms("MSIE"),S5=Ms("Edge"),X1=S5||Af,D5=Ms("Gecko")&&!(bb().toLowerCase().indexOf("webkit")!=-1&&!Ms("Edge"))&&!(Ms("Trident")||Ms("MSIE"))&&!Ms("Edge"),Hve=bb().toLowerCase().indexOf("webkit")!=-1&&!Ms("Edge");function A5(){var t=Fe.document;return t?t.documentMode:void 0}var J1;e:{if(lb="",hb=function(){var t=bb();if(D5)return/rv:([^\);]+)(\)|;)/.exec(t);if(S5)return/Edge\/([\d\.]+)/.exec(t);if(Af)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Hve)return/WebKit\/(\S+)/.exec(t);if(qve)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),hb&&(lb=hb?hb[1]:""),Af&&(db=A5(),db!=null&&db>parseFloat(lb))){J1=String(db);break e}J1=lb}var lb,hb,db,Z1;Fe.document&&Af?(W1=A5(),Z1=W1||parseInt(J1,10)||void 0):Z1=void 0;var W1,$ve=Z1;function Py(t,e){if(Dr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(D5){e:{try{gk(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:zve[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Py.$.h.call(this)}}Zn(Py,Dr);var zve={2:"touch",3:"pen",4:"mouse"};Py.prototype.h=function(){Py.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var By="closure_listenable_"+(1e6*Math.random()|0),Gve=0;function Wve(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Gve,this.fa=this.ia=!1}function Tb(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function mk(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function Kve(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function x5(t){let e={};for(let n in t)e[n]=t[n];return e}var p5="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N5(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<p5.length;o++)n=p5[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Cb(t){this.src=t,this.g={},this.h=0}Cb.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=tk(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new Wve(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function ek(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=C5(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Tb(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function tk(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var yk="closure_lm_"+(1e6*Math.random()|0),K1={};function R5(t,e,n,r,i){if(r&&r.once)return P5(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)R5(t,e[o],n,r,i);return null}return n=wk(n),t&&t[By]?t.O(e,n,jy(r)?!!r.capture:!!r,i):M5(t,e,n,!1,r,i)}function M5(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=jy(i)?!!i.capture:!!i,u=_k(t);if(u||(t[yk]=u=new Cb(t)),n=u.add(e,n,r,s,o),n.proxy)return n;if(r=Qve(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)jve||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(O5(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Qve(){function t(n){return e.call(t.src,t.listener,n)}let e=Yve;return t}function P5(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)P5(t,e[o],n,r,i);return null}return n=wk(n),t&&t[By]?t.P(e,n,jy(r)?!!r.capture:!!r,i):M5(t,e,n,!0,r,i)}function k5(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)k5(t,e[o],n,r,i);else r=jy(r)?!!r.capture:!!r,n=wk(n),t&&t[By]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=tk(o,n,r,i),-1<n&&(Tb(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=_k(t))&&(e=t.g[e.toString()],t=-1,e&&(t=tk(e,n,r,i)),(n=-1<t?e[t]:null)&&vk(n))}function vk(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[By])ek(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(O5(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_k(e))?(ek(n,t),n.h==0&&(n.src=null,e[yk]=null)):Tb(t)}}}function O5(t){return t in K1?K1[t]:K1[t]="on"+t}function Yve(t,e){if(t.fa)t=!0;else{e=new Py(e,this);var n=t.listener,r=t.la||t.src;t.ia&&vk(t),t=n.call(r,e)}return t}function _k(t){return t=t[yk],t instanceof Cb?t:null}var Q1="__closure_events_fn_"+(1e9*Math.random()>>>0);function wk(t){return typeof t=="function"?t:(t[Q1]||(t[Q1]=function(e){return t.handleEvent(e)}),t[Q1])}function Jn(){Pu.call(this),this.i=new Cb(this),this.S=this,this.J=null}Zn(Jn,Pu);Jn.prototype[By]=!0;Jn.prototype.removeEventListener=function(t,e,n,r){k5(this,t,e,n,r)};function pr(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Dr(e,t);else if(e instanceof Dr)e.target=e.target||t;else{var i=e;e=new Dr(r,t),N5(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=fb(s,r,!0,e)&&i}if(s=e.g=t,i=fb(s,r,!0,e)&&i,i=fb(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=fb(s,r,!1,e)&&i}Jn.prototype.N=function(){if(Jn.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Tb(n[r]);delete t.g[e],t.h--}}this.J=null};Jn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Jn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function fb(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var u=s.listener,c=s.la||s.src;s.ia&&ek(t.i,s),i=u.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Ek=Fe.JSON.stringify,nk=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function Xve(){var t=Ik;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var rk=class{constructor(){this.h=this.g=null}add(e,n){let r=F5.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},F5=new nk(()=>new ik,t=>t.reset()),ik=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function Jve(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Zve(t){Fe.setTimeout(()=>{throw t},0)}var ky,Oy=!1,Ik=new rk,L5=()=>{let t=Fe.Promise.resolve(void 0);ky=()=>{t.then(e_e)}},e_e=()=>{for(var t;t=Xve();){try{t.h.call(t.g)}catch(n){Zve(n)}var e=F5;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Oy=!1};function Sb(t,e){Jn.call(this),this.h=t||1,this.g=e||Fe,this.j=Sr(this.qb,this),this.l=Date.now()}Zn(Sb,Jn);ne=Sb.prototype;ne.ga=!1;ne.T=null;ne.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),pr(this,"tick"),this.ga&&(bk(this),this.start()))}};ne.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function bk(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ne.N=function(){Sb.$.N.call(this),bk(this),delete this.g};function Tk(t,e,n){if(typeof t=="function")n&&(t=Sr(t,n));else if(t&&typeof t.handleEvent=="function")t=Sr(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Fe.setTimeout(t,e||0)}function V5(t){t.g=Tk(()=>{t.g=null,t.i&&(t.i=!1,V5(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var ok=class extends Pu{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:V5(this)}N(){super.N(),this.g&&(Fe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Fy(t){Pu.call(this),this.h=t,this.g={}}Zn(Fy,Pu);var g5=[];function U5(t,e,n,r){Array.isArray(n)||(n&&(g5[0]=n.toString()),n=g5);for(var i=0;i<n.length;i++){var o=R5(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function j5(t){mk(t.g,function(e,n){this.g.hasOwnProperty(n)&&vk(e)},t),t.g={}}Fy.prototype.N=function(){Fy.$.N.call(this),j5(this)};Fy.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Db(){this.g=!0}Db.prototype.Ea=function(){this.g=!1};function t_e(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",u=o.split("&"),c=0;c<u.length;c++){var h=u[c].split("=");if(1<h.length){var f=h[0];h=h[1];var p=f.split("_");s=2<=p.length&&p[1]=="type"?s+(f+"="+h+"&"):s+(f+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function n_e(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Sf(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+i_e(t,n)+(r?" "+r:"")})}function r_e(t,e){t.info(function(){return"TIMEOUT: "+e})}Db.prototype.info=function(){};function i_e(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return Ek(n)}catch{return e}}var Ll={},m5=null;function Ab(){return m5=m5||new Jn}Ll.Ta="serverreachability";function B5(t){Dr.call(this,Ll.Ta,t)}Zn(B5,Dr);function Ly(t){let e=Ab();pr(e,new B5(e))}Ll.STAT_EVENT="statevent";function q5(t,e){Dr.call(this,Ll.STAT_EVENT,t),this.stat=e}Zn(q5,Dr);function Hr(t){let e=Ab();pr(e,new q5(e,t))}Ll.Ua="timingevent";function H5(t,e){Dr.call(this,Ll.Ua,t),this.size=e}Zn(H5,Dr);function qy(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Fe.setTimeout(function(){t()},e)}var xb={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$5={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ck(){}Ck.prototype.h=null;function y5(t){return t.h||(t.h=t.i())}function z5(){}var Hy={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Sk(){Dr.call(this,"d")}Zn(Sk,Dr);function Dk(){Dr.call(this,"c")}Zn(Dk,Dr);var sk;function Nb(){}Zn(Nb,Ck);Nb.prototype.g=function(){return new XMLHttpRequest};Nb.prototype.i=function(){return{}};sk=new Nb;function $y(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Fy(this),this.P=o_e,t=X1?125:void 0,this.V=new Sb(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new G5}function G5(){this.i=null,this.g="",this.h=!1}var o_e=45e3,W5={},ak={};ne=$y.prototype;ne.setTimeout=function(t){this.P=t};function uk(t,e,n){t.L=1,t.A=Mb(Ma(e)),t.u=n,t.S=!0,K5(t,null)}function K5(t,e){t.G=Date.now(),zy(t),t.B=Ma(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),nK(n.i,"t",r),t.o=0,n=t.l.J,t.h=new G5,t.g=bK(t.l,n?e:null,!t.u),0<t.O&&(t.M=new ok(Sr(t.Pa,t,t.g),t.O)),U5(t.U,t.g,"readystatechange",t.nb),e=t.I?x5(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Ly(),t_e(t.j,t.v,t.B,t.m,t.W,t.u)}ne.nb=function(t){t=t.target;let e=this.M;e&&Ps(t)==3?e.l():this.Pa(t)};ne.Pa=function(t){try{if(t==this.g)e:{let f=Ps(this.g);var e=this.g.Ia();let p=this.g.da();if(!(3>f)&&(f!=3||X1||this.g&&(this.h.h||this.g.ja()||E5(this.g)))){this.J||f!=4||e==7||(e==8||0>=p?Ly(3):Ly(2)),Rb(this);var n=this.g.da();this.ca=n;t:if(Q5(this)){var r=E5(this.g);t="";var i=r.length,o=Ps(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kl(this),Ry(this);var s="";break t}this.h.i=new Fe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,n_e(this.j,this.v,this.B,this.m,this.W,f,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!My(u)){var h=u;break t}}h=null}if(n=h)Sf(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ck(this,n);else{this.i=!1,this.s=3,Hr(12),kl(this),Ry(this);break e}}this.S?(Y5(this,f,s),X1&&this.i&&f==3&&(U5(this.U,this.V,"tick",this.mb),this.V.start())):(Sf(this.j,this.m,s,null),ck(this,s)),f==4&&kl(this),this.i&&!this.J&&(f==4?_K(this.l,this):(this.i=!1,zy(this)))}else S_e(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,Hr(12)):(this.s=0,Hr(13)),kl(this),Ry(this)}}}catch{}finally{}};function Q5(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function Y5(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=s_e(t,n),i==ak){e==4&&(t.s=4,Hr(14),r=!1),Sf(t.j,t.m,null,"[Incomplete Response]");break}else if(i==W5){t.s=4,Hr(15),Sf(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Sf(t.j,t.m,i,null),ck(t,i);Q5(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Hr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Pk(e),e.M=!0,Hr(11))):(Sf(t.j,t.m,n,"[Invalid Chunked Response]"),kl(t),Ry(t))}ne.mb=function(){if(this.g){var t=Ps(this.g),e=this.g.ja();this.o<e.length&&(Rb(this),Y5(this,t,e),this.i&&t!=4&&zy(this))}};function s_e(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?ak:(n=Number(e.substring(n,r)),isNaN(n)?W5:(r+=1,r+n>e.length?ak:(e=e.slice(r,r+n),t.o=r+n,e)))}ne.cancel=function(){this.J=!0,kl(this)};function zy(t){t.Y=Date.now()+t.P,X5(t,t.P)}function X5(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=qy(Sr(t.lb,t),e)}function Rb(t){t.C&&(Fe.clearTimeout(t.C),t.C=null)}ne.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(r_e(this.j,this.B),this.L!=2&&(Ly(),Hr(17)),kl(this),this.s=2,Ry(this)):X5(this,this.Y-t)};function Ry(t){t.l.H==0||t.J||_K(t.l,t)}function kl(t){Rb(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,bk(t.V),j5(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function ck(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||lk(n.i,t))){if(!t.K&&lk(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)vb(n),Ob(n);else break e;Mk(n),Hr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=qy(Sr(n.ib,n),6e3));if(1>=oK(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ol(n,11)}else if((t.K||n.g==t)&&vb(n),!My(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let h=i[e];if(n.V=h[0],h=h[1],n.H==2)if(h[0]=="c"){n.K=h[1],n.pa=h[2];let f=h[3];f!=null&&(n.ra=f,n.l.info("VER="+n.ra));let p=h[4];p!=null&&(n.Ga=p,n.l.info("SVER="+n.Ga));let m=h[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let v=t.g;if(v){let _=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var o=r.i;o.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Ak(o,o.h),o.h=null))}if(r.F){let E=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.Da=E,Ht(r.I,r.F,E))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=IK(r,r.J?r.pa:null,r.Y),s.K){sK(r.i,s);var u=s,c=r.L;c&&u.setTimeout(c),u.C&&(Rb(u),zy(u)),r.g=s}else yK(r);0<n.j.length&&Fb(n)}else h[0]!="stop"&&h[0]!="close"||Ol(n,7);else n.H==3&&(h[0]=="stop"||h[0]=="close"?h[0]=="stop"?Ol(n,7):Rk(n):h[0]!="noop"&&n.h&&n.h.Aa(h),n.A=0)}}Ly(4)}catch{}}function a_e(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Ib(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function u_e(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Ib(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function J5(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ib(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=u_e(t),r=a_e(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var Z5=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function c_e(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Fl(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Fl){this.h=t.h,mb(this,t.j),this.s=t.s,this.g=t.g,yb(this,t.m),this.l=t.l;var e=t.i,n=new Vy;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),v5(this,n),this.o=t.o}else t&&(e=String(t).match(Z5))?(this.h=!1,mb(this,e[1]||"",!0),this.s=xy(e[2]||""),this.g=xy(e[3]||"",!0),yb(this,e[4]),this.l=xy(e[5]||"",!0),v5(this,e[6]||"",!0),this.o=xy(e[7]||"")):(this.h=!1,this.i=new Vy(null,this.h))}Fl.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ny(e,_5,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ny(e,_5,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ny(n,n.charAt(0)=="/"?d_e:h_e,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ny(n,p_e)),t.join("")};function Ma(t){return new Fl(t)}function mb(t,e,n){t.j=n?xy(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function yb(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function v5(t,e,n){e instanceof Vy?(t.i=e,g_e(t.i,t.h)):(n||(e=Ny(e,f_e)),t.i=new Vy(e,t.h))}function Ht(t,e,n){t.i.set(e,n)}function Mb(t){return Ht(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function xy(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ny(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,l_e),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function l_e(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var _5=/[#\/\?@]/g,h_e=/[#\?:]/g,d_e=/[#\?]/g,f_e=/[#\?@]/g,p_e=/#/g;function Vy(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ku(t){t.g||(t.g=new Map,t.h=0,t.i&&c_e(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ne=Vy.prototype;ne.add=function(t,e){ku(this),this.i=null,t=xf(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function eK(t,e){ku(t),e=xf(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function tK(t,e){return ku(t),e=xf(t,e),t.g.has(e)}ne.forEach=function(t,e){ku(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};ne.ta=function(){ku(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};ne.Z=function(t){ku(this);let e=[];if(typeof t=="string")tK(this,t)&&(e=e.concat(this.g.get(xf(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ne.set=function(t,e){return ku(this),this.i=null,t=xf(this,t),tK(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ne.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function nK(t,e,n){eK(t,e),0<n.length&&(t.i=null,t.g.set(xf(t,e),pk(n)),t.h+=n.length)}ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function xf(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function g_e(t,e){e&&!t.j&&(ku(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(eK(this,r),nK(this,i,n))},t)),t.j=e}var m_e=class{constructor(t,e){this.g=t,this.map=e}};function rK(t){this.l=t||y_e,Fe.PerformanceNavigationTiming?(t=Fe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Fe.g&&Fe.g.Ka&&Fe.g.Ka()&&Fe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var y_e=10;function iK(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function oK(t){return t.h?1:t.g?t.g.size:0}function lk(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ak(t,e){t.g?t.g.add(e):t.h=e}function sK(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}rK.prototype.cancel=function(){if(this.i=aK(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function aK(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return pk(t.i)}var v_e=class{stringify(t){return Fe.JSON.stringify(t,void 0)}parse(t){return Fe.JSON.parse(t,void 0)}};function __e(){this.g=new v_e}function w_e(t,e,n){let r=n||"";try{J5(t,function(i,o){let s=i;jy(i)&&(s=Ek(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function E_e(t,e){let n=new Db;if(Fe.Image){let r=new Image;r.onload=cb(pb,n,r,"TestLoadImage: loaded",!0,e),r.onerror=cb(pb,n,r,"TestLoadImage: error",!1,e),r.onabort=cb(pb,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=cb(pb,n,r,"TestLoadImage: timeout",!1,e),Fe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function pb(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Gy(t){this.l=t.ec||null,this.j=t.ob||!1}Zn(Gy,Ck);Gy.prototype.g=function(){return new Pb(this.l,this.j)};Gy.prototype.i=function(t){return function(){return t}}({});function Pb(t,e){Jn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=xk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zn(Pb,Jn);var xk=0;ne=Pb.prototype;ne.open=function(t,e){if(this.readyState!=xk)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Uy(this)};ne.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Fe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wy(this)),this.readyState=xk};ne.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Uy(this)),this.g&&(this.readyState=3,Uy(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Fe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uK(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function uK(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ne.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Wy(this):Uy(this),this.readyState==3&&uK(this)}};ne.Za=function(t){this.g&&(this.response=this.responseText=t,Wy(this))};ne.Ya=function(t){this.g&&(this.response=t,Wy(this))};ne.ka=function(){this.g&&Wy(this)};function Wy(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Uy(t)}ne.setRequestHeader=function(t,e){this.v.append(t,e)};ne.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ne.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Uy(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Pb.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var I_e=Fe.JSON.parse;function hn(t){Jn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=cK,this.L=this.M=!1}Zn(hn,Jn);var cK="",b_e=/^https?$/i,T_e=["POST","PUT"];ne=hn.prototype;ne.Oa=function(t){this.M=t};ne.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():sk.g(),this.C=this.u?y5(this.u):y5(sk),this.g.onreadystatechange=Sr(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){w5(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=Fe.FormData&&t instanceof Fe.FormData,!(0<=C5(T_e,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{dK(this),0<this.B&&((this.L=C_e(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Sr(this.ua,this)):this.A=Tk(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){w5(this,o)}};function C_e(t){return Af&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ne.ua=function(){typeof fk<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pr(this,"timeout"),this.abort(8))};function w5(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,lK(t),kb(t)}function lK(t){t.F||(t.F=!0,pr(t,"complete"),pr(t,"error"))}ne.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,pr(this,"complete"),pr(this,"abort"),kb(this))};ne.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kb(this,!0)),hn.$.N.call(this)};ne.La=function(){this.s||(this.G||this.v||this.l?hK(this):this.kb())};ne.kb=function(){hK(this)};function hK(t){if(t.h&&typeof fk<"u"&&(!t.C[1]||Ps(t)!=4||t.da()!=2)){if(t.v&&Ps(t)==4)Tk(t.La,0,t);else if(pr(t,"readystatechange"),Ps(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(Z5)[1]||null;!i&&Fe.self&&Fe.self.location&&(i=Fe.self.location.protocol.slice(0,-1)),r=!b_e.test(i?i.toLowerCase():"")}n=r}if(n)pr(t,"complete"),pr(t,"success");else{t.m=6;try{var o=2<Ps(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",lK(t)}}finally{kb(t)}}}}function kb(t,e){if(t.g){dK(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||pr(t,"ready");try{n.onreadystatechange=r}catch{}}}function dK(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Fe.clearTimeout(t.A),t.A=null)}ne.isActive=function(){return!!this.g};function Ps(t){return t.g?t.g.readyState:0}ne.da=function(){try{return 2<Ps(this)?this.g.status:-1}catch{return-1}};ne.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ne.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),I_e(e)}};function E5(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case cK:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function S_e(t){let e={};t=(t.g&&2<=Ps(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(My(t[r]))continue;var n=Jve(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}Kve(e,function(r){return r.join(", ")})}ne.Ia=function(){return this.m};ne.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function fK(t){let e="";return mk(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Nk(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=fK(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ht(t,e,n))}function Dy(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function pK(t){this.Ga=0,this.j=[],this.l=new Db,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Dy("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Dy("baseRetryDelayMs",5e3,t),this.hb=Dy("retryDelaySeedMs",1e4,t),this.eb=Dy("forwardChannelMaxRetries",2,t),this.xa=Dy("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new rK(t&&t.concurrentRequestLimit),this.Ja=new __e,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ne=pK.prototype;ne.ra=8;ne.H=1;function Rk(t){if(gK(t),t.H==3){var e=t.W++,n=Ma(t.I);if(Ht(n,"SID",t.K),Ht(n,"RID",e),Ht(n,"TYPE","terminate"),Ky(t,n),e=new $y(t,t.l,e),e.L=2,e.A=Mb(Ma(n)),n=!1,Fe.navigator&&Fe.navigator.sendBeacon)try{n=Fe.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Fe.Image&&(new Image().src=e.A,n=!0),n||(e.g=bK(e.l,null),e.g.ha(e.A)),e.G=Date.now(),zy(e)}EK(t)}function Ob(t){t.g&&(Pk(t),t.g.cancel(),t.g=null)}function gK(t){Ob(t),t.u&&(Fe.clearTimeout(t.u),t.u=null),vb(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Fe.clearTimeout(t.m),t.m=null)}function Fb(t){if(!iK(t.i)&&!t.m){t.m=!0;var e=t.Na;ky||L5(),Oy||(ky(),Oy=!0),Ik.add(e,t),t.C=0}}function D_e(t,e){return oK(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=qy(Sr(t.Na,t,e),wK(t,t.C)),t.C++,!0)}ne.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new $y(this,this.l,t),o=this.s;if(this.U&&(o?(o=x5(o),N5(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=mK(this,i,e),n=Ma(this.I),Ht(n,"RID",t),Ht(n,"CVER",22),this.F&&Ht(n,"X-HTTP-Session-Id",this.F),Ky(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(fK(o)))+"&"+e:this.o&&Nk(n,this.o,o)),Ak(this.i,i),this.bb&&Ht(n,"TYPE","init"),this.P?(Ht(n,"$req",e),Ht(n,"SID","null"),i.aa=!0,uk(i,n,null)):uk(i,n,e),this.H=2}}else this.H==3&&(t?I5(this,t):this.j.length==0||iK(this.i)||I5(this))};function I5(t,e){var n;e?n=e.m:n=t.W++;let r=Ma(t.I);Ht(r,"SID",t.K),Ht(r,"RID",n),Ht(r,"AID",t.V),Ky(t,r),t.o&&t.s&&Nk(r,t.o,t.s),n=new $y(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=mK(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Ak(t.i,n),uk(n,r,e)}function Ky(t,e){t.na&&mk(t.na,function(n,r){Ht(e,r,n)}),t.h&&J5({},function(n,r){Ht(e,r,n)})}function mK(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Sr(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let u=!0;for(let c=0;c<n;c++){let h=i[c].g,f=i[c].map;if(h-=o,0>h)o=Math.max(0,i[c].g-100),u=!1;else try{w_e(f,s,"req"+h+"_")}catch{r&&r(f)}}if(u){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function yK(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ky||L5(),Oy||(ky(),Oy=!0),Ik.add(e,t),t.A=0}}function Mk(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=qy(Sr(t.Ma,t),wK(t,t.A)),t.A++,!0)}ne.Ma=function(){if(this.u=null,vK(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=qy(Sr(this.jb,this),t)}};ne.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Hr(10),Ob(this),vK(this))};function Pk(t){t.B!=null&&(Fe.clearTimeout(t.B),t.B=null)}function vK(t){t.g=new $y(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ma(t.wa);Ht(e,"RID","rpc"),Ht(e,"SID",t.K),Ht(e,"AID",t.V),Ht(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ht(e,"TO",t.qa),Ht(e,"TYPE","xmlhttp"),Ky(t,e),t.o&&t.s&&Nk(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Mb(Ma(e)),n.u=null,n.S=!0,K5(n,t)}ne.ib=function(){this.v!=null&&(this.v=null,Ob(this),Mk(this),Hr(19))};function vb(t){t.v!=null&&(Fe.clearTimeout(t.v),t.v=null)}function _K(t,e){var n=null;if(t.g==e){vb(t),Pk(t),t.g=null;var r=2}else if(lk(t.i,e))n=e.F,sK(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Ab(),pr(r,new H5(r,n)),Fb(t)}else yK(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&D_e(t,e)||r==2&&Mk(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ol(t,5);break;case 4:Ol(t,10);break;case 3:Ol(t,6);break;default:Ol(t,2)}}}function wK(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ol(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Sr(t.pb,t);n||(n=new Fl("//www.google.com/images/cleardot.gif"),Fe.location&&Fe.location.protocol=="http"||mb(n,"https"),Mb(n)),E_e(n.toString(),r)}else Hr(2);t.H=0,t.h&&t.h.za(e),EK(t),gK(t)}ne.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Hr(2)):(this.l.info("Failed to ping google.com"),Hr(1))};function EK(t){if(t.H=0,t.ma=[],t.h){let e=aK(t.i);(e.length!=0||t.j.length!=0)&&(f5(t.ma,e),f5(t.ma,t.j),t.i.i.length=0,pk(t.j),t.j.length=0),t.h.ya()}}function IK(t,e,n){var r=n instanceof Fl?Ma(n):new Fl(n);if(r.g!="")e&&(r.g=e+"."+r.g),yb(r,r.m);else{var i=Fe.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Fl(null);r&&mb(o,r),e&&(o.g=e),i&&yb(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&Ht(r,n,e),Ht(r,"VER",t.ra),Ky(t,r),r}function bK(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new hn(new Gy({ob:n})):new hn(t.va),e.Oa(t.J),e}ne.isActive=function(){return!!this.h&&this.h.isActive(this)};function TK(){}ne=TK.prototype;ne.Ba=function(){};ne.Aa=function(){};ne.za=function(){};ne.ya=function(){};ne.isActive=function(){return!0};ne.Va=function(){};function _b(){if(Af&&!(10<=Number($ve)))throw Error("Environmental error: no available transport.")}_b.prototype.g=function(t,e){return new Ri(t,e)};function Ri(t,e){Jn.call(this),this.g=new pK(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!My(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!My(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Nf(this)}Zn(Ri,Jn);Ri.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Hr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=IK(t,null,t.Y),Fb(t)};Ri.prototype.close=function(){Rk(this.g)};Ri.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ek(t),t=n);e.j.push(new m_e(e.fb++,t)),e.H==3&&Fb(e)};Ri.prototype.N=function(){this.g.h=null,delete this.j,Rk(this.g),delete this.g,Ri.$.N.call(this)};function CK(t){Sk.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Zn(CK,Sk);function SK(){Dk.call(this),this.status=1}Zn(SK,Dk);function Nf(t){this.g=t}Zn(Nf,TK);Nf.prototype.Ba=function(){pr(this.g,"a")};Nf.prototype.Aa=function(t){pr(this.g,new CK(t))};Nf.prototype.za=function(t){pr(this.g,new SK)};Nf.prototype.ya=function(){pr(this.g,"b")};function A_e(){this.blockSize=-1}function Uo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Zn(Uo,A_e);Uo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Y1(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}Uo.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)Y1(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){Y1(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){Y1(this,r),i=0;break}}this.h=i,this.i+=e};Uo.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function St(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var x_e={};function kk(t){return-128<=t&&128>t?Bve(t,function(e){return new St([e|0],0>e?-1:0)}):new St([t|0],0>t?-1:0)}function ks(t){if(isNaN(t)||!isFinite(t))return Df;if(0>t)return fr(ks(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=hk;return new St(e,0)}function DK(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return fr(DK(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ks(Math.pow(e,8)),r=Df,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=ks(Math.pow(e,o)),r=r.R(o).add(ks(s))):(r=r.R(n),r=r.add(ks(s)))}return r}var hk=4294967296,Df=kk(0),dk=kk(1),b5=kk(16777216);ne=St.prototype;ne.ea=function(){if(io(this))return-fr(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:hk+r)*e,e*=hk}return t};ne.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ra(this))return"0";if(io(this))return"-"+fr(this).toString(t);for(var e=ks(Math.pow(t,6)),n=this,r="";;){var i=Eb(n,e).g;n=wb(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Ra(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};ne.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ra(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function io(t){return t.h==-1}ne.X=function(t){return t=wb(this,t),io(t)?-1:Ra(t)?0:1};function fr(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new St(n,~t.h).add(dk)}ne.abs=function(){return io(this)?fr(this):this};ne.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new St(n,n[n.length-1]&-2147483648?-1:0)};function wb(t,e){return t.add(fr(e))}ne.R=function(t){if(Ra(this)||Ra(t))return Df;if(io(this))return io(t)?fr(this).R(fr(t)):fr(fr(this).R(t));if(io(t))return fr(this.R(fr(t)));if(0>this.X(b5)&&0>t.X(b5))return ks(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,u=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=s*c,gb(n,2*r+2*i),n[2*r+2*i+1]+=o*c,gb(n,2*r+2*i+1),n[2*r+2*i+1]+=s*u,gb(n,2*r+2*i+1),n[2*r+2*i+2]+=o*u,gb(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new St(n,0)};function gb(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ay(t,e){this.g=t,this.h=e}function Eb(t,e){if(Ra(e))throw Error("division by zero");if(Ra(t))return new Ay(Df,Df);if(io(t))return e=Eb(fr(t),e),new Ay(fr(e.g),fr(e.h));if(io(e))return e=Eb(t,fr(e)),new Ay(fr(e.g),e.h);if(30<t.g.length){if(io(t)||io(e))throw Error("slowDivide_ only works with positive integers.");for(var n=dk,r=e;0>=r.X(t);)n=T5(n),r=T5(r);var i=Cf(n,1),o=Cf(r,1);for(r=Cf(r,2),n=Cf(n,2);!Ra(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=Cf(r,1),n=Cf(n,1)}return e=wb(t,i.R(e)),new Ay(i,e)}for(i=Df;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=ks(n),s=o.R(e);io(s)||0<s.X(t);)n-=r,o=ks(n),s=o.R(e);Ra(o)&&(o=dk),i=i.add(o),t=wb(t,s)}return new Ay(i,t)}ne.gb=function(t){return Eb(this,t).h};ne.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new St(n,this.h&t.h)};ne.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new St(n,this.h|t.h)};ne.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new St(n,this.h^t.h)};function T5(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new St(n,t.h)}function Cf(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new St(i,t.h)}_b.prototype.createWebChannel=_b.prototype.g;Ri.prototype.send=Ri.prototype.u;Ri.prototype.open=Ri.prototype.m;Ri.prototype.close=Ri.prototype.close;xb.NO_ERROR=0;xb.TIMEOUT=8;xb.HTTP_ERROR=6;$5.COMPLETE="complete";z5.EventType=Hy;Hy.OPEN="a";Hy.CLOSE="b";Hy.ERROR="c";Hy.MESSAGE="d";Jn.prototype.listen=Jn.prototype.O;hn.prototype.listenOnce=hn.prototype.P;hn.prototype.getLastError=hn.prototype.Sa;hn.prototype.getLastErrorCode=hn.prototype.Ia;hn.prototype.getStatus=hn.prototype.da;hn.prototype.getResponseJson=hn.prototype.Wa;hn.prototype.getResponseText=hn.prototype.ja;hn.prototype.send=hn.prototype.ha;hn.prototype.setWithCredentials=hn.prototype.Oa;Uo.prototype.digest=Uo.prototype.l;Uo.prototype.reset=Uo.prototype.reset;Uo.prototype.update=Uo.prototype.j;St.prototype.add=St.prototype.add;St.prototype.multiply=St.prototype.R;St.prototype.modulo=St.prototype.gb;St.prototype.compare=St.prototype.X;St.prototype.toNumber=St.prototype.ea;St.prototype.toString=St.prototype.toString;St.prototype.getBits=St.prototype.D;St.fromNumber=ks;St.fromString=DK;var AK=jo.createWebChannelTransport=function(){return new _b},xK=jo.getStatEventTarget=function(){return Ab()},Lb=jo.ErrorCode=xb,NK=jo.EventType=$5,RK=jo.Event=Ll,Ok=jo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Pje=jo.FetchXmlHttpFactory=Gy,Qy=jo.WebChannel=z5,MK=jo.XhrIo=hn,PK=jo.Md5=Uo,Vl=jo.Integer=St;var kK="@firebase/firestore";var Pn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");var sp="10.7.0";var Bu=new lu("@firebase/firestore");function Of(){return Bu.logLevel}function k8(t){Bu.setLogLevel(t)}function q(t,...e){if(Bu.logLevel<=Zi.DEBUG){let n=e.map(FF);Bu.debug(`Firestore (${sp}): ${t}`,...n)}}function En(t,...e){if(Bu.logLevel<=Zi.ERROR){let n=e.map(FF);Bu.error(`Firestore (${sp}): ${t}`,...n)}}function so(t,...e){if(Bu.logLevel<=Zi.WARN){let n=e.map(FF);Bu.warn(`Firestore (${sp}): ${t}`,...n)}}function FF(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ue(t="Unexpected state"){let e=`FIRESTORE (${sp}) INTERNAL ASSERTION FAILED: `+t;throw En(e),new Error(e)}function ve(t,e){t||ue()}function O8(t,e){t||ue()}function re(t,e){return t}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends O0{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Kb=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jk=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Pn.UNAUTHENTICATED))}shutdown(){}},Bk=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},qk=class{constructor(e){this.t=e,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>F(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},u=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?u(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new Kb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new Pn(e)}},Hk=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},$k=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Hk(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},zk=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Gk=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new zk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function N_e(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Qb=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=N_e(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function Ue(t,e){return t<e?-1:t>e?1:0}function $f(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function F8(t){return t+"\0"}var rn=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new j(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Ee=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new rn(0,0))}static max(){return new t(new rn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Yb=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},gt=class t extends Yb{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},R_e=/^[_a-zA-Z][_a-zA-Z0-9]*$/,In=class t extends Yb{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return R_e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new j(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new j(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new j(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(s=!s,i++):u!=="."||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new j(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var te=class t{constructor(e){this.path=e}static fromPath(e){return new t(gt.fromString(e))}static fromName(e){return new t(gt.fromString(e).popFirst(5))}static empty(){return new t(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new gt(e.slice()))}};var zf=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function Wk(t){return t.fields.find(e=>e.kind===2)}function jl(t){return t.fields.filter(e=>e.kind!==2)}zf.UNKNOWN_ID=-1;var Bf=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var av=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,ao.min())}};function L8(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(r===1e9?new rn(n+1,0):new rn(n,r));return new ao(i,te.empty(),e)}function V8(t){return new ao(t.readTime,t.key,-1)}var ao=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Ee.min(),te.empty(),-1)}static max(){return new t(Ee.max(),te.empty(),-1)}};function LF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Ue(t.largestBatchId,e.largestBatchId))}var U8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Xb=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ju(t){return F(this,null,function*(){if(t.code!==O.FAILED_PRECONDITION||t.message!==U8)throw t;q("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(u=>{++i,u.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),u=0;for(let c=0;c<o;c++){let h=c;n(e[h]).next(f=>{s[h]=f,++u,u===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var Jb=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new kn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Gl(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=VF(r.target.error);this.V.reject(new Gl(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Gl(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(q("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Qk(n)}},qu=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(P0())===12.2&&En("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return q("SimpleDb","Removing database:",e),Bl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!k0())return!1;if(t.C())return!0;let e=P0(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return F(this,null,function*(){return this.db||(q("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new Gl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new j(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new j(O.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Gl(e,s))},i.onupgradeneeded=o=>{q("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{q("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return F(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let u=Jb.open(this.db,e,o?"readonly":"readwrite",r),c=i(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),P.reject(h))).toPromise();return c.catch(()=>{}),yield u.m,c}catch(u){let c=u,h=c.name!=="FirebaseError"&&s<3;if(q("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),this.close(),!h)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Kk=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Bl(this.k.delete())}},Gl=class extends j{constructor(e,n){super(O.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Zu(t){return t.name==="IndexedDbTransactionError"}var Qk=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(q("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(q("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bl(r)}add(e){return q("SimpleDb","ADD",this.store.name,e,e),Bl(this.store.add(e))}get(e){return Bl(this.store.get(e)).next(n=>(n===void 0&&(n=null),q("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return q("SimpleDb","DELETE",this.store.name,e),Bl(this.store.delete(e))}count(){return q("SimpleDb","COUNT",this.store.name),Bl(this.store.count())}W(e,n){let r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){let i=this.cursor(r),o=[];return this.G(i,(s,u)=>{o.push(u)}).next(()=>o)}{let i=this.store.getAll(r.range);return new P((o,s)=>{i.onerror=u=>{s(u.target.error)},i.onsuccess=u=>{o(u.target.result)}})}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new P((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){q("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,u)=>u.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new P((r,i)=>{n.onerror=o=>{let s=VF(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(u=>{u?s.continue():r()}):r()}})}G(e,n){let r=[];return new P((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let u=s.target.result;if(!u)return void i();let c=new Kk(u),h=n(u.primaryKey,u.value,c);if(h instanceof P){let f=h.catch(p=>(c.done(),P.reject(p)));r.push(f)}c.isDone?i():c.$===null?u.continue():u.continue(c.$)}}).next(()=>P.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Bl(t){return new P((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=VF(r.target.error);n(i)}})}var OK=!1;function VF(t){let e=qu.S(P0());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return OK||(OK=!0,setTimeout(()=>{throw r},0)),r}}return t}var Yk=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){q("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>F(this,null,function*(){this.task=null;try{q("IndexBackiller",`Documents written: ${yield this.X.te()}`)}catch(n){Zu(n)?q("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):yield Ju(n)}yield this.ee(6e4)}))}},Xk=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return F(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,o=!0;return P.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return q("IndexBackiller",`Processing collection: ${s}`),this.re(e,s,i).next(u=>{i-=u,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(u=>(q("IndexBackiller",`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,n,u))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=V8(o);LF(s,r)>0&&(r=s)}),new ao(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Mi=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Rv(t){return t==null}function uv(t){return t===0&&1/t==-1/0}function j8(t){return typeof t=="number"&&Number.isInteger(t)&&!uv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function $r(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=FK(e)),e=M_e(t.get(n),e);return FK(e)}function M_e(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function FK(t){return t+""}function Os(t){let e=t.length;if(ve(e>=2),e===2)return ve(t.charAt(0)===""&&t.charAt(1)===""),gt.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&ue(),t.charAt(s+1)){case"":let u=t.substring(o,s),c;i.length===0?c=u:(i+=u,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ue()}o=s+2}return new gt(r)}var LK=["userId","batchId"];function qb(t,e){return[t,$r(e)]}function B8(t,e,n){return[t,$r(e),n]}var P_e={},k_e=["prefixPath","collectionGroup","readTime","documentId"],O_e=["prefixPath","collectionGroup","documentId"],F_e=["collectionGroup","readTime","prefixPath","documentId"],L_e=["canonicalId","targetId"],V_e=["targetId","path"],U_e=["path","targetId"],j_e=["collectionId","parent"],B_e=["indexId","uid"],q_e=["uid","sequenceNumber"],H_e=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$_e=["indexId","uid","orderedDocumentKey"],z_e=["userId","collectionPath","documentId"],G_e=["userId","collectionPath","largestBatchId"],W_e=["userId","collectionGroup","largestBatchId"],q8=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],K_e=[...q8,"documentOverlays"],H8=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$8=H8,Q_e=[...$8,"indexConfiguration","indexState","indexEntries"];var cv=class extends Xb{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function tr(t,e){let n=re(t);return qu.M(n.ae,e)}function VK(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ih(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function z8(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var $t=class t{constructor(e,n){this.comparator=e,this.root=n||Ls.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ls.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ls.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jf(this.root,e,this.comparator,!1)}getReverseIterator(){return new jf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jf(this.root,e,this.comparator,!0)}},jf=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ls=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r!=null?r:t.RED,this.left=i!=null?i:t.EMPTY,this.right=o!=null?o:t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,o!=null?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();let e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}};Ls.EMPTY=null,Ls.RED=!0,Ls.BLACK=!1;Ls.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Ls(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ot=class t{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zb(this.data.getIterator())}getIteratorFrom(e){return new Zb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Zb=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Rf(t){return t.hasNext()?t.getNext():void 0}var Pi=class t{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ot(In.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $f(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var eT=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function G8(){return typeof atob<"u"}var er=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new eT("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};er.EMPTY_BYTE_STRING=new er("");var Y_e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hu(t){if(ve(!!t),typeof t=="string"){let e=0,n=Y_e.exec(t);if(ve(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dn(t.seconds),nanos:dn(t.nanos)}}function dn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $u(t){return typeof t=="string"?er.fromBase64String(t):er.fromUint8Array(t)}function $T(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function UF(t){let e=t.mapValue.fields.__previous_value__;return $T(e)?UF(e):e}function lv(t){let e=Hu(t.mapValue.fields.__local_write_time__.timestampValue);return new rn(e.seconds,e.nanos)}var Jk=class{constructor(e,n,r,i,o,s,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}},zu=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Uu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hb={nullValue:"NULL_VALUE"};function Wl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$T(t)?4:W8(t)?9007199254740991:10:ue()}function js(t,e){if(t===e)return!0;let n=Wl(t);if(n!==Wl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lv(t).isEqual(lv(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Hu(i.timestampValue),u=Hu(o.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return $u(i.bytesValue).isEqual($u(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return dn(i.geoPointValue.latitude)===dn(o.geoPointValue.latitude)&&dn(i.geoPointValue.longitude)===dn(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return dn(i.integerValue)===dn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=dn(i.doubleValue),u=dn(o.doubleValue);return s===u?uv(s)===uv(u):isNaN(s)&&isNaN(u)}return!1}(t,e);case 9:return $f(t.arrayValue.values||[],e.arrayValue.values||[],js);case 10:return function(i,o){let s=i.mapValue.fields||{},u=o.mapValue.fields||{};if(VK(s)!==VK(u))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(u[c]===void 0||!js(s[c],u[c])))return!1;return!0}(t,e);default:return ue()}}function hv(t,e){return(t.values||[]).find(n=>js(n,e))!==void 0}function Gu(t,e){if(t===e)return 0;let n=Wl(t),r=Wl(e);if(n!==r)return Ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(t.booleanValue,e.booleanValue);case 2:return function(o,s){let u=dn(o.integerValue||o.doubleValue),c=dn(s.integerValue||s.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return UK(t.timestampValue,e.timestampValue);case 4:return UK(lv(t),lv(e));case 5:return Ue(t.stringValue,e.stringValue);case 6:return function(o,s){let u=$u(o),c=$u(s);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let u=o.split("/"),c=s.split("/");for(let h=0;h<u.length&&h<c.length;h++){let f=Ue(u[h],c[h]);if(f!==0)return f}return Ue(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let u=Ue(dn(o.latitude),dn(s.latitude));return u!==0?u:Ue(dn(o.longitude),dn(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let u=o.values||[],c=s.values||[];for(let h=0;h<u.length&&h<c.length;++h){let f=Gu(u[h],c[h]);if(f)return f}return Ue(u.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Uu.mapValue&&s===Uu.mapValue)return 0;if(o===Uu.mapValue)return 1;if(s===Uu.mapValue)return-1;let u=o.fields||{},c=Object.keys(u),h=s.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){let m=Ue(c[p],f[p]);if(m!==0)return m;let v=Gu(u[c[p]],h[f[p]]);if(v!==0)return v}return Ue(c.length,f.length)}(t.mapValue,e.mapValue);default:throw ue()}}function UK(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ue(t,e);let n=Hu(t),r=Hu(e),i=Ue(n.seconds,r.seconds);return i!==0?i:Ue(n.nanos,r.nanos)}function Gf(t){return Zk(t)}function Zk(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Hu(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $u(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Zk(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Zk(n.fields[s])}`;return i+"}"}(t.mapValue):ue()}function Kl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function eO(t){return!!t&&"integerValue"in t}function dv(t){return!!t&&"arrayValue"in t}function jK(t){return!!t&&"nullValue"in t}function BK(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $b(t){return!!t&&"mapValue"in t}function nv(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ih(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=nv(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nv(t.arrayValue.values[n]);return e}return Object.assign({},t)}function W8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function X_e(t){return"nullValue"in t?Hb:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Kl(zu.empty(),te.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ue()}function J_e(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Kl(zu.empty(),te.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Uu:ue()}function qK(t,e){let n=Gu(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function HK(t,e){let n=Gu(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var xr=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$b(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nv(n)}setAll(e){let n=In.emptyPath(),r={},i=[];e.forEach((s,u)=>{if(!n.isImmediateParentOf(u)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=u.popLast()}s?r[u.lastSegment()]=nv(s):i.push(u.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());$b(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return js(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];$b(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ih(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(nv(this.value))}};function K8(t){let e=[];return ih(t.fields,(n,r)=>{let i=new In([n]);if($b(r)){let o=K8(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Pi(e)}var On=class t{constructor(e,n,r,i,o,s,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=u}static newInvalidDocument(e){return new t(e,0,Ee.min(),Ee.min(),Ee.min(),xr.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Ee.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Ee.min(),Ee.min(),xr.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Ee.min(),Ee.min(),xr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Bs=class{constructor(e,n){this.position=e,this.inclusive=n}};function $K(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=te.comparator(te.fromName(s.referenceValue),n.key):r=Gu(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function zK(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!js(t.position[n],e.position[n]))return!1;return!0}var Ql=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Z_e(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var tT=class{},st=class t extends tT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new rO(e,n,r):n==="array-contains"?new sO(e,r):n==="in"?new nT(e,r):n==="not-in"?new aO(e,r):n==="array-contains-any"?new uO(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new iO(e,r):new oO(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gu(n,this.value)):n!==null&&Wl(this.value)===Wl(n)&&this.matchesComparison(Gu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Dt=class t extends tT{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Wf(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Wf(t){return t.op==="and"}function tO(t){return t.op==="or"}function jF(t){return Q8(t)&&Wf(t)}function Q8(t){for(let e of t.filters)if(e instanceof Dt)return!1;return!0}function nO(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Gf(t.value);if(jF(t))return t.filters.map(e=>nO(e)).join(",");{let e=t.filters.map(n=>nO(n)).join(",");return`${t.op}(${e})`}}function Y8(t,e){return t instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&js(r.value,i.value)}(t,e):t instanceof Dt?function(r,i){return i instanceof Dt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,u)=>o&&Y8(s,i.filters[u]),!0):!1}(t,e):void ue()}function X8(t,e){let n=t.filters.concat(e);return Dt.create(n,t.op)}function J8(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Gf(n.value)}`}(t):t instanceof Dt?function(n){return n.op.toString()+" {"+n.getFilters().map(J8).join(" ,")+"}"}(t):"Filter"}var rO=class extends st{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){let n=te.comparator(e.key,this.key);return this.matchesComparison(n)}},iO=class extends st{constructor(e,n){super(e,"in",n),this.keys=Z8("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},oO=class extends st{constructor(e,n){super(e,"not-in",n),this.keys=Z8("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Z8(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}var sO=class extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return dv(n)&&hv(n.arrayValue,this.value)}},nT=class extends st{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&hv(this.value.arrayValue,n)}},aO=class extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(hv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!hv(this.value.arrayValue,n)}},uO=class extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!dv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>hv(this.value.arrayValue,r))}};var cO=class{constructor(e,n=null,r=[],i=[],o=null,s=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=u,this.ce=null}};function lO(t,e=null,n=[],r=[],i=null,o=null,s=null){return new cO(t,e,n,r,i,o,s)}function Yl(t){let e=re(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nO(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Rv(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Gf(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Gf(r)).join(",")),e.ce=n}return e.ce}function Mv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Z_e(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Y8(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zK(t.startAt,e.startAt)&&zK(t.endAt,e.endAt)}function rT(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function iT(t,e){return t.filters.filter(n=>n instanceof st&&n.field.isEqual(e))}function GK(t,e,n){let r=Hb,i=!0;for(let o of iT(t,e)){let s=Hb,u=!0;switch(o.op){case"<":case"<=":s=X_e(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,u=!1;break;case"!=":case"not-in":s=Hb}qK({value:r,inclusive:i},{value:s,inclusive:u})<0&&(r=s,i=u)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];qK({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function WK(t,e,n){let r=Uu,i=!0;for(let o of iT(t,e)){let s=Uu,u=!0;switch(o.op){case">=":case">":s=J_e(o.value),u=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,u=!1;break;case"!=":case"not-in":s=Uu}HK({value:r,inclusive:i},{value:s,inclusive:u})>0&&(r=s,i=u)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];HK({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Bo=class{constructor(e,n=null,r=[],i=[],o=null,s="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=u,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function e9(t,e,n,r,i,o,s,u){return new Bo(t,e,n,r,i,o,s,u)}function ap(t){return new Bo(t)}function KK(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BF(t){return t.collectionGroup!==null}function qf(t){let e=re(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let u=new Ot(In.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Ql(o,r))}),n.has(In.keyField().canonicalString())||e.le.push(new Ql(In.keyField(),r))}return e.le}function zr(t){let e=re(t);return e.he||(e.he=ewe(e,qf(t))),e.he}function ewe(t,e){if(t.limitType==="F")return lO(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ql(i.field,o)});let n=t.endAt?new Bs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bs(t.startAt.position,t.startAt.inclusive):null;return lO(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hO(t,e){let n=t.filters.concat([e]);return new Bo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function oT(t,e,n){return new Bo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pv(t,e){return Mv(zr(t),zr(e))&&t.limitType===e.limitType}function t9(t){return`${Yl(zr(t))}|lt:${t.limitType}`}function Ff(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>J8(i)).join(", ")}]`),Rv(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Gf(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Gf(i)).join(",")),`Target(${r})`}(zr(t))}; limitType=${t.limitType})`}function kv(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of qf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,u,c){let h=$K(s,u,c);return s.inclusive?h<=0:h<0}(r.startAt,qf(r),i)||r.endAt&&!function(s,u,c){let h=$K(s,u,c);return s.inclusive?h>=0:h>0}(r.endAt,qf(r),i))}(t,e)}function n9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function r9(t){return(e,n)=>{let r=!1;for(let i of qf(t)){let o=twe(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function twe(t,e,n){let r=t.field.isKeyField()?te.comparator(e.key,n.key):function(o,s,u){let c=s.data.field(o),h=u.data.field(o);return c!==null&&h!==null?Gu(c,h):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}var qs=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ih(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return z8(this.inner)}size(){return this.innerSize}};var nwe=new $t(te.comparator);function yi(){return nwe}var i9=new $t(te.comparator);function ev(...t){let e=i9;for(let n of t)e=e.insert(n.key,n);return e}function o9(t){let e=i9;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fs(){return rv()}function s9(){return rv()}function rv(){return new qs(t=>t.toString(),(t,e)=>t.isEqual(e))}var rwe=new $t(te.comparator),iwe=new Ot(te.comparator);function qe(...t){let e=iwe;for(let n of t)e=e.add(n);return e}var owe=new Ot(Ue);function qF(){return owe}function a9(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uv(e)?"-0":e}}function u9(t){return{integerValue:""+t}}function c9(t,e){return j8(e)?u9(e):a9(t,e)}var Kf=class{constructor(){this._=void 0}};function swe(t,e,n){return t instanceof Wu?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&$T(o)&&(o=UF(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Oa?h9(t,e):t instanceof Fa?d9(t,e):function(i,o){let s=l9(i,o),u=QK(s)+QK(i.Ie);return eO(s)&&eO(i.Ie)?u9(u):a9(i.serializer,u)}(t,e)}function awe(t,e,n){return t instanceof Oa?h9(t,e):t instanceof Fa?d9(t,e):n}function l9(t,e){return t instanceof Ku?function(r){return eO(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Wu=class extends Kf{},Oa=class extends Kf{constructor(e){super(),this.elements=e}};function h9(t,e){let n=f9(e);for(let r of t.elements)n.some(i=>js(i,r))||n.push(r);return{arrayValue:{values:n}}}var Fa=class extends Kf{constructor(e){super(),this.elements=e}};function d9(t,e){let n=f9(e);for(let r of t.elements)n=n.filter(i=>!js(i,r));return{arrayValue:{values:n}}}var Ku=class extends Kf{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function QK(t){return dn(t.integerValue||t.doubleValue)}function f9(t){return dv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Xl=class{constructor(e,n){this.field=e,this.transform=n}};function uwe(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Oa&&i instanceof Oa||r instanceof Fa&&i instanceof Fa?$f(r.elements,i.elements,js):r instanceof Ku&&i instanceof Ku?js(r.Ie,i.Ie):r instanceof Wu&&i instanceof Wu}(t.transform,e.transform)}var dO=class{constructor(e,n){this.version=e,this.transformResults=n}},fn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function zb(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Qf=class{};function p9(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Yu(t.key,fn.none()):new Qu(t.key,t.data,fn.none());{let n=t.data,r=xr.empty(),i=new Ot(In.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new qo(t.key,r,new Pi(i.toArray()),fn.none())}}function cwe(t,e,n){t instanceof Qu?function(i,o,s){let u=i.value.clone(),c=XK(i.fieldTransforms,o,s.transformResults);u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):t instanceof qo?function(i,o,s){if(!zb(i.precondition,o))return void o.convertToUnknownDocument(s.version);let u=XK(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(g9(i)),c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function iv(t,e,n,r){return t instanceof Qu?function(o,s,u,c){if(!zb(o.precondition,s))return u;let h=o.value.clone(),f=JK(o.fieldTransforms,c,s);return h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof qo?function(o,s,u,c){if(!zb(o.precondition,s))return u;let h=JK(o.fieldTransforms,c,s),f=s.data;return f.setAll(g9(o)),f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,u){return zb(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u}(t,e,n)}function lwe(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=l9(r.transform,i||null);o!=null&&(n===null&&(n=xr.empty()),n.set(r.field,o))}return n||null}function YK(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$f(r,i,(o,s)=>uwe(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Qu=class extends Qf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},qo=class extends Qf{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function g9(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function XK(t,e,n){let r=new Map;ve(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,u=e.data.field(o.field);r.set(o.field,awe(s,u,n[i]))}return r}function JK(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,swe(o,s,e))}return r}var Yu=class extends Qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},fv=class extends Qf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var pv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&cwe(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=iv(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=iv(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=s9();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,u=this.applyToLocalView(s,o.mutatedFields);u=n.has(i.key)?null:u;let c=p9(s,u);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),qe())}isEqual(e){return this.batchId===e.batchId&&$f(this.mutations,e.mutations,(n,r)=>YK(n,r))&&$f(this.baseMutations,e.baseMutations,(n,r)=>YK(n,r))}},fO=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length);let i=function(){return rwe}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var gv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var pO=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Rn,lt;function m9(t){switch(t){default:return ue();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function y9(t){if(t===void 0)return En("GRPC error has no .code"),O.UNKNOWN;switch(t){case Rn.OK:return O.OK;case Rn.CANCELLED:return O.CANCELLED;case Rn.UNKNOWN:return O.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return O.INTERNAL;case Rn.UNAVAILABLE:return O.UNAVAILABLE;case Rn.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Rn.NOT_FOUND:return O.NOT_FOUND;case Rn.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Rn.ABORTED:return O.ABORTED;case Rn.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Rn.DATA_LOSS:return O.DATA_LOSS;default:return ue()}}(lt=Rn||(Rn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";var ZK=null;function v9(){return new TextEncoder}var hwe=new Vl([4294967295,4294967295],0);function e8(t){let e=v9().encode(t),n=new PK;return n.update(e),new Uint8Array(n.digest())}function t8(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Vl([n,r],0),new Vl([i,o],0)]}var gO=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zl(`Invalid padding: ${n}`);if(r<0)throw new zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zl(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Vl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Vl.fromNumber(r)));return i.compare(hwe)===1&&(i=new Vl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=e8(e),[r,i]=t8(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(u=>s.insert(u)),s}insert(e){if(this.Te===0)return;let n=e8(e),[r,i]=t8(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},zl=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var mv=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,yv.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Ee.min(),i,new $t(Ue),yi(),qe())}},yv=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,qe(),qe(),qe())}};var Hf=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},sT=class{constructor(e,n){this.targetId=e,this.fe=n}},aT=class{constructor(e,n,r=er.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},uT=class{constructor(){this.ge=0,this.pe=r8(),this.ye=er.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=qe(),n=qe(),r=qe();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ue()}}),new yv(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=r8()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,ve(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},mO=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=yi(),this.Qe=n8(),this.Ke=new $t(Ue)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(rT(o))if(r===0){let s=new te(o.path);this.We(n,s,On.newNoDocument(s,Ee.min()))}else ve(r===1);else{let s=this.Ze(n);if(s!==r){let u=this.Xe(e),c=u?this.et(u,e,s):1;if(c!==0){this.He(n);let h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,h)}ZK==null||ZK.tt(function(f,p,m,v,_){var E,b,T,S,A,x;let H={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},N=p.unchangedNames;return N&&(H.bloomFilter={applied:_===0,hashCount:(E=N==null?void 0:N.hashCount)!==null&&E!==void 0?E:0,bitmapLength:(S=(T=(b=N==null?void 0:N.bits)===null||b===void 0?void 0:b.bitmap)===null||T===void 0?void 0:T.length)!==null&&S!==void 0?S:0,padding:(x=(A=N==null?void 0:N.bits)===null||A===void 0?void 0:A.padding)!==null&&x!==void 0?x:0,mightContain:ie=>{var Ye;return(Ye=v==null?void 0:v.mightContain(ie))!==null&&Ye!==void 0&&Ye}}),H}(s,e.fe,this.Le.nt(),u,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,u;try{s=$u(r).toUint8Array()}catch(c){if(c instanceof eT)return so("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new gO(s,i,o)}catch(c){return so(c instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Te===0?null:u}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),u=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let u=this.Ye(s);if(u){if(o.current&&rT(u.target)){let c=new te(u.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,On.newNoDocument(c,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=qe();this.Qe.forEach((o,s)=>{let u=!0;s.forEachWhile(c=>{let h=this.Ye(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new mv(e,n,this.Ke,this.qe,r);return this.qe=yi(),this.Qe=n8(),this.Ke=new $t(Ue),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new uT,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ot(Ue),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new uT),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function n8(){return new $t(te.comparator)}function r8(){return new $t(te.comparator)}var dwe={asc:"ASCENDING",desc:"DESCENDING"},fwe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pwe={and:"AND",or:"OR"},yO=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function vO(t,e){return t.useProto3Json||Rv(e)?e:{value:e}}function Yf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _9(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gwe(t,e){return Yf(t,e.toTimestamp())}function bn(t){return ve(!!t),Ee.fromTimestamp(function(n){let r=Hu(n);return new rn(r.seconds,r.nanos)}(t))}function HF(t,e){return function(r){return new gt(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function w9(t){let e=gt.fromString(t);return ve(x9(e)),e}function vv(t,e){return HF(t.databaseId,e.path)}function Vs(t,e){let n=w9(e);if(n.get(1)!==t.databaseId.projectId)throw new j(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(I9(n))}function _O(t,e){return HF(t.databaseId,e)}function E9(t){let e=w9(t);return e.length===4?gt.emptyPath():I9(e)}function _v(t){return new gt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function I9(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function i8(t,e,n){return{name:vv(t,e),fields:n.value.mapValue.fields}}function b9(t,e,n){let r=Vs(t,e.name),i=bn(e.updateTime),o=e.createTime?bn(e.createTime):Ee.min(),s=new xr({mapValue:{fields:e.fields}}),u=On.newFoundDocument(r,i,o,s);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function mwe(t,e){return"found"in e?function(r,i){ve(!!i.found),i.found.name,i.found.updateTime;let o=Vs(r,i.found.name),s=bn(i.found.updateTime),u=i.found.createTime?bn(i.found.createTime):Ee.min(),c=new xr({mapValue:{fields:i.found.fields}});return On.newFoundDocument(o,s,u,c)}(t,e):"missing"in e?function(r,i){ve(!!i.missing),ve(!!i.readTime);let o=Vs(r,i.missing),s=bn(i.readTime);return On.newNoDocument(o,s)}(t,e):ue()}function ywe(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(h,f){return h.useProto3Json?(ve(f===void 0||typeof f=="string"),er.fromBase64String(f||"")):(ve(f===void 0||f instanceof Uint8Array),er.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(h){let f=h.code===void 0?O.UNKNOWN:y9(h.code);return new j(f,h.message||"")}(s);n=new aT(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Vs(t,r.document.name),o=bn(r.document.updateTime),s=r.document.createTime?bn(r.document.createTime):Ee.min(),u=new xr({mapValue:{fields:r.document.fields}}),c=On.newFoundDocument(i,o,s,u),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Hf(h,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Vs(t,r.document),o=r.readTime?bn(r.readTime):Ee.min(),s=On.newNoDocument(i,o),u=r.removedTargetIds||[];n=new Hf([],u,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Vs(t,r.document),o=r.removedTargetIds||[];n=new Hf([],o,i,null)}else{if(!("filter"in e))return ue();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new pO(i,o),u=r.targetId;n=new sT(u,s)}}return n}function wv(t,e){let n;if(e instanceof Qu)n={update:i8(t,e.key,e.value)};else if(e instanceof Yu)n={delete:vv(t,e.key)};else if(e instanceof qo)n={update:i8(t,e.key,e.data),updateMask:bwe(e.fieldMask)};else{if(!(e instanceof fv))return ue();n={verify:vv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let u=s.transform;if(u instanceof Wu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Oa)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Fa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ku)return{fieldPath:s.field.canonicalString(),increment:u.Ie};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:gwe(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ue()}(t,e.precondition)),n}function wO(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?fn.updateTime(bn(o.updateTime)):o.exists!==void 0?fn.exists(o.exists):fn.none()}(e.currentDocument):fn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let c=null;if("setToServerValue"in u)ve(u.setToServerValue==="REQUEST_TIME"),c=new Wu;else if("appendMissingElements"in u){let f=u.appendMissingElements.values||[];c=new Oa(f)}else if("removeAllFromArray"in u){let f=u.removeAllFromArray.values||[];c=new Fa(f)}else"increment"in u?c=new Ku(s,u.increment):ue();let h=In.fromServerFormat(u.fieldPath);return new Xl(h,c)}(t,i)):[];if(e.update){e.update.name;let i=Vs(t,e.update.name),o=new xr({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let h=c.fieldPaths||[];return new Pi(h.map(f=>In.fromServerFormat(f)))}(e.updateMask);return new qo(i,o,s,n,r)}return new Qu(i,o,n,r)}if(e.delete){let i=Vs(t,e.delete);return new Yu(i,n)}if(e.verify){let i=Vs(t,e.verify);return new fv(i,n)}return ue()}function vwe(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?bn(i.updateTime):bn(o);return s.isEqual(Ee.min())&&(s=bn(o)),new dO(s,i.transformResults||[])}(n,e))):[]}function T9(t,e){return{documents:[_O(t,e.path)]}}function C9(t,e){let n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=_O(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=_O(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);let i=function(c){if(c.length!==0)return A9(Dt.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);let o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Lf(p.field),direction:wwe(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let s=vO(t,e.limit);return s!==null&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function S9(t){let e=E9(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ve(r===1);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(p){let m=D9(p);return m instanceof Dt&&jF(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(_){return new Ql(Vf(_.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(n.orderBy));let u=null;n.limit&&(u=function(p){let m;return m=typeof p=="object"?p.value:p,Rv(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){let m=!!p.before,v=p.values||[];return new Bs(v,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){let m=!p.before,v=p.values||[];return new Bs(v,m)}(n.endAt)),e9(e,i,s,o,u,"F",c,h)}function _we(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function D9(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Vf(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Vf(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Vf(n.unaryFilter.field);return st.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Vf(n.unaryFilter.field);return st.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return st.create(Vf(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dt.create(n.compositeFilter.filters.map(r=>D9(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function wwe(t){return dwe[t]}function Ewe(t){return fwe[t]}function Iwe(t){return pwe[t]}function Lf(t){return{fieldPath:t.canonicalString()}}function Vf(t){return In.fromServerFormat(t.fieldPath)}function A9(t){return t instanceof st?function(n){if(n.op==="=="){if(BK(n.value))return{unaryFilter:{field:Lf(n.field),op:"IS_NAN"}};if(jK(n.value))return{unaryFilter:{field:Lf(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BK(n.value))return{unaryFilter:{field:Lf(n.field),op:"IS_NOT_NAN"}};if(jK(n.value))return{unaryFilter:{field:Lf(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lf(n.field),op:Ewe(n.op),value:n.value}}}(t):t instanceof Dt?function(n){let r=n.getFilters().map(i=>A9(i));return r.length===1?r[0]:{compositeFilter:{op:Iwe(n.op),filters:r}}}(t):ue()}function bwe(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function x9(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Xf=class t{constructor(e,n,r,i,o=Ee.min(),s=Ee.min(),u=er.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var cT=class{constructor(e){this.ut=e}};function Twe(t,e){let n;if(e.document)n=b9(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=te.fromSegments(e.noDocument.path),i=Zl(e.noDocument.readTime);n=On.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ue();{let r=te.fromSegments(e.unknownDocument.path),i=Zl(e.unknownDocument.version);n=On.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new rn(i[0],i[1]);return Ee.fromTimestamp(o)}(e.readTime)),n}function o8(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:lT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:vv(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Yf(o,s.version.toTimestamp()),createTime:Yf(o,s.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Jl(e.version)};else{if(!e.isUnknownDocument())return ue();r.unknownDocument={path:n.path.toArray(),version:Jl(e.version)}}return r}function lT(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Jl(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zl(t){let e=new rn(t.seconds,t.nanoseconds);return Ee.fromTimestamp(e)}function ql(t,e){let n=(e.baseMutations||[]).map(o=>wO(t.ut,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let u=e.mutations[o+1];s.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>wO(t.ut,o)),i=rn.fromMillis(e.localWriteTimeMs);return new pv(e.batchId,i,n,r)}function tv(t){let e=Zl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Zl(t.lastLimboFreeSnapshotVersion):Ee.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return ve(o.documents.length===1),zr(ap(E9(o.documents[0])))}(t.query):function(o){return zr(S9(o))}(t.query),new Xf(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,er.fromBase64String(t.resumeToken))}function N9(t,e){let n=Jl(e.snapshotVersion),r=Jl(e.lastLimboFreeSnapshotVersion),i;i=rT(e.target)?T9(t.ut,e.target):C9(t.ut,e.target);let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yl(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function $F(t){let e=S9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?oT(e,e.limit,"L"):e}function Fk(t,e){return new gv(e.largestBatchId,wO(t.ut,e.overlayMutation))}function s8(t,e){let n=e.path.lastSegment();return[t,$r(e.path.popLast()),n]}function a8(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Jl(r.readTime),documentKey:$r(r.documentKey.path),largestBatchId:r.largestBatchId}}var EO=class{getBundleMetadata(e,n){return u8(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Zl(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return u8(e).put(function(i){return{bundleId:i.id,createTime:Jl(bn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return c8(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:$F(o.bundledQuery),readTime:Zl(o.readTime)}}(r)})}saveNamedQuery(e,n){return c8(e).put(function(i){return{name:i.name,readTime:Jl(bn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function u8(t){return tr(t,"bundles")}function c8(t){return tr(t,"namedQueries")}var hT=class t{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Yy(e).get(s8(this.userId,n)).next(r=>r?Fk(this.serializer,r):null)}getOverlays(e,n){let r=Fs();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let u=new gv(n,s);i.push(this.lt(e,u))}),P.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add($r(s.getCollectionPath())));let o=[];return i.forEach(s=>{let u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Yy(e).H("collectionPathOverlayIndex",u))}),P.waitFor(o)}getOverlaysForCollection(e,n,r){let i=Fs(),o=$r(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Yy(e).W("collectionPathOverlayIndex",s).next(u=>{for(let c of u){let h=Fk(this.serializer,c);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=Fs(),s,u=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Yy(e).Y({index:"collectionGroupOverlayIndex",range:u},(c,h,f)=>{let p=Fk(this.serializer,h);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):f.done()}).next(()=>o)}lt(e,n){return Yy(e).put(function(i,o,s){let[u,c,h]=s8(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:h,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:wv(i.ut,s.mutation)}}(this.serializer,this.userId,n))}};function Yy(t){return tr(t,"documentOverlays")}var Pa=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(dn(e.integerValue));else if("doubleValue"in e){let r=dn(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),uv(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt($u(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?W8(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):ue()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),te.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};Pa.St=new Pa;function Cwe(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function l8(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=Cwe(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var IO=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{let i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){let n=this.Bt(e),r=l8(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){let n=this.Bt(e),r=l8(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){let n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){let n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},bO=class{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}},TO=class{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}},Hl=class{constructor(){this.Wt=new IO,this.Gt=new bO(this.Wt),this.zt=new TO(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}};var $l=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Ou(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=h8(t.arrayValue,e.arrayValue),n!==0?n:(n=h8(t.directionalValue,e.directionalValue),n!==0?n:te.comparator(t.documentKey,e.documentKey)))}function h8(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var dT=class{constructor(e){this.Jt=new Ot((n,r)=>In.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(ve(e.collectionGroup===this.collectionId),this.Xt)return!1;let n=Wk(e);if(n!==void 0&&!this.tn(n))return!1;let r=jl(e),i=new Set,o=0,s=0;for(;o<r.length&&this.tn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Jt.size>0){let u=this.Jt.getIterator().getNext();if(!i.has(u.field.canonicalString())){let c=r[o];if(!this.nn(u,c)||!this.rn(this.Yt[s++],c))return!1}++o}for(;o<r.length;++o){let u=r[o];if(s>=this.Yt.length||!this.rn(this.Yt[s++],u))return!1}return!0}sn(){if(this.Xt)return null;let e=new Ot(In.comparator),n=[];for(let r of this.Zt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Bf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Bf(r.field,0))}for(let r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Bf(r.field,r.dir==="asc"?0:1)));return new zf(zf.UNKNOWN_ID,this.collectionId,n,av.empty())}tn(e){for(let n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function R9(t){var e,n;if(ve(t instanceof st||t instanceof Dt),t instanceof st){if(t instanceof nT){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>st.create(t.field,"==",o)))||[];return Dt.create(i,"or")}return t}let r=t.filters.map(i=>R9(i));return Dt.create(r,t.op)}function Swe(t){if(t.getFilters().length===0)return[];let e=DO(R9(t));return ve(M9(e)),CO(e)||SO(e)?[e]:e.getFilters()}function CO(t){return t instanceof st}function SO(t){return t instanceof Dt&&jF(t)}function M9(t){return CO(t)||SO(t)||function(n){if(n instanceof Dt&&tO(n)){for(let r of n.getFilters())if(!CO(r)&&!SO(r))return!1;return!0}return!1}(t)}function DO(t){if(ve(t instanceof st||t instanceof Dt),t instanceof st)return t;if(t.filters.length===1)return DO(t.filters[0]);let e=t.filters.map(r=>DO(r)),n=Dt.create(e,t.op);return n=fT(n),M9(n)?n:(ve(n instanceof Dt),ve(Wf(n)),ve(n.filters.length>1),n.filters.reduce((r,i)=>zF(r,i)))}function zF(t,e){let n;return ve(t instanceof st||t instanceof Dt),ve(e instanceof st||e instanceof Dt),n=t instanceof st?e instanceof st?function(i,o){return Dt.create([i,o],"and")}(t,e):d8(t,e):e instanceof st?d8(e,t):function(i,o){if(ve(i.filters.length>0&&o.filters.length>0),Wf(i)&&Wf(o))return X8(i,o.getFilters());let s=tO(i)?i:o,u=tO(i)?o:i,c=s.filters.map(h=>zF(h,u));return Dt.create(c,"or")}(t,e),fT(n)}function d8(t,e){if(Wf(e))return X8(e,t.getFilters());{let n=e.filters.map(r=>zF(t,r));return Dt.create(n,"or")}}function fT(t){if(ve(t instanceof st||t instanceof Dt),t instanceof st)return t;let e=t.getFilters();if(e.length===1)return fT(e[0]);if(Q8(t))return t;let n=e.map(i=>fT(i)),r=[];return n.forEach(i=>{i instanceof st?r.push(i):i instanceof Dt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Dt.create(r,t.op)}var AO=class{constructor(){this.on=new Ev}addToCollectionParentIndex(e,n){return this.on.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(ao.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(ao.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},Ev=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ot(gt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ot(gt.comparator)).toArray()}};var Vb=new Uint8Array(0),xO=class{constructor(e,n){this.user=e,this.databaseId=n,this._n=new Ev,this.an=new qs(r=>Yl(r),(r,i)=>Mv(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});let o={collectionId:r,parent:$r(i)};return f8(e).put(o)}return P.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[F8(n),""],!1,!0);return f8(e).W(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(Os(s.parent))}return r})}addFieldIndex(e,n){let r=Xy(e),i=function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=Pf(e);return o.next(u=>{s.put(a8(u,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Xy(e),i=Pf(e),o=Mf(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Xy(e),r=Mf(e),i=Pf(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return P.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new dT(r).sn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=Mf(e),i=!0,o=new Map;return P.forEach(this.un(n),s=>this.cn(e,s).next(u=>{i&&(i=!!u),o.set(s,u)})).next(()=>{if(i){let s=qe(),u=[];return P.forEach(o,(c,h)=>{q("IndexedDbIndexManager",`Using index ${function(A){return`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(c)} to execute ${Yl(n)}`);let f=function(A,x){let H=Wk(x);if(H===void 0)return null;for(let N of iT(A,H.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null}(h,c),p=function(A,x){let H=new Map;for(let N of jl(x))for(let ie of iT(A,N.fieldPath))switch(ie.op){case"==":case"in":H.set(N.fieldPath.canonicalString(),ie.value);break;case"not-in":case"!=":return H.set(N.fieldPath.canonicalString(),ie.value),Array.from(H.values())}return null}(h,c),m=function(A,x){let H=[],N=!0;for(let ie of jl(x)){let Ye=ie.kind===0?GK(A,ie.fieldPath,A.startAt):WK(A,ie.fieldPath,A.startAt);H.push(Ye.value),N&&(N=Ye.inclusive)}return new Bs(H,N)}(h,c),v=function(A,x){let H=[],N=!0;for(let ie of jl(x)){let Ye=ie.kind===0?WK(A,ie.fieldPath,A.endAt):GK(A,ie.fieldPath,A.endAt);H.push(Ye.value),N&&(N=Ye.inclusive)}return new Bs(H,N)}(h,c),_=this.ln(c,h,m),E=this.ln(c,h,v),b=this.hn(c,h,p),T=this.Pn(c.indexId,f,_,m.inclusive,E,v.inclusive,b);return P.forEach(T,S=>r.j(S,n.limit).next(A=>{A.forEach(x=>{let H=te.fromSegments(x.documentKey);s.has(H)||(s=s.add(H),u.push(H))})}))}).next(()=>u)}return P.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=Swe(Dt.create(e.filters,"and")).map(r=>lO(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,o,s,u){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),h=c/(n!=null?n.length:1),f=[];for(let p=0;p<c;++p){let m=n?this.In(n[p/h]):Vb,v=this.Tn(e,m,r[p%h],i),_=this.En(e,m,o[p%h],s),E=u.map(b=>this.Tn(e,m,b,!0));f.push(...this.createRange(v,_,E))}return f}Tn(e,n,r,i){let o=new $l(e,te.empty(),n,r);return i?o:o.Ht()}En(e,n,r,i){let o=new $l(e,te.empty(),n,r);return i?o.Ht():o}cn(e,n){let r=new dT(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let u of o)r.en(u)&&(!s||u.fields.length>s.fields.length)&&(s=u);return s})}getIndexType(e,n){let r=2,i=this.un(n);return P.forEach(i,o=>this.cn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let h=new Ot(In.comparator),f=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?f=!0:h=h.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(h=h.add(p.field));return h.size+(f?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}dn(e,n){let r=new Hl;for(let i of jl(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.jt(i.kind);Pa.St.ht(o,s)}return r.Ut()}In(e){let n=new Hl;return Pa.St.ht(e,n.jt(0)),n.Ut()}An(e,n){let r=new Hl;return Pa.St.ht(Kl(this.databaseId,n),r.jt(function(o){let s=jl(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(r===null)return[];let i=[];i.push(new Hl);let o=0;for(let s of jl(e)){let u=r[o++];for(let c of i)if(this.Rn(n,s.fieldPath)&&dv(u))i=this.Vn(i,s,u);else{let h=c.jt(s.kind);Pa.St.ht(u,h)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let u of i){let c=new Hl;c.seed(u.Ut()),Pa.St.ht(s,c.jt(n.kind)),o.push(c)}return o}Rn(e,n){return!!e.filters.find(r=>r instanceof st&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Xy(e),i=Pf(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{let s=[];return P.forEach(o,u=>i.get([u.indexId,this.uid]).next(c=>{s.push(function(f,p){let m=p?new av(p.sequenceNumber,new ao(Zl(p.readTime),new te(Os(p.documentKey)),p.largestBatchId)):av.empty(),v=f.fields.map(([_,E])=>new Bf(In.fromServerFormat(_),E));return new zf(f.indexId,f.collectionGroup,v,m)}(u,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Ue(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Xy(e),o=Pf(e);return this.fn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(u=>P.forEach(u,c=>o.put(a8(c.indexId,this.user,s,r)))))}updateIndexEntries(e,n){let r=new Map;return P.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?P.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(u=>(r.set(i.collectionGroup,u),P.forEach(u,c=>this.gn(e,i,c).next(h=>{let f=this.pn(o,c);return h.isEqual(f)?P.resolve():this.yn(e,o,c,h,f)}))))})}wn(e,n,r,i){return Mf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return Mf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){let i=Mf(e),o=new Ot(Ou);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(s,u)=>{o=o.add(new $l(r.indexId,n,u.arrayValue,u.directionalValue))}).next(()=>o)}pn(e,n){let r=new Ot(Ou),i=this.dn(n,e);if(i==null)return r;let o=Wk(n);if(o!=null){let s=e.data.field(o.fieldPath);if(dv(s))for(let u of s.arrayValue.values||[])r=r.add(new $l(n.indexId,e.key,this.In(u),i))}else r=r.add(new $l(n.indexId,e.key,Vb,i));return r}yn(e,n,r,i,o){q("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,h,f,p,m){let v=c.getIterator(),_=h.getIterator(),E=Rf(v),b=Rf(_);for(;E||b;){let T=!1,S=!1;if(E&&b){let A=f(E,b);A<0?S=!0:A>0&&(T=!0)}else E!=null?S=!0:T=!0;T?(p(b),b=Rf(_)):S?(m(E),E=Rf(v)):(E=Rf(v),b=Rf(_))}}(i,o,Ou,u=>{s.push(this.wn(e,n,r,u))},u=>{s.push(this.Sn(e,n,r,u))}),P.waitFor(s)}fn(e){let n=1;return Pf(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,u)=>Ou(s,u)).filter((s,u,c)=>!u||Ou(s,c[u-1])!==0);let i=[];i.push(e);for(let s of r){let u=Ou(s,e),c=Ou(s,n);if(u===0)i[0]=e.Ht();else if(u>0&&c<0)i.push(s),i.push(s.Ht());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.bn(i[s],i[s+1]))return[];let u=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Vb,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Vb,[]];o.push(IDBKeyRange.bound(u,c))}return o}bn(e,n){return Ou(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(p8)}getMinOffset(e,n){return P.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||ue())).next(p8)}};function f8(t){return tr(t,"collectionParents")}function Mf(t){return tr(t,"indexEntries")}function Xy(t){return tr(t,"indexConfiguration")}function Pf(t){return tr(t,"indexState")}function p8(t){ve(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;LF(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ao(e.readTime,e.documentKey,n)}var g8={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oo=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function P9(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),u=0,c=r.Y({range:s},(f,p,m)=>(u++,m.delete()));o.push(c.next(()=>{ve(u===1)}));let h=[];for(let f of n.mutations){let p=B8(e,f.key.path,n.batchId);o.push(i.delete(p)),h.push(f.key)}return P.waitFor(o).next(()=>h)}function pT(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ue();e=t.noDocument}return JSON.stringify(e).length}oo.DEFAULT_COLLECTION_PERCENTILE=10,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oo.DEFAULT=new oo(41943040,oo.DEFAULT_COLLECTION_PERCENTILE,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oo.DISABLED=new oo(-1,0,0);var gT=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){ve(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=Uf(e),s=Fu(e);return s.add({}).next(u=>{ve(typeof u=="number");let c=new pv(u,n,r,i),h=function(v,_,E){let b=E.baseMutations.map(S=>wv(v.ut,S)),T=E.mutations.map(S=>wv(v.ut,S));return{userId:_,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:b,mutations:T}}(this.serializer,this.userId,c),f=[],p=new Ot((m,v)=>Ue(m.canonicalString(),v.canonicalString()));for(let m of i){let v=B8(this.userId,m.key.path,u);p=p.add(m.key.path.popLast()),f.push(s.put(h)),f.push(o.put(v,P_e))}return p.forEach(m=>{f.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Dn[u]=c.keys()}),P.waitFor(f).next(()=>c)})}lookupMutationBatch(e,n){return Fu(e).get(n).next(r=>r?(ve(r.userId===this.userId),ql(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?P.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Fu(e).Y({index:"userMutationsIndex",range:i},(s,u,c)=>{u.userId===this.userId&&(ve(u.batchId>=r),o=ql(this.serializer,u)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Fu(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).W("userMutationsIndex",n).next(r=>r.map(i=>ql(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=qb(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Uf(e).Y({range:i},(s,u,c)=>{let[h,f,p]=s,m=Os(f);if(h===this.userId&&n.path.isEqual(m))return Fu(e).get(p).next(v=>{if(!v)throw ue();ve(v.userId===this.userId),o.push(ql(this.serializer,v))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ot(Ue),i=[];return n.forEach(o=>{let s=qb(this.userId,o.path),u=IDBKeyRange.lowerBound(s),c=Uf(e).Y({range:u},(h,f,p)=>{let[m,v,_]=h,E=Os(v);m===this.userId&&o.path.isEqual(E)?r=r.add(_):p.done()});i.push(c)}),P.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=qb(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new Ot(Ue);return Uf(e).Y({range:s},(c,h,f)=>{let[p,m,v]=c,_=Os(m);p===this.userId&&r.isPrefixOf(_)?_.length===i&&(u=u.add(v)):f.done()}).next(()=>this.vn(e,u))}vn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(Fu(e).get(o).next(s=>{if(s===null)throw ue();ve(s.userId===this.userId),r.push(ql(this.serializer,s))}))}),P.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return P9(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),P.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return P.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Uf(e).Y({range:r},(o,s,u)=>{if(o[0]===this.userId){let c=Os(o[1]);i.push(c)}else u.done()}).next(()=>{ve(i.length===0)})})}containsKey(e,n){return k9(e,this.userId,n)}Mn(e){return O9(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function k9(t,e,n){let r=qb(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Uf(t).Y({range:o,J:!0},(u,c,h)=>{let[f,p,m]=u;f===e&&p===i&&(s=!0),h.done()}).next(()=>s)}function Fu(t){return tr(t,"mutations")}function Uf(t){return tr(t,"documentMutations")}function O9(t){return tr(t,"mutationQueues")}var Jf=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var NO=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new Jf(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>Ee.fromTimestamp(new rn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>kf(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(ve(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0,o=[];return kf(e).Y((s,u)=>{let c=tv(u);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>P.waitFor(o)).next(()=>i)}forEachTarget(e,n){return kf(e).Y((r,i)=>{let o=tv(i);n(o)})}Bn(e){return m8(e).get("targetGlobalKey").next(n=>(ve(n!==null),n))}Ln(e,n){return m8(e).put("targetGlobalKey",n)}kn(e,n){return kf(e).put(N9(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Yl(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return kf(e).Y({range:i,index:"queryTargetsIndex"},(s,u,c)=>{let h=tv(u);Mv(n,h.target)&&(o=h,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=Lu(e);return n.forEach(s=>{let u=$r(s.path);i.push(o.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,s))}),P.waitFor(i)}removeMatchingKeys(e,n,r){let i=Lu(e);return P.forEach(n,o=>{let s=$r(o.path);return P.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=Lu(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Lu(e),o=qe();return i.Y({range:r,J:!0},(s,u,c)=>{let h=Os(s[1]),f=new te(h);o=o.add(f)}).next(()=>o)}containsKey(e,n){let r=$r(n.path),i=IDBKeyRange.bound([r],[F8(r)],!1,!0),o=0;return Lu(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,u],c,h)=>{s!==0&&(o++,h.done())}).next(()=>o>0)}_t(e,n){return kf(e).get(n).next(r=>r?tv(r):null)}};function kf(t){return tr(t,"targets")}function m8(t){return tr(t,"targetGlobal")}function Lu(t){return tr(t,"targetDocuments")}function y8([t,e],[n,r]){let i=Ue(t,n);return i===0?Ue(e,r):i}var RO=class{constructor(e){this.Qn=e,this.buffer=new Ot(y8),this.Kn=0}$n(){return++this.Kn}Un(e){let n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();y8(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},MO=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>F(this,null,function*(){this.Wn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zu(n)?q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Ju(n)}yield this.Gn(3e5)}))}},PO=class{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(Mi._e);let r=new RO(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(g8)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g8):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,o,s,u,c,h,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,u=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),Of()<=Zi.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(u-s)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-f}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Dwe(t,e){return new PO(t,e)}var kO=class{constructor(e,n){this.db=e,this.garbageCollector=Dwe(this,n)}jn(e){let n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Ub(e,r)}removeReference(e,n,r){return Ub(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Ub(e,n)}Xn(e,n){return function(i,o){let s=!1;return O9(i).Z(u=>k9(i,u,o).next(c=>(c&&(s=!0),P.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Zn(e,(s,u)=>{if(u<=n){let c=this.Xn(e,s).next(h=>{if(!h)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Ee.min()),Lu(e).delete(function(p){return[0,$r(p.path)]}(s))))});i.push(c)}}).next(()=>P.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Ub(e,n)}Zn(e,n){let r=Lu(e),i,o=Mi._e;return r.Y({index:"documentTargetsIndex"},([s,u],{path:c,sequenceNumber:h})=>{s===0?(o!==Mi._e&&n(new te(Os(i)),o),o=h,i=c):o=Mi._e}).next(()=>{o!==Mi._e&&n(new te(Os(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Ub(t,e){return Lu(t).put(function(r,i){return{targetId:0,path:$r(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var mT=class{constructor(){this.changes=new qs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var OO=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ul(e).put(r)}removeEntry(e,n,r){return Ul(e).delete(function(o,s){let u=o.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],lT(s),u[u.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=On.newInvalidDocument(n);return Ul(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Jy(n))},(i,o)=>{r=this.tr(n,o)}).next(()=>r)}nr(e,n){let r={size:0,document:On.newInvalidDocument(n)};return Ul(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Jy(n))},(i,o)=>{r={document:this.tr(n,o),size:pT(o)}}).next(()=>r)}getEntries(e,n){let r=yi();return this.rr(e,n,(i,o)=>{let s=this.tr(i,o);r=r.insert(i,s)}).next(()=>r)}ir(e,n){let r=yi(),i=new $t(te.comparator);return this.rr(e,n,(o,s)=>{let u=this.tr(o,s);r=r.insert(o,u),i=i.insert(o,pT(s))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return P.resolve();let i=new Ot(w8);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Jy(i.first()),Jy(i.last())),s=i.getIterator(),u=s.getNext();return Ul(e).Y({index:"documentKeyIndex",range:o},(c,h,f)=>{let p=te.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;u&&w8(u,p)<0;)r(u,null),u=s.getNext();u&&u.isEqual(p)&&(r(u,h),u=s.hasNext()?s.getNext():null),u?f.U(Jy(u)):f.done()}).next(()=>{for(;u;)r(u,null),u=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,u=[s.popLast().toArray(),s.lastSegment(),lT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ul(e).W(IDBKeyRange.bound(u,c,!0)).next(h=>{o==null||o.incrementDocumentReadCount(h.length);let f=yi();for(let p of h){let m=this.tr(te.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(kv(n,m)||i.has(m.key))&&(f=f.insert(m.key,m))}return f})}getAllFromCollectionGroup(e,n,r,i){let o=yi(),s=_8(n,r),u=_8(n,ao.max());return Ul(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,u,!0)},(c,h,f)=>{let p=this.tr(te.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);o=o.insert(p.key,p),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(e){return new FO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return v8(e).get("remoteDocumentGlobalKey").next(n=>(ve(!!n),n))}er(e,n){return v8(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){let r=Twe(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ee.min())))return r}return On.newInvalidDocument(e)}};function F9(t){return new OO(t)}var FO=class extends mT{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new qs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Ot((o,s)=>Ue(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let u=this.ar.get(o);if(n.push(this._r.removeEntry(e,o,u.readTime)),s.isValidDocument()){let c=o8(this._r.serializer,s);i=i.add(o.path.popLast());let h=pT(c);r+=h-u.size,n.push(this._r.addEntry(e,o,c))}else if(r-=u.size,this.trackRemovals){let c=o8(this._r.serializer,s.convertToNoDocument(Ee.min()));n.push(this._r.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,o))}),n.push(this._r.updateMetadata(e,r)),P.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((o,s)=>{this.ar.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function v8(t){return tr(t,"remoteDocumentGlobal")}function Ul(t){return tr(t,"remoteDocumentsV14")}function Jy(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _8(t,e){let n=e.documentKey.path.toArray();return[t,lT(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function w8(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Ue(n[o],r[o]),i)return i;return i=Ue(n.length,r.length),i||(i=Ue(n[n.length-2],r[r.length-2]),i||Ue(n[n.length-1],r[r.length-1]))}var LO=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var yT=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&iv(r.mutation,i,Pi.empty(),rn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,qe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=qe()){let i=Fs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ev();return o.forEach((u,c)=>{s=s.insert(u,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,qe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,u)=>{n.set(s,u)})})}computeViews(e,n,r,i){let o=yi(),s=rv(),u=function(){return rv()}();return n.forEach((c,h)=>{let f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof qo)?o=o.insert(h.key,h):f!==void 0?(s.set(h.key,f.mutation.getFieldMask()),iv(f.mutation,h,f.mutation.getFieldMask(),rn.now())):s.set(h.key,Pi.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((h,f)=>s.set(h,f)),n.forEach((h,f)=>{var p;return u.set(h,new LO(f,(p=s.get(h))!==null&&p!==void 0?p:null))}),u))}recalculateAndSaveOverlays(e,n){let r=rv(),i=new $t((s,u)=>s-u),o=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let u of s)u.keys().forEach(c=>{let h=n.get(c);if(h===null)return;let f=r.get(c)||Pi.empty();f=u.applyToLocalView(h,f),r.set(c,f);let p=(i.get(u.batchId)||qe()).add(c);i=i.insert(u.batchId,p)})}).next(()=>{let s=[],u=i.getReverseIterator();for(;u.hasNext();){let c=u.getNext(),h=c.key,f=c.value,p=s9();f.forEach(m=>{if(!o.has(m)){let v=p9(n.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,h,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(Fs()),u=-1,c=o;return s.next(h=>P.forEach(h,(f,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),o.get(f)?P.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{c=c.insert(f,m)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,c,h,qe())).next(f=>({batchId:u,changes:o9(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=ev();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=ev();return this.indexManager.getCollectionParents(e,o).next(u=>P.forEach(u,c=>{let h=function(p,m){return new Bo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,h)=>{let f=h.getKey();s.get(f)===null&&(s=s.insert(f,On.newInvalidDocument(f)))});let u=ev();return s.forEach((c,h)=>{let f=o.get(c);f!==void 0&&iv(f.mutation,h,Pi.empty(),rn.now()),kv(n,h)&&(u=u.insert(c,h))}),u})}};var VO=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return P.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:bn(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:$F(i.bundledQuery),readTime:bn(i.readTime)}}(n)),P.resolve()}};var UO=class{constructor(){this.overlays=new $t(te.comparator),this.lr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Fs();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.lt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Fs(),o=n.length+1,s=new te(n.child("")),u=this.overlays.getIteratorFrom(s);for(;u.hasNext();){let c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new $t((h,f)=>h-f),s=this.overlays.getIterator();for(;s.hasNext();){let h=s.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=o.get(h.largestBatchId);f===null&&(f=Fs(),o=o.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}let u=Fs(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,f)=>u.set(h,f)),!(u.size()>=i)););return P.resolve(u)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new gv(n,r));let o=this.lr.get(n);o===void 0&&(o=qe(),this.lr.set(n,o)),this.lr.set(n,o.add(r.key))}};var Iv=class{constructor(){this.hr=new Ot(Mn.Pr),this.Ir=new Ot(Mn.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new Mn(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new Mn(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new te(new gt([])),r=new Mn(n,e),i=new Mn(n,e+1),o=[];return this.Ir.forEachInRange([r,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new te(new gt([])),r=new Mn(n,e),i=new Mn(n,e+1),o=qe();return this.Ir.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Mn(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Mn=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return te.comparator(e.key,n.key)||Ue(e.gr,n.gr)}static Tr(e,n){return Ue(e.gr,n.gr)||te.comparator(e.key,n.key)}};var jO=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ot(Mn.Pr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new pv(o,n,r,i);this.mutationQueue.push(s);for(let u of i)this.yr=this.yr.add(new Mn(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Mn(n,0),i=new Mn(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([r,i],s=>{let u=this.wr(s.gr);o.push(u)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ot(Ue);return n.forEach(i=>{let o=new Mn(i,0),s=new Mn(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],u=>{r=r.add(u.gr)})}),P.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;te.isDocumentKey(o)||(o=o.child(""));let s=new Mn(new te(o),0),u=new Ot(Ue);return this.yr.forEachWhile(c=>{let h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(c.gr)),!0)},s),P.resolve(this.br(u))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return P.forEach(n.mutations,i=>{let o=new Mn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new Mn(n,0),i=this.yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var BO=class{constructor(e){this.Cr=e,this.docs=function(){return new $t(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():On.newInvalidDocument(n))}getEntries(e,n){let r=yi();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():On.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=yi(),s=n.path,u=new te(s.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){let{key:h,value:{document:f}}=c.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||LF(V8(f),r)<=0||(i.has(f.key)||kv(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ue()}vr(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qO(this)}getSize(e){return P.resolve(this.size)}},qO=class extends mT{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var HO=class{constructor(e){this.persistence=e,this.Fr=new qs(n=>Yl(n),Mv),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Iv,this.targetCount=0,this.Nr=Jf.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),P.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new Jf(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.kn(n),P.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Fr.forEach((s,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.Or.containsKey(n))}};var vT=class{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Mi(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new HO(this),this.indexManager=new AO,this.remoteDocumentCache=function(i){return new BO(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new cT(n),this.Kr=new VO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new jO(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);let i=new $O(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,n){return P.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},$O=class extends Xb{constructor(e){super(),this.currentSequenceNumber=e}},_T=class t{constructor(e){this.persistence=e,this.Gr=new Iv,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw ue()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),P.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Hr,r=>{let i=te.fromPath(r);return this.Jr(e,i).next(o=>{o||n.removeEntry(i,Ee.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return P.or([()=>P.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var zO=class{constructor(e){this.serializer=e}N(e,n,r,i){let o=new Jb("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",LK,{unique:!0}),c.createObjectStore("documentMutations")}(e),E8(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=P.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),E8(e)),s=s.next(()=>function(c){let h=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",f)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,h){return h.store("mutations").W().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",LK,{unique:!0});let p=h.store("mutations"),m=f.map(v=>p.put(v));return P.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Zr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(o)))),r<7&&i>=7&&(s=s.next(()=>this.ei(o))),r<8&&i>=8&&(s=s.next(()=>this.ti(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ni(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let h=c.createObjectStore("documentOverlays",{keyPath:z_e});h.createIndex("collectionPathOverlayIndex",G_e,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",W_e,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let h=c.createObjectStore("remoteDocumentsV14",{keyPath:k_e});h.createIndex("documentKeyIndex",O_e),h.createIndex("collectionGroupIndex",F_e)}(e)).next(()=>this.ri(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ii(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:B_e}).createIndex("sequenceNumberIndex",q_e,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:H_e}).createIndex("documentKeyIndex",$_e,{unique:!1})}(e))),s}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=pT(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>P.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(u=>P.forEach(u,c=>{ve(c.userId===o.userId);let h=ql(this.serializer,c);return P9(e,o.userId,h).next(()=>{})}))}))}ei(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.Y((s,u)=>{let c=new gt(s),h=function(p){return[0,$r(p)]}(c);o.push(n.get(h).next(f=>f?P.resolve():(p=>n.put({targetId:0,path:$r(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>P.waitFor(o))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:j_e});let r=n.store("collectionParents"),i=new Ev,o=s=>{if(i.add(s)){let u=s.lastSegment(),c=s.popLast();return r.put({collectionId:u,parent:$r(c)})}};return n.store("remoteDocuments").Y({J:!0},(s,u)=>{let c=new gt(s);return o(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,u,c],h)=>{let f=Os(u);return o(f.popLast())}))}ni(e){let n=e.store("targets");return n.Y((r,i)=>{let o=tv(i),s=N9(this.serializer,o);return n.put(s)})}ri(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{let u=n.store("remoteDocumentsV14"),c=function(p){return p.document?new te(gt.fromString(p.document.name).popFirst(5)):p.noDocument?te.fromSegments(p.noDocument.path):p.unknownDocument?te.fromSegments(p.unknownDocument.path):ue()}(s).path.toArray(),h={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(u.put(h))}).next(()=>P.waitFor(i))}ii(e,n){let r=n.store("mutations"),i=F9(this.serializer),o=new vT(_T.jr,this.serializer.ut);return r.W().next(s=>{let u=new Map;return s.forEach(c=>{var h;let f=(h=u.get(c.userId))!==null&&h!==void 0?h:qe();ql(this.serializer,c).keys().forEach(p=>f=f.add(p)),u.set(c.userId,f)}),P.forEach(u,(c,h)=>{let f=new Pn(h),p=hT.ct(this.serializer,f),m=o.getIndexManager(f),v=gT.ct(f,this.serializer,m,o.referenceDelegate);return new yT(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new cv(n,Mi._e),c).next()})})}};function E8(t){t.createObjectStore("targetDocuments",{keyPath:V_e}).createIndex("documentTargetsIndex",U_e,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",L_e,{unique:!0}),t.createObjectStore("targetGlobal")}var Lk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",GO=class t{constructor(e,n,r,i,o,s,u,c,h,f,p=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=o,this.window=s,this.document=u,this.oi=h,this._i=f,this.ai=p,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=m=>Promise.resolve(),!t.D())throw new j(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kO(this,i),this.Ii=n+"main",this.serializer=new cT(c),this.Ti=new qu(this.Ii,this.ai,new zO(this.serializer)),this.qr=new NO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=F9(this.serializer),this.Kr=new EO,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,f===!1&&En("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(O.FAILED_PRECONDITION,Lk);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new Mi(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=n=>F(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(n=>F(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(()=>F(this,null,function*(){this.started&&(yield this.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(Zu(e))return q("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return q("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Zy(e).get("owner").next(n=>P.resolve(this.wi(n)))}Si(e){return jb(e).delete(this.clientId)}bi(){return F(this,null,function*(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=tr(n,"clientMetadata");return r.W().next(i=>{let o=this.Ci(i,18e5),s=i.filter(u=>o.indexOf(u)===-1);return P.forEach(s,u=>r.delete(u.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ei)for(let n of e)this.Ei.removeItem(this.vi(n.clientId))}})}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?P.resolve(!0):Zy(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new j(O.FAILED_PRECONDITION,Lk);return!1}}return!(!this.networkEnabled||!this.inForeground)||jb(e).W().next(r=>this.Ci(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(o||s&&u)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&q("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return F(this,null,function*(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),yield this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new cv(e,Mi._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()})}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>jb(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return gT.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xO(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return hT.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){q("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===15?Q_e:c===14?$8:c===13?H8:c===12?K_e:c===11?q8:void ue()}(this.ai),s;return this.Ti.runTransaction(e,i,o,u=>(s=new cv(u,this.Lr?this.Lr.next():Mi._e),n==="readwrite-primary"?this.fi(s).next(c=>!!c||this.gi(s)).next(c=>{if(!c)throw En(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new j(O.FAILED_PRECONDITION,U8);return r(s)}).next(c=>this.yi(s).next(()=>c)):this.Li(s).next(()=>r(s)))).then(u=>(s.raiseOnCommittedEvent(),u))}Li(e){return Zy(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new j(O.FAILED_PRECONDITION,Lk)})}yi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zy(e).put("owner",n)}static D(){return qu.D()}pi(e){let n=Zy(e);return n.get("owner").next(r=>this.wi(r)?(q("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):P.resolve())}Di(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(En(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();let n=/(?:Version|Mobile)\/1[456]/;kH()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{let r=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return q("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return En("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){En("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Zy(t){return tr(t,"owner")}function jb(t){return tr(t,"clientMetadata")}function GF(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var WO=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=qe(),i=qe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var KO=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var wT=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.zi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ji(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new KO;return this.Hi(e,n,s).next(u=>{if(o.result=u,this.$i)return this.Ji(e,n,s,u.size)})}).next(()=>o.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Of()<=Zi.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Ff(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),P.resolve()):(Of()<=Zi.DEBUG&&q("QueryEngine","Query:",Ff(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Of()<=Zi.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Ff(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(n))):P.resolve())}zi(e,n){if(KK(n))return P.resolve(null);let r=zr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=oT(n,null,"F"),r=zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=qe(...o);return this.Gi.getDocuments(e,s).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{let h=this.Yi(n,u);return this.Zi(n,h,s,c.readTime)?this.zi(e,oT(n,null,"F")):this.Xi(e,h,n,c)}))})))}ji(e,n,r,i){return KK(n)||i.isEqual(Ee.min())?P.resolve(null):this.Gi.getDocuments(e,r).next(o=>{let s=this.Yi(n,o);return this.Zi(n,s,r,i)?P.resolve(null):(Of()<=Zi.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ff(n)),this.Xi(e,s,n,L8(i,-1)).next(u=>u))})}Yi(e,n){let r=new Ot(r9(e));return n.forEach((i,o)=>{kv(e,o)&&(r=r.add(o))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Hi(e,n,r){return Of()<=Zi.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Ff(n)),this.Gi.getDocumentsMatchingQuery(e,n,ao.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var QO=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new $t(Ue),this.ns=new qs(o=>Yl(o),Mv),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yT(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function L9(t,e,n,r){return new QO(t,e,n,r)}function V9(t,e){return F(this,null,function*(){let n=re(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],u=[],c=qe();for(let h of i){s.push(h.batchId);for(let f of h.mutations)c=c.add(f.key)}for(let h of o){u.push(h.batchId);for(let f of h.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(h=>({_s:h,removedBatchIds:s,addedBatchIds:u}))})})})}function Awe(t,e){let n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.ss.newChangeBuffer({trackRemovals:!0});return function(u,c,h,f){let p=h.batch,m=p.keys(),v=P.resolve();return m.forEach(_=>{v=v.next(()=>f.getEntry(c,_)).next(E=>{let b=h.docVersions.get(_);ve(b!==null),E.version.compareTo(b)<0&&(p.applyToRemoteDocument(E,h),E.isValidDocument()&&(E.setReadTime(h.commitVersion),f.addEntry(E)))})}),v.next(()=>u.mutationQueue.removeMutationBatch(c,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=qe();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function U9(t){let e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function xwe(t,e){let n=re(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let u=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;u.push(n.qr.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.qr.addMatchingKeys(o,f.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(er.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),i=i.insert(p,v),function(E,b,T){return E.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(m,v,f)&&u.push(n.qr.updateTargetData(o,v))});let c=yi(),h=qe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),u.push(j9(o,s,e.documentUpdates).next(f=>{c=f.us,h=f.cs})),!r.isEqual(Ee.min())){let f=n.qr.getLastRemoteSnapshotVersion(o).next(p=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(f)}return P.waitFor(u).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,h)).next(()=>c)}).then(o=>(n.ts=i,o))}function j9(t,e,n){let r=qe(),i=qe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=yi();return n.forEach((u,c)=>{let h=o.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(Ee.min())?(e.removeEntry(u,c.readTime),s=s.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),s=s.insert(u,c)):q("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{us:s,cs:i}})}function Nwe(t,e){let n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zf(t,e){let n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.qr.allocateTargetId(r).next(s=>(i=new Xf(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function ep(t,e,n){return F(this,null,function*(){let r=re(t),i=r.ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Zu(s))throw s;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function ET(t,e,n){let r=re(t),i=Ee.min(),o=qe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,h,f){let p=re(c),m=p.ns.get(f);return m!==void 0?P.resolve(p.ts.get(m)):p.qr.getTargetData(h,f)}(r,s,zr(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(s,u.targetId).next(c=>{o=c})}).next(()=>r.es.getDocumentsMatchingQuery(s,e,n?i:Ee.min(),n?o:qe())).next(u=>(H9(r,n9(e),u),{documents:u,ls:o})))}function B9(t,e){let n=re(t),r=re(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function q9(t,e){let n=re(t),r=n.rs.get(e)||Ee.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,L8(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(H9(n,e,i),i))}function H9(t,e,n){let r=t.rs.get(e)||Ee.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.rs.set(e,r)}function Rwe(t,e,n,r){return F(this,null,function*(){let i=re(t),o=qe(),s=yi();for(let h of n){let f=e.hs(h.metadata.name);h.document&&(o=o.add(f));let p=e.Ps(h);p.setReadTime(e.Is(h.metadata.readTime)),s=s.insert(f,p)}let u=i.ss.newChangeBuffer({trackRemovals:!0}),c=yield Zf(i,function(f){return zr(ap(gt.fromString(`__bundle__/docs/${f}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",h=>j9(h,u,s).next(f=>(u.apply(h),f)).next(f=>i.qr.removeMatchingKeysForTargetId(h,c.targetId).next(()=>i.qr.addMatchingKeys(h,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,f.us,f.cs)).next(()=>f.us)))})}function Mwe(r,i){return F(this,arguments,function*(t,e,n=qe()){let o=yield Zf(t,zr($F(e.bundledQuery))),s=re(t);return s.persistence.runTransaction("Save named query","readwrite",u=>{let c=bn(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Kr.saveNamedQuery(u,e);let h=o.withResumeToken(er.EMPTY_BYTE_STRING,c);return s.ts=s.ts.insert(h.targetId,h),s.qr.updateTargetData(u,h).next(()=>s.qr.removeMatchingKeysForTargetId(u,o.targetId)).next(()=>s.qr.addMatchingKeys(u,n,o.targetId)).next(()=>s.Kr.saveNamedQuery(u,e))})})}function I8(t,e){return`firestore_clients_${t}_${e}`}function b8(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Vk(t,e){return`firestore_targets_${t}_${e}`}var IT=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new j(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(En("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ov=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new j(r.error.code,r.error.message))),o?new t(e,r.state,i):(En("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},bT=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=qF();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=j8(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(En("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},YO=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(En("SharedClientState",`Failed to parse online state: ${e}`),null)}},bv=class{constructor(){this.activeTargetIds=qF()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},sv=class{constructor(e,n,r,i,o){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new $t(Ue),this.started=!1,this.ps=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ys=I8(this.persistenceKey,this.Rs),this.ws=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new bv),this.Ss=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Cs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.vs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){return F(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Rs)continue;let i=this.getItem(I8(this.persistenceKey,r));if(i){let o=bT.Ts(r,i);o&&(this.gs=this.gs.insert(o.clientId,o))}}this.Fs();let n=this.storage.getItem(this.Cs);if(n){let r=this.Ms(n);r&&this.xs(r)}for(let r of this.ps)this.fs(r);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Vk(this.persistenceKey,e));if(r){let i=ov.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vk(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return q("SharedClientState","READ",e,n),n}setItem(e,n){q("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){q("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){let n=e;if(n.storageArea===this.storage){if(q("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void En("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(()=>F(this,null,function*(){if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){let r=this.Ks(n.key);return this.$s(r,null)}{let r=this.Us(n.key,n.newValue);if(r)return this.$s(r.clientId,r)}}else if(this.bs.test(n.key)){if(n.newValue!==null){let r=this.Ws(n.key,n.newValue);if(r)return this.Gs(r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(n.key===this.Cs){if(n.newValue!==null){let r=this.Ms(n.newValue);if(r)return this.xs(r)}}else if(n.key===this.ws){let r=function(o){let s=Mi._e;if(o!=null)try{let u=JSON.parse(o);ve(typeof u=="number"),s=u}catch(u){En("SharedClientState","Failed to read sequence number from WebStorage",u)}return s}(n.newValue);r!==Mi._e&&this.sequenceNumberHandler(r)}else if(n.key===this.vs){let r=this.Hs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Js(i)))}}}else this.ps.push(n)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){let i=new IT(this.currentUser,e,n,r),o=b8(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Es())}Bs(e){let n=b8(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){let n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,r){let i=Vk(this.persistenceKey,e),o=new ov(e,n,r);this.setItem(i,o.Es())}Qs(e){let n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){let n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){let r=this.Ks(e);return bT.Ts(r,n)}Ws(e,n){let r=this.bs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return IT.Ts(new Pn(o),i,n)}zs(e,n){let r=this.Ds.exec(e),i=Number(r[1]);return ov.Ts(i,n)}Ms(e){return YO.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){return F(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);q("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){let r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),o=this.Os(r),s=[],u=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||u.push(c)}),this.syncEngine.Xs(s,u).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=qF();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},TT=class{constructor(){this.eo=new bv,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new bv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var XO=class{ro(e){}shutdown(){}};var CT=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Bb=null;function Uk(){return Bb===null?Bb=function(){return 268435456+Math.round(2147483648*Math.random())}():Bb++,"0x"+Bb.toString(16)}var Pwe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var JO=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}};var Ar="WebChannelConnection",ZO=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${o}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get yo(){return!1}wo(n,r,i,o,s){let u=Uk(),c=this.So(n,r);q("RestConnection",`Sending RPC '${n}' ${u}:`,c,i);let h={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(h,o,s),this.Do(n,c,h,i).then(f=>(q("RestConnection",`Received RPC '${n}' ${u}: `,f),f),f=>{throw so("RestConnection",`RPC '${n}' ${u} failed with error: `,f,"url: ",c,"request:",i),f})}Co(n,r,i,o,s,u){return this.wo(n,r,i,o,s)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sp}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}So(n,r){let i=Pwe[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){let o=Uk();return new Promise((s,u)=>{let c=new MK;c.setWithCredentials(!0),c.listenOnce(NK.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Lb.NO_ERROR:let f=c.getResponseJson();q(Ar,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case Lb.TIMEOUT:q(Ar,`RPC '${e}' ${o} timed out`),u(new j(O.DEADLINE_EXCEEDED,"Request time out"));break;case Lb.HTTP_ERROR:let p=c.getStatus();if(q(Ar,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m==null?void 0:m.error;if(v&&v.status&&v.message){let _=function(b){let T=b.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(T)>=0?T:O.UNKNOWN}(v.status);u(new j(_,v.message))}else u(new j(O.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new j(O.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{q(Ar,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);q(Ar,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",h,r,15)})}vo(e,n,r){let i=Uk(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=AK(),u=xK(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.bo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let f=o.join("");q(Ar,`Creating RPC '${e}' stream ${i}: ${f}`,c);let p=s.createWebChannel(f,c),m=!1,v=!1,_=new JO({co:b=>{v?q(Ar,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(m||(q(Ar,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),q(Ar,`RPC '${e}' stream ${i} sending:`,b),p.send(b))},lo:()=>p.close()}),E=(b,T,S)=>{b.listen(T,A=>{try{S(A)}catch(x){setTimeout(()=>{throw x},0)}})};return E(p,Qy.EventType.OPEN,()=>{v||q(Ar,`RPC '${e}' stream ${i} transport opened.`)}),E(p,Qy.EventType.CLOSE,()=>{v||(v=!0,q(Ar,`RPC '${e}' stream ${i} transport closed`),_.Ro())}),E(p,Qy.EventType.ERROR,b=>{v||(v=!0,so(Ar,`RPC '${e}' stream ${i} transport errored:`,b),_.Ro(new j(O.UNAVAILABLE,"The operation could not be completed")))}),E(p,Qy.EventType.MESSAGE,b=>{var T;if(!v){let S=b.data[0];ve(!!S);let A=S,x=A.error||((T=A[0])===null||T===void 0?void 0:T.error);if(x){q(Ar,`RPC '${e}' stream ${i} received error:`,x);let H=x.status,N=function(ge){let en=Rn[ge];if(en!==void 0)return y9(en)}(H),ie=x.message;N===void 0&&(N=O.INTERNAL,ie="Unknown error status: "+H+" with message "+x.message),v=!0,_.Ro(new j(N,ie)),p.close()}else q(Ar,`RPC '${e}' stream ${i} received:`,S),_.Vo(S)}}),E(u,RK.STAT_EVENT,b=>{b.stat===Ok.PROXY?q(Ar,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===Ok.NOPROXY&&q(Ar,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.Ao()},0),_}};function $9(){return typeof window<"u"?window:null}function Gb(){return typeof document<"u"?document:null}function Ov(t){return new yO(t,!0)}var Tv=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=o,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();let n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}};var ST=class{constructor(e,n,r,i,o,s,u,c){this.si=e,this.Ko=r,this.$o=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Tv(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}stop(){return F(this,null,function*(){this.jo()&&(yield this.close(0))})}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){return F(this,null,function*(){if(this.Ho())return this.close(0)})}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,n){return F(this,null,function*(){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(En(n.toString()),En("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Io(n)})}r_(){}auth(){this.state=1;let e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{let i=new j(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){let r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(()=>F(this,null,function*(){this.state=0,this.start()}))}o_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},eF=class extends ST{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();let n=ywe(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Ee.min():s.readTime?bn(s.readTime):Ee.min()}(e);return this.listener.a_(n,r)}u_(e){let n={};n.database=_v(this.serializer),n.addTarget=function(o,s){let u,c=s.target;if(u=rT(c)?{documents:T9(o,c)}:{query:C9(o,c)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=_9(o,s.resumeToken);let h=vO(o,s.expectedCount);h!==null&&(u.expectedCount=h)}else if(s.snapshotVersion.compareTo(Ee.min())>0){u.readTime=Yf(o,s.snapshotVersion.toTimestamp());let h=vO(o,s.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);let r=_we(this.serializer,e);r&&(n.labels=r),this.e_(n)}c_(e){let n={};n.database=_v(this.serializer),n.removeTarget=e,this.e_(n)}},tF=class extends ST{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();let n=vwe(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.I_(r,n)}return ve(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){let e={};e.database=_v(this.serializer),this.e_(e)}P_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>wv(this.serializer,r))};this.e_(n)}};var nF=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new j(O.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.wo(e,n,r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new j(O.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,n,r,o,s,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(O.UNKNOWN,o.toString())})}terminate(){this.d_=!0}};var rF=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(En(n),this.f_=!1):q("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}};var iF=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=o,this.F_.ro(s=>{r.enqueueAndForget(()=>F(this,null,function*(){ec(this)&&(q("RemoteStore","Restarting streams for network reachability change."),yield function(c){return F(this,null,function*(){let h=re(c);h.C_.add(4),yield up(h),h.M_.set("Unknown"),h.C_.delete(4),yield Fv(h)})}(this))}))}),this.M_=new rF(r,i)}};function Fv(t){return F(this,null,function*(){if(ec(t))for(let e of t.v_)yield e(!0)})}function up(t){return F(this,null,function*(){for(let e of t.v_)yield e(!1)})}function zT(t,e){let n=re(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),QF(n)?KF(n):lp(n).Ho()&&WF(n,e))}function Cv(t,e){let n=re(t),r=lp(n);n.D_.delete(e),r.Ho()&&z9(n,e),n.D_.size===0&&(r.Ho()?r.Zo():ec(n)&&n.M_.set("Unknown"))}function WF(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lp(t).u_(e)}function z9(t,e){t.x_.Oe(e),lp(t).c_(e)}function KF(t){t.x_=new mO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),lp(t).start(),t.M_.g_()}function QF(t){return ec(t)&&!lp(t).jo()&&t.D_.size>0}function ec(t){return re(t).C_.size===0}function G9(t){t.x_=void 0}function kwe(t){return F(this,null,function*(){t.D_.forEach((e,n)=>{WF(t,e)})})}function Owe(t,e){return F(this,null,function*(){G9(t),QF(t)?(t.M_.w_(e),KF(t)):t.M_.set("Unknown")})}function Fwe(t,e,n){return F(this,null,function*(){if(t.M_.set("Online"),e instanceof aT&&e.state===2&&e.cause)try{yield function(i,o){return F(this,null,function*(){let s=o.cause;for(let u of o.targetIds)i.D_.has(u)&&(yield i.remoteSyncer.rejectListen(u,s),i.D_.delete(u),i.x_.removeTarget(u))})}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield DT(t,r)}else if(e instanceof Hf?t.x_.$e(e):e instanceof sT?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(Ee.min()))try{let r=yield U9(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let u=o.x_.it(s);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){let f=o.D_.get(h);f&&o.D_.set(h,f.withResumeToken(c.resumeToken,s))}}),u.targetMismatches.forEach((c,h)=>{let f=o.D_.get(c);if(!f)return;o.D_.set(c,f.withResumeToken(er.EMPTY_BYTE_STRING,f.snapshotVersion)),z9(o,c);let p=new Xf(f.target,c,h,f.sequenceNumber);WF(o,p)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n))}catch(r){q("RemoteStore","Failed to raise snapshot:",r),yield DT(t,r)}})}function DT(t,e,n){return F(this,null,function*(){if(!Zu(e))throw e;t.C_.add(1),yield up(t),t.M_.set("Offline"),n||(n=()=>U9(t.localStore)),t.asyncQueue.enqueueRetryable(()=>F(this,null,function*(){q("RemoteStore","Retrying IndexedDB access"),yield n(),t.C_.delete(1),yield Fv(t)}))})}function W9(t,e){return e().catch(n=>DT(t,n,e))}function cp(t){return F(this,null,function*(){let e=re(t),n=Xu(e),r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;Lwe(e);)try{let i=yield Nwe(e.localStore,r);if(i===null){e.b_.length===0&&n.Zo();break}r=i.batchId,Vwe(e,i)}catch(i){yield DT(e,i)}K9(e)&&Q9(e)})}function Lwe(t){return ec(t)&&t.b_.length<10}function Vwe(t,e){t.b_.push(e);let n=Xu(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function K9(t){return ec(t)&&!Xu(t).jo()&&t.b_.length>0}function Q9(t){Xu(t).start()}function Uwe(t){return F(this,null,function*(){Xu(t).E_()})}function jwe(t){return F(this,null,function*(){let e=Xu(t);for(let n of t.b_)e.P_(n.mutations)})}function Bwe(t,e,n){return F(this,null,function*(){let r=t.b_.shift(),i=fO.from(r,e,n);yield W9(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield cp(t)})}function qwe(t,e){return F(this,null,function*(){e&&Xu(t).h_&&(yield function(r,i){return F(this,null,function*(){if(function(s){return m9(s)&&s!==O.ABORTED}(i.code)){let o=r.b_.shift();Xu(r).Yo(),yield W9(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield cp(r)}})}(t,e)),K9(t)&&Q9(t)})}function T8(t,e){return F(this,null,function*(){let n=re(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");let r=ec(n);n.C_.add(3),yield up(n),r&&n.M_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),yield Fv(n)})}function oF(t,e){return F(this,null,function*(){let n=re(t);e?(n.C_.delete(2),yield Fv(n)):e||(n.C_.add(2),yield up(n),n.M_.set("Unknown"))})}function lp(t){return t.O_||(t.O_=function(n,r,i){let o=re(n);return o.A_(),new eF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:kwe.bind(null,t),Io:Owe.bind(null,t),a_:Fwe.bind(null,t)}),t.v_.push(e=>F(this,null,function*(){e?(t.O_.Yo(),QF(t)?KF(t):t.M_.set("Unknown")):(yield t.O_.stop(),G9(t))}))),t.O_}function Xu(t){return t.N_||(t.N_=function(n,r,i){let o=re(n);return o.A_(),new tF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ho:Uwe.bind(null,t),Io:qwe.bind(null,t),T_:jwe.bind(null,t),I_:Bwe.bind(null,t)}),t.v_.push(e=>F(this,null,function*(){e?(t.N_.Yo(),yield cp(t)):(yield t.N_.stop(),t.b_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))}))),t.N_}var sF=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,u=new t(e,n,s,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function hp(t,e){if(En("AsyncQueue",`${e}: ${t}`),Zu(t))return new j(O.UNAVAILABLE,`${e}: ${t}`);throw t}var AT=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=ev(),this.sortedSet=new $t(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var xT=class{constructor(){this.B_=new $t(te.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):ue():this.B_=this.B_.insert(n,e)}L_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},tp=class t{constructor(e,n,r,i,o,s,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(u=>{s.push({type:0,doc:u})}),new t(e,n,AT.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var aF=class{constructor(){this.k_=void 0,this.listeners=[]}},uF=class{constructor(){this.queries=new qs(e=>t9(e),Pv),this.onlineState="Unknown",this.q_=new Set}};function YF(t,e){return F(this,null,function*(){let n=re(t),r=e.query,i=!1,o=n.queries.get(r);if(o||(i=!0,o=new aF),i)try{o.k_=yield n.onListen(r)}catch(s){let u=hp(s,`Initialization of query '${Ff(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.listeners.push(e),e.Q_(n.onlineState),o.k_&&e.K_(o.k_)&&JF(n)})}function XF(t,e){return F(this,null,function*(){let n=re(t),r=e.query,i=!1,o=n.queries.get(r);if(o){let s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),i=o.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function Hwe(t,e){let n=re(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let u of s.listeners)u.K_(i)&&(r=!0);s.k_=i}}r&&JF(n)}function $we(t,e,n){let r=re(t),i=r.queries.get(e);if(i)for(let o of i.listeners)o.onError(n);r.queries.delete(e)}function JF(t){t.q_.forEach(e=>{e.next()})}var Sv=class{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new tp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.J_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;let n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=tp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}};var cF=class{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}};var NT=class{constructor(e){this.serializer=e}hs(e){return Vs(this.serializer,e)}Ps(e){return e.metadata.exists?b9(this.serializer,e.document,!1):On.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return bn(e)}},lF=class{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Y9(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;let r=gt.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){let n=new Map,r=new NT(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.hs(i.metadata.name);for(let s of i.metadata.queries){let u=(n.get(s)||qe()).add(o);n.set(s,u)}}return n}complete(){return F(this,null,function*(){let e=yield Rwe(this.localStore,new NT(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(let r of this.queries)yield Mwe(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}})}};function Y9(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var RT=class{constructor(e){this.key=e}},MT=class{constructor(e){this.key=e}},PT=class{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=qe(),this.mutatedKeys=qe(),this._a=r9(e),this.aa=new AT(this._a)}get ua(){return this.ia}ca(e,n){let r=n?n.la:new xT,i=n?n.aa:this.aa,o=n?n.mutatedKeys:this.mutatedKeys,s=i,u=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),v=kv(this.query,p)?p:null,_=!!m&&this.mutatedKeys.has(m.key),E=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),b=!1;m&&v?m.data.isEqual(v.data)?_!==E&&(r.track({type:3,doc:v}),b=!0):this.ha(m,v)||(r.track({type:2,doc:v}),b=!0,(c&&this._a(v,c)>0||h&&this._a(v,h)<0)&&(u=!0)):!m&&v?(r.track({type:0,doc:v}),b=!0):m&&!v&&(r.track({type:1,doc:m}),b=!0,(c||h)&&(u=!0)),b&&(v?(s=s.add(v),o=E?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{aa:s,la:r,Zi:u,mutatedKeys:o}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;let s=e.la.L_();s.sort((f,p)=>function(v,_){let E=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return E(v)-E(_)}(f.type,p.type)||this._a(f.doc,p.doc)),this.Pa(r),i=i!=null&&i;let u=n&&!i?this.Ia():[],c=this.oa.size===0&&this.current&&!i?1:0,h=c!==this.sa;return this.sa=c,s.length!==0||h?{snapshot:new tp(this.query,e.aa,o,s,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:u}:{Ta:u}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new xT,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];let e=this.oa;this.oa=qe(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});let n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new MT(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new RT(r))}),n}da(e){this.ia=e.ls,this.oa=qe();let n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return tp.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}},hF=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},dF=class{constructor(e){this.key=e,this.Ra=!1}},fF=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new qs(u=>t9(u),Pv),this.fa=new Map,this.ga=new Set,this.pa=new $t(te.comparator),this.ya=new Map,this.wa=new Iv,this.Sa={},this.ba=new Map,this.Da=Jf.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}};function zwe(t,e){return F(this,null,function*(){let n=rL(t),r,i,o=n.ma.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Aa();else{let s=yield Zf(n.localStore,zr(e)),u=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield ZF(n,e,r,u==="current",s.resumeToken),n.isPrimaryClient&&zT(n.remoteStore,s)}return i})}function ZF(t,e,n,r,i){return F(this,null,function*(){t.va=(p,m,v)=>function(E,b,T,S){return F(this,null,function*(){let A=b.view.ca(T);A.Zi&&(A=yield ET(E.localStore,b.query,!1).then(({documents:ie})=>b.view.ca(ie,A)));let x=S&&S.targetChanges.get(b.targetId),H=S&&S.targetMismatches.get(b.targetId)!=null,N=b.view.applyChanges(A,E.isPrimaryClient,x,H);return pF(E,b.targetId,N.Ta),N.snapshot})}(t,p,m,v);let o=yield ET(t.localStore,e,!0),s=new PT(e,o.ls),u=s.ca(o.documents),c=yv.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=s.applyChanges(u,t.isPrimaryClient,c);pF(t,n,h.Ta);let f=new hF(e,n,s);return t.ma.set(e,f),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),h.snapshot})}function Gwe(t,e){return F(this,null,function*(){let n=re(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(o=>!Pv(o,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ep(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Cv(n.remoteStore,r.targetId),np(n,r.targetId)}).catch(Ju))):(np(n,r.targetId),yield ep(n.localStore,r.targetId,!0))})}function Wwe(t,e,n){return F(this,null,function*(){let r=iL(t);try{let i=yield function(s,u){let c=re(s),h=rn.now(),f=u.reduce((v,_)=>v.add(_.key),qe()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let _=yi(),E=qe();return c.ss.getEntries(v,f).next(b=>{_=b,_.forEach((T,S)=>{S.isValidDocument()||(E=E.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,_)).next(b=>{p=b;let T=[];for(let S of u){let A=lwe(S,p.get(S.key).overlayedDocument);A!=null&&T.push(new qo(S.key,A,K8(A.value.mapValue),fn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,h,T,u)}).next(b=>{m=b;let T=b.applyToLocalDocumentSet(p,E);return c.documentOverlayCache.saveOverlays(v,b.batchId,T)})}).then(()=>({batchId:m.batchId,changes:o9(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,c){let h=s.Sa[s.currentUser.toKey()];h||(h=new $t(Ue)),h=h.insert(u,c),s.Sa[s.currentUser.toKey()]=h}(r,i.batchId,n),yield Ua(r,i.changes),yield cp(r.remoteStore)}catch(i){let o=hp(i,"Failed to persist write");n.reject(o)}})}function X9(t,e){return F(this,null,function*(){let n=re(t);try{let r=yield xwe(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.ya.get(o);s&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ra=!0:i.modifiedDocuments.size>0?ve(s.Ra):i.removedDocuments.size>0&&(ve(s.Ra),s.Ra=!1))}),yield Ua(n,r,e)}catch(r){yield Ju(r)}})}function C8(t,e,n){let r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ma.forEach((o,s)=>{let u=s.view.Q_(e);u.snapshot&&i.push(u.snapshot)}),function(s,u){let c=re(s);c.onlineState=u;let h=!1;c.queries.forEach((f,p)=>{for(let m of p.listeners)m.Q_(u)&&(h=!0)}),h&&JF(c)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Kwe(t,e,n){return F(this,null,function*(){let r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.ya.get(e),o=i&&i.key;if(o){let s=new $t(te.comparator);s=s.insert(o,On.newNoDocument(o,Ee.min()));let u=qe().add(o),c=new mv(Ee.min(),new Map,new $t(Ue),s,u);yield X9(r,c),r.pa=r.pa.remove(o),r.ya.delete(e),nL(r)}else yield ep(r.localStore,e,!1).then(()=>np(r,e,n)).catch(Ju)})}function Qwe(t,e){return F(this,null,function*(){let n=re(t),r=e.batch.batchId;try{let i=yield Awe(n.localStore,e);tL(n,r,null),eL(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ua(n,i)}catch(i){yield Ju(i)}})}function Ywe(t,e,n){return F(this,null,function*(){let r=re(t);try{let i=yield function(s,u){let c=re(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.mutationQueue.lookupMutationBatch(h,u).next(p=>(ve(p!==null),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>c.localDocuments.getDocuments(h,f))})}(r.localStore,e);tL(r,e,n),eL(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ua(r,i)}catch(i){yield Ju(i)}})}function Xwe(t,e){return F(this,null,function*(){let n=re(t);ec(n.remoteStore)||q("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let u=re(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>u.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){let i=hp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function eL(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function tL(t,e,n){let r=re(t),i=r.Sa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function np(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||J9(t,r)})}function J9(t,e){t.ga.delete(e.path.canonicalString());let n=t.pa.get(e);n!==null&&(Cv(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),nL(t))}function pF(t,e,n){for(let r of n)r instanceof RT?(t.wa.addReference(r.key,e),Jwe(t,r)):r instanceof MT?(q("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||J9(t,r.key)):ue()}function Jwe(t,e){let n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(q("SyncEngine","New document in limbo: "+n),t.ga.add(r),nL(t))}function nL(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){let e=t.ga.values().next().value;t.ga.delete(e);let n=new te(gt.fromString(e)),r=t.Da.next();t.ya.set(r,new dF(n)),t.pa=t.pa.insert(n,r),zT(t.remoteStore,new Xf(zr(ap(n.path)),r,"TargetPurposeLimboResolution",Mi._e))}}function Ua(t,e,n){return F(this,null,function*(){let r=re(t),i=[],o=[],s=[];r.ma.isEmpty()||(r.ma.forEach((u,c)=>{s.push(r.va(c,e,n).then(h=>{if((h||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,h!=null&&h.fromCache?"not-current":"current"),h){i.push(h);let f=WO.Qi(c.targetId,h);o.push(f)}}))}),yield Promise.all(s),r.Va.a_(i),yield function(c,h){return F(this,null,function*(){let f=re(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(h,m=>P.forEach(m.ki,v=>f.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>P.forEach(m.qi,v=>f.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Zu(p))throw p;q("LocalStore","Failed to update sequence numbers: "+p)}for(let p of h){let m=p.targetId;if(!p.fromCache){let v=f.ts.get(m),_=v.snapshotVersion,E=v.withLastLimboFreeSnapshotVersion(_);f.ts=f.ts.insert(m,E)}}})}(r.localStore,o))})}function Zwe(t,e){return F(this,null,function*(){let n=re(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());let r=yield V9(n.localStore,e);n.currentUser=e,function(o,s){o.ba.forEach(u=>{u.forEach(c=>{c.reject(new j(O.CANCELLED,s))})}),o.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ua(n,r._s)}})}function e0e(t,e){let n=re(t),r=n.ya.get(e);if(r&&r.Ra)return qe().add(r.key);{let i=qe(),o=n.fa.get(e);if(!o)return i;for(let s of o){let u=n.ma.get(s);i=i.unionWith(u.view.ua)}return i}}function t0e(t,e){return F(this,null,function*(){let n=re(t),r=yield ET(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&pF(n,e.targetId,i.Ta),i})}function n0e(t,e){return F(this,null,function*(){let n=re(t);return q9(n.localStore,e).then(r=>Ua(n,r))})}function r0e(t,e,n,r){return F(this,null,function*(){let i=re(t),o=yield function(u,c){let h=re(u),f=re(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",p=>f.Cn(p,c).next(m=>m?h.localDocuments.getDocuments(p,m):P.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield cp(i.remoteStore):n==="acknowledged"||n==="rejected"?(tL(i,e,r||null),eL(i,e),function(u,c){re(re(u).mutationQueue).Fn(c)}(i.localStore,e)):ue(),yield Ua(i,o)):q("SyncEngine","Cannot apply mutation batch with id: "+e)})}function i0e(t,e){return F(this,null,function*(){let n=re(t);if(rL(n),iL(n),e===!0&&n.Ca!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield S8(n,r.toArray());n.Ca=!0,yield oF(n.remoteStore,!0);for(let o of i)zT(n.remoteStore,o)}else if(e===!1&&n.Ca!==!1){let r=[],i=Promise.resolve();n.fa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(np(n,s),ep(n.localStore,s,!0))),Cv(n.remoteStore,s)}),yield i,yield S8(n,r),function(s){let u=re(s);u.ya.forEach((c,h)=>{Cv(u.remoteStore,h)}),u.wa.Vr(),u.ya=new Map,u.pa=new $t(te.comparator)}(n),n.Ca=!1,yield oF(n.remoteStore,!1)}})}function S8(t,e,n){return F(this,null,function*(){let r=re(t),i=[],o=[];for(let s of e){let u,c=r.fa.get(s);if(c&&c.length!==0){u=yield Zf(r.localStore,zr(c[0]));for(let h of c){let f=r.ma.get(h),p=yield t0e(r,f);p.snapshot&&o.push(p.snapshot)}}else{let h=yield B9(r.localStore,s);u=yield Zf(r.localStore,h),yield ZF(r,Z9(h),s,!1,u.resumeToken)}i.push(u)}return r.Va.a_(o),i})}function Z9(t){return e9(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function o0e(t){return function(n){return re(re(n).persistence).Bi()}(re(t).localStore)}function s0e(t,e,n,r){return F(this,null,function*(){let i=re(t);if(i.Ca)return void q("SyncEngine","Ignoring unexpected query state notification.");let o=i.fa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield q9(i.localStore,n9(o[0])),u=mv.createSynthesizedRemoteEventForCurrentChange(e,n==="current",er.EMPTY_BYTE_STRING);yield Ua(i,s,u);break}case"rejected":yield ep(i.localStore,e,!0),np(i,e,r);break;default:ue()}})}function a0e(t,e,n){return F(this,null,function*(){let r=rL(t);if(r.Ca){for(let i of e){if(r.fa.has(i)){q("SyncEngine","Adding an already active target "+i);continue}let o=yield B9(r.localStore,i),s=yield Zf(r.localStore,o);yield ZF(r,Z9(o),s.targetId,!1,s.resumeToken),zT(r.remoteStore,s)}for(let i of n)r.fa.has(i)&&(yield ep(r.localStore,i,!1).then(()=>{Cv(r.remoteStore,i),np(r,i)}).catch(Ju))}})}function rL(t){let e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=X9.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e0e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Kwe.bind(null,e),e.Va.a_=Hwe.bind(null,e.eventManager),e.Va.Fa=$we.bind(null,e.eventManager),e}function iL(t){let e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Qwe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ywe.bind(null,e),e}function u0e(t,e,n){let r=re(t);(function(o,s,u){return F(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(v,_){let E=re(v),b=bn(_.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",T=>E.Kr.getBundleMetadata(T,_.id)).then(T=>!!T&&T.createTime.compareTo(b)>=0)}(o.localStore,c))return yield s.close(),u._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(c)),Promise.resolve(new Set);u._updateProgress(Y9(c));let h=new lF(c,o.localStore,s.serializer),f=yield s.Ma();for(;f;){let m=yield h.ea(f);m&&u._updateProgress(m),f=yield s.Ma()}let p=yield h.complete();return yield Ua(o,p.ra,void 0),yield function(v,_){let E=re(v);return E.persistence.runTransaction("Save bundle","readwrite",b=>E.Kr.saveBundleMetadata(b,_))}(o.localStore,c),u._completeWith(p.progress),Promise.resolve(p.na)}catch(c){return so("SyncEngine",`Loading bundle failed with ${c}`),u._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Dv=class{constructor(){this.synchronizeTabs=!1}initialize(e){return F(this,null,function*(){this.serializer=Ov(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return L9(this.persistence,new wT,e.initialUser,this.serializer)}createPersistence(e){return new vT(_T.jr,this.serializer)}createSharedClientState(e){return new TT}terminate(){return F(this,null,function*(){this.gcScheduler&&this.gcScheduler.stop(),yield this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var kT=class t extends Dv{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return F(this,null,function*(){yield VN(t.prototype,this,"initialize").call(this,e),yield this.xa.initialize(this,e),yield iL(this.xa.syncEngine),yield cp(this.xa.remoteStore),yield this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return L9(this.persistence,new wT,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new MO(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new Xk(n,this.persistence);return new Yk(e.asyncQueue,r)}createPersistence(e){let n=GF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?oo.withCacheSize(this.cacheSizeBytes):oo.DEFAULT;return new GO(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,$9(),Gb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new TT}},gF=class t extends kT{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return F(this,null,function*(){yield VN(t.prototype,this,"initialize").call(this,e);let n=this.xa.syncEngine;this.sharedClientState instanceof sv&&(this.sharedClientState.syncEngine={Ys:r0e.bind(null,n),Zs:s0e.bind(null,n),Xs:a0e.bind(null,n),Bi:o0e.bind(null,n),Js:n0e.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.mi(r=>F(this,null,function*(){yield i0e(this.xa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=$9();if(!sv.D(n))throw new j(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=GF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sv(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Av=class{initialize(e,n){return F(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>C8(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zwe.bind(null,this.syncEngine),yield oF(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new uF}()}createDatastore(e){let n=Ov(e.databaseInfo.databaseId),r=function(o){return new ZO(o)}(e.databaseInfo);return function(o,s,u,c){return new nF(o,s,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,u){return new iF(r,i,o,s,u)}(this.localStore,this.datastore,e.asyncQueue,n=>C8(this.syncEngine,n,0),function(){return CT.D()?new CT:new XO}())}createSyncEngine(e,n){return function(i,o,s,u,c,h,f){let p=new fF(i,o,s,u,c,h);return f&&(p.Ca=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(n){return F(this,null,function*(){let r=re(n);q("RemoteStore","RemoteStore shutting down."),r.C_.add(5),yield up(r),r.F_.shutdown(),r.M_.set("Unknown")})}(this.remoteStore)}};function D8(t,e=10240){let n=0;return{read(){return F(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return F(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var rp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):En("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var mF=class{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new kn,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}getMetadata(){return F(this,null,function*(){return this.metadata.promise})}Ma(){return F(this,null,function*(){return yield this.getMetadata(),this.ka()})}ka(){return F(this,null,function*(){let e=yield this.qa();if(e===null)return null;let n=this.La.decode(e),r=Number(n);isNaN(r)&&this.Qa(`length string (${n}) is not valid number`);let i=yield this.Ka(r);return new cF(JSON.parse(i),e.length+r)})}$a(){return this.buffer.findIndex(e=>e===123)}qa(){return F(this,null,function*(){for(;this.$a()<0&&!(yield this.Ua()););if(this.buffer.length===0)return null;let e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ka(e){return F(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ua())&&this.Qa("Reached the end of bundle when more is expected.");let n=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){return F(this,null,function*(){let e=yield this.Ba.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var yF=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){return F(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new j(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");let n=yield function(i,o){return F(this,null,function*(){let s=re(i),u=_v(s.serializer)+"/documents",c={documents:o.map(m=>vv(s.serializer,m))},h=yield s.Co("BatchGetDocuments",u,c,o.length),f=new Map;h.forEach(m=>{let v=mwe(s.serializer,m);f.set(v.key.toString(),v)});let p=[];return o.forEach(m=>{let v=f.get(m.toString());ve(!!v),p.push(v)}),p})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return F(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=te.fromPath(r);this.mutations.push(new fv(i,this.precondition(i)))}),yield function(r,i){return F(this,null,function*(){let o=re(r),s=_v(o.serializer)+"/documents",u={writes:i.map(c=>wv(o.serializer,c))};yield o.wo("Commit",s,u)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ue();n=Ee.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new j(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ee.min())?fn.exists(!1):fn.updateTime(n):fn.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ee.min()))throw new j(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fn.updateTime(n)}return fn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var vF=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Wa=r.maxAttempts,this.zo=new Tv(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(()=>F(this,null,function*(){let e=new yF(this.datastore),n=this.za(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ja(i)}))}).catch(r=>{this.ja(r)})}))}za(e){try{let n=this.updateFunction(e);return!Rv(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!m9(n)}return!1}};var _F=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Pn.UNAUTHENTICATED,this.clientId=Qb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>F(this,null,function*(){q("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){return F(this,null,function*(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}})}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new j(O.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>F(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=hp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Wb(t,e){return F(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");let n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>F(this,null,function*(){r.isEqual(i)||(yield V9(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function wF(t,e){return F(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield oL(t);q("FirestoreClient","Initializing OnlineComponentProvider");let r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>T8(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>T8(e.remoteStore,o)),t._onlineComponents=e})}function eQ(t){return t.name==="FirebaseError"?t.code===O.FAILED_PRECONDITION||t.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function oL(t){return F(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Wb(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!eQ(n))throw n;so("Error using user provided cache. Falling back to memory cache: "+n),yield Wb(t,new Dv)}}else q("FirestoreClient","Using default OfflineComponentProvider"),yield Wb(t,new Dv);return t._offlineComponents})}function GT(t){return F(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),yield wF(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),yield wF(t,new Av))),t._onlineComponents})}function tQ(t){return oL(t).then(e=>e.persistence)}function sL(t){return oL(t).then(e=>e.localStore)}function nQ(t){return GT(t).then(e=>e.remoteStore)}function aL(t){return GT(t).then(e=>e.syncEngine)}function c0e(t){return GT(t).then(e=>e.datastore)}function ip(t){return F(this,null,function*(){let e=yield GT(t),n=e.eventManager;return n.onListen=zwe.bind(null,e.syncEngine),n.onUnlisten=Gwe.bind(null,e.syncEngine),n})}function l0e(t){return t.asyncQueue.enqueue(()=>F(this,null,function*(){let e=yield tQ(t),n=yield nQ(t);return e.setNetworkEnabled(!0),function(i){let o=re(i);return o.C_.delete(0),Fv(o)}(n)}))}function h0e(t){return t.asyncQueue.enqueue(()=>F(this,null,function*(){let e=yield tQ(t),n=yield nQ(t);return e.setNetworkEnabled(!1),function(i){return F(this,null,function*(){let o=re(i);o.C_.add(0),yield up(o),o.M_.set("Offline")})}(n)}))}function d0e(t,e){let n=new kn;return t.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(i,o,s){return F(this,null,function*(){try{let u=yield function(h,f){let p=re(h);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,f))}(i,o);u.isFoundDocument()?s.resolve(u):u.isNoDocument()?s.resolve(null):s.reject(new j(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){let c=hp(u,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield sL(t),e,n)})),n.promise}function rQ(t,e,n={}){let r=new kn;return t.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(o,s,u,c,h){let f=new rp({next:m=>{s.enqueueAndForget(()=>XF(o,p));let v=m.docs.has(u);!v&&m.fromCache?h.reject(new j(O.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?h.reject(new j(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new Sv(ap(u.path),f,{includeMetadataChanges:!0,J_:!0});return YF(o,p)}(yield ip(t),t.asyncQueue,e,n,r)})),r.promise}function f0e(t,e){let n=new kn;return t.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(i,o,s){return F(this,null,function*(){try{let u=yield ET(i,o,!0),c=new PT(o,u.ls),h=c.ca(u.documents),f=c.applyChanges(h,!1);s.resolve(f.snapshot)}catch(u){let c=hp(u,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield sL(t),e,n)})),n.promise}function iQ(t,e,n={}){let r=new kn;return t.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(o,s,u,c,h){let f=new rp({next:m=>{s.enqueueAndForget(()=>XF(o,p)),m.fromCache&&c.source==="server"?h.reject(new j(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new Sv(u,f,{includeMetadataChanges:!0,J_:!0});return YF(o,p)}(yield ip(t),t.asyncQueue,e,n,r)})),r.promise}function p0e(t,e){let n=new rp(e);return t.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(i,o){re(i).q_.add(o),o.next()}(yield ip(t),n)})),()=>{n.Na(),t.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(i,o){re(i).q_.delete(o)}(yield ip(t),n)}))}}function g0e(t,e,n,r){let i=function(s,u){let c;return c=typeof s=="string"?v9().encode(s):s,function(f,p){return new mF(f,p)}(function(f,p){if(f instanceof Uint8Array)return D8(f,p);if(f instanceof ArrayBuffer)return D8(new Uint8Array(f),p);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),u)}(n,Ov(e));t.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){u0e(yield aL(t),i,r)}))}function m0e(t,e){return t.asyncQueue.enqueue(()=>F(this,null,function*(){return function(r,i){let o=re(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Kr.getNamedQuery(s,i))}(yield sL(t),e)}))}function oQ(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var A8=new Map;function uL(t,e,n){if(!n)throw new j(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cL(t,e,n,r){if(e===!0&&r===!0)throw new j(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function x8(t){if(!te.isDocumentKey(t))throw new j(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function N8(t){if(te.isDocumentKey(t))throw new j(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function WT(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function ht(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=WT(t);throw new j(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function sQ(t,e){if(e<=0)throw new j(O.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var OT=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oQ((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new j(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new j(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new j(O.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},eh=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new j(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new j(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OT(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jk;switch(r.type){case"firstParty":return new $k(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=A8.get(n);r&&(q("ComponentProvider","Removing Datastore"),A8.delete(n),r.terminate())}(this),Promise.resolve()}};function aQ(t,e,n,r={}){var i;let o=(t=ht(t,eh))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=Pn.MOCK_USER;else{u=Sd(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new j(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Pn(h)}t._authCredentials=new Bk(new Kb(u,c))}}var gr=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ut=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Us=class t extends gr{constructor(e,n,r){super(e,n,ap(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new te(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function lL(t,e,...n){if(t=Me(t),uL("collection","path",e),t instanceof eh){let r=gt.fromString(e,...n);return N8(r),new Us(t,null,r)}{if(!(t instanceof Ut||t instanceof Us))throw new j(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(gt.fromString(e,...n));return N8(r),new Us(t.firestore,null,r)}}function uQ(t,e){if(t=ht(t,eh),uL("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(O.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gr(t,null,function(r){return new Bo(gt.emptyPath(),r)}(e))}function Lv(t,e,...n){if(t=Me(t),arguments.length===1&&(e=Qb.newId()),uL("doc","path",e),t instanceof eh){let r=gt.fromString(e,...n);return x8(r),new Ut(t,null,new te(r))}{if(!(t instanceof Ut||t instanceof Us))throw new j(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(gt.fromString(e,...n));return x8(r),new Ut(t.firestore,t instanceof Us?t.converter:null,new te(r))}}function hL(t,e){return t=Me(t),e=Me(e),(t instanceof Ut||t instanceof Us)&&(e instanceof Ut||e instanceof Us)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function dL(t,e){return t=Me(t),e=Me(e),t instanceof gr&&e instanceof gr&&t.firestore===e.firestore&&Pv(t._query,e._query)&&t.converter===e.converter}var EF=class{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Tv(this,"async_queue_retry"),this.iu=()=>{let n=Gb();n&&q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};let e=Gb();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;let n=Gb();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});let n=new kn;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){return F(this,null,function*(){if(this.Ya.length!==0){try{yield this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Zu(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}})}ou(e){let n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{this.eu=r,this.tu=!1;let i=function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),u}(r);throw En("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);let i=sF.createAndSchedule(this,e,n,r,o=>this.au(o));return this.Xa.push(i),i}su(){this.eu&&ue()}verifyOperationInProgress(){}uu(){return F(this,null,function*(){let e;do e=this.Ja,yield e;while(e!==this.Ja)})}cu(e){for(let n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){let n=this.Xa.indexOf(e);this.Xa.splice(n,1)}};function IF(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var bF=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new kn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var cQ=-1,Yt=class extends eh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new EF}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||lQ(this),this._firestoreClient.terminate()}};function Kn(t){return t._firestoreClient||lQ(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function lQ(t){var e,n,r;let i=t._freezeSettings(),o=function(u,c,h,f){return new Jk(u,c,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,oQ(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new _F(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function hQ(t,e){wQ(t=ht(t,Yt));let n=Kn(t);if(n._uninitializedComponentsProvider)throw new j(O.FAILED_PRECONDITION,"SDK cache is already specified.");so("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Av;return fQ(n,i,new kT(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function dQ(t){wQ(t=ht(t,Yt));let e=Kn(t);if(e._uninitializedComponentsProvider)throw new j(O.FAILED_PRECONDITION,"SDK cache is already specified.");so("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Av;return fQ(e,r,new gF(r,n.cacheSizeBytes))}function fQ(t,e,n){let r=new kn;return t.asyncQueue.enqueue(()=>F(this,null,function*(){try{yield Wb(t,n),yield wF(t,e),r.resolve()}catch(i){let o=i;if(!eQ(o))throw o;so("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function pQ(t){if(t._initialized&&!t._terminated)throw new j(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new kn;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>F(this,null,function*(){try{yield function(r){return F(this,null,function*(){if(!qu.D())return Promise.resolve();let i=r+"main";yield qu.delete(i)})}(GF(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function gQ(t){return function(n){let r=new kn;return n.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return Xwe(yield aL(n),r)})),r.promise}(Kn(t=ht(t,Yt)))}function mQ(t){return l0e(Kn(t=ht(t,Yt)))}function yQ(t){return h0e(Kn(t=ht(t,Yt)))}function vQ(t,e){let n=Kn(t=ht(t,Yt)),r=new bF;return g0e(n,t._databaseId,e,r),r}function _Q(t,e){return m0e(Kn(t=ht(t,Yt)),e).then(n=>n?new gr(t,null,n.query):null)}function wQ(t){if(t._initialized||t._terminated)throw new j(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Hs=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(er.fromBase64String(e))}catch(n){throw new j(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ho=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var La=class{constructor(e){this._methodName=e}};var th=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}};var y0e=/^__.*__$/,TF=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qu(e,this.data,n,this.fieldTransforms)}},FT=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qo(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function EQ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}var LT=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return VT(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(EQ(this.Iu)&&y0e.test(e))throw this.mu('Document fields cannot begin and end with "__"')}},CF=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ov(e)}pu(e,n,r,i=!1){return new LT({Iu:e,methodName:n,gu:r,path:In.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function oh(t){let e=t._freezeSettings(),n=Ov(t._databaseId);return new CF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function KT(t,e,n,r,i,o={}){let s=t.pu(o.merge||o.mergeFields?2:0,e,n,i);gL("Data must be an object, but it was:",s,r);let u=TQ(r,s),c,h;if(o.merge)c=new Pi(s.fieldMask),h=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=NF(e,p,n);if(!s.contains(m))throw new j(O.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);SQ(f,m)||f.push(m)}c=new Pi(f),h=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=s.fieldTransforms;return new TF(new xr(u),c,h)}var xv=class t extends La{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function IQ(t,e,n){return new LT({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var SF=class t extends La{_toFieldTransform(e){return new Xl(e.path,new Wu)}isEqual(e){return e instanceof t}},DF=class extends La{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=IQ(this,e,!0),r=this.yu.map(o=>sh(o,n)),i=new Oa(r);return new Xl(e.path,i)}isEqual(e){return this===e}},AF=class extends La{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){let n=IQ(this,e,!0),r=this.yu.map(o=>sh(o,n)),i=new Fa(r);return new Xl(e.path,i)}isEqual(e){return this===e}},xF=class extends La{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){let n=new Ku(e.serializer,c9(e.serializer,this.wu));return new Xl(e.path,n)}isEqual(e){return this===e}};function fL(t,e,n,r){let i=t.pu(1,e,n);gL("Data must be an object, but it was:",i,r);let o=[],s=xr.empty();ih(r,(c,h)=>{let f=mL(e,c,n);h=Me(h);let p=i.Ru(f);if(h instanceof xv)o.push(f);else{let m=sh(h,p);m!=null&&(o.push(f),s.set(f,m))}});let u=new Pi(o);return new FT(s,u,i.fieldTransforms)}function pL(t,e,n,r,i,o){let s=t.pu(1,e,n),u=[NF(e,r,n)],c=[i];if(o.length%2!=0)throw new j(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)u.push(NF(e,o[m])),c.push(o[m+1]);let h=[],f=xr.empty();for(let m=u.length-1;m>=0;--m)if(!SQ(h,u[m])){let v=u[m],_=c[m];_=Me(_);let E=s.Ru(v);if(_ instanceof xv)h.push(v);else{let b=sh(_,E);b!=null&&(h.push(v),f.set(v,b))}}let p=new Pi(h);return new FT(f,p,s.fieldTransforms)}function bQ(t,e,n,r=!1){return sh(n,t.pu(r?4:3,e))}function sh(t,e){if(CQ(t=Me(t)))return gL("Unsupported field value:",e,t),TQ(t,e);if(t instanceof La)return function(r,i){if(!EQ(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let u of r){let c=sh(u,i.Vu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return c9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=rn.fromDate(r);return{timestampValue:Yf(i.serializer,o)}}if(r instanceof rn){let o=new rn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yf(i.serializer,o)}}if(r instanceof th)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hs)return{bytesValue:_9(i.serializer,r._byteString)};if(r instanceof Ut){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:HF(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${WT(r)}`)}(t,e)}function TQ(t,e){let n={};return z8(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ih(t,(r,i)=>{let o=sh(i,e.Eu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function CQ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rn||t instanceof th||t instanceof Hs||t instanceof Ut||t instanceof La)}function gL(t,e,n){if(!CQ(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=WT(n);throw r==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+r)}}function NF(t,e,n){if((e=Me(e))instanceof Ho)return e._internalPath;if(typeof e=="string")return mL(t,e);throw VT("Field path arguments must be of type string or ",t,!1,void 0,n)}var v0e=new RegExp("[~\\*/\\[\\]]");function mL(t,e,n){if(e.search(v0e)>=0)throw VT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ho(...e.split("."))._internalPath}catch{throw VT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function VT(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new j(O.INVALID_ARGUMENT,u+t+c)}function SQ(t,e){return t.some(n=>n.isEqual(e))}var nh=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new RF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(QT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},RF=class extends nh{data(){return super.data()}};function QT(t,e){return typeof e=="string"?mL(t,e):e instanceof Ho?e._internalPath:e._delegate._internalPath}function DQ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Nv=class{},rh=class extends Nv{};function ja(t,e,...n){let r=[];e instanceof Nv&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof MF).length,u=o.filter(c=>c instanceof UT).length;if(s>1||s>0&&u>0)throw new j(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var UT=class t extends rh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return LQ(e._query,n),new gr(e.firestore,e.converter,hO(e._query,n))}_parse(e){let n=oh(e.firestore);return function(o,s,u,c,h,f,p){let m;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new j(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){M8(p,f);let v=[];for(let _ of p)v.push(R8(c,o,_));m={arrayValue:{values:v}}}else m=R8(c,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||M8(p,f),m=bQ(u,s,p,f==="in"||f==="not-in");return st.create(h,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function AQ(t,e,n){let r=e,i=QT("where",t);return UT._create(i,r,n)}var MF=class t extends Nv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Dt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,u=o.getFlattenedFilters();for(let c of u)LQ(s,c),s=hO(s,c)}(e._query,n),new gr(e.firestore,e.converter,hO(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var PF=class t extends rh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new j(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new j(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ql(o,s)}(e._query,this._field,this._direction);return new gr(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Bo(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function xQ(t,e="asc"){let n=e,r=QT("orderBy",t);return PF._create(r,n)}var jT=class t extends rh{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new gr(e.firestore,e.converter,oT(e._query,this._limit,this._limitType))}};function NQ(t){return sQ("limit",t),jT._create("limit",t,"F")}function RQ(t){return sQ("limitToLast",t),jT._create("limitToLast",t,"L")}var BT=class t extends rh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=FQ(e,this.type,this._docOrFields,this._inclusive);return new gr(e.firestore,e.converter,function(i,o){return new Bo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function MQ(...t){return BT._create("startAt",t,!0)}function PQ(...t){return BT._create("startAfter",t,!1)}var qT=class t extends rh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=FQ(e,this.type,this._docOrFields,this._inclusive);return new gr(e.firestore,e.converter,function(i,o){return new Bo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function kQ(...t){return qT._create("endBefore",t,!1)}function OQ(...t){return qT._create("endAt",t,!0)}function FQ(t,e,n,r){if(n[0]=Me(n[0]),n[0]instanceof nh)return function(o,s,u,c,h){if(!c)throw new j(O.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);let f=[];for(let p of qf(o))if(p.field.isKeyField())f.push(Kl(s,c.key));else{let m=c.data.field(p.field);if($T(m))throw new j(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new j(O.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}f.push(m)}return new Bs(f,h)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=oh(t.firestore);return function(s,u,c,h,f,p){let m=s.explicitOrderBy;if(f.length>m.length)throw new j(O.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let _=0;_<f.length;_++){let E=f[_];if(m[_].field.isKeyField()){if(typeof E!="string")throw new j(O.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof E}`);if(!BF(s)&&E.indexOf("/")!==-1)throw new j(O.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${E}' contains a slash.`);let b=s.path.child(gt.fromString(E));if(!te.isDocumentKey(b))throw new j(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);let T=new te(b);v.push(Kl(u,T))}else{let b=bQ(c,h,E);v.push(b)}}return new Bs(v,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function R8(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new j(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BF(e)&&n.indexOf("/")!==-1)throw new j(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(gt.fromString(n));if(!te.isDocumentKey(r))throw new j(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kl(t,new te(r))}if(n instanceof Ut)return Kl(t,n._key);throw new j(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${WT(n)}.`)}function M8(t,e){if(!Array.isArray(t)||t.length===0)throw new j(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LQ(t,e){let n=function(i,o){for(let s of i)for(let u of s.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new j(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var op=class{convertValue(e,n="none"){switch(Wl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($u(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ih(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new th(dn(e.latitude),dn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=UF(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(lv(e));default:return null}}convertTimestamp(e){let n=Hu(e);return new rn(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=gt.fromString(e);ve(x9(r));let i=new zu(r.get(1),r.get(3)),o=new te(r.popFirst(5));return i.isEqual(n)||En(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function YT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var kF=class extends op{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hs(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}};var ka=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},uo=class extends nh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ju(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(QT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ju=class extends uo{data(e={}){return super.data(e)}},$o=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ka(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ju(this._firestore,this._userDataWriter,r.key,r,new ka(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(u=>{let c=new ju(i._firestore,i._userDataWriter,u.doc.key,u.doc,new ka(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{let c=new ju(i._firestore,i._userDataWriter,u.doc.key,u.doc,new ka(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),h=-1,f=-1;return u.type!==0&&(h=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),u.type!==1&&(s=s.add(u.doc),f=s.indexOf(u.doc.key)),{type:_0e(u.type),doc:c,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function _0e(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}function yL(t,e){return t instanceof uo&&e instanceof uo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof $o&&e instanceof $o&&t._firestore===e._firestore&&dL(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function VQ(t){t=ht(t,Ut);let e=ht(t.firestore,Yt);return rQ(Kn(e),t._key).then(n=>EL(e,t,n))}var Va=class extends op{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hs(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}};function UQ(t){t=ht(t,Ut);let e=ht(t.firestore,Yt),n=Kn(e),r=new Va(e);return d0e(n,t._key).then(i=>new uo(e,r,t._key,i,new ka(i!==null&&i.hasLocalMutations,!0),t.converter))}function jQ(t){t=ht(t,Ut);let e=ht(t.firestore,Yt);return rQ(Kn(e),t._key,{source:"server"}).then(n=>EL(e,t,n))}function BQ(t){t=ht(t,gr);let e=ht(t.firestore,Yt),n=Kn(e),r=new Va(e);return DQ(t._query),iQ(n,t._query).then(i=>new $o(e,r,t,i))}function qQ(t){t=ht(t,gr);let e=ht(t.firestore,Yt),n=Kn(e),r=new Va(e);return f0e(n,t._query).then(i=>new $o(e,r,t,i))}function HQ(t){t=ht(t,gr);let e=ht(t.firestore,Yt),n=Kn(e),r=new Va(e);return iQ(n,t._query,{source:"server"}).then(i=>new $o(e,r,t,i))}function vL(t,e,n){t=ht(t,Ut);let r=ht(t.firestore,Yt),i=YT(t.converter,e,n);return dp(r,[KT(oh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,fn.none())])}function _L(t,e,n,...r){t=ht(t,Ut);let i=ht(t.firestore,Yt),o=oh(i),s;return s=typeof(e=Me(e))=="string"||e instanceof Ho?pL(o,"updateDoc",t._key,e,n,r):fL(o,"updateDoc",t._key,e),dp(i,[s.toMutation(t._key,fn.exists(!0))])}function $Q(t){return dp(ht(t.firestore,Yt),[new Yu(t._key,fn.none())])}function zQ(t,e){let n=ht(t.firestore,Yt),r=Lv(t),i=YT(t.converter,e);return dp(n,[KT(oh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,fn.exists(!1))]).then(()=>r)}function wL(t,...e){var n,r,i;t=Me(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||IF(e[s])||(o=e[s],s++);let u={includeMetadataChanges:o.includeMetadataChanges};if(IF(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,h,f;if(t instanceof Ut)h=ht(t.firestore,Yt),f=ap(t._key.path),c={next:p=>{e[s]&&e[s](EL(h,t,p))},error:e[s+1],complete:e[s+2]};else{let p=ht(t,gr);h=ht(p.firestore,Yt),f=p._query;let m=new Va(h);c={next:v=>{e[s]&&e[s](new $o(h,m,p,v))},error:e[s+1],complete:e[s+2]},DQ(t._query)}return function(m,v,_,E){let b=new rp(E),T=new Sv(v,b,_);return m.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return YF(yield ip(m),T)})),()=>{b.Na(),m.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return XF(yield ip(m),T)}))}}(Kn(h),f,u,c)}function GQ(t,e){return p0e(Kn(t=ht(t,Yt)),IF(e)?e:{next:e})}function dp(t,e){return function(r,i){let o=new kn;return r.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return Wwe(yield aL(r),i,o)})),o.promise}(Kn(t),e)}function EL(t,e,n){let r=n.docs.get(e._key),i=new Va(t);return new uo(t,i,e._key,r,new ka(n.hasPendingWrites,n.fromCache),e.converter)}var w0e={maxAttempts:5};var HT=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=oh(e)}set(e,n,r){this._verifyNotCommitted();let i=Vu(e,this._firestore),o=YT(i.converter,n,r),s=KT(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,fn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Vu(e,this._firestore),s;return s=typeof(n=Me(n))=="string"||n instanceof Ho?pL(this._dataReader,"WriteBatch.update",o._key,n,r,i):fL(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,fn.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Vu(e,this._firestore);return this._mutations=this._mutations.concat(new Yu(n._key,fn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Vu(t,e){if((t=Me(t)).firestore!==e)throw new j(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var OF=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=oh(n)}get(n){let r=Vu(n,this._firestore),i=new kF(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return ue();let s=o[0];if(s.isFoundDocument())return new nh(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new nh(this._firestore,i,r._key,null,r.converter);throw ue()})}set(n,r,i){let o=Vu(n,this._firestore),s=YT(o.converter,r,i),u=KT(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,u),this}update(n,r,i,...o){let s=Vu(n,this._firestore),u;return u=typeof(r=Me(r))=="string"||r instanceof Ho?pL(this._dataReader,"Transaction.update",s._key,r,i,o):fL(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,u),this}delete(n){let r=Vu(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Vu(e,this._firestore),r=new Va(this._firestore);return super.get(e).then(i=>new uo(this._firestore,r,n._key,i._document,new ka(!1,!1),n.converter))}};function WQ(t,e,n){t=ht(t,Yt);let r=Object.assign(Object.assign({},w0e),n);return function(o){if(o.maxAttempts<1)throw new j(O.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,u){let c=new kn;return o.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){let h=yield c0e(o);new vF(o.asyncQueue,h,u,s,c).run()})),c.promise}(Kn(t),i=>e(new OF(t,i)),r)}function KQ(){return new xv("deleteField")}function QQ(){return new SF("serverTimestamp")}function YQ(...t){return new DF("arrayUnion",t)}function XQ(...t){return new AF("arrayRemove",t)}function JQ(t){return new xF("increment",t)}(function(e,n=!0){(function(i){sp=i})(Dd),ha(new cr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),u=new Yt(new qk(r.getProvider("auth-internal")),new Gk(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new j(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zu(h.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),ci(kK,"4.4.0",e),ci(kK,"4.4.0","esm2017")})();var E0e="@firebase/firestore-compat",I0e="0.3.23";function DL(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new j("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function ZQ(){if(typeof Uint8Array>"u")throw new j("unimplemented","Uint8Arrays are not available in this environment.")}function e7(){if(!G8())throw new j("unimplemented","Blobs are unavailable in Firestore in this environment.")}var XT=class t{constructor(e){this._delegate=e}static fromBase64String(e){return e7(),new t(Hs.fromBase64String(e))}static fromUint8Array(e){return ZQ(),new t(Hs.fromUint8Array(e))}toBase64(){return e7(),this._delegate.toBase64()}toUint8Array(){return ZQ(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function IL(t){return b0e(t,["next","error","complete"])}function b0e(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var bL=class{enableIndexedDbPersistence(e,n){return hQ(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return dQ(e._delegate)}clearIndexedDbPersistence(e){return pQ(e._delegate)}},JT=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof zu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&so("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){aQ(this._delegate,e,n,r)}enableNetwork(){return mQ(this._delegate)}disableNetwork(){return yQ(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return gQ(this._delegate)}onSnapshotsInSync(e){return GQ(this._delegate,e)}get app(){if(!this._appCompat)throw new j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gp(this,lL(this._delegate,e))}catch(n){throw Gr(n,"collection()","Firestore.collection()")}}doc(e){try{return new $s(this,Lv(this._delegate,e))}catch(n){throw Gr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new lh(this,uQ(this._delegate,e))}catch(n){throw Gr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return WQ(this._delegate,n=>e(new ZT(this,n)))}batch(){return Kn(this._delegate),new eC(new HT(this._delegate,e=>dp(this._delegate,e)))}loadBundle(e){return vQ(this._delegate,e)}namedQuery(e){return _Q(this._delegate,e).then(n=>n?new lh(this,n):null)}},fp=class extends op{constructor(e){super(),this.firestore=e}convertBytes(e){return new XT(new Hs(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return $s.forKey(n,this.firestore,null)}};function T0e(t){k8(t)}var ZT=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new fp(e)}get(e){let n=ah(e);return this._delegate.get(n).then(r=>new uh(this._firestore,new uo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=ah(e);return r?(DL("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=ah(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=ah(e);return this._delegate.delete(n),this}},eC=class{constructor(e){this._delegate=e}set(e,n,r){let i=ah(e);return r?(DL("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=ah(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=ah(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},pp=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new ju(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ch(this._firestore,r),n!=null?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new fp(e),n),i.set(n,o)),o}};pp.INSTANCES=new WeakMap;var $s=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new fp(e)}static forPath(e,n,r){if(e.length%2!==0)throw new j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Ut(n._delegate,r,new te(e)))}static forKey(e,n,r){return new t(n,new Ut(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new gp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gp(this.firestore,lL(this._delegate,e))}catch(n){throw Gr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Me(e),e instanceof Ut?hL(this._delegate,e):!1}set(e,n){n=DL("DocumentReference.set",n);try{return n?vL(this._delegate,e,n):vL(this._delegate,e)}catch(r){throw Gr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?_L(this._delegate,e):_L(this._delegate,e,n,...r)}catch(i){throw Gr(i,"updateDoc()","DocumentReference.update()")}}delete(){return $Q(this._delegate)}onSnapshot(...e){let n=t7(e),r=n7(e,i=>new uh(this.firestore,new uo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return wL(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=UQ(this._delegate):(e==null?void 0:e.source)==="server"?n=jQ(this._delegate):n=VQ(this._delegate),n.then(r=>new uh(this.firestore,new uo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(pp.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Gr(t,e,n){return t.message=t.message.replace(e,n),t}function t7(t){for(let e of t)if(typeof e=="object"&&!IL(e))return e;return{}}function n7(t,e){var n,r;let i;return IL(t[0])?i=t[0]:IL(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var uh=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new $s(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return yL(this._delegate,e._delegate)}},ch=class extends uh{data(e){let n=this._delegate.data(e);return this._delegate._converter||O8(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},lh=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new fp(e)}where(e,n,r){try{return new t(this.firestore,ja(this._delegate,AQ(e,n,r)))}catch(i){throw Gr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,ja(this._delegate,xQ(e,n)))}catch(r){throw Gr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,ja(this._delegate,NQ(e)))}catch(n){throw Gr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,ja(this._delegate,RQ(e)))}catch(n){throw Gr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,ja(this._delegate,MQ(...e)))}catch(n){throw Gr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,ja(this._delegate,PQ(...e)))}catch(n){throw Gr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,ja(this._delegate,kQ(...e)))}catch(n){throw Gr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,ja(this._delegate,OQ(...e)))}catch(n){throw Gr(n,"endAt()","Query.endAt()")}}isEqual(e){return dL(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=qQ(this._delegate):(e==null?void 0:e.source)==="server"?n=HQ(this._delegate):n=BQ(this._delegate),n.then(r=>new Vv(this.firestore,new $o(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=t7(e),r=n7(e,i=>new Vv(this.firestore,new $o(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return wL(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(pp.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},TL=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ch(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Vv=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new lh(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ch(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new TL(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ch(this._firestore,r))})}isEqual(e){return yL(this._delegate,e._delegate)}},gp=class t extends lh{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new $s(this.firestore,e):null}doc(e){try{return e===void 0?new $s(this.firestore,Lv(this._delegate)):new $s(this.firestore,Lv(this._delegate,e))}catch(n){throw Gr(n,"doc()","CollectionReference.doc()")}}add(e){return zQ(this._delegate,e).then(n=>new $s(this.firestore,n))}isEqual(e){return hL(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(pp.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ah(t){return ht(t,Ut)}var CL=class t{constructor(...e){this._delegate=new Ho(...e)}static documentId(){return new t(In.keyField().canonicalString())}isEqual(e){return e=Me(e),e instanceof Ho?this._delegate._internalPath.isEqual(e._internalPath):!1}};var SL=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=QQ();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=KQ();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=YQ(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=XQ(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=JQ(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var C0e={Firestore:JT,GeoPoint:th,Timestamp:rn,Blob:XT,Transaction:ZT,WriteBatch:eC,DocumentReference:$s,DocumentSnapshot:uh,Query:lh,QueryDocumentSnapshot:ch,QuerySnapshot:Vv,CollectionReference:gp,FieldPath:CL,FieldValue:SL,setLogLevel:T0e,CACHE_SIZE_UNLIMITED:cQ};function S0e(t,e){t.INTERNAL.registerComponent(new cr("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},C0e)))}function D0e(t){S0e(t,(e,n)=>new JT(e,n,new bL)),t.registerVersion(E0e,I0e)}D0e(nn);function A0e(t,e=fa){return new Ve(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r!=null&&r()}})}function r7(t,e){return A0e(t,e)}function x0e(t,e){return r7(t,e).pipe(il(void 0),bm(),le(n=>{let[r,i]=n;return i.exists?r!=null&&r.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function NL(t,e){return r7(t,e).pipe(le(n=>({payload:n,type:"query"})))}var tC=class{constructor(e,n){R(this,"ref");R(this,"afs");this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=u7(r,n);return new rC(i,o,this.afs)}snapshotChanges(){return x0e(this.ref,this.afs.schedulers.outsideAngular).pipe(Qt)}valueChanges(e={}){return this.snapshotChanges().pipe(le(({payload:n})=>e.idField?Xe(X({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return ze(this.ref.get(e)).pipe(Qt)}};function nC(t,e){return NL(t,e).pipe(il(void 0),bm(),le(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(u=>({type:u.type,payload:u}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((u,c)=>{let h=o.find(p=>p.doc.ref.isEqual(u.ref)),f=r==null?void 0:r.payload.docs.find(p=>p.ref.isEqual(u.ref));h&&JSON.stringify(h.doc.metadata)===JSON.stringify(u.metadata)||!h&&f&&JSON.stringify(f.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:u}})}),s}))}function i7(t,e,n){return nC(t,n).pipe(ds((r,i)=>N0e(r,i.map(o=>o.payload),e),[]),Im(),le(r=>r.map(i=>({type:i.type,payload:i}))))}function N0e(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=R0e(t,r))}),t}function AL(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function R0e(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return AL(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return AL(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return AL(t,e.oldIndex,1);break}return t}function o7(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var rC=class{constructor(e,n,r){R(this,"ref");R(this,"query");R(this,"afs");this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=nC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(le(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(il(void 0),bm(),$n(([r,i])=>i.length>0||!r),le(([,r])=>r),Qt)}auditTrail(e){return this.stateChanges(e).pipe(ds((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=o7(e);return i7(this.query,n,this.afs.schedulers.outsideAngular).pipe(Qt)}valueChanges(e={}){return NL(this.query,this.afs.schedulers.outsideAngular).pipe(le(n=>n.payload.docs.map(r=>e.idField?Xe(X({},r.data()),{[e.idField]:r.id}):r.data())),Qt)}get(e){return ze(this.query.get(e)).pipe(Qt)}add(e){return this.ref.add(e)}doc(e){return new tC(this.ref.doc(e),this.afs)}},xL=class{constructor(e,n){R(this,"query");R(this,"afs");this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?nC(this.query,this.afs.schedulers.outsideAngular).pipe(Qt):nC(this.query,this.afs.schedulers.outsideAngular).pipe(le(n=>n.filter(r=>e.indexOf(r.type)>-1)),$n(n=>n.length>0),Qt)}auditTrail(e){return this.stateChanges(e).pipe(ds((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=o7(e);return i7(this.query,n,this.afs.schedulers.outsideAngular).pipe(Qt)}valueChanges(e={}){return NL(this.query,this.afs.schedulers.outsideAngular).pipe(le(r=>r.payload.docs.map(i=>e.idField?X({[e.idField]:i.id},i.data()):i.data())),Qt)}get(e){return ze(this.query.get(e)).pipe(Qt)}},s7=new J("angularfire2.enableFirestorePersistence"),a7=new J("angularfire2.firestore.persistenceSettings"),M0e=new J("angularfire2.firestore.settings"),P0e=new J("angularfire2.firestore.use-emulator");function u7(t,e=n=>n){return{query:e(t),ref:t}}var Ba=(()=>{let e=class e{constructor(r,i,o,s,u,c,h,f,p,m,v,_,E,b,T,S,A){R(this,"schedulers");R(this,"firestore");R(this,"persistenceEnabled$");this.schedulers=h;let x=xa(r,c,i),H=p;m&&Sy(x,c,v,E,b,T,_,S),[this.firestore,this.persistenceEnabled$]=Mu(`${x.name}.firestore`,"AngularFirestore",x.name,()=>{let N=c.runOutsideAngular(()=>x.firestore());if(s&&N.settings(s),H&&N.useEmulator(...H),o&&!xl(u)){let ie=()=>{try{return ze(N.enablePersistence(f||void 0).then(()=>!0,()=>!1))}catch(Ye){return typeof console<"u"&&console.warn(Ye),pe(!1)}};return[N,c.runOutsideAngular(ie)]}else return[N,pe(!1)]},[s,H,o])}collection(r,i){let o;typeof r=="string"?o=this.firestore.collection(r):o=r;let{ref:s,query:u}=u7(o,i),c=this.schedulers.ngZone.run(()=>s);return new rC(c,u,this)}collectionGroup(r,i){let o=i||(u=>u),s=this.firestore.collectionGroup(r);return new xL(o(s),this)}doc(r){let i;typeof r=="string"?i=this.firestore.doc(r):i=r;let o=this.schedulers.ngZone.run(()=>i);return new tC(o,this)}createId(){return this.firestore.collection("_").doc().id}};R(e,"\u0275fac",function(i){return new(i||e)(M(Ns),M(Rs,8),M(s7,8),M(M0e,8),M(Gn),M(ke),M(Nu),M(a7,8),M(P0e,8),M(Na,8),M(wy,8),M(Ey,8),M(Iy,8),M(by,8),M(Ty,8),M(Cy,8),M(Fo,8))}),R(e,"\u0275prov",Y({token:e,factory:e.\u0275fac,providedIn:"any"}));let t=e;return t})(),c7=(()=>{let e=class e{constructor(){nn.registerVersion("angularfire",Lo.full,"fst-compat")}static enablePersistence(r){return{ngModule:e,providers:[{provide:s7,useValue:!0},{provide:a7,useValue:r}]}}};R(e,"\u0275fac",function(i){return new(i||e)}),R(e,"\u0275mod",ct({type:e})),R(e,"\u0275inj",ut({providers:[Ba]}));let t=e;return t})();var l7=(()=>{let e=class e{get cartItems(){return this._cartItems.getValue()}set cartItems(r){this._cartItems.next(r)}addItemToCart(r){let i=this.cartItems;i.push(r),this.cartItems=[...i]}clearCart(){this.cartItems=[]}constructor(r,i){this.firestore=r,this.auth=i,this._cartItems=new _n([]),this.cartItems$=this._cartItems.asObservable()}getMenuItems(){return this.firestore.collection("spicySamMenu").valueChanges()}};e.\u0275fac=function(i){return new(i||e)(M(Ba),M(Na))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function O0e(t,e){t&1&&ot(0,"span")}var h7=(()=>{let e=class e{constructor(r){this.menuItemService=r,this.menuItems=[]}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)(ye(l7))},e.\u0275cmp=Cr({type:e,selectors:[["app-main"]],decls:4,vars:1,consts:[[1,"menuItems"],[4,"ngFor","ngForOf"]],template:function(i,o){i&1&&(G(0,"div",0)(1,"h1"),fe(2,"Menu Items"),W(),Ct(3,O0e,1,0,"span",1),W()),i&2&&(ae(3),De("ngForOf",o.menuItems))},dependencies:[df]});let t=e;return t})();function d7(t){return mp(void 0,t)}function mp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)!e.hasOwnProperty(r)||!F0e(r)||(t[r]=mp(t[r],e[r]));return t}function F0e(t){return t!=="__proto__"}var f7=function(){function t(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){e.resolve=n,e.reject=r})}return t.prototype.wrapCallback=function(e){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof e=="function"&&(n.promise.catch(function(){}),e.length===1?e(r):e(r,i))}},t}();function p7(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function g7(){return typeof self=="object"&&self.self===self}var L0e="FirebaseError",V0e=function(t){we(e,t);function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name=L0e,Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,oC.prototype.create),o}return e}(Error),oC=function(){function t(e,n,r){this.service=e,this.serviceName=n,this.errors=r}return t.prototype.create=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},o=this.service+"/"+e,s=this.errors[e],u=s?U0e(s,i):"Error",c=this.serviceName+": "+u+" ("+o+").",h=new V0e(o,c,i);return h},t}();function U0e(t,e){return t.replace(j0e,function(n,r){var i=e[r];return i!=null?String(i):"<"+r+"?>"})}var j0e=/\{\$([^}]+)}/g;function ML(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var wBe=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(e,n){n||(n=0);var r=this.W_;if(typeof e=="string")for(var i=0;i<16;i++)r[i]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(var i=0;i<16;i++)r[i]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(var i=16;i<80;i++){var o=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(o<<1|o>>>31)&4294967295}for(var s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4],p,m,i=0;i<80;i++){i<40?i<20?(p=h^u&(c^h),m=1518500249):(p=u^c^h,m=1859775393):i<60?(p=u&c|h&(u|c),m=2400959708):(p=u^c^h,m=3395469782);var o=(s<<5|s>>>27)+p+f+m+r[i]&4294967295;f=h,h=c,c=(u<<30|u>>>2)&4294967295,u=s,s=o}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(e,n){if(e!=null){n===void 0&&(n=e.length);for(var r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}},t.prototype.digest=function(){var e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);for(var i=0,r=0;r<5;r++)for(var o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e},t}();function m7(t,e){var n=new B0e(t,e);return n.subscribe.bind(n)}var B0e=function(){function t(e,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){e(r)}).catch(function(i){r.error(i)})}return t.prototype.next=function(e){this.forEachObserver(function(n){n.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(n){n.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},t.prototype.subscribe=function(e,n,r){var i=this,o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");q0e(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=RL),o.error===void 0&&(o.error=RL),o.complete===void 0&&(o.complete=RL);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?o.error(i.finalError):o.complete()}catch{}}),this.observers.push(o),s},t.prototype.unsubscribeOne=function(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,e)},t.prototype.sendOne=function(e,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[e]!==void 0)try{n(r.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})},t.prototype.close=function(e){var n=this;this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},t}();function q0e(t,e){if(typeof t!="object"||t===null)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&typeof t[i]=="function")return!0}return!1}function RL(){}var EBe=4*60*60*1e3;var sC=function(){function t(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},t}();var hh="[DEFAULT]";var H0e=function(){function t(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(e){var n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){var r=new f7;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise},t.prototype.getImmediate=function(e){var n,r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var n,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,!!this.shouldAutoInitialize()){if(z0e(e))try{this.getOrInitializeService({instanceIdentifier:hh})}catch{}try{for(var i=uu(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=cs(o.value,2),u=s[0],c=s[1],h=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService({instanceIdentifier:h});c.resolve(f)}catch{}}}catch(p){n={error:p}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},t.prototype.clearInstance=function(e){e===void 0&&(e=hh),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return V(this,void 0,void 0,function(){var e;return U(this,function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Rt(Rt([],cs(e.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),cs(e.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.isInitialized=function(e){return e===void 0&&(e=hh),this.instances.has(e)},t.prototype.getOptions=function(e){return e===void 0&&(e=hh),this.instancesOptions.get(e)||{}},t.prototype.initialize=function(e){var n,r;e===void 0&&(e={});var i=e.options,o=i===void 0?{}:i,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var c=uu(this.instancesDeferred.entries()),h=c.next();!h.done;h=c.next()){var f=cs(h.value,2),p=f[0],m=f[1],v=this.normalizeInstanceIdentifier(p);s===v&&m.resolve(u)}}catch(_){n={error:_}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return u},t.prototype.onInit=function(e,n){var r,i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);var s=this.instances.get(i);return s&&e(s,i),function(){o.delete(e)}},t.prototype.invokeOnInitCallbacks=function(e,n){var r,i,o=this.onInitCallbacks.get(n);if(o)try{for(var s=uu(o),u=s.next();!u.done;u=s.next()){var c=u.value;try{c(e,n)}catch{}}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.getOrInitializeService=function(e){var n=e.instanceIdentifier,r=e.options,i=r===void 0?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:$0e(n),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch{}return o||null},t.prototype.normalizeInstanceIdentifier=function(e){return e===void 0&&(e=hh),this.component?this.component.multipleInstances?e:hh:e},t.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},t}();function $0e(t){return t===hh?void 0:t}function z0e(t){return t.instantiationMode==="EAGER"}var y7=function(){function t(e){this.name=e,this.providers=new Map}return t.prototype.addComponent=function(e){var n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);n.setComponent(e)},t.prototype.addOrOverwriteComponent=function(e){var n=this.getProvider(e.name);n.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},t.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var n=new H0e(e,this);return this.providers.set(e,n),n},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function zo(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}var dh,PL=[],zt=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(zt||{}),v7={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},G0e=zt.INFO,W0e=(dh={},dh[zt.DEBUG]="log",dh[zt.VERBOSE]="log",dh[zt.INFO]="info",dh[zt.WARN]="warn",dh[zt.ERROR]="error",dh),K0e=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=new Date().toISOString(),o=W0e[e];if(o)console[o].apply(console,zo(["["+i+"]  "+t.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}},_7=function(){function t(e){this.name=e,this._logLevel=G0e,this._logHandler=K0e,this._userLogHandler=null,PL.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in zt))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(e){this._logLevel=typeof e=="string"?v7[e]:e},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zo([this,zt.DEBUG],e)),this._logHandler.apply(this,zo([this,zt.DEBUG],e))},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zo([this,zt.VERBOSE],e)),this._logHandler.apply(this,zo([this,zt.VERBOSE],e))},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zo([this,zt.INFO],e)),this._logHandler.apply(this,zo([this,zt.INFO],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zo([this,zt.WARN],e)),this._logHandler.apply(this,zo([this,zt.WARN],e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,zo([this,zt.ERROR],e)),this._logHandler.apply(this,zo([this,zt.ERROR],e))},t}();function w7(t){PL.forEach(function(e){e.setLogLevel(t)})}function E7(t,e){for(var n=function(s){var u=null;e&&e.level&&(u=v7[e.level]),t===null?s.userLogHandler=null:s.userLogHandler=function(c,h){for(var f=[],p=2;p<arguments.length;p++)f[p-2]=arguments[p];var m=f.map(function(v){if(v==null)return null;if(typeof v=="string")return v;if(typeof v=="number"||typeof v=="boolean")return v.toString();if(v instanceof Error)return v.message;try{return JSON.stringify(v)}catch{return null}}).filter(function(v){return v}).join(" ");h>=(u!=null?u:c.logLevel)&&t({level:zt[h].toLowerCase(),message:m,args:f,type:c.name})}},r=0,i=PL;r<i.length;r++){var o=i[r];n(o)}}var tc,Q0e=(tc={},tc["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",tc["bad-app-name"]="Illegal App name: '{$appName}",tc["duplicate-app"]="Firebase App named '{$appName}' already exists",tc["app-deleted"]="Firebase App named '{$appName}' already deleted",tc["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",tc["invalid-log-argument"]="First argument to `onLog` must be null or a function.",tc),yp=new oC("app","Firebase",Q0e),I7="@firebase/app",Y0e="0.6.30",X0e="@firebase/analytics",J0e="@firebase/app-check",Z0e="@firebase/auth",eEe="@firebase/database",tEe="@firebase/functions",nEe="@firebase/installations",rEe="@firebase/messaging",iEe="@firebase/performance",oEe="@firebase/remote-config",sEe="@firebase/storage",aEe="@firebase/firestore",uEe="firebase-wrapper";var Nr,uC="[DEFAULT]",cEe=(Nr={},Nr[I7]="fire-core",Nr[X0e]="fire-analytics",Nr[J0e]="fire-app-check",Nr[Z0e]="fire-auth",Nr[eEe]="fire-rtdb",Nr[tEe]="fire-fn",Nr[nEe]="fire-iid",Nr[rEe]="fire-fcm",Nr[iEe]="fire-perf",Nr[oEe]="fire-rc",Nr[sEe]="fire-gcs",Nr[aEe]="fire-fst",Nr["fire-js"]="fire-js",Nr[uEe]="fire-js-all",Nr);var vp=new _7("@firebase/app");var aC=function(){function t(e,n,r){var i=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=d7(e),this.container=new y7(n.name),this._addComponent(new sC("app",function(){return i},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(o){return i._addComponent(o)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var e=this;return new Promise(function(n){e.checkDestroyed_(),n()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(n){return n.delete()}))}).then(function(){e.isDeleted_=!0})},t.prototype._getService=function(e,n){var r;n===void 0&&(n=uC),this.checkDestroyed_();var i=this.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})},t.prototype._removeServiceInstance=function(e,n){n===void 0&&(n=uC),this.container.getProvider(e).clearInstance(n)},t.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(n){vp.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,n)}},t.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw yp.create("app-deleted",{appName:this.name_})},t}();aC.prototype.name&&aC.prototype.options||aC.prototype.delete||console.log("dc");var lEe="8.10.0";function hEe(t){var e={},n=new Map,r={__esModule:!0,initializeApp:s,app:o,registerVersion:h,setLogLevel:w7,onLog:f,apps:null,SDK_VERSION:lEe,INTERNAL:{registerComponent:c,removeApp:i,components:n,useAsService:p}};r.default=r,Object.defineProperty(r,"apps",{get:u});function i(m){delete e[m]}function o(m){if(m=m||uC,!ML(e,m))throw yp.create("no-app",{appName:m});return e[m]}o.App=t;function s(m,v){if(v===void 0&&(v={}),typeof v!="object"||v===null){var _=v;v={name:_}}var E=v;E.name===void 0&&(E.name=uC);var b=E.name;if(typeof b!="string"||!b)throw yp.create("bad-app-name",{appName:String(b)});if(ML(e,b))throw yp.create("duplicate-app",{appName:b});var T=new t(m,E,r);return e[b]=T,T}function u(){return Object.keys(e).map(function(m){return e[m]})}function c(m){var v=m.name;if(n.has(v))return vp.debug("There were multiple attempts to register component "+v+"."),m.type==="PUBLIC"?r[v]:null;if(n.set(v,m),m.type==="PUBLIC"){var _=function(S){if(S===void 0&&(S=o()),typeof S[v]!="function")throw yp.create("invalid-app-argument",{appName:v});return S[v]()};m.serviceProps!==void 0&&mp(_,m.serviceProps),r[v]=_,t.prototype[v]=function(){for(var S=[],A=0;A<arguments.length;A++)S[A]=arguments[A];var x=this._getService.bind(this,v);return x.apply(this,m.multipleInstances?S:[])}}for(var E=0,b=Object.keys(e);E<b.length;E++){var T=b[E];e[T]._addComponent(m)}return m.type==="PUBLIC"?r[v]:null}function h(m,v,_){var E,b=(E=cEe[m])!==null&&E!==void 0?E:m;_&&(b+="-"+_);var T=b.match(/\s|\//),S=v.match(/\s|\//);if(T||S){var A=['Unable to register library "'+b+'" with version "'+v+'":'];T&&A.push('library name "'+b+'" contains illegal characters (whitespace or "/")'),T&&S&&A.push("and"),S&&A.push('version name "'+v+'" contains illegal characters (whitespace or "/")'),vp.warn(A.join(" "));return}c(new sC(b+"-version",function(){return{library:b,version:v}},"VERSION"))}function f(m,v){if(m!==null&&typeof m!="function")throw yp.create("invalid-log-argument");E7(m,v)}function p(m,v){if(v==="serverAuth")return null;var _=v;return _}return r}function b7(){var t=hEe(aC);t.INTERNAL=Td(Td({},t.INTERNAL),{createFirebaseNamespace:b7,extendNamespace:e,createSubscribe:m7,ErrorFactory:oC,deepExtend:mp});function e(n){mp(t,n)}return t}var OL=b7();var dEe=function(){function t(e){this.container=e}return t.prototype.getPlatformInfoString=function(){var e=this.container.getProviders();return e.map(function(n){if(fEe(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},t}();function fEe(t){var e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}function pEe(t,e){t.INTERNAL.registerComponent(new sC("platform-logger",function(n){return new dEe(n)},"PRIVATE")),t.registerVersion(I7,Y0e,e),t.registerVersion("fire-js","")}g7()&&self.firebase!==void 0&&(vp.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `),kL=self.firebase.SDK_VERSION,kL&&kL.indexOf("LITE")>=0&&vp.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `));var kL,gEe=OL.initializeApp;OL.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return p7()&&vp.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),gEe.apply(void 0,t)};var T7=OL;pEe(T7);var je=T7;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,d){a!=Array.prototype&&a!=Object.prototype&&(a[l]=d.value)};function n(a){a=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,a];for(var l=0;l<a.length;++l){var d=a[l];if(d&&d.Math==Math)return d}return globalThis}var r=n(this);function i(a,l){if(l){var d=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var y=a[g];y in d||(d[y]={}),d=d[y]}a=a[a.length-1],g=d[a],l=l(g),l!=g&&l!=null&&e(d,a,{configurable:!0,writable:!0,value:l})}}function o(a){var l=0;return function(){return l<a.length?{done:!1,value:a[l++]}:{done:!0}}}function s(a){var l=typeof Symbol<"u"&&Symbol.iterator&&a[Symbol.iterator];return l?l.call(a):{next:o(a)}}i("Promise",function(a){function l(I){this.b=0,this.c=void 0,this.a=[];var C=this.f();try{I(C.resolve,C.reject)}catch(L){C.reject(L)}}function d(){this.a=null}function g(I){return I instanceof l?I:new l(function(C){C(I)})}if(a)return a;d.prototype.b=function(I){if(this.a==null){this.a=[];var C=this;this.c(function(){C.g()})}this.a.push(I)};var y=r.setTimeout;d.prototype.c=function(I){y(I,0)},d.prototype.g=function(){for(;this.a&&this.a.length;){var I=this.a;this.a=[];for(var C=0;C<I.length;++C){var L=I[C];I[C]=null;try{L()}catch(B){this.f(B)}}}this.a=null},d.prototype.f=function(I){this.c(function(){throw I})},l.prototype.f=function(){function I(B){return function(Re){L||(L=!0,B.call(C,Re))}}var C=this,L=!1;return{resolve:I(this.m),reject:I(this.g)}},l.prototype.m=function(I){if(I===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(I instanceof l)this.s(I);else{e:switch(typeof I){case"object":var C=I!=null;break e;case"function":C=!0;break e;default:C=!1}C?this.v(I):this.h(I)}},l.prototype.v=function(I){var C=void 0;try{C=I.then}catch(L){this.g(L);return}typeof C=="function"?this.u(C,I):this.h(I)},l.prototype.g=function(I){this.i(2,I)},l.prototype.h=function(I){this.i(1,I)},l.prototype.i=function(I,C){if(this.b!=0)throw Error("Cannot settle("+I+", "+C+"): Promise already settled in state"+this.b);this.b=I,this.c=C,this.l()},l.prototype.l=function(){if(this.a!=null){for(var I=0;I<this.a.length;++I)w.b(this.a[I]);this.a=null}};var w=new d;return l.prototype.s=function(I){var C=this.f();I.Ra(C.resolve,C.reject)},l.prototype.u=function(I,C){var L=this.f();try{I.call(C,L.resolve,L.reject)}catch(B){L.reject(B)}},l.prototype.then=function(I,C){function L(pt,Yn){return typeof pt=="function"?function(la){try{B(pt(la))}catch(LN){Re(LN)}}:Yn}var B,Re,bt=new l(function(pt,Yn){B=pt,Re=Yn});return this.Ra(L(I,B),L(C,Re)),bt},l.prototype.catch=function(I){return this.then(void 0,I)},l.prototype.Ra=function(I,C){function L(){switch(B.b){case 1:I(B.c);break;case 2:C(B.c);break;default:throw Error("Unexpected state: "+B.b)}}var B=this;this.a==null?w.b(L):this.a.push(L)},l.resolve=g,l.reject=function(I){return new l(function(C,L){L(I)})},l.race=function(I){return new l(function(C,L){for(var B=s(I),Re=B.next();!Re.done;Re=B.next())g(Re.value).Ra(C,L)})},l.all=function(I){var C=s(I),L=C.next();return L.done?g([]):new l(function(B,Re){function bt(la){return function(LN){pt[la]=LN,Yn--,Yn==0&&B(pt)}}var pt=[],Yn=0;do pt.push(void 0),Yn++,g(L.value).Ra(bt(pt.length-1),Re),L=C.next();while(!L.done)})},l});var u=u||{},c=this||self,h=/^[\w+/_-]+[=]{0,2}$/,f=null;function p(a){return(a=a.querySelector&&a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&h.test(a)?a:""}function m(){}function v(a){var l=typeof a;return l!="object"?l:a?Array.isArray(a)?"array":l:"null"}function _(a){var l=v(a);return l=="array"||l=="object"&&typeof a.length=="number"}function E(a){return v(a)=="function"}function b(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function T(a){return Object.prototype.hasOwnProperty.call(a,S)&&a[S]||(a[S]=++A)}var S="closure_uid_"+(1e9*Math.random()>>>0),A=0;function x(a,l,d){return a.call.apply(a.bind,arguments)}function H(a,l,d){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(y,g),a.apply(l,y)}}return function(){return a.apply(l,arguments)}}function N(a,l,d){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?N=x:N=H,N.apply(null,arguments)}function ie(a,l){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}var Ye=Date.now;function ge(a,l){function d(){}d.prototype=l.prototype,a.bb=l.prototype,a.prototype=new d,a.prototype.constructor=a}function en(a){return a}function D(a,l,d){this.code=mo+a,this.message=l||Ja[a]||"",this.a=d||null}ge(D,Error),D.prototype.w=function(){var a={code:this.code,message:this.message};return this.a&&(a.serverResponse=this.a),a},D.prototype.toJSON=function(){return this.w()};function Xa(a){var l=a&&a.code;return l?new D(l.substring(mo.length),a.message,a.serverResponse):null}var mo="auth/",Ja={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Jh={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function se(a){for(var l in Jh)if(Jh[l].id===a)return a=Jh[l],{firebaseEndpoint:a.Ua,secureTokenEndpoint:a.$a,identityPlatformEndpoint:a.Xa};return null}var me;me=se("__EID__")?"__EID__":void 0;function be(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch{return!1}}function Ce(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ce);else{var l=Error().stack;l&&(this.stack=l)}a&&(this.message=String(a))}ge(Ce,Error),Ce.prototype.name="CustomError";function Bt(a,l){a=a.split("%s");for(var d="",g=a.length-1,y=0;y<g;y++)d+=a[y]+(y<l.length?l[y]:"%s");Ce.call(this,d+a[g])}ge(Bt,Ce),Bt.prototype.name="AssertionError";function sr(a,l){throw new Bt("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1))}function ar(a,l){this.c=a,this.f=l,this.b=0,this.a=null}ar.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};function yo(a,l){a.f(l),100>a.b&&(a.b++,l.next=a.a,a.a=l)}function Lt(){this.b=this.a=null}var Pg=new ar(function(){return new Cn},function(a){a.reset()});Lt.prototype.add=function(a,l){var d=Pg.get();d.set(a,l),this.b?this.b.next=d:this.a=d,this.b=d};function sA(){var a=dq,l=null;return a.a&&(l=a.a,a.a=a.a.next,a.a||(a.b=null),l.next=null),l}function Cn(){this.next=this.b=this.a=null}Cn.prototype.set=function(a,l){this.a=a,this.b=l,this.next=null},Cn.prototype.reset=function(){this.next=this.b=this.a=null};var es=Array.prototype.indexOf?function(a,l){return Array.prototype.indexOf.call(a,l,void 0)}:function(a,l){if(typeof a=="string")return typeof l!="string"||l.length!=1?-1:a.indexOf(l,0);for(var d=0;d<a.length;d++)if(d in a&&a[d]===l)return d;return-1},rt=Array.prototype.forEach?function(a,l,d){Array.prototype.forEach.call(a,l,d)}:function(a,l,d){for(var g=a.length,y=typeof a=="string"?a.split(""):a,w=0;w<g;w++)w in y&&l.call(d,y[w],w,a)};function Zh(a,l){for(var d=typeof a=="string"?a.split(""):a,g=a.length-1;0<=g;--g)g in d&&l.call(void 0,d[g],g,a)}var kg=Array.prototype.filter?function(a,l){return Array.prototype.filter.call(a,l,void 0)}:function(a,l){for(var d=a.length,g=[],y=0,w=typeof a=="string"?a.split(""):a,I=0;I<d;I++)if(I in w){var C=w[I];l.call(void 0,C,I,a)&&(g[y++]=C)}return g},Aw=Array.prototype.map?function(a,l){return Array.prototype.map.call(a,l,void 0)}:function(a,l){for(var d=a.length,g=Array(d),y=typeof a=="string"?a.split(""):a,w=0;w<d;w++)w in y&&(g[w]=l.call(void 0,y[w],w,a));return g},Oie=Array.prototype.some?function(a,l){return Array.prototype.some.call(a,l,void 0)}:function(a,l){for(var d=a.length,g=typeof a=="string"?a.split(""):a,y=0;y<d;y++)if(y in g&&l.call(void 0,g[y],y,a))return!0;return!1};function Fie(a){e:{for(var l=gse,d=a.length,g=typeof a=="string"?a.split(""):a,y=0;y<d;y++)if(y in g&&l.call(void 0,g[y],y,a)){l=y;break e}l=-1}return 0>l?null:typeof a=="string"?a.charAt(l):a[l]}function oa(a,l){return 0<=es(a,l)}function xw(a,l){l=es(a,l);var d;return(d=0<=l)&&Array.prototype.splice.call(a,l,1),d}function vo(a,l){var d=0;Zh(a,function(g,y){l.call(void 0,g,y,a)&&Array.prototype.splice.call(a,y,1).length==1&&d++})}function aA(a){return Array.prototype.concat.apply([],arguments)}function Pc(a){var l=a.length;if(0<l){for(var d=Array(l),g=0;g<l;g++)d[g]=a[g];return d}return[]}var BB=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]},Lie=/&/g,Vie=/</g,Uie=/>/g,jie=/"/g,Bie=/'/g,qie=/\x00/g,Hie=/[\x00&<>"']/;function Vt(a,l){return a.indexOf(l)!=-1}function uA(a,l){return a<l?-1:a>l?1:0}var ed;e:{var qB=c.navigator;if(qB){var HB=qB.userAgent;if(HB){ed=HB;break e}}ed=""}function Bn(a){return Vt(ed,a)}function $B(a,l){for(var d in a)l.call(void 0,a[d],d,a)}function kc(a){for(var l in a)return!1;return!0}function Za(a){var l={},d;for(d in a)l[d]=a[d];return l}var zB="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ri(a,l){for(var d,g,y=1;y<arguments.length;y++){g=arguments[y];for(d in g)a[d]=g[d];for(var w=0;w<zB.length;w++)d=zB[w],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function GB(a,l){e:{try{var d=a&&a.ownerDocument,g=d&&(d.defaultView||d.parentWindow);if(g=g||c,g.Element&&g.Location){var y=g;break e}}catch{}y=null}if(y&&typeof y[l]<"u"&&(!a||!(a instanceof y[l])&&(a instanceof y.Location||a instanceof y.Element))){if(b(a))try{var w=a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a)}catch{w="<object could not be stringified>"}else w=a===void 0?"undefined":a===null?"null":typeof a;sr("Argument is not a %s (or a non-Element, non-Location mock); got: %s",l,w)}}function ts(a,l){this.a=a===Nw&&l||"",this.b=WB}ts.prototype.ta=!0,ts.prototype.sa=function(){return this.a},ts.prototype.toString=function(){return"Const{"+this.a+"}"};function cA(a){return a instanceof ts&&a.constructor===ts&&a.b===WB?a.a:(sr("expected object of type Const, got '"+a+"'"),"type_error:Const")}var WB={},Nw={},Rw;function KB(){if(Rw===void 0){var a=null,l=c.trustedTypes;if(l&&l.createPolicy){try{a=l.createPolicy("goog#html",{createHTML:en,createScript:en,createScriptURL:en})}catch(d){c.console&&c.console.error(d.message)}Rw=a}else Rw=a}return Rw}function td(a,l){this.a=l===YB?a:""}td.prototype.ta=!0,td.prototype.sa=function(){return this.a.toString()},td.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function QB(a){return a instanceof td&&a.constructor===td?a.a:(sr("expected object of type TrustedResourceUrl, got '"+a+"' of type "+v(a)),"type_error:TrustedResourceUrl")}function lA(a,l){var d=cA(a);if(!zie.test(d))throw Error("Invalid TrustedResourceUrl format: "+d);return a=d.replace($ie,function(g,y){if(!Object.prototype.hasOwnProperty.call(l,y))throw Error('Found marker, "'+y+'", in format string, "'+d+'", but no valid label mapping found in args: '+JSON.stringify(l));return g=l[y],g instanceof ts?cA(g):encodeURIComponent(String(g))}),Gie(a)}var $ie=/%{(\w+)}/g,zie=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,YB={};function Gie(a){var l=KB();return a=l?l.createScriptURL(a):a,new td(a,YB)}function ii(a,l){this.a=l===Og?a:""}ii.prototype.ta=!0,ii.prototype.sa=function(){return this.a.toString()},ii.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function Mw(a){return a instanceof ii&&a.constructor===ii?a.a:(sr("expected object of type SafeUrl, got '"+a+"' of type "+v(a)),"type_error:SafeUrl")}var Wie=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Kie=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,XB=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function JB(a){if(a instanceof ii)return a;if(a=typeof a=="object"&&a.ta?a.sa():String(a),XB.test(a))a=new ii(a,Og);else{a=String(a),a=a.replace(/(%0A|%0D)/g,"");var l=a.match(Kie);a=l&&Wie.test(l[1])?new ii(a,Og):null}return a}function ZB(a){return a instanceof ii?a:(a=typeof a=="object"&&a.ta?a.sa():String(a),XB.test(a)||(a="about:invalid#zClosurez"),new ii(a,Og))}var Og={},eq=new ii("about:invalid#zClosurez",Og);function nd(a,l,d){this.a=d===tq?a:""}nd.prototype.ta=!0,nd.prototype.sa=function(){return this.a.toString()},nd.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function Qie(a){return a instanceof nd&&a.constructor===nd?a.a:(sr("expected object of type SafeHtml, got '"+a+"' of type "+v(a)),"type_error:SafeHtml")}var tq={};function Yie(a,l){GB(a,"HTMLScriptElement"),a.src=QB(l),(l=a.ownerDocument&&a.ownerDocument.defaultView)&&l!=c?l=p(l.document):(f===null&&(f=p(c.document)),l=f),l&&a.setAttribute("nonce",l)}function nq(a,l,d,g){return a=a instanceof ii?a:ZB(a),l=l||c,d=d instanceof ts?cA(d):d||"",l.open(Mw(a),d,g,void 0)}function rq(a,l){for(var d=a.split("%s"),g="",y=Array.prototype.slice.call(arguments,1);y.length&&1<d.length;)g+=d.shift()+y.shift();return g+d.join("%s")}function hA(a){return Hie.test(a)&&(a.indexOf("&")!=-1&&(a=a.replace(Lie,"&amp;")),a.indexOf("<")!=-1&&(a=a.replace(Vie,"&lt;")),a.indexOf(">")!=-1&&(a=a.replace(Uie,"&gt;")),a.indexOf('"')!=-1&&(a=a.replace(jie,"&quot;")),a.indexOf("'")!=-1&&(a=a.replace(Bie,"&#39;")),a.indexOf("\0")!=-1&&(a=a.replace(qie,"&#0;"))),a}function dA(a){return dA[" "](a),a}dA[" "]=m;function Xie(a,l){var d=toe;return Object.prototype.hasOwnProperty.call(d,a)?d[a]:d[a]=l(a)}var Jie=Bn("Opera"),_o=Bn("Trident")||Bn("MSIE"),iq=Bn("Edge"),Zie=iq||_o,oq=Bn("Gecko")&&!(Vt(ed.toLowerCase(),"webkit")&&!Bn("Edge"))&&!(Bn("Trident")||Bn("MSIE"))&&!Bn("Edge"),eoe=Vt(ed.toLowerCase(),"webkit")&&!Bn("Edge");function sq(){var a=c.document;return a?a.documentMode:void 0}var Pw;e:{var fA="",pA=function(){var a=ed;if(oq)return/rv:([^\);]+)(\)|;)/.exec(a);if(iq)return/Edge\/([\d\.]+)/.exec(a);if(_o)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(eoe)return/WebKit\/(\S+)/.exec(a);if(Jie)return/(?:Version)[ \/]?(\S+)/.exec(a)}();if(pA&&(fA=pA?pA[1]:""),_o){var gA=sq();if(gA!=null&&gA>parseFloat(fA)){Pw=String(gA);break e}}Pw=fA}var toe={};function aq(a){return Xie(a,function(){for(var l=0,d=BB(String(Pw)).split("."),g=BB(String(a)).split("."),y=Math.max(d.length,g.length),w=0;l==0&&w<y;w++){var I=d[w]||"",C=g[w]||"";do{if(I=/(\d*)(\D*)(.*)/.exec(I)||["","","",""],C=/(\d*)(\D*)(.*)/.exec(C)||["","","",""],I[0].length==0&&C[0].length==0)break;l=uA(I[1].length==0?0:parseInt(I[1],10),C[1].length==0?0:parseInt(C[1],10))||uA(I[2].length==0,C[2].length==0)||uA(I[2],C[2]),I=I[3],C=C[3]}while(l==0)}return 0<=l})}var mA;if(c.document&&_o){var uq=sq();mA=uq||parseInt(Pw,10)||void 0}else mA=void 0;var eu=mA;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var noe=!_o||9<=Number(eu);function Fg(a){var l=document;return typeof a=="string"?l.getElementById(a):a}function cq(a,l){$B(l,function(d,g){d&&typeof d=="object"&&d.ta&&(d=d.sa()),g=="style"?a.style.cssText=d:g=="class"?a.className=d:g=="for"?a.htmlFor=d:lq.hasOwnProperty(g)?a.setAttribute(lq[g],d):g.lastIndexOf("aria-",0)==0||g.lastIndexOf("data-",0)==0?a.setAttribute(g,d):a[g]=d})}var lq={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function roe(a,l,d){var g=arguments,y=document,w=String(g[0]),I=g[1];if(!noe&&I&&(I.name||I.type)){if(w=["<",w],I.name&&w.push(' name="',hA(I.name),'"'),I.type){w.push(' type="',hA(I.type),'"');var C={};ri(C,I),delete C.type,I=C}w.push(">"),w=w.join("")}return w=kw(y,w),I&&(typeof I=="string"?w.className=I:Array.isArray(I)?w.className=I.join(" "):cq(w,I)),2<g.length&&ioe(y,w,g),w}function ioe(a,l,d){function g(C){C&&l.appendChild(typeof C=="string"?a.createTextNode(C):C)}for(var y=2;y<d.length;y++){var w=d[y];if(!_(w)||b(w)&&0<w.nodeType)g(w);else{e:{if(w&&typeof w.length=="number"){if(b(w)){var I=typeof w.item=="function"||typeof w.item=="string";break e}if(E(w)){I=typeof w.item=="function";break e}}I=!1}rt(I?Pc(w):w,g)}}}function kw(a,l){return l=String(l),a.contentType==="application/xhtml+xml"&&(l=l.toLowerCase()),a.createElement(l)}function hq(a){c.setTimeout(function(){throw a},0)}var yA;function ooe(){var a=c.MessageChannel;if(typeof a>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!Bn("Presto")&&(a=function(){var y=kw(document,"IFRAME");y.style.display="none",document.documentElement.appendChild(y);var w=y.contentWindow;y=w.document,y.open(),y.close();var I="callImmediate"+Math.random(),C=w.location.protocol=="file:"?"*":w.location.protocol+"//"+w.location.host;y=N(function(L){(C=="*"||L.origin==C)&&L.data==I&&this.port1.onmessage()},this),w.addEventListener("message",y,!1),this.port1={},this.port2={postMessage:function(){w.postMessage(I,C)}}}),typeof a<"u"&&!Bn("Trident")&&!Bn("MSIE")){var l=new a,d={},g=d;return l.port1.onmessage=function(){if(d.next!==void 0){d=d.next;var y=d.Hb;d.Hb=null,y()}},function(y){g.next={Hb:y},g=g.next,l.port2.postMessage(0)}}return function(y){c.setTimeout(y,0)}}function Ow(a,l){Fw||soe(),vA||(Fw(),vA=!0),dq.add(a,l)}var Fw;function soe(){if(c.Promise&&c.Promise.resolve){var a=c.Promise.resolve(void 0);Fw=function(){a.then(fq)}}else Fw=function(){var l=fq;!E(c.setImmediate)||c.Window&&c.Window.prototype&&!Bn("Edge")&&c.Window.prototype.setImmediate==c.setImmediate?(yA||(yA=ooe()),yA(l)):c.setImmediate(l)}}var vA=!1,dq=new Lt;function fq(){for(var a;a=sA();){try{a.a.call(a.b)}catch(l){hq(l)}yo(Pg,a)}vA=!1}function nt(a,l){if(this.a=Oc,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,a!=m)try{var d=this;a.call(l,function(g){Fc(d,Lg,g)},function(g){if(!(g instanceof rd))try{throw g instanceof Error?g:Error("Promise rejected.")}catch{}Fc(d,sa,g)})}catch(g){Fc(this,sa,g)}}var Oc=0,Lg=2,sa=3;function pq(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}pq.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var gq=new ar(function(){return new pq},function(a){a.reset()});function _A(a,l,d){var g=gq.get();return g.g=a,g.b=l,g.f=d,g}function Te(a){if(a instanceof nt)return a;var l=new nt(m);return Fc(l,Lg,a),l}function Wt(a){return new nt(function(l,d){d(a)})}function mq(a,l,d){wq(a,l,d,null)||Ow(ie(l,a))}function aoe(a){return new nt(function(l,d){var g=a.length,y=[];if(g)for(var w=function(B,Re){g--,y[B]=Re,g==0&&l(y)},I=function(B){d(B)},C=0,L;C<a.length;C++)L=a[C],mq(L,ie(w,C),I);else l(y)})}function yq(a){return new nt(function(l){var d=a.length,g=[];if(d)for(var y=function(C,L,B){d--,g[C]=L?{Qb:!0,value:B}:{Qb:!1,reason:B},d==0&&l(g)},w=0,I;w<a.length;w++)I=a[w],mq(I,ie(y,w,!0),ie(y,w,!1));else l(g)})}nt.prototype.then=function(a,l,d){return _q(this,E(a)?a:null,E(l)?l:null,d)},nt.prototype.$goog_Thenable=!0,t=nt.prototype,t.oa=function(a,l){return a=_A(a,a,l),a.c=!0,wA(this,a),this},t.o=function(a,l){return _q(this,null,a,l)},t.cancel=function(a){if(this.a==Oc){var l=new rd(a);Ow(function(){vq(this,l)},this)}};function vq(a,l){if(a.a==Oc)if(a.c){var d=a.c;if(d.b){for(var g=0,y=null,w=null,I=d.b;I&&(I.c||(g++,I.a==a&&(y=I),!(y&&1<g)));I=I.next)y||(w=I);y&&(d.a==Oc&&g==1?vq(d,l):(w?(g=w,g.next==d.f&&(d.f=g),g.next=g.next.next):Iq(d),bq(d,y,sa,l)))}a.c=null}else Fc(a,sa,l)}function wA(a,l){a.b||a.a!=Lg&&a.a!=sa||Eq(a),a.f?a.f.next=l:a.b=l,a.f=l}function _q(a,l,d,g){var y=_A(null,null,null);return y.a=new nt(function(w,I){y.g=l?function(C){try{var L=l.call(g,C);w(L)}catch(B){I(B)}}:w,y.b=d?function(C){try{var L=d.call(g,C);L===void 0&&C instanceof rd?I(C):w(L)}catch(B){I(B)}}:I}),y.a.c=a,wA(a,y),y.a}t.$c=function(a){this.a=Oc,Fc(this,Lg,a)},t.ad=function(a){this.a=Oc,Fc(this,sa,a)};function Fc(a,l,d){a.a==Oc&&(a===d&&(l=sa,d=new TypeError("Promise cannot resolve to itself")),a.a=1,wq(d,a.$c,a.ad,a)||(a.i=d,a.a=l,a.c=null,Eq(a),l!=sa||d instanceof rd||coe(a,d)))}function wq(a,l,d,g){if(a instanceof nt)return wA(a,_A(l||m,d||null,g)),!0;if(be(a))return a.then(l,d,g),!0;if(b(a))try{var y=a.then;if(E(y))return uoe(a,y,l,d,g),!0}catch(w){return d.call(g,w),!0}return!1}function uoe(a,l,d,g,y){function w(L){C||(C=!0,g.call(y,L))}function I(L){C||(C=!0,d.call(y,L))}var C=!1;try{l.call(a,I,w)}catch(L){w(L)}}function Eq(a){a.h||(a.h=!0,Ow(a.gc,a))}function Iq(a){var l=null;return a.b&&(l=a.b,a.b=l.next,l.next=null),a.b||(a.f=null),l}t.gc=function(){for(var a;a=Iq(this);)bq(this,a,this.a,this.i);this.h=!1};function bq(a,l,d,g){if(d==sa&&l.b&&!l.c)for(;a&&a.g;a=a.c)a.g=!1;if(l.a)l.a.c=null,Tq(l,d,g);else try{l.c?l.g.call(l.f):Tq(l,d,g)}catch(y){Cq.call(null,y)}yo(gq,l)}function Tq(a,l,d){l==Lg?a.g.call(a.f,d):a.b&&a.b.call(a.f,d)}function coe(a,l){a.g=!0,Ow(function(){a.g&&Cq.call(null,l)})}var Cq=hq;function rd(a){Ce.call(this,a)}ge(rd,Ce),rd.prototype.name="cancel";function Lw(){EA!=0&&(Sq[T(this)]=this),this.ya=this.ya,this.pa=this.pa}var EA=0,Sq={};Lw.prototype.ya=!1;function Dq(a){if(!a.ya&&(a.ya=!0,a.Da(),EA!=0)){var l=T(a);if(EA!=0&&a.pa&&0<a.pa.length)throw Error(a+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Sq[l]}}Lw.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var loe=Object.freeze||function(a){return a},Aq=!_o||9<=Number(eu),hoe=_o&&!aq("9"),doe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{c.addEventListener("test",m,l),c.removeEventListener("test",m,l)}catch{}return a}();function oi(a,l){this.type=a,this.b=this.target=l,this.defaultPrevented=!1}oi.prototype.preventDefault=function(){this.defaultPrevented=!0};function Lc(a,l){if(oi.call(this,a?a.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,a){var d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.b=l,l=a.relatedTarget){if(oq){e:{try{dA(l.nodeName);var y=!0;break e}catch{}y=!1}y||(l=null)}}else d=="mouseover"?l=a.fromElement:d=="mouseout"&&(l=a.toElement);this.relatedTarget=l,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:foe[a.pointerType]||"",this.a=a,a.defaultPrevented&&this.preventDefault()}}ge(Lc,oi);var foe=loe({2:"touch",3:"pen",4:"mouse"});Lc.prototype.preventDefault=function(){Lc.bb.preventDefault.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,hoe)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch{}},Lc.prototype.g=function(){return this.a};var Vg="closure_listenable_"+(1e6*Math.random()|0),poe=0;function goe(a,l,d,g,y){this.listener=a,this.proxy=null,this.src=l,this.type=d,this.capture=!!g,this.Wa=y,this.key=++poe,this.wa=this.Qa=!1}function Vw(a){a.wa=!0,a.listener=null,a.proxy=null,a.src=null,a.Wa=null}function Uw(a){this.src=a,this.a={},this.b=0}Uw.prototype.add=function(a,l,d,g,y){var w=a.toString();a=this.a[w],a||(a=this.a[w]=[],this.b++);var I=bA(a,l,g,y);return-1<I?(l=a[I],d||(l.Qa=!1)):(l=new goe(l,this.src,w,!!g,y),l.Qa=d,a.push(l)),l};function IA(a,l){var d=l.type;d in a.a&&xw(a.a[d],l)&&(Vw(l),a.a[d].length==0&&(delete a.a[d],a.b--))}function bA(a,l,d,g){for(var y=0;y<a.length;++y){var w=a[y];if(!w.wa&&w.listener==l&&w.capture==!!d&&w.Wa==g)return y}return-1}var TA="closure_lm_"+(1e6*Math.random()|0),CA={},xq=0;function Ki(a,l,d,g,y){if(g&&g.once)SA(a,l,d,g,y);else if(Array.isArray(l))for(var w=0;w<l.length;w++)Ki(a,l[w],d,g,y);else d=AA(d),a&&a[Vg]?Oq(a,l,d,b(g)?!!g.capture:!!g,y):Nq(a,l,d,!1,g,y)}function Nq(a,l,d,g,y,w){if(!l)throw Error("Invalid event type");var I=b(y)?!!y.capture:!!y,C=jw(a);if(C||(a[TA]=C=new Uw(a)),d=C.add(l,d,g,I,w),!d.proxy){if(g=moe(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)doe||(y=I),y===void 0&&(y=!1),a.addEventListener(l.toString(),g,y);else if(a.attachEvent)a.attachEvent(Mq(l.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");xq++}}function moe(){var a=yoe,l=Aq?function(d){return a.call(l.src,l.listener,d)}:function(d){if(d=a.call(l.src,l.listener,d),!d)return d};return l}function SA(a,l,d,g,y){if(Array.isArray(l))for(var w=0;w<l.length;w++)SA(a,l[w],d,g,y);else d=AA(d),a&&a[Vg]?xA(a,l,d,b(g)?!!g.capture:!!g,y):Nq(a,l,d,!0,g,y)}function Ei(a,l,d,g,y){if(Array.isArray(l))for(var w=0;w<l.length;w++)Ei(a,l[w],d,g,y);else g=b(g)?!!g.capture:!!g,d=AA(d),a&&a[Vg]?(a=a.v,l=String(l).toString(),l in a.a&&(w=a.a[l],d=bA(w,d,g,y),-1<d&&(Vw(w[d]),Array.prototype.splice.call(w,d,1),w.length==0&&(delete a.a[l],a.b--)))):a&&(a=jw(a))&&(l=a.a[l.toString()],a=-1,l&&(a=bA(l,d,g,y)),(d=-1<a?l[a]:null)&&Rq(d))}function Rq(a){if(typeof a!="number"&&a&&!a.wa){var l=a.src;if(l&&l[Vg])IA(l.v,a);else{var d=a.type,g=a.proxy;l.removeEventListener?l.removeEventListener(d,g,a.capture):l.detachEvent?l.detachEvent(Mq(d),g):l.addListener&&l.removeListener&&l.removeListener(g),xq--,(d=jw(l))?(IA(d,a),d.b==0&&(d.src=null,l[TA]=null)):Vw(a)}}}function Mq(a){return a in CA?CA[a]:CA[a]="on"+a}function Pq(a,l,d,g){var y=!0;if((a=jw(a))&&(l=a.a[l.toString()]))for(l=l.concat(),a=0;a<l.length;a++){var w=l[a];w&&w.capture==d&&!w.wa&&(w=kq(w,g),y=y&&w!==!1)}return y}function kq(a,l){var d=a.listener,g=a.Wa||a.src;return a.Qa&&Rq(a),d.call(g,l)}function yoe(a,l){if(a.wa)return!0;if(!Aq){if(!l)e:{l=["window","event"];for(var d=c,g=0;g<l.length;g++)if(d=d[l[g]],d==null){l=null;break e}l=d}if(g=l,l=new Lc(g,this),d=!0,!(0>g.keyCode||g.returnValue!=null)){e:{var y=!1;if(g.keyCode==0)try{g.keyCode=-1;break e}catch{y=!0}(y||g.returnValue==null)&&(g.returnValue=!0)}for(g=[],y=l.b;y;y=y.parentNode)g.push(y);for(a=a.type,y=g.length-1;0<=y;y--){l.b=g[y];var w=Pq(g[y],a,!0,l);d=d&&w}for(y=0;y<g.length;y++)l.b=g[y],w=Pq(g[y],a,!1,l),d=d&&w}return d}return kq(a,new Lc(l,this))}function jw(a){return a=a[TA],a instanceof Uw?a:null}var DA="__closure_events_fn_"+(1e9*Math.random()>>>0);function AA(a){return E(a)?a:(a[DA]||(a[DA]=function(l){return a.handleEvent(l)}),a[DA])}function Ur(){Lw.call(this),this.v=new Uw(this),this.bc=this,this.hb=null}ge(Ur,Lw),Ur.prototype[Vg]=!0,Ur.prototype.addEventListener=function(a,l,d,g){Ki(this,a,l,d,g)},Ur.prototype.removeEventListener=function(a,l,d,g){Ei(this,a,l,d,g)},Ur.prototype.dispatchEvent=function(a){var l,d=this.hb;if(d)for(l=[];d;d=d.hb)l.push(d);d=this.bc;var g=a.type||a;if(typeof a=="string")a=new oi(a,d);else if(a instanceof oi)a.target=a.target||d;else{var y=a;a=new oi(g,d),ri(a,y)}if(y=!0,l)for(var w=l.length-1;0<=w;w--){var I=a.b=l[w];y=Bw(I,g,!0,a)&&y}if(I=a.b=d,y=Bw(I,g,!0,a)&&y,y=Bw(I,g,!1,a)&&y,l)for(w=0;w<l.length;w++)I=a.b=l[w],y=Bw(I,g,!1,a)&&y;return y},Ur.prototype.Da=function(){if(Ur.bb.Da.call(this),this.v){var a=this.v,l=0,d;for(d in a.a){for(var g=a.a[d],y=0;y<g.length;y++)++l,Vw(g[y]);delete a.a[d],a.b--}}this.hb=null};function Oq(a,l,d,g,y){a.v.add(String(l),d,!1,g,y)}function xA(a,l,d,g,y){a.v.add(String(l),d,!0,g,y)}function Bw(a,l,d,g){if(l=a.v.a[String(l)],!l)return!0;l=l.concat();for(var y=!0,w=0;w<l.length;++w){var I=l[w];if(I&&!I.wa&&I.capture==d){var C=I.listener,L=I.Wa||I.src;I.Qa&&IA(a.v,I),y=C.call(L,g)!==!1&&y}}return y&&!g.defaultPrevented}function NA(a,l,d){if(E(a))d&&(a=N(a,d));else if(a&&typeof a.handleEvent=="function")a=N(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function id(a){var l=null;return new nt(function(d,g){l=NA(function(){d(void 0)},a),l==-1&&g(Error("Failed to schedule timer."))}).o(function(d){throw c.clearTimeout(l),d})}function Fq(a){if(a.X&&typeof a.X=="function")return a.X();if(typeof a=="string")return a.split("");if(_(a)){for(var l=[],d=a.length,g=0;g<d;g++)l.push(a[g]);return l}l=[],d=0;for(g in a)l[d++]=a[g];return l}function Lq(a){if(a.Y&&typeof a.Y=="function")return a.Y();if(!a.X||typeof a.X!="function"){if(_(a)||typeof a=="string"){var l=[];a=a.length;for(var d=0;d<a;d++)l.push(d);return l}l=[],d=0;for(var g in a)l[d++]=g;return l}}function voe(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(_(a)||typeof a=="string")rt(a,l,void 0);else for(var d=Lq(a),g=Fq(a),y=g.length,w=0;w<y;w++)l.call(void 0,g[w],d&&d[w],a)}function od(a,l){this.b={},this.a=[],this.c=0;var d=arguments.length;if(1<d){if(d%2)throw Error("Uneven number of arguments");for(var g=0;g<d;g+=2)this.set(arguments[g],arguments[g+1])}else if(a)if(a instanceof od)for(d=a.Y(),g=0;g<d.length;g++)this.set(d[g],a.get(d[g]));else for(g in a)this.set(g,a[g])}t=od.prototype,t.X=function(){RA(this);for(var a=[],l=0;l<this.a.length;l++)a.push(this.b[this.a[l]]);return a},t.Y=function(){return RA(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0};function RA(a){if(a.c!=a.a.length){for(var l=0,d=0;l<a.a.length;){var g=a.a[l];Vc(a.b,g)&&(a.a[d++]=g),l++}a.a.length=d}if(a.c!=a.a.length){var y={};for(d=l=0;l<a.a.length;)g=a.a[l],Vc(y,g)||(a.a[d++]=g,y[g]=1),l++;a.a.length=d}}t.get=function(a,l){return Vc(this.b,a)?this.b[a]:l},t.set=function(a,l){Vc(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=l},t.forEach=function(a,l){for(var d=this.Y(),g=0;g<d.length;g++){var y=d[g],w=this.get(y);a.call(l,w,y,this)}};function Vc(a,l){return Object.prototype.hasOwnProperty.call(a,l)}var Vq=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _oe(a,l){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var g=a[d].indexOf("="),y=null;if(0<=g){var w=a[d].substring(0,g);y=a[d].substring(g+1)}else w=a[d];l(w,y?decodeURIComponent(y.replace(/\+/g," ")):"")}}}function tu(a,l){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var d;a instanceof tu?(this.i=l!==void 0?l:a.i,Ug(this,a.c),this.l=a.l,this.a=a.a,jg(this,a.g),this.f=a.f,MA(this,qq(a.b)),this.h=a.h):a&&(d=String(a).match(Vq))?(this.i=!!l,Ug(this,d[1]||"",!0),this.l=Bg(d[2]||""),this.a=Bg(d[3]||"",!0),jg(this,d[4]),this.f=Bg(d[5]||"",!0),MA(this,d[6]||"",!0),this.h=Bg(d[7]||"")):(this.i=!!l,this.b=new Uc(null,this.i))}tu.prototype.toString=function(){var a=[],l=this.c;l&&a.push(qg(l,Uq,!0),":");var d=this.a;return(d||l=="file")&&(a.push("//"),(l=this.l)&&a.push(qg(l,Uq,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.g,d!=null&&a.push(":",String(d))),(d=this.f)&&(this.a&&d.charAt(0)!="/"&&a.push("/"),a.push(qg(d,d.charAt(0)=="/"?Ioe:Eoe,!0))),(d=this.b.toString())&&a.push("?",d),(d=this.h)&&a.push("#",qg(d,Toe)),a.join("")},tu.prototype.resolve=function(a){var l=new tu(this),d=!!a.c;d?Ug(l,a.c):d=!!a.l,d?l.l=a.l:d=!!a.a,d?l.a=a.a:d=a.g!=null;var g=a.f;if(d)jg(l,a.g);else if(d=!!a.f){if(g.charAt(0)!="/")if(this.a&&!this.f)g="/"+g;else{var y=l.f.lastIndexOf("/");y!=-1&&(g=l.f.substr(0,y+1)+g)}if(y=g,y==".."||y==".")g="";else if(Vt(y,"./")||Vt(y,"/.")){g=y.lastIndexOf("/",0)==0,y=y.split("/");for(var w=[],I=0;I<y.length;){var C=y[I++];C=="."?g&&I==y.length&&w.push(""):C==".."?((1<w.length||w.length==1&&w[0]!="")&&w.pop(),g&&I==y.length&&w.push("")):(w.push(C),g=!0)}g=w.join("/")}else g=y}return d?l.f=g:d=a.b.toString()!=="",d?MA(l,qq(a.b)):d=!!a.h,d&&(l.h=a.h),l};function Ug(a,l,d){a.c=d?Bg(l,!0):l,a.c&&(a.c=a.c.replace(/:$/,""))}function jg(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.g=l}else a.g=null}function MA(a,l,d){l instanceof Uc?(a.b=l,Coe(a.b,a.i)):(d||(l=qg(l,boe)),a.b=new Uc(l,a.i))}function gn(a,l,d){a.b.set(l,d)}function Qi(a,l){return a.b.get(l)}function si(a){return a instanceof tu?new tu(a):new tu(a,void 0)}function qw(a,l,d,g){var y=new tu(null,void 0);return a&&Ug(y,a),l&&(y.a=l),d&&jg(y,d),g&&(y.f=g),y}function Bg(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function qg(a,l,d){return typeof a=="string"?(a=encodeURI(a).replace(l,woe),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function woe(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Uq=/[#\/\?@]/g,Eoe=/[#\?:]/g,Ioe=/[#\?]/g,boe=/[#\?@]/g,Toe=/#/g;function Uc(a,l){this.b=this.a=null,this.c=a||null,this.f=!!l}function nu(a){a.a||(a.a=new od,a.b=0,a.c&&_oe(a.c,function(l,d){a.add(decodeURIComponent(l.replace(/\+/g," ")),d)}))}function jq(a){var l=Lq(a);if(typeof l>"u")throw Error("Keys are undefined");var d=new Uc(null,void 0);a=Fq(a);for(var g=0;g<l.length;g++){var y=l[g],w=a[g];Array.isArray(w)?Bq(d,y,w):d.add(y,w)}return d}t=Uc.prototype,t.add=function(a,l){nu(this),this.c=null,a=sd(this,a);var d=this.a.get(a);return d||this.a.set(a,d=[]),d.push(l),this.b+=1,this};function ns(a,l){nu(a),l=sd(a,l),Vc(a.a.b,l)&&(a.c=null,a.b-=a.a.get(l).length,a=a.a,Vc(a.b,l)&&(delete a.b[l],a.c--,a.a.length>2*a.c&&RA(a)))}t.clear=function(){this.a=this.c=null,this.b=0};function PA(a,l){return nu(a),l=sd(a,l),Vc(a.a.b,l)}t.forEach=function(a,l){nu(this),this.a.forEach(function(d,g){rt(d,function(y){a.call(l,y,g,this)},this)},this)},t.Y=function(){nu(this);for(var a=this.a.X(),l=this.a.Y(),d=[],g=0;g<l.length;g++)for(var y=a[g],w=0;w<y.length;w++)d.push(l[g]);return d},t.X=function(a){nu(this);var l=[];if(typeof a=="string")PA(this,a)&&(l=aA(l,this.a.get(sd(this,a))));else{a=this.a.X();for(var d=0;d<a.length;d++)l=aA(l,a[d])}return l},t.set=function(a,l){return nu(this),this.c=null,a=sd(this,a),PA(this,a)&&(this.b-=this.a.get(a).length),this.a.set(a,[l]),this.b+=1,this},t.get=function(a,l){return a?(a=this.X(a),0<a.length?String(a[0]):l):l};function Bq(a,l,d){ns(a,l),0<d.length&&(a.c=null,a.a.set(sd(a,l),Pc(d)),a.b+=d.length)}t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],l=this.a.Y(),d=0;d<l.length;d++){var g=l[d],y=encodeURIComponent(String(g));g=this.X(g);for(var w=0;w<g.length;w++){var I=y;g[w]!==""&&(I+="="+encodeURIComponent(String(g[w]))),a.push(I)}}return this.c=a.join("&")};function qq(a){var l=new Uc;return l.c=a.c,a.a&&(l.a=new od(a.a),l.b=a.b),l}function sd(a,l){return l=String(l),a.f&&(l=l.toLowerCase()),l}function Coe(a,l){l&&!a.f&&(nu(a),a.c=null,a.a.forEach(function(d,g){var y=g.toLowerCase();g!=y&&(ns(this,g),Bq(this,y,d))},a)),a.f=l}function Hq(a){var l=[];return kA(new Soe,a,l),l.join("")}function Soe(){}function kA(a,l,d){if(l==null)d.push("null");else{if(typeof l=="object"){if(Array.isArray(l)){var g=l;l=g.length,d.push("[");for(var y="",w=0;w<l;w++)d.push(y),kA(a,g[w],d),y=",";d.push("]");return}if(l instanceof String||l instanceof Number||l instanceof Boolean)l=l.valueOf();else{d.push("{"),y="";for(g in l)Object.prototype.hasOwnProperty.call(l,g)&&(w=l[g],typeof w!="function"&&(d.push(y),zq(g,d),d.push(":"),kA(a,w,d),y=","));d.push("}");return}}switch(typeof l){case"string":zq(l,d);break;case"number":d.push(isFinite(l)&&!isNaN(l)?String(l):"null");break;case"boolean":d.push(String(l));break;case"function":d.push("null");break;default:throw Error("Unknown type: "+typeof l)}}}var $q={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},Doe=/\uffff/.test("\uFFFF")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function zq(a,l){l.push('"',a.replace(Doe,function(d){var g=$q[d];return g||(g="\\u"+(d.charCodeAt(0)|65536).toString(16).substr(1),$q[d]=g),g}),'"')}function OA(){var a=ur();return _o&&!!eu&&eu==11||/Edge\/\d+/.test(a)}function Hg(){return c.window&&c.window.location.href||self&&self.location&&self.location.href||""}function Gq(a,l){l=l||c.window;var d="about:blank";a&&(d=Mw(JB(a)||eq)),l.location.href=d}function Wq(a,l){var d=[],g;for(g in a)g in l?typeof a[g]!=typeof l[g]?d.push(g):typeof a[g]=="object"&&a[g]!=null&&l[g]!=null?0<Wq(a[g],l[g]).length&&d.push(g):a[g]!==l[g]&&d.push(g):d.push(g);for(g in l)g in a||d.push(g);return d}function Aoe(){var a=ur();return a=ad(a)!=Xq?null:(a=a.match(/\sChrome\/(\d+)/i))&&a.length==2?parseInt(a[1],10):null,a&&30>a?!1:!_o||!eu||9<eu}function Kq(a){return a=(a||ur()).toLowerCase(),!!(a.match(/android/)||a.match(/webos/)||a.match(/iphone|ipad|ipod/)||a.match(/blackberry/)||a.match(/windows phone/)||a.match(/iemobile/))}function jc(a){a=a||c.window;try{a.close()}catch{}}function Qq(a,l,d){var g=Math.floor(1e9*Math.random()).toString();l=l||500,d=d||600;var y=(window.screen.availHeight-d)/2,w=(window.screen.availWidth-l)/2;l={width:l,height:d,top:0<y?y:0,left:0<w?w:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},d=ur().toLowerCase(),g&&(l.target=g,Vt(d,"crios/")&&(l.target="_blank")),ad(ur())==VA&&(a=a||"http://localhost",l.scrollbars=!0),d=a||"",(a=l)||(a={}),g=window,l=d instanceof ii?d:JB(typeof d.href<"u"?d.href:String(d))||eq,d=a.target||d.target,y=[];for(I in a)switch(I){case"width":case"height":case"top":case"left":y.push(I+"="+a[I]);break;case"target":case"noopener":case"noreferrer":break;default:y.push(I+"="+(a[I]?1:0))}var I=y.join(",");if((Bn("iPhone")&&!Bn("iPod")&&!Bn("iPad")||Bn("iPad")||Bn("iPod"))&&g.navigator&&g.navigator.standalone&&d&&d!="_self"?(I=kw(document,"A"),GB(I,"HTMLAnchorElement"),l=l instanceof ii?l:ZB(l),I.href=Mw(l),I.setAttribute("target",d),a.noreferrer&&I.setAttribute("rel","noreferrer"),a=document.createEvent("MouseEvent"),a.initMouseEvent("click",!0,!0,g,1),I.dispatchEvent(a),I={}):a.noreferrer?(I=nq("",g,d,I),a=Mw(l),I&&(Zie&&Vt(a,";")&&(a="'"+a.replace(/'/g,"%27")+"'"),I.opener=null,a='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+hA(a)+'">',a=(g=KB())?g.createHTML(a):a,a=new nd(a,null,tq),g=I.document)&&(g.write(Qie(a)),g.close())):(I=nq(l,g,d,I))&&a.noopener&&(I.opener=null),I)try{I.focus()}catch{}return I}function xoe(a){return new nt(function(l){function d(){id(2e3).then(function(){if(!a||a.closed)l();else return d()})}return d()})}var Noe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Roe=/^[^@]+@[^@]+$/;function Hw(){var a=null;return new nt(function(l){c.document.readyState=="complete"?l():(a=function(){l()},SA(window,"load",a))}).o(function(l){throw Ei(window,"load",a),l})}function Moe(){return FA(void 0)?Hw().then(function(){return new nt(function(a,l){var d=c.document,g=setTimeout(function(){l(Error("Cordova framework is not ready."))},1e3);d.addEventListener("deviceready",function(){clearTimeout(g),a()},!1)})}):Wt(Error("Cordova must run in an Android or iOS file scheme."))}function FA(a){return a=a||ur(),!(cd()!=="file:"&&cd()!=="ionic:"||!a.toLowerCase().match(/iphone|ipad|ipod|android/))}function LA(){var a=c.window;try{return!(!a||a==a.top)}catch{return!1}}function wo(){return typeof c.WorkerGlobalScope<"u"&&typeof c.importScripts=="function"}function rs(){return je.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":je.INTERNAL.hasOwnProperty("node")?"Node":wo()?"Worker":"Browser"}function Yq(){var a=rs();return a==="ReactNative"||a==="Node"}function Poe(){for(var a=50,l=[];0<a;)l.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return l.join("")}var VA="Firefox",Xq="Chrome";function ad(a){var l=a.toLowerCase();if(Vt(l,"opera/")||Vt(l,"opr/")||Vt(l,"opios/"))return"Opera";if(Vt(l,"iemobile"))return"IEMobile";if(Vt(l,"msie")||Vt(l,"trident/"))return"IE";if(Vt(l,"edge/"))return"Edge";if(Vt(l,"firefox/"))return VA;if(Vt(l,"silk/"))return"Silk";if(Vt(l,"blackberry"))return"Blackberry";if(Vt(l,"webos"))return"Webos";if(!Vt(l,"safari/")||Vt(l,"chrome/")||Vt(l,"crios/")||Vt(l,"android"))if(!Vt(l,"chrome/")&&!Vt(l,"crios/")||Vt(l,"edge/")){if(Vt(l,"android"))return"Android";if((a=a.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&a.length==2)return a[1]}else return Xq;else return"Safari";return"Other"}var Jq={md:"FirebaseCore-web",od:"FirebaseUI-web"};function ud(a,l){l=l||[];var d=[],g={},y;for(y in Jq)g[Jq[y]]=!0;for(y=0;y<l.length;y++)typeof g[l[y]]<"u"&&(delete g[l[y]],d.push(l[y]));return d.sort(),l=d,l.length||(l=["FirebaseCore-web"]),d=rs(),d==="Browser"?(g=ur(),d=ad(g)):d==="Worker"&&(g=ur(),d=ad(g)+"-"+d),d+"/JsCore/"+a+"/"+l.join(",")}function ur(){return c.navigator&&c.navigator.userAgent||""}function Kt(a,l){a=a.split("."),l=l||c;for(var d=0;d<a.length&&typeof l=="object"&&l!=null;d++)l=l[a[d]];return d!=a.length&&(l=void 0),l}function UA(){try{var a=c.localStorage,l=qc();if(a)return a.setItem(l,"1"),a.removeItem(l),OA()?!!c.indexedDB:!0}catch{return wo()&&!!c.indexedDB}return!1}function Bc(){return($w()||cd()==="chrome-extension:"||FA())&&!Yq()&&UA()&&!wo()}function $w(){return cd()==="http:"||cd()==="https:"}function cd(){return c.location&&c.location.protocol||null}function $g(a){return a=a||ur(),!(Kq(a)||ad(a)==VA)}function zg(a){return typeof a>"u"?null:Hq(a)}function Zq(a){var l={},d;for(d in a)a.hasOwnProperty(d)&&a[d]!==null&&a[d]!==void 0&&(l[d]=a[d]);return l}function ld(a){if(a!==null)return JSON.parse(a)}function qc(a){return a||Math.floor(1e9*Math.random()).toString()}function e4(a){return a=a||ur(),!(ad(a)=="Safari"||a.toLowerCase().match(/iphone|ipad|ipod/))}function t4(){var a=c.___jsl;if(a&&a.H){for(var l in a.H)if(a.H[l].r=a.H[l].r||[],a.H[l].L=a.H[l].L||[],a.H[l].r=a.H[l].L.concat(),a.CP)for(var d=0;d<a.CP.length;d++)a.CP[d]=null}}function ru(a,l){if(a>l)throw Error("Short delay should be less than long delay!");this.a=a,this.c=l,a=ur(),l=rs(),this.b=Kq(a)||l==="ReactNative"}ru.prototype.get=function(){var a=c.navigator;return!(a&&typeof a.onLine=="boolean"&&($w()||cd()==="chrome-extension:"||typeof a.connection<"u"))||a.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function jA(){var a=c.document;return a&&typeof a.visibilityState<"u"?a.visibilityState=="visible":!0}function koe(){var a=c.document,l=null;return jA()||!a?Te():new nt(function(d){l=function(){jA()&&(a.removeEventListener("visibilitychange",l,!1),d())},a.addEventListener("visibilitychange",l,!1)}).o(function(d){throw a.removeEventListener("visibilitychange",l,!1),d})}function Gg(a){try{var l=new Date(parseInt(a,10));if(!isNaN(l.getTime())&&!/[^0-9]/.test(a))return l.toUTCString()}catch{}return null}function n4(){return!(!Kt("fireauth.oauthhelper",c)&&!Kt("fireauth.iframe",c))}function Ooe(){var a=c.navigator;return a&&a.serviceWorker&&a.serviceWorker.controller||null}function Foe(){var a=c.navigator;return a&&a.serviceWorker?Te().then(function(){return a.serviceWorker.ready}).then(function(l){return l.active||null}).o(function(){return null}):Te(null)}var r4={};function BA(a){r4[a]||(r4[a]=!0,typeof console<"u"&&typeof console.warn=="function"&&console.warn(a))}var qA;try{var HA={};Object.defineProperty(HA,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(HA,"abcd",{configurable:!0,enumerable:!0,value:2}),qA=HA.abcd==2}catch{qA=!1}function de(a,l,d){qA?Object.defineProperty(a,l,{configurable:!0,enumerable:!0,value:d}):a[l]=d}function jr(a,l){if(l)for(var d in l)l.hasOwnProperty(d)&&de(a,d,l[d])}function is(a){var l={};return jr(l,a),l}function Loe(a){var l={},d;for(d in a)a.hasOwnProperty(d)&&(l[d]=a[d]);return l}function Voe(a,l){if(!l||!l.length)return!0;if(!a)return!1;for(var d=0;d<l.length;d++){var g=a[l[d]];if(g==null||g==="")return!1}return!0}function $A(a){var l=a;if(typeof a=="object"&&a!=null){l="length"in a?[]:{};for(var d in a)de(l,d,$A(a[d]))}return l}function zA(a){var l=a&&(a[QA]?"phone":null);if(l&&a&&a[KA]){de(this,"uid",a[KA]),de(this,"displayName",a[i4]||null);var d=null;a[WA]&&(d=new Date(a[WA]).toUTCString()),de(this,"enrollmentTime",d),de(this,"factorId",l)}else throw new D("internal-error","Internal assert: invalid MultiFactorInfo object")}zA.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function GA(a){try{var l=new Wg(a)}catch{l=null}return l}var i4="displayName",WA="enrolledAt",KA="mfaEnrollmentId",QA="phoneInfo";function Wg(a){zA.call(this,a),de(this,"phoneNumber",a[QA])}ge(Wg,zA),Wg.prototype.w=function(){var a=Wg.bb.w.call(this);return a.phoneNumber=this.phoneNumber,a};function Uoe(a){var l={},d=a[joe],g=a[qoe],y=a[Hoe];if(a=GA(a[Boe]),!y||y!=zw&&y!=Kg&&!d||y==Kg&&!g||y==YA&&!a)throw Error("Invalid checkActionCode response!");y==Kg?(l[s4]=d||null,l[a4]=d||null,l[o4]=g):(l[s4]=g||null,l[a4]=g||null,l[o4]=d||null),l[$oe]=a||null,de(this,Goe,y),de(this,zoe,$A(l))}var YA="REVERT_SECOND_FACTOR_ADDITION",zw="EMAIL_SIGNIN",Kg="VERIFY_AND_CHANGE_EMAIL",joe="email",Boe="mfaInfo",qoe="newEmail",Hoe="requestType",o4="email",s4="fromEmail",$oe="multiFactorInfo",a4="previousEmail",zoe="data",Goe="operation";function XA(a){a=si(a);var l=Qi(a,u4)||null,d=Qi(a,c4)||null,g=Qi(a,l4)||null;if(g=g&&Yoe[g]||null,!l||!d||!g)throw new D("argument-error",u4+", "+c4+"and "+l4+" are required in a valid action code URL.");jr(this,{apiKey:l,operation:g,code:d,continueUrl:Qi(a,Woe)||null,languageCode:Qi(a,Koe)||null,tenantId:Qi(a,Qoe)||null})}var u4="apiKey",c4="oobCode",Woe="continueUrl",Koe="languageCode",l4="mode",Qoe="tenantId",Yoe={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:YA,signIn:zw,verifyAndChangeEmail:Kg,verifyEmail:"VERIFY_EMAIL"};function h4(a){try{return new XA(a)}catch{return null}}function Gw(a){var l=a[Xoe];if(typeof l>"u")throw new D("missing-continue-uri");if(typeof l!="string"||typeof l=="string"&&!l.length)throw new D("invalid-continue-uri");this.h=l,this.b=this.a=null,this.g=!1;var d=a[d4];if(d&&typeof d=="object"){l=d[y4];var g=d[g4];if(d=d[m4],typeof l=="string"&&l.length){if(this.a=l,typeof g<"u"&&typeof g!="boolean")throw new D("argument-error",g4+" property must be a boolean when specified.");if(this.g=!!g,typeof d<"u"&&(typeof d!="string"||typeof d=="string"&&!d.length))throw new D("argument-error",m4+" property must be a non empty string when specified.");this.b=d||null}else{if(typeof l<"u")throw new D("argument-error",y4+" property must be a non empty string when specified.");if(typeof g<"u"||typeof d<"u")throw new D("missing-android-pkg-name")}}else if(typeof d<"u")throw new D("argument-error",d4+" property must be a non null object when specified.");if(this.f=null,(l=a[p4])&&typeof l=="object"){if(l=l[v4],typeof l=="string"&&l.length)this.f=l;else if(typeof l<"u")throw new D("argument-error",v4+" property must be a non empty string when specified.")}else if(typeof l<"u")throw new D("argument-error",p4+" property must be a non null object when specified.");if(l=a[JA],typeof l<"u"&&typeof l!="boolean")throw new D("argument-error",JA+" property must be a boolean when specified.");if(this.c=!!l,a=a[f4],typeof a<"u"&&(typeof a!="string"||typeof a=="string"&&!a.length))throw new D("argument-error",f4+" property must be a non empty string when specified.");this.i=a||null}var d4="android",f4="dynamicLinkDomain",JA="handleCodeInApp",p4="iOS",Xoe="url",g4="installApp",m4="minimumVersion",y4="packageName",v4="bundleId";function Ww(a){var l={};l.continueUrl=a.h,l.canHandleCodeInApp=a.c,(l.androidPackageName=a.a)&&(l.androidMinimumVersion=a.b,l.androidInstallApp=a.g),l.iOSBundleId=a.f,l.dynamicLinkDomain=a.i;for(var d in l)l[d]===null&&delete l[d];return l}function Joe(a){return Aw(a,function(l){return l=l.toString(16),1<l.length?l:"0"+l}).join("")}var Qg=null;function Zoe(a){var l=[];return ese(a,function(d){l.push(d)}),l}function ese(a,l){function d(L){for(;g<a.length;){var B=a.charAt(g++),Re=Qg[B];if(Re!=null)return Re;if(!/^[\s\xa0]*$/.test(B))throw Error("Unknown base64 encoding at char: "+B)}return L}tse();for(var g=0;;){var y=d(-1),w=d(0),I=d(64),C=d(64);if(C===64&&y===-1)break;l(y<<2|w>>4),I!=64&&(l(w<<4&240|I>>2),C!=64&&l(I<<6&192|C))}}function tse(){if(!Qg){Qg={};for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),l=["+/=","+/","-_=","-_.","-_"],d=0;5>d;d++)for(var g=a.concat(l[d].split("")),y=0;y<g.length;y++){var w=g[y];Qg[w]===void 0&&(Qg[w]=y)}}}function Kw(a){var l=_4(a);if(!(l&&l.sub&&l.iss&&l.aud&&l.exp))throw Error("Invalid JWT");this.h=a,this.a=l.exp,this.i=l.sub,a=Date.now()/1e3,this.g=l.iat||(a>this.a?this.a:a),this.b=l.provider_id||l.firebase&&l.firebase.sign_in_provider||null,this.f=l.firebase&&l.firebase.tenant||null,this.c=!!l.is_anonymous||this.b=="anonymous"}Kw.prototype.T=function(){return this.f},Kw.prototype.l=function(){return this.c},Kw.prototype.toString=function(){return this.h};function Qw(a){try{return new Kw(a)}catch{return null}}function _4(a){if(!a||(a=a.split("."),a.length!=3))return null;a=a[1];for(var l=(4-a.length%4)%4,d=0;d<l;d++)a+=".";try{var g=Zoe(a);for(a=[],d=l=0;l<g.length;){var y=g[l++];if(128>y)a[d++]=String.fromCharCode(y);else if(191<y&&224>y){var w=g[l++];a[d++]=String.fromCharCode((y&31)<<6|w&63)}else if(239<y&&365>y){w=g[l++];var I=g[l++],C=g[l++],L=((y&7)<<18|(w&63)<<12|(I&63)<<6|C&63)-65536;a[d++]=String.fromCharCode(55296+(L>>10)),a[d++]=String.fromCharCode(56320+(L&1023))}else w=g[l++],I=g[l++],a[d++]=String.fromCharCode((y&15)<<12|(w&63)<<6|I&63)}return JSON.parse(a.join(""))}catch{}return null}var w4="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Yw=["client_id","response_type","scope","redirect_uri","state"],ZA={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Yw},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Yw},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Yw},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:w4},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function ex(a){for(var l in ZA)if(ZA[l].fa==a)return ZA[l];return null}function E4(a){var l={};l["facebook.com"]=b4,l["google.com"]=C4,l["github.com"]=T4,l["twitter.com"]=S4;var d=a&&a[I4];try{if(d)return l[d]?new l[d](a):new os(a);if(typeof a[tx]<"u")return new nx(a)}catch{}return null}var tx="idToken",I4="providerId";function nx(a){var l=a[I4];if(!l&&a[tx]){var d=Qw(a[tx]);d&&d.b&&(l=d.b)}if(!l)throw Error("Invalid additional user info!");(l=="anonymous"||l=="custom")&&(l=null),d=!1,typeof a.isNewUser<"u"?d=!!a.isNewUser:a.kind==="identitytoolkit#SignupNewUserResponse"&&(d=!0),de(this,"providerId",l),de(this,"isNewUser",d)}function os(a){nx.call(this,a),a=ld(a.rawUserInfo||"{}"),de(this,"profile",$A(a||{}))}ge(os,nx);function b4(a){if(os.call(this,a),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}ge(b4,os);function T4(a){if(os.call(this,a),this.providerId!="github.com")throw Error("Invalid provider ID!");de(this,"username",this.profile&&this.profile.login||null)}ge(T4,os);function C4(a){if(os.call(this,a),this.providerId!="google.com")throw Error("Invalid provider ID!")}ge(C4,os);function S4(a){if(os.call(this,a),this.providerId!="twitter.com")throw Error("Invalid provider ID!");de(this,"username",a.screenName||null)}ge(S4,os);function D4(a){var l=si(a),d=Qi(l,"link"),g=Qi(si(d),"link");return l=Qi(l,"deep_link_id"),Qi(si(l),"link")||l||g||d||a}function Xw(a,l){if(!a&&!l)throw new D("internal-error","Internal assert: no raw session string available");if(a&&l)throw new D("internal-error","Internal assert: unable to determine the session type");this.a=a||null,this.b=l||null,this.type=this.a?Yg:Jw}var Yg="enroll",Jw="signin";Xw.prototype.Ha=function(){return this.a?Te(this.a):Te(this.b)},Xw.prototype.w=function(){return this.type==Yg?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function hd(){}hd.prototype.ka=function(){},hd.prototype.b=function(){},hd.prototype.c=function(){},hd.prototype.w=function(){};function dd(a,l){return a.then(function(d){if(d[bo]){var g=Qw(d[bo]);if(!g||l!=g.i)throw new D("user-mismatch");return d}throw new D("user-mismatch")}).o(function(d){throw d&&d.code&&d.code==mo+"user-not-found"?new D("user-mismatch"):d})}function Hc(a,l){if(l)this.a=l;else throw new D("internal-error","failed to construct a credential");de(this,"providerId",a),de(this,"signInMethod",a)}Hc.prototype.ka=function(a){return Sx(a,rx(this))},Hc.prototype.b=function(a,l){var d=rx(this);return d.idToken=l,Dx(a,d)},Hc.prototype.c=function(a,l){return dd(Ax(a,rx(this)),l)};function rx(a){return{pendingToken:a.a,requestUri:"http://localhost"}}Hc.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function nse(a){if(a&&a.providerId&&a.signInMethod&&a.providerId.indexOf("saml.")==0&&a.pendingToken)try{return new Hc(a.providerId,a.pendingToken)}catch{}return null}function aa(a,l,d){if(this.a=null,l.idToken||l.accessToken)l.idToken&&de(this,"idToken",l.idToken),l.accessToken&&de(this,"accessToken",l.accessToken),l.nonce&&!l.pendingToken&&de(this,"nonce",l.nonce),l.pendingToken&&(this.a=l.pendingToken);else if(l.oauthToken&&l.oauthTokenSecret)de(this,"accessToken",l.oauthToken),de(this,"secret",l.oauthTokenSecret);else throw new D("internal-error","failed to construct a credential");de(this,"providerId",a),de(this,"signInMethod",d)}aa.prototype.ka=function(a){return Sx(a,ix(this))},aa.prototype.b=function(a,l){var d=ix(this);return d.idToken=l,Dx(a,d)},aa.prototype.c=function(a,l){var d=ix(this);return dd(Ax(a,d),l)};function ix(a){var l={};return a.idToken&&(l.id_token=a.idToken),a.accessToken&&(l.access_token=a.accessToken),a.secret&&(l.oauth_token_secret=a.secret),l.providerId=a.providerId,a.nonce&&!a.a&&(l.nonce=a.nonce),l={postBody:jq(l).toString(),requestUri:"http://localhost"},a.a&&(delete l.postBody,l.pendingToken=a.a),l}aa.prototype.w=function(){var a={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(a.oauthIdToken=this.idToken),this.accessToken&&(a.oauthAccessToken=this.accessToken),this.secret&&(a.oauthTokenSecret=this.secret),this.nonce&&(a.nonce=this.nonce),this.a&&(a.pendingToken=this.a),a};function rse(a){if(a&&a.providerId&&a.signInMethod){var l={idToken:a.oauthIdToken,accessToken:a.oauthTokenSecret?null:a.oauthAccessToken,oauthTokenSecret:a.oauthTokenSecret,oauthToken:a.oauthTokenSecret&&a.oauthAccessToken,nonce:a.nonce,pendingToken:a.pendingToken};try{return new aa(a.providerId,l,a.signInMethod)}catch{}}return null}function $c(a,l){this.Qc=l||[],jr(this,{providerId:a,isOAuthProvider:!0}),this.Jb={},this.qb=(ex(a)||{}).Ja||null,this.pb=null}$c.prototype.Ka=function(a){return this.Jb=Za(a),this};function A4(a){if(typeof a!="string"||a.indexOf("saml.")!=0)throw new D("argument-error",'SAML provider IDs must be prefixed with "saml."');$c.call(this,a,[])}ge(A4,$c);function Ii(a){$c.call(this,a,Yw),this.a=[]}ge(Ii,$c),Ii.prototype.Ca=function(a){return oa(this.a,a)||this.a.push(a),this},Ii.prototype.Rb=function(){return Pc(this.a)},Ii.prototype.credential=function(a,l){var d;if(b(a)?d={idToken:a.idToken||null,accessToken:a.accessToken||null,nonce:a.rawNonce||null}:d={idToken:a||null,accessToken:l||null},!d.idToken&&!d.accessToken)throw new D("argument-error","credential failed: must provide the ID token and/or the access token.");return new aa(this.providerId,d,this.providerId)};function zc(){Ii.call(this,"facebook.com")}ge(zc,Ii),de(zc,"PROVIDER_ID","facebook.com"),de(zc,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function x4(a){if(!a)throw new D("argument-error","credential failed: expected 1 argument (the OAuth access token).");var l=a;return b(a)&&(l=a.accessToken),new zc().credential({accessToken:l})}function Gc(){Ii.call(this,"github.com")}ge(Gc,Ii),de(Gc,"PROVIDER_ID","github.com"),de(Gc,"GITHUB_SIGN_IN_METHOD","github.com");function N4(a){if(!a)throw new D("argument-error","credential failed: expected 1 argument (the OAuth access token).");var l=a;return b(a)&&(l=a.accessToken),new Gc().credential({accessToken:l})}function Wc(){Ii.call(this,"google.com"),this.Ca("profile")}ge(Wc,Ii),de(Wc,"PROVIDER_ID","google.com"),de(Wc,"GOOGLE_SIGN_IN_METHOD","google.com");function R4(a,l){var d=a;return b(a)&&(d=a.idToken,l=a.accessToken),new Wc().credential({idToken:d,accessToken:l})}function fd(){$c.call(this,"twitter.com",w4)}ge(fd,$c),de(fd,"PROVIDER_ID","twitter.com"),de(fd,"TWITTER_SIGN_IN_METHOD","twitter.com");function M4(a,l){var d=a;if(b(d)||(d={oauthToken:a,oauthTokenSecret:l}),!d.oauthToken||!d.oauthTokenSecret)throw new D("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new aa("twitter.com",d,"twitter.com")}function iu(a,l,d){this.a=a,this.f=l,de(this,"providerId","password"),de(this,"signInMethod",d===Yi.EMAIL_LINK_SIGN_IN_METHOD?Yi.EMAIL_LINK_SIGN_IN_METHOD:Yi.EMAIL_PASSWORD_SIGN_IN_METHOD)}iu.prototype.ka=function(a){return this.signInMethod==Yi.EMAIL_LINK_SIGN_IN_METHOD?it(a,qse,{email:this.a,oobCode:this.f}):it(a,s3,{email:this.a,password:this.f})},iu.prototype.b=function(a,l){return this.signInMethod==Yi.EMAIL_LINK_SIGN_IN_METHOD?it(a,Hse,{idToken:l,email:this.a,oobCode:this.f}):it(a,o3,{idToken:l,email:this.a,password:this.f})},iu.prototype.c=function(a,l){return dd(this.ka(a),l)},iu.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function ise(a){return a&&a.email&&a.password?new iu(a.email,a.password,a.signInMethod):null}function Yi(){jr(this,{providerId:"password",isOAuthProvider:!1})}function P4(a,l){if(l=ox(l),!l)throw new D("argument-error","Invalid email link!");return new iu(a,l.code,Yi.EMAIL_LINK_SIGN_IN_METHOD)}function ox(a){return a=D4(a),(a=h4(a))&&a.operation===zw?a:null}jr(Yi,{PROVIDER_ID:"password"}),jr(Yi,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),jr(Yi,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function ou(a){if(!(a.fb&&a.eb||a.La&&a.ea))throw new D("internal-error");this.a=a,de(this,"providerId","phone"),this.fa="phone",de(this,"signInMethod","phone")}ou.prototype.ka=function(a){return a.gb(Xg(this))},ou.prototype.b=function(a,l){var d=Xg(this);return d.idToken=l,it(a,cae,d)},ou.prototype.c=function(a,l){var d=Xg(this);return d.operation="REAUTH",a=it(a,lae,d),dd(a,l)},ou.prototype.w=function(){var a={providerId:"phone"};return this.a.fb&&(a.verificationId=this.a.fb),this.a.eb&&(a.verificationCode=this.a.eb),this.a.La&&(a.temporaryProof=this.a.La),this.a.ea&&(a.phoneNumber=this.a.ea),a};function ose(a){if(a&&a.providerId==="phone"&&(a.verificationId&&a.verificationCode||a.temporaryProof&&a.phoneNumber)){var l={};return rt(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(d){a[d]&&(l[d]=a[d])}),new ou(l)}return null}function Xg(a){return a.a.La&&a.a.ea?{temporaryProof:a.a.La,phoneNumber:a.a.ea}:{sessionInfo:a.a.fb,code:a.a.eb}}function ua(a){try{this.a=a||je.auth()}catch{throw new D("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}jr(this,{providerId:"phone",isOAuthProvider:!1})}ua.prototype.gb=function(a,l){var d=this.a.a;return Te(l.verify()).then(function(g){if(typeof g!="string")throw new D("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(l.type){case"recaptcha":var y=b(a)?a.session:null,w=b(a)?a.phoneNumber:a,I;return y&&y.type==Yg?I=y.Ha().then(function(C){return Pse(d,{idToken:C,phoneEnrollmentInfo:{phoneNumber:w,recaptchaToken:g}})}):y&&y.type==Jw?I=y.Ha().then(function(C){return kse(d,{mfaPendingCredential:C,mfaEnrollmentId:a.multiFactorHint&&a.multiFactorHint.uid||a.multiFactorUid,phoneSignInInfo:{recaptchaToken:g}})}):I=Mse(d,{phoneNumber:w,recaptchaToken:g}),I.then(function(C){return typeof l.reset=="function"&&l.reset(),C},function(C){throw typeof l.reset=="function"&&l.reset(),C});default:throw new D("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function k4(a,l){if(!a)throw new D("missing-verification-id");if(!l)throw new D("missing-verification-code");return new ou({fb:a,eb:l})}jr(ua,{PROVIDER_ID:"phone"}),jr(ua,{PHONE_SIGN_IN_METHOD:"phone"});function sx(a){if(a.temporaryProof&&a.phoneNumber)return new ou({La:a.temporaryProof,ea:a.phoneNumber});var l=a&&a.providerId;if(!l||l==="password")return null;var d=a&&a.oauthAccessToken,g=a&&a.oauthTokenSecret,y=a&&a.nonce,w=a&&a.oauthIdToken,I=a&&a.pendingToken;try{switch(l){case"google.com":return R4(w,d);case"facebook.com":return x4(d);case"github.com":return N4(d);case"twitter.com":return M4(d,g);default:return d||g||w||I?I?l.indexOf("saml.")==0?new Hc(l,I):new aa(l,{pendingToken:I,idToken:a.oauthIdToken,accessToken:a.oauthAccessToken},l):new Ii(l).credential({idToken:w,accessToken:d,rawNonce:y}):null}}catch{return null}}function ax(a){if(!a.isOAuthProvider)throw new D("invalid-oauth-provider")}function Eo(a,l,d,g,y,w,I){if(this.c=a,this.b=l||null,this.g=d||null,this.f=g||null,this.i=w||null,this.h=I||null,this.a=y||null,this.g||this.a){if(this.g&&this.a)throw new D("invalid-auth-event");if(this.g&&!this.f)throw new D("invalid-auth-event")}else throw new D("invalid-auth-event")}Eo.prototype.getUid=function(){var a=[];return a.push(this.c),this.b&&a.push(this.b),this.f&&a.push(this.f),this.h&&a.push(this.h),a.join("-")},Eo.prototype.T=function(){return this.h},Eo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function O4(a){return a=a||{},a.type?new Eo(a.type,a.eventId,a.urlResponse,a.sessionId,a.error&&Xa(a.error),a.postBody,a.tenantId):null}function sse(){this.b=null,this.a=[]}var ux=null;function ase(a){var l=ux;l.a.push(a),l.b||(l.b=function(d){for(var g=0;g<l.a.length;g++)l.a[g](d)},a=Kt("universalLinks.subscribe",c),typeof a=="function"&&a(null,l.b))}function cx(a){var l="unauthorized-domain",d=void 0,g=si(a);a=g.a,g=g.c,g=="chrome-extension"?d=rq("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):g=="http"||g=="https"?d=rq("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",a):l="operation-not-supported-in-this-environment",D.call(this,l,d)}ge(cx,D);function Jg(a,l,d){D.call(this,a,d),a=l||{},a.Kb&&de(this,"email",a.Kb),a.ea&&de(this,"phoneNumber",a.ea),a.credential&&de(this,"credential",a.credential),a.$b&&de(this,"tenantId",a.$b)}ge(Jg,D),Jg.prototype.w=function(){var a={code:this.code,message:this.message};this.email&&(a.email=this.email),this.phoneNumber&&(a.phoneNumber=this.phoneNumber),this.tenantId&&(a.tenantId=this.tenantId);var l=this.credential&&this.credential.w();return l&&ri(a,l),a},Jg.prototype.toJSON=function(){return this.w()};function Zw(a){if(a.code){var l=a.code||"";l.indexOf(mo)==0&&(l=l.substring(mo.length));var d={credential:sx(a),$b:a.tenantId};if(a.email)d.Kb=a.email;else if(a.phoneNumber)d.ea=a.phoneNumber;else if(!d.credential)return new D(l,a.message||void 0);return new Jg(l,d,a.message)}return null}function Zg(){}Zg.prototype.c=null;function F4(a){return a.c||(a.c=a.b())}var lx;function e0(){}ge(e0,Zg),e0.prototype.a=function(){var a=L4(this);return a?new ActiveXObject(a):new XMLHttpRequest},e0.prototype.b=function(){var a={};return L4(this)&&(a[0]=!0,a[1]=!0),a};function L4(a){if(!a.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var l=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],d=0;d<l.length;d++){var g=l[d];try{return new ActiveXObject(g),a.f=g}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return a.f}lx=new e0;function t0(){}ge(t0,Zg),t0.prototype.a=function(){var a=new XMLHttpRequest;if("withCredentials"in a)return a;if(typeof XDomainRequest<"u")return new V4;throw Error("Unsupported browser")},t0.prototype.b=function(){return{}};function V4(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=N(this.qc,this),this.a.onerror=N(this.Tb,this),this.a.onprogress=N(this.rc,this),this.a.ontimeout=N(this.vc,this)}t=V4.prototype,t.open=function(a,l,d){if(d!=null&&!d)throw Error("Only async requests are supported.");this.a.open(a,l)},t.send=function(a){if(a)if(typeof a=="string")this.a.send(a);else throw Error("Only string data is supported");else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(a){return a.toLowerCase()=="content-type"?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,hx(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",hx(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,hx(this,1)};function hx(a,l){a.readyState=l,a.onreadystatechange&&a.onreadystatechange()}t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function dx(a,l,d){this.reset(a,l,d,void 0,void 0)}dx.prototype.a=null;var use=0;dx.prototype.reset=function(a,l,d,g,y){typeof y=="number"||use++,g||Ye(),delete this.a};function fx(a){this.f=a,this.b=this.c=this.a=null}function em(a,l){this.name=a,this.value=l}em.prototype.toString=function(){return this.name};var U4=new em("SEVERE",1e3),px=new em("WARNING",900),cse=new em("CONFIG",700),lse=new em("FINE",500);function j4(a){return a.c?a.c:a.a?j4(a.a):(sr("Root logger has no level set."),null)}fx.prototype.log=function(a,l,d){if(a.value>=j4(this).value)for(E(l)&&(l=l()),a=new dx(a,String(l),this.f),d&&(a.a=d),d=this;d;)d=d.a};var gx={},n0=null;function mx(a){n0||(n0=new fx(""),gx[""]=n0,n0.c=cse);var l;if(!(l=gx[a])){l=new fx(a);var d=a.lastIndexOf("."),g=a.substr(d+1);d=mx(a.substr(0,d)),d.b||(d.b={}),d.b[g]=l,l.a=d,gx[a]=l}return l}function Xi(a,l){a&&a.log(lse,l,void 0)}function r0(a){this.f=a}ge(r0,Zg),r0.prototype.a=function(){return new i0(this.f)},r0.prototype.b=function(a){return function(){return a}}({});function i0(a){Ur.call(this),this.u=a,this.h=void 0,this.readyState=yx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=mx("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}ge(i0,Ur);var yx=0;t=i0.prototype,t.open=function(a,l){if(this.readyState!=yx)throw this.abort(),Error("Error reopening a connection");this.s=a,this.f=l,this.readyState=1,nm(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var l={headers:this.l,method:this.s,credentials:this.h,cache:void 0};a&&(l.body=a),this.u.fetch(new Request(this.f,l)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,tm(this)),this.readyState=yx},t.uc=function(a){this.a&&(this.g=a,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=a.headers,this.readyState=2,nm(this)),this.a&&(this.readyState=3,nm(this),this.a&&(this.responseType==="arraybuffer"?a.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):typeof c.ReadableStream<"u"&&"body"in a?(this.response=this.responseText="",this.c=a.body.getReader(),this.m=new TextDecoder,B4(this)):a.text().then(this.tc.bind(this),this.Va.bind(this)))))};function B4(a){a.c.read().then(a.pc.bind(a)).catch(a.Va.bind(a))}t.pc=function(a){if(this.a){var l=this.m.decode(a.value?a.value:new Uint8Array(0),{stream:!a.done});l&&(this.response=this.responseText+=l),a.done?tm(this):nm(this),this.readyState==3&&B4(this)}},t.tc=function(a){this.a&&(this.response=this.responseText=a,tm(this))},t.sc=function(a){this.a&&(this.response=a,tm(this))},t.Va=function(a){var l=this.i;l&&l.log(px,"Failed to fetch url "+this.f,a instanceof Error?a:Error(a)),this.a&&tm(this)};function tm(a){a.readyState=4,a.g=null,a.c=null,a.m=null,nm(a)}t.setRequestHeader=function(a,l){this.l.append(a,l)},t.getResponseHeader=function(a){return this.b?this.b.get(a.toLowerCase())||"":((a=this.i)&&a.log(px,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var a=this.i;return a&&a.log(px,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}a=[];for(var l=this.b.entries(),d=l.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=l.next();return a.join(`\r
`)};function nm(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(i0.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(a){this.h=a?"include":"same-origin"}});function rm(a){Ur.call(this),this.headers=new od,this.D=a||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=q4,this.u=this.S=!1}ge(rm,Ur);var q4="";rm.prototype.b=mx("goog.net.XhrIo");var hse=/^https?$/i,dse=["POST","PUT"];function fse(a,l,d,g,y){if(a.a)throw Error("[goog.net.XhrIo] Object is active with another request="+a.l+"; newUri="+l);d=d?d.toUpperCase():"GET",a.l=l,a.h="",a.P=d,a.J=!1,a.c=!0,a.a=a.D?a.D.a():lx.a(),a.C=a.D?F4(a.D):F4(lx),a.a.onreadystatechange=N(a.Wb,a);try{Xi(a.b,ca(a,"Opening Xhr")),a.N=!0,a.a.open(d,String(l),!0),a.N=!1}catch(I){Xi(a.b,ca(a,"Error opening Xhr: "+I.message)),H4(a,I);return}l=g||"";var w=new od(a.headers);y&&voe(y,function(I,C){w.set(C,I)}),y=Fie(w.Y()),g=c.FormData&&l instanceof c.FormData,!oa(dse,d)||y||g||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),w.forEach(function(I,C){this.a.setRequestHeader(C,I)},a),a.m&&(a.a.responseType=a.m),"withCredentials"in a.a&&a.a.withCredentials!==a.S&&(a.a.withCredentials=a.S);try{G4(a),0<a.g&&(a.u=pse(a.a),Xi(a.b,ca(a,"Will abort after "+a.g+"ms if incomplete, xhr2 "+a.u)),a.u?(a.a.timeout=a.g,a.a.ontimeout=N(a.Ma,a)):a.s=NA(a.Ma,a.g,a)),Xi(a.b,ca(a,"Sending request")),a.i=!0,a.a.send(l),a.i=!1}catch(I){Xi(a.b,ca(a,"Send error: "+I.message)),H4(a,I)}}function pse(a){return _o&&aq(9)&&typeof a.timeout=="number"&&a.ontimeout!==void 0}function gse(a){return a.toLowerCase()=="content-type"}t=rm.prototype,t.Ma=function(){typeof u<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Xi(this.b,ca(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function H4(a,l){a.c=!1,a.a&&(a.f=!0,a.a.abort(),a.f=!1),a.h=l,$4(a),o0(a)}function $4(a){a.J||(a.J=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}t.abort=function(){this.a&&this.c&&(Xi(this.b,ca(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),o0(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),o0(this,!0)),rm.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?z4(this):this.Jc())},t.Jc=function(){z4(this)};function z4(a){if(a.c&&typeof u<"u"){if(a.C[1]&&im(a)==4&&s0(a)==2)Xi(a.b,ca(a,"Local request error detected and ignored"));else if(a.i&&im(a)==4)NA(a.Wb,0,a);else if(a.dispatchEvent("readystatechange"),im(a)==4){Xi(a.b,ca(a,"Request complete")),a.c=!1;try{var l=s0(a);e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var y;if(y=l===0){var w=String(a.l).match(Vq)[1]||null;if(!w&&c.self&&c.self.location){var I=c.self.location.protocol;w=I.substr(0,I.length-1)}y=!hse.test(w?w.toLowerCase():"")}g=y}if(g)a.dispatchEvent("complete"),a.dispatchEvent("success");else{try{var C=2<im(a)?a.a.statusText:""}catch(L){Xi(a.b,"Can not get status: "+L.message),C=""}a.h=C+" ["+s0(a)+"]",$4(a)}}finally{o0(a)}}}}function o0(a,l){if(a.a){G4(a);var d=a.a,g=a.C[0]?m:null;a.a=null,a.C=null,l||a.dispatchEvent("ready");try{d.onreadystatechange=g}catch(y){(a=a.b)&&a.log(U4,"Problem encountered resetting onreadystatechange: "+y.message,void 0)}}}function G4(a){a.a&&a.u&&(a.a.ontimeout=null),a.s&&(c.clearTimeout(a.s),a.s=null)}function im(a){return a.a?a.a.readyState:0}function s0(a){try{return 2<im(a)?a.a.status:-1}catch{return-1}}function mse(a){try{return a.a?a.a.responseText:""}catch(l){return Xi(a.b,"Can not get responseText: "+l.message),""}}t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case q4:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var a=this.b;return a&&a.log(U4,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(l){return Xi(this.b,"Can not get response: "+l.message),null}};function ca(a,l){return l+" ["+a.P+" "+a.l+" "+s0(a)+"]"}function Kc(a){var l=_se;this.g=[],this.u=l,this.s=a||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}Kc.prototype.cancel=function(a){if(this.a)this.c instanceof Kc&&this.c.cancel();else{if(this.b){var l=this.b;delete this.b,a?l.cancel(a):(l.l--,0>=l.l&&l.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(a=new sm(this),a0(this),om(this,!1,a))}},Kc.prototype.m=function(a,l){this.i=!1,om(this,a,l)};function om(a,l,d){a.a=!0,a.c=d,a.f=!l,K4(a)}function a0(a){if(a.a){if(!a.v)throw new u0(a);a.v=!1}}function yse(a,l){vx(a,null,l,void 0)}function vx(a,l,d,g){a.g.push([l,d,g]),a.a&&K4(a)}Kc.prototype.then=function(a,l,d){var g,y,w=new nt(function(I,C){g=I,y=C});return vx(this,g,function(I){I instanceof sm?w.cancel():y(I)}),w.then(a,l,d)},Kc.prototype.$goog_Thenable=!0;function W4(a){return Oie(a.g,function(l){return E(l[1])})}function K4(a){if(a.h&&a.a&&W4(a)){var l=a.h,d=c0[l];d&&(c.clearTimeout(d.a),delete c0[l]),a.h=0}a.b&&(a.b.l--,delete a.b),l=a.c;for(var g=d=!1;a.g.length&&!a.i;){var y=a.g.shift(),w=y[0],I=y[1];if(y=y[2],w=a.f?I:w)try{var C=w.call(y||a.s,l);C!==void 0&&(a.f=a.f&&(C==l||C instanceof Error),a.c=l=C),(be(l)||typeof c.Promise=="function"&&l instanceof c.Promise)&&(g=!0,a.i=!0)}catch(L){l=L,a.f=!0,W4(a)||(d=!0)}}a.c=l,g&&(C=N(a.m,a,!0),g=N(a.m,a,!1),l instanceof Kc?(vx(l,C,g),l.C=!0):l.then(C,g)),d&&(l=new Q4(l),c0[l.a]=l,a.h=l.a)}function u0(){Ce.call(this)}ge(u0,Ce),u0.prototype.message="Deferred has already fired",u0.prototype.name="AlreadyCalledError";function sm(){Ce.call(this)}ge(sm,Ce),sm.prototype.message="Deferred was canceled",sm.prototype.name="CanceledError";function Q4(a){this.a=c.setTimeout(N(this.c,this),0),this.b=a}Q4.prototype.c=function(){throw delete c0[this.a],this.b};var c0={};function _x(a){var l={},d=l.document||document,g=QB(a).toString(),y=kw(document,"SCRIPT"),w={Xb:y,Ma:void 0},I=new Kc(w),C=null,L=l.timeout!=null?l.timeout:5e3;return 0<L&&(C=window.setTimeout(function(){l0(y,!0);var B=new wx(Ese,"Timeout reached for loading script "+g);a0(I),om(I,!1,B)},L),w.Ma=C),y.onload=y.onreadystatechange=function(){y.readyState&&y.readyState!="loaded"&&y.readyState!="complete"||(l0(y,l.xd||!1,C),a0(I),om(I,!0,null))},y.onerror=function(){l0(y,!0,C);var B=new wx(wse,"Error while loading script "+g);a0(I),om(I,!1,B)},w=l.attributes||{},ri(w,{type:"text/javascript",charset:"UTF-8"}),cq(y,w),Yie(y,a),vse(d).appendChild(y),I}function vse(a){var l;return(l=(a||document).getElementsByTagName("HEAD"))&&l.length!=0?l[0]:a.documentElement}function _se(){if(this&&this.Xb){var a=this.Xb;a&&a.tagName=="SCRIPT"&&l0(a,!0,this.Ma)}}function l0(a,l,d){d!=null&&c.clearTimeout(d),a.onload=m,a.onerror=m,a.onreadystatechange=m,l&&window.setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a)},0)}var wse=0,Ese=1;function wx(a,l){var d="Jsloader error (code #"+a+")";l&&(d+=": "+l),Ce.call(this,d),this.code=a}ge(wx,Ce);function h0(a){this.f=a}ge(h0,Zg),h0.prototype.a=function(){return new this.f},h0.prototype.b=function(){return{}};function Io(a,l,d){if(this.c=a,a=l||{},this.l=a.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=a.secureTokenTimeout||Ise,this.g=Za(a.secureTokenHeaders||bse),this.h=a.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=a.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=a.firebaseTimeout||Tse,this.a=Za(a.firebaseHeaders||Cse),d&&(this.a["X-Client-Version"]=d,this.g["X-Client-Version"]=d),d=rs()=="Node",d=c.XMLHttpRequest||d&&je.INTERNAL.node&&je.INTERNAL.node.XMLHttpRequest,!d&&!wo())throw new D("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,wo()?this.f=new r0(self):Yq()?this.f=new h0(d):this.f=new t0,this.b=null}var Ex,bo="idToken",Ise=new ru(3e4,6e4),bse={"Content-Type":"application/x-www-form-urlencoded"},Tse=new ru(3e4,6e4),Cse={"Content-Type":"application/json"};function Y4(a,l){l?a.a["X-Firebase-Locale"]=l:delete a.a["X-Firebase-Locale"]}function d0(a,l){l&&(a.l=Ix("https://securetoken.googleapis.com/v1/token",l),a.h=Ix("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",l),a.i=Ix("https://identitytoolkit.googleapis.com/v2/",l))}function Ix(a,l){return a=si(a),l=si(l.url),a.f=a.a+a.f,Ug(a,l.c),a.a=l.a,jg(a,l.g),a.toString()}function X4(a,l){l?(a.a["X-Client-Version"]=l,a.g["X-Client-Version"]=l):(delete a.a["X-Client-Version"],delete a.g["X-Client-Version"])}Io.prototype.T=function(){return this.b};function J4(a,l,d,g,y,w,I){Aoe()||wo()?a=N(a.u,a):(Ex||(Ex=new nt(function(C,L){Dse(C,L)})),a=N(a.s,a)),a(l,d,g,y,w,I)}Io.prototype.u=function(a,l,d,g,y,w){if(wo()&&(typeof c.fetch>"u"||typeof c.Headers>"u"||typeof c.Request>"u"))throw new D("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var I=new rm(this.f);if(w){I.g=Math.max(0,w);var C=setTimeout(function(){I.dispatchEvent("timeout")},w)}Oq(I,"complete",function(){C&&clearTimeout(C);var L=null;try{L=JSON.parse(mse(this))||null}catch{L=null}l&&l(L)}),xA(I,"ready",function(){C&&clearTimeout(C),Dq(this)}),xA(I,"timeout",function(){C&&clearTimeout(C),Dq(this),l&&l(null)}),fse(I,a,d,g,y)};var Sse=new ts(Nw,"https://apis.google.com/js/client.js?onload=%{onload}"),Z4="__fcb"+Math.floor(1e6*Math.random()).toString();function Dse(a,l){if(((window.gapi||{}).client||{}).request)a();else{c[Z4]=function(){((window.gapi||{}).client||{}).request?a():l(Error("CORS_UNSUPPORTED"))};var d=lA(Sse,{onload:Z4});yse(_x(d),function(){l(Error("CORS_UNSUPPORTED"))})}}Io.prototype.s=function(a,l,d,g,y){var w=this;Ex.then(function(){window.gapi.client.setApiKey(w.c);var I=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:a,method:d,body:g,headers:y,authType:"none",callback:function(C){window.gapi.auth.setToken(I),l&&l(C)}})}).o(function(I){l&&l({error:{message:I&&I.message||"CORS_UNSUPPORTED"}})})};function Ase(a,l){return new nt(function(d,g){l.grant_type=="refresh_token"&&l.refresh_token||l.grant_type=="authorization_code"&&l.code?J4(a,a.l+"?key="+encodeURIComponent(a.c),function(y){y?y.error?g(Nx(y)):y.access_token&&y.refresh_token?d(y):g(new D("internal-error")):g(new D("network-request-failed"))},"POST",jq(l).toString(),a.g,a.m.get()):g(new D("internal-error"))})}function e3(a,l,d,g,y,w,I){var C=si(l+d);gn(C,"key",a.c),I&&gn(C,"cb",Date.now().toString());var L=g=="GET";if(L)for(var B in y)y.hasOwnProperty(B)&&gn(C,B,y[B]);return new nt(function(Re,bt){J4(a,C.toString(),function(pt){pt?pt.error?bt(Nx(pt,w||{})):Re(pt):bt(new D("network-request-failed"))},g,L?void 0:Hq(Zq(y)),a.a,a.v.get())})}function Qc(a){if(a=a.email,typeof a!="string"||!Roe.test(a))throw new D("invalid-email")}function t3(a){"email"in a&&Qc(a)}function xse(a,l){return it(a,Use,{identifier:l,continueUri:$w()?Hg():"http://localhost"}).then(function(d){return d.signinMethods||[]})}function Nse(a){return it(a,Xse,{}).then(function(l){return l.authorizedDomains||[]})}function ai(a){if(!a[bo])throw a.mfaPendingCredential?new D("multi-factor-auth-required",null,Za(a)):new D("internal-error")}function bx(a){if(a.phoneNumber||a.temporaryProof){if(!a.phoneNumber||!a.temporaryProof)throw new D("internal-error")}else{if(!a.sessionInfo)throw new D("missing-verification-id");if(!a.code)throw new D("missing-verification-code")}}Io.prototype.Ab=function(){return it(this,tae,{})},Io.prototype.Cb=function(a,l){return it(this,i3,{idToken:a,email:l})},Io.prototype.Db=function(a,l){return it(this,o3,{idToken:a,password:l})};var Rse={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};t=Io.prototype,t.Eb=function(a,l){var d={idToken:a},g=[];return $B(Rse,function(y,w){var I=l[w];I===null?g.push(y):w in l&&(d[w]=I)}),g.length&&(d.deleteAttribute=g),it(this,i3,d)},t.wb=function(a,l){return a={requestType:"PASSWORD_RESET",email:a},ri(a,l),it(this,Yse,a)},t.xb=function(a,l){return a={requestType:"EMAIL_SIGNIN",email:a},ri(a,l),it(this,Wse,a)},t.vb=function(a,l){return a={requestType:"VERIFY_EMAIL",idToken:a},ri(a,l),it(this,Kse,a)},t.Fb=function(a,l,d){return a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:l},ri(a,d),it(this,Qse,a)};function Mse(a,l){return it(a,eae,l)}t.gb=function(a){return it(this,uae,a)};function Pse(a,l){return it(a,nae,l).then(function(d){return d.phoneSessionInfo.sessionInfo})}function n3(a){if(!a.phoneVerificationInfo)throw new D("internal-error");if(!a.phoneVerificationInfo.sessionInfo)throw new D("missing-verification-id");if(!a.phoneVerificationInfo.code)throw new D("missing-verification-code")}function kse(a,l){return it(a,rae,l).then(function(d){return d.phoneResponseInfo.sessionInfo})}function Ose(a,l,d){return it(a,Bse,{idToken:l,deleteProvider:d})}function Tx(a){if(!a.requestUri||!a.sessionId&&!a.postBody&&!a.pendingToken)throw new D("internal-error")}function Cx(a,l){return l.oauthIdToken&&l.providerId&&l.providerId.indexOf("oidc.")==0&&!l.pendingToken&&(a.sessionId?l.nonce=a.sessionId:a.postBody&&(a=new Uc(a.postBody),PA(a,"nonce")&&(l.nonce=a.get("nonce")))),l}function r3(a){var l=null;if(a.needConfirmation?(a.code="account-exists-with-different-credential",l=Zw(a)):a.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(a.code="credential-already-in-use",l=Zw(a)):a.errorMessage=="EMAIL_EXISTS"?(a.code="email-already-in-use",l=Zw(a)):a.errorMessage&&(l=a3(a.errorMessage)),l)throw l;ai(a)}function Sx(a,l){return l.returnIdpCredential=!0,it(a,iae,l)}function Dx(a,l){return l.returnIdpCredential=!0,it(a,sae,l)}function Ax(a,l){return l.returnIdpCredential=!0,l.autoCreate=!1,it(a,oae,l)}function xx(a){if(!a.oobCode)throw new D("invalid-action-code")}t.ob=function(a,l){return it(this,Zse,{oobCode:a,newPassword:l})},t.Sa=function(a){return it(this,Lse,{oobCode:a})},t.kb=function(a){return it(this,Fse,{oobCode:a})};var Fse={endpoint:"setAccountInfo",A:xx,Z:"email",B:!0},Lse={endpoint:"resetPassword",A:xx,G:function(a){var l=a.requestType;if(!l||!a.email&&l!="EMAIL_SIGNIN"&&l!="VERIFY_AND_CHANGE_EMAIL")throw new D("internal-error")},B:!0},Vse={endpoint:"signupNewUser",A:function(a){if(Qc(a),!a.password)throw new D("weak-password")},G:ai,V:!0,B:!0},Use={endpoint:"createAuthUri",B:!0},jse={endpoint:"deleteAccount",O:["idToken"]},Bse={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(a){if(!Array.isArray(a.deleteProvider))throw new D("internal-error")}},qse={endpoint:"emailLinkSignin",O:["email","oobCode"],A:Qc,G:ai,V:!0,B:!0},Hse={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:Qc,G:ai,V:!0},$se={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:n3,G:ai,B:!0,Na:!0},zse={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:n3,G:ai,B:!0,Na:!0},Gse={endpoint:"getAccountInfo"},Wse={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(a){if(a.requestType!="EMAIL_SIGNIN")throw new D("internal-error");Qc(a)},Z:"email",B:!0},Kse={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(a){if(a.requestType!="VERIFY_EMAIL")throw new D("internal-error")},Z:"email",B:!0},Qse={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(a){if(a.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new D("internal-error")},Z:"email",B:!0},Yse={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(a){if(a.requestType!="PASSWORD_RESET")throw new D("internal-error");Qc(a)},Z:"email",B:!0},Xse={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Jse={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(a){if(!a.recaptchaSiteKey)throw new D("internal-error")}},Zse={endpoint:"resetPassword",A:xx,Z:"email",B:!0},eae={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},i3={endpoint:"setAccountInfo",O:["idToken"],A:t3,V:!0},o3={endpoint:"setAccountInfo",O:["idToken"],A:function(a){if(t3(a),!a.password)throw new D("weak-password")},G:ai,V:!0},tae={endpoint:"signupNewUser",G:ai,V:!0,B:!0},nae={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(a){if(!a.phoneEnrollmentInfo)throw new D("internal-error");if(!a.phoneEnrollmentInfo.phoneNumber)throw new D("missing-phone-number");if(!a.phoneEnrollmentInfo.recaptchaToken)throw new D("missing-app-credential")},G:function(a){if(!a.phoneSessionInfo||!a.phoneSessionInfo.sessionInfo)throw new D("internal-error")},B:!0,Na:!0},rae={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(a){if(!a.phoneSignInInfo||!a.phoneSignInInfo.recaptchaToken)throw new D("missing-app-credential")},G:function(a){if(!a.phoneResponseInfo||!a.phoneResponseInfo.sessionInfo)throw new D("internal-error")},B:!0,Na:!0},iae={endpoint:"verifyAssertion",A:Tx,Za:Cx,G:r3,V:!0,B:!0},oae={endpoint:"verifyAssertion",A:Tx,Za:Cx,G:function(a){if(a.errorMessage&&a.errorMessage=="USER_NOT_FOUND")throw new D("user-not-found");if(a.errorMessage)throw a3(a.errorMessage);ai(a)},V:!0,B:!0},sae={endpoint:"verifyAssertion",A:function(a){if(Tx(a),!a.idToken)throw new D("internal-error")},Za:Cx,G:r3,V:!0},aae={endpoint:"verifyCustomToken",A:function(a){if(!a.token)throw new D("invalid-custom-token")},G:ai,V:!0,B:!0},s3={endpoint:"verifyPassword",A:function(a){if(Qc(a),!a.password)throw new D("wrong-password")},G:ai,V:!0,B:!0},uae={endpoint:"verifyPhoneNumber",A:bx,G:ai,B:!0},cae={endpoint:"verifyPhoneNumber",A:function(a){if(!a.idToken)throw new D("internal-error");bx(a)},G:function(a){if(a.temporaryProof)throw a.code="credential-already-in-use",Zw(a);ai(a)}},lae={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:bx,G:ai,B:!0},hae={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(a){if(!!a[bo]^!!a.refreshToken)throw new D("internal-error")},B:!0,Na:!0};function it(a,l,d){if(!Voe(d,l.O))return Wt(new D("internal-error"));var g=!!l.Na,y=l.Vb||"POST",w;return Te(d).then(l.A).then(function(){return l.V&&(d.returnSecureToken=!0),l.B&&a.b&&typeof d.tenantId>"u"&&(d.tenantId=a.b),g?e3(a,a.i,l.endpoint,y,d,l.Ib,l.mb||!1):e3(a,a.h,l.endpoint,y,d,l.Ib,l.mb||!1)}).then(function(I){return w=I,l.Za?l.Za(d,w):w}).then(l.G).then(function(){if(!l.Z)return w;if(!(l.Z in w))throw new D("internal-error");return w[l.Z]})}function a3(a){return Nx({error:{errors:[{message:a}],code:400,message:a}})}function Nx(a,l){var d=(a.error&&a.error.errors&&a.error.errors[0]||{}).reason||"",g={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(d=g[d]?new D(g[d]):null)return d;d=a.error&&a.error.message||"",g={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},ri(g,l||{}),l=(l=d.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<l.length?l[1]:void 0;for(var y in g)if(d.indexOf(y)===0)return new D(g[y],l);return!l&&a&&(l=zg(a)),new D("internal-error",l)}function dae(a){this.b=a,this.a=null,this.sb=fae(this)}function fae(a){return _ae().then(function(){return new nt(function(l,d){Kt("gapi.iframes.getContext")().open({where:document.body,url:a.b,messageHandlersFilter:Kt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(g){function y(){clearTimeout(w),l()}a.a=g,a.a.restyle({setHideOnLeave:!1});var w=setTimeout(function(){d(Error("Network Error"))},vae.get());g.ping(y).then(y,function(){d(Error("Network Error"))})})})})}function pae(a,l){return a.sb.then(function(){return new nt(function(d){a.a.send(l.type,l,d,Kt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function gae(a,l){a.sb.then(function(){a.a.register("authEvent",l,Kt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var mae=new ts(Nw,"https://apis.google.com/js/api.js?onload=%{onload}"),yae=new ru(3e4,6e4),vae=new ru(5e3,15e3),f0=null;function _ae(){return f0||(f0=new nt(function(a,l){function d(){t4(),Kt("gapi.load")("gapi.iframes",{callback:a,ontimeout:function(){t4(),l(Error("Network Error"))},timeout:yae.get()})}if(Kt("gapi.iframes.Iframe"))a();else if(Kt("gapi.load"))d();else{var g="__iframefcb"+Math.floor(1e6*Math.random()).toString();c[g]=function(){Kt("gapi.load")?d():l(Error("Network Error"))},g=lA(mae,{onload:g}),Te(_x(g)).o(function(){l(Error("Network Error"))})}}).o(function(a){throw f0=null,a}))}function u3(a,l,d,g){this.l=a,this.h=l,this.i=d,this.g=g,this.f=null,this.g?(a=si(this.g.url),a=qw(a.c,a.a,a.g,"/emulator/auth/iframe")):a=qw("https",this.l,null,"/__/auth/iframe"),this.a=a,gn(this.a,"apiKey",this.h),gn(this.a,"appName",this.i),this.b=null,this.c=[]}u3.prototype.toString=function(){return this.f?gn(this.a,"v",this.f):ns(this.a.b,"v"),this.b?gn(this.a,"eid",this.b):ns(this.a.b,"eid"),this.c.length?gn(this.a,"fw",this.c.join(",")):ns(this.a.b,"fw"),this.a.toString()};function Rx(a,l,d,g,y,w){this.u=a,this.s=l,this.c=d,this.m=g,this.v=w,this.i=this.g=this.l=null,this.a=y,this.h=this.f=null}Rx.prototype.zb=function(a){return this.h=a,this},Rx.prototype.toString=function(){if(this.v){var a=si(this.v.url);a=qw(a.c,a.a,a.g,"/emulator/auth/handler")}else a=qw("https",this.u,null,"/__/auth/handler");if(gn(a,"apiKey",this.s),gn(a,"appName",this.c),gn(a,"authType",this.m),this.a.isOAuthProvider){var l=this.a;try{var d=je.app(this.c).auth().la()}catch{d=null}l.pb=d,gn(a,"providerId",this.a.providerId),d=this.a,l=Zq(d.Jb);for(var g in l)l[g]=l[g].toString();g=d.Qc,l=Za(l);for(var y=0;y<g.length;y++){var w=g[y];w in l&&delete l[w]}d.qb&&d.pb&&!l[d.qb]&&(l[d.qb]=d.pb),kc(l)||gn(a,"customParameters",zg(l))}if(typeof this.a.Rb=="function"&&(d=this.a.Rb(),d.length&&gn(a,"scopes",d.join(","))),this.l?gn(a,"redirectUrl",this.l):ns(a.b,"redirectUrl"),this.g?gn(a,"eventId",this.g):ns(a.b,"eventId"),this.i?gn(a,"v",this.i):ns(a.b,"v"),this.b)for(var I in this.b)this.b.hasOwnProperty(I)&&!Qi(a,I)&&gn(a,I,this.b[I]);return this.h?gn(a,"tid",this.h):ns(a.b,"tid"),this.f?gn(a,"eid",this.f):ns(a.b,"eid"),I=Mx(this.c),I.length&&gn(a,"fw",I.join(",")),a.toString()};function Mx(a){try{return je.app(a).auth().Ga()}catch{return[]}}function c3(a,l,d,g,y,w){this.s=a,this.g=l,this.b=d,this.f=w,this.c=g||null,this.i=y||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function l3(a){var l=Hg();return Nse(a).then(function(d){e:{var g=si(l),y=g.c;g=g.a;for(var w=0;w<d.length;w++){var I=d[w],C=g,L=y;if(I.indexOf("chrome-extension://")==0?C=si(I).a==C&&L=="chrome-extension":L!="http"&&L!="https"?C=!1:Noe.test(I)?C=C==I:(I=I.split(".").join("\\."),C=new RegExp("^(.+\\."+I+"|"+I+")$","i").test(C)),C){d=!0;break e}}d=!1}if(!d)throw new cx(Hg())})}function h3(a){return a.m||(a.m=Hw().then(function(){if(!a.u){var l=a.c,d=a.i,g=Mx(a.b),y=new u3(a.s,a.g,a.b,a.f);y.f=l,y.b=d,y.c=Pc(g||[]),a.u=y.toString()}a.v=new dae(a.u),wae(a)})),a.m}t=c3.prototype,t.Pb=function(a,l,d){var g=new D("popup-closed-by-user"),y=new D("web-storage-unsupported"),w=this,I=!1;return this.ma().then(function(){Eae(w).then(function(C){C||(a&&jc(a),l(y),I=!0)})}).o(function(){}).then(function(){if(!I)return xoe(a)}).then(function(){if(!I)return id(d).then(function(){l(g)})})},t.Yb=function(){var a=ur();return!$g(a)&&!e4(a)},t.Ub=function(){return!1},t.Nb=function(a,l,d,g,y,w,I,C){if(!a)return Wt(new D("popup-blocked"));if(I&&!$g())return this.ma().o(function(B){jc(a),y(B)}),g(),Te();this.a||(this.a=l3(d3(this)));var L=this;return this.a.then(function(){var B=L.ma().o(function(Re){throw jc(a),y(Re),Re});return g(),B}).then(function(){if(ax(d),!I){var B=am(L.s,L.g,L.b,l,d,null,w,L.c,void 0,L.i,C,L.f);Gq(B,a)}}).o(function(B){throw B.code=="auth/network-request-failed"&&(L.a=null),B})};function d3(a){return a.l||(a.C=a.c?ud(a.c,Mx(a.b)):null,a.l=new Io(a.g,se(a.i),a.C),a.f&&d0(a.l,a.f)),a.l}t.Ob=function(a,l,d,g){this.a||(this.a=l3(d3(this)));var y=this;return this.a.then(function(){ax(l);var w=am(y.s,y.g,y.b,a,l,Hg(),d,y.c,void 0,y.i,g,y.f);Gq(w)}).o(function(w){throw w.code=="auth/network-request-failed"&&(y.a=null),w})},t.ma=function(){var a=this;return h3(this).then(function(){return a.v.sb}).o(function(){throw a.a=null,new D("network-request-failed")})},t.ac=function(){return!0};function am(a,l,d,g,y,w,I,C,L,B,Re,bt){return a=new Rx(a,l,d,g,y,bt),a.l=w,a.g=I,a.i=C,a.b=Za(L||null),a.f=B,a.zb(Re).toString()}function wae(a){if(!a.v)throw Error("IfcHandler must be initialized!");gae(a.v,function(l){var d={};if(l&&l.authEvent){var g=!1;for(l=O4(l.authEvent),d=0;d<a.h.length;d++)g=a.h[d](l)||g;return d={},d.status=g?"ACK":"ERROR",Te(d)}return d.status="ERROR",Te(d)})}function Eae(a){var l={type:"webStorageSupport"};return h3(a).then(function(){return pae(a.v,l)}).then(function(d){if(d&&d.length&&typeof d[0].webStorageSupport<"u")return d[0].webStorageSupport;throw Error()})}t.Ea=function(a){this.h.push(a)},t.Ta=function(a){vo(this.h,function(l){return l==a})};function f3(a){if(this.a=a||je.INTERNAL.reactNative&&je.INTERNAL.reactNative.AsyncStorage,!this.a)throw new D("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}t=f3.prototype,t.get=function(a){return Te(this.a.getItem(a)).then(function(l){return l&&ld(l)})},t.set=function(a,l){return Te(this.a.setItem(a,zg(l)))},t.U=function(a){return Te(this.a.removeItem(a))},t.ca=function(){},t.ia=function(){};function p3(a){this.b=a,this.a={},this.f=N(this.c,this)}var g3=[];function Iae(){var a=wo()?self:null;if(rt(g3,function(d){d.b==a&&(l=d)}),!l){var l=new p3(a);g3.push(l)}return l}p3.prototype.c=function(a){var l=a.data.eventType,d=a.data.eventId,g=this.a[l];if(g&&0<g.length){a.ports[0].postMessage({status:"ack",eventId:d,eventType:l,response:null});var y=[];rt(g,function(w){y.push(Te().then(function(){return w(a.origin,a.data.data)}))}),yq(y).then(function(w){var I=[];rt(w,function(C){I.push({fulfilled:C.Qb,value:C.value,reason:C.reason?C.reason.message:void 0})}),rt(I,function(C){for(var L in C)typeof C[L]>"u"&&delete C[L]}),a.ports[0].postMessage({status:"done",eventId:d,eventType:l,response:I})})}};function m3(a,l,d){kc(a.a)&&a.b.addEventListener("message",a.f),typeof a.a[l]>"u"&&(a.a[l]=[]),a.a[l].push(d)}function y3(a){this.a=a}y3.prototype.postMessage=function(a,l){this.a.postMessage(a,l)};function v3(a){this.c=a,this.b=!1,this.a=[]}function _3(a,l,d,g){var y,w=d||{},I,C,L,B=null;if(a.b)return Wt(Error("connection_unavailable"));var Re=g?800:50,bt=typeof MessageChannel<"u"?new MessageChannel:null;return new nt(function(pt,Yn){bt?(y=Math.floor(Math.random()*Math.pow(10,20)).toString(),bt.port1.start(),C=setTimeout(function(){Yn(Error("unsupported_event"))},Re),I=function(la){la.data.eventId===y&&(la.data.status==="ack"?(clearTimeout(C),L=setTimeout(function(){Yn(Error("timeout"))},3e3)):la.data.status==="done"?(clearTimeout(L),typeof la.data.response<"u"?pt(la.data.response):Yn(Error("unknown_error"))):(clearTimeout(C),clearTimeout(L),Yn(Error("invalid_response"))))},B={messageChannel:bt,onMessage:I},a.a.push(B),bt.port1.addEventListener("message",I),a.c.postMessage({eventType:l,eventId:y,data:w},[bt.port2])):Yn(Error("connection_unavailable"))}).then(function(pt){return Px(a,B),pt}).o(function(pt){throw Px(a,B),pt})}function Px(a,l){if(l){var d=l.messageChannel,g=l.onMessage;d&&(d.port1.removeEventListener("message",g),d.port1.close()),vo(a.a,function(y){return y==l})}}v3.prototype.close=function(){for(;0<this.a.length;)Px(this,this.a[0]);this.b=!0};function w3(){if(!Fx())throw new D("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=c.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var a=this;wo()&&self?(this.v=Iae(),m3(this.v,"keyChanged",function(l,d){return b3(a).then(function(g){return 0<g.length&&rt(a.a,function(y){y(g)}),{keyProcessed:oa(g,d.key)}})}),m3(this.v,"ping",function(){return Te(["keyChanged"])})):Foe().then(function(l){(a.h=l)&&(a.g=new v3(new y3(l)),_3(a.g,"ping",null,!0).then(function(d){d[0].fulfilled&&oa(d[0].value,"keyChanged")&&(a.s=!0)}).o(function(){}))})}var kx;function bae(a){return new nt(function(l,d){var g=a.m.deleteDatabase("firebaseLocalStorageDb");g.onsuccess=function(){l()},g.onerror=function(y){d(Error(y.target.error))}})}function E3(a){return new nt(function(l,d){var g=a.m.open("firebaseLocalStorageDb",1);g.onerror=function(y){try{y.preventDefault()}catch{}d(Error(y.target.error))},g.onupgradeneeded=function(y){y=y.target.result;try{y.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(w){d(w)}},g.onsuccess=function(y){y=y.target.result,y.objectStoreNames.contains("firebaseLocalStorage")?l(y):bae(a).then(function(){return E3(a)}).then(function(w){l(w)}).o(function(w){d(w)})}})}function Ox(a){return a.i||(a.i=E3(a)),a.i}function p0(a,l){function d(y,w){Ox(a).then(l).then(y).o(function(I){if(3<++g)w(I);else return Ox(a).then(function(C){return C.close(),a.i=void 0,d(y,w)}).o(function(C){w(C)})})}var g=0;return new nt(d)}function Fx(){try{return!!c.indexedDB}catch{return!1}}function um(a){return a.objectStore("firebaseLocalStorage")}function cm(a,l){return a.transaction(["firebaseLocalStorage"],l?"readwrite":"readonly")}function pd(a){return new nt(function(l,d){a.onsuccess=function(g){g&&g.target?l(g.target.result):l()},a.onerror=function(g){d(g.target.error)}})}t=w3.prototype,t.set=function(a,l){var d=this,g=!1;return p0(this,function(y){return y=um(cm(y,!0)),pd(y.get(a))}).then(function(y){return p0(d,function(w){if(w=um(cm(w,!0)),y)return y.value=l,pd(w.put(y));d.b++,g=!0;var I={};return I.fbase_key=a,I.value=l,pd(w.add(I))})}).then(function(){return d.c[a]=l,I3(d,a)}).oa(function(){g&&d.b--})};function I3(a,l){return a.g&&a.h&&Ooe()===a.h?_3(a.g,"keyChanged",{key:l},a.s).then(function(){}).o(function(){}):Te()}t.get=function(a){return p0(this,function(l){return pd(um(cm(l,!1)).get(a))}).then(function(l){return l&&l.value})},t.U=function(a){var l=this,d=!1;return p0(this,function(g){return d=!0,l.b++,pd(um(cm(g,!0)).delete(a))}).then(function(){return delete l.c[a],I3(l,a)}).oa(function(){d&&l.b--})};function b3(a){return Ox(a).then(function(l){var d=um(cm(l,!1));return d.getAll?pd(d.getAll()):new nt(function(g,y){var w=[],I=d.openCursor();I.onsuccess=function(C){(C=C.target.result)?(w.push(C.value),C.continue()):g(w)},I.onerror=function(C){y(C.target.error)}})}).then(function(l){var d={},g=[];if(a.b==0){for(g=0;g<l.length;g++)d[l[g].fbase_key]=l[g].value;g=Wq(a.c,d),a.c=d}return g})}t.ca=function(a){this.a.length==0&&Tae(this),this.a.push(a)},t.ia=function(a){vo(this.a,function(l){return l==a}),this.a.length==0&&T3(this)};function Tae(a){function l(){a.f=setTimeout(function(){a.l=b3(a).then(function(d){0<d.length&&rt(a.a,function(g){g(d)})}).then(function(){l()}).o(function(d){d.message!="STOP_EVENT"&&l()})},800)}T3(a),l()}function T3(a){a.l&&a.l.cancel("STOP_EVENT"),a.f&&(clearTimeout(a.f),a.f=null)}function C3(a){var l=this,d=null;this.a=[],this.type="indexedDB",this.c=a,this.b=Te().then(function(){if(Fx()){var g=qc(),y="__sak"+g;return kx||(kx=new w3),d=kx,d.set(y,g).then(function(){return d.get(y)}).then(function(w){if(w!==g)throw Error("indexedDB not supported!");return d.U(y)}).then(function(){return d}).o(function(){return l.c})}return l.c}).then(function(g){return l.type=g.type,g.ca(function(y){rt(l.a,function(w){w(y)})}),g})}t=C3.prototype,t.get=function(a){return this.b.then(function(l){return l.get(a)})},t.set=function(a,l){return this.b.then(function(d){return d.set(a,l)})},t.U=function(a){return this.b.then(function(l){return l.U(a)})},t.ca=function(a){this.a.push(a)},t.ia=function(a){vo(this.a,function(l){return l==a})};function lm(){this.a={},this.type="inMemory"}t=lm.prototype,t.get=function(a){return Te(this.a[a])},t.set=function(a,l){return this.a[a]=l,Te()},t.U=function(a){return delete this.a[a],Te()},t.ca=function(){},t.ia=function(){};function g0(){if(!Cae())throw rs()=="Node"?new D("internal-error","The LocalStorage compatibility library was not found."):new D("web-storage-unsupported");this.a=S3()||je.INTERNAL.node.localStorage,this.type="localStorage"}function S3(){try{var a=c.localStorage,l=qc();return a&&(a.setItem(l,"1"),a.removeItem(l)),a}catch{return null}}function Cae(){var a=rs()=="Node";if(a=S3()||a&&je.INTERNAL.node&&je.INTERNAL.node.localStorage,!a)return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch{return!1}}t=g0.prototype,t.get=function(a){var l=this;return Te().then(function(){var d=l.a.getItem(a);return ld(d)})},t.set=function(a,l){var d=this;return Te().then(function(){var g=zg(l);g===null?d.U(a):d.a.setItem(a,g)})},t.U=function(a){var l=this;return Te().then(function(){l.a.removeItem(a)})},t.ca=function(a){c.window&&Ki(c.window,"storage",a)},t.ia=function(a){c.window&&Ei(c.window,"storage",a)};function Lx(){this.type="nullStorage"}t=Lx.prototype,t.get=function(){return Te(null)},t.set=function(){return Te()},t.U=function(){return Te()},t.ca=function(){},t.ia=function(){};function Vx(){if(!Sae())throw rs()=="Node"?new D("internal-error","The SessionStorage compatibility library was not found."):new D("web-storage-unsupported");this.a=D3()||je.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function D3(){try{var a=c.sessionStorage,l=qc();return a&&(a.setItem(l,"1"),a.removeItem(l)),a}catch{return null}}function Sae(){var a=rs()=="Node";if(a=D3()||a&&je.INTERNAL.node&&je.INTERNAL.node.sessionStorage,!a)return!1;try{return a.setItem("__sak","1"),a.removeItem("__sak"),!0}catch{return!1}}t=Vx.prototype,t.get=function(a){var l=this;return Te().then(function(){var d=l.a.getItem(a);return ld(d)})},t.set=function(a,l){var d=this;return Te().then(function(){var g=zg(l);g===null?d.U(a):d.a.setItem(a,g)})},t.U=function(a){var l=this;return Te().then(function(){l.a.removeItem(a)})},t.ca=function(){},t.ia=function(){};function Dae(){var a={};a.Browser=Aae,a.Node=xae,a.ReactNative=Nae,a.Worker=Rae,this.a=a[rs()]}var Ux,Aae={F:g0,cb:Vx},xae={F:g0,cb:Vx},Nae={F:f3,cb:Lx},Rae={F:g0,cb:Lx},gd={rd:"local",NONE:"none",td:"session"};function Mae(a){var l=new D("invalid-persistence-type"),d=new D("unsupported-persistence-type");e:{for(g in gd)if(gd[g]==a){var g=!0;break e}g=!1}if(!g||typeof a!="string")throw l;switch(rs()){case"ReactNative":if(a==="session")throw d;break;case"Node":if(a!=="none")throw d;break;case"Worker":if(a==="session"||!Fx()&&a!=="none")throw d;break;default:if(!UA()&&a!=="none")throw d}}function A3(){var a=!!(!e4(ur())&&LA()),l=$g(),d=UA();this.m=a,this.h=l,this.l=d,this.a={},Ux||(Ux=new Dae),a=Ux;try{this.g=!OA()&&n4()||!c.indexedDB?new a.a.F:new C3(wo()?new lm:new a.a.F)}catch{this.g=new lm,this.h=!0}try{this.i=new a.a.cb}catch{this.i=new lm}this.v=new lm,this.f=N(this.Zb,this),this.b={}}var jx;function hm(){return jx||(jx=new A3),jx}function Yc(a,l){switch(l){case"session":return a.i;case"none":return a.v;default:return a.g}}function md(a,l){return"firebase:"+a.name+(l?":"+l:"")}function Pae(a,l,d){var g=md(l,d),y=Yc(a,l.F);return a.get(l,d).then(function(w){var I=null;try{I=ld(c.localStorage.getItem(g))}catch{}if(I&&!w)return c.localStorage.removeItem(g),a.set(l,I,d);I&&w&&y.type!="localStorage"&&c.localStorage.removeItem(g)})}t=A3.prototype,t.get=function(a,l){return Yc(this,a.F).get(md(a,l))};function yd(a,l,d){return d=md(l,d),l.F=="local"&&(a.b[d]=null),Yc(a,l.F).U(d)}t.set=function(a,l,d){var g=md(a,d),y=this,w=Yc(this,a.F);return w.set(g,l).then(function(){return w.get(g)}).then(function(I){a.F=="local"&&(y.b[g]=I)})},t.addListener=function(a,l,d){a=md(a,l),this.l&&(this.b[a]=c.localStorage.getItem(a)),kc(this.a)&&(Yc(this,"local").ca(this.f),this.h||(OA()||!n4())&&c.indexedDB||!this.l||kae(this)),this.a[a]||(this.a[a]=[]),this.a[a].push(d)},t.removeListener=function(a,l,d){a=md(a,l),this.a[a]&&(vo(this.a[a],function(g){return g==d}),this.a[a].length==0&&delete this.a[a]),kc(this.a)&&(Yc(this,"local").ia(this.f),Bx(this))};function kae(a){Bx(a),a.c=setInterval(function(){for(var l in a.a){var d=c.localStorage.getItem(l),g=a.b[l];d!=g&&(a.b[l]=d,d=new Lc({type:"storage",key:l,target:window,oldValue:g,newValue:d,a:!0}),a.Zb(d))}},1e3)}function Bx(a){a.c&&(clearInterval(a.c),a.c=null)}t.Zb=function(a){if(a&&a.g){var l=a.a.key;if(l==null)for(var d in this.a){var g=this.b[d];typeof g>"u"&&(g=null);var y=c.localStorage.getItem(d);y!==g&&(this.b[d]=y,this.nb(d))}else if(l.indexOf("firebase:")==0&&this.a[l]){if(typeof a.a.a<"u"?Yc(this,"local").ia(this.f):Bx(this),this.m){if(d=c.localStorage.getItem(l),g=a.a.newValue,g!==d)g!==null?c.localStorage.setItem(l,g):c.localStorage.removeItem(l);else if(this.b[l]===g&&typeof a.a.a>"u")return}var w=this;d=function(){(typeof a.a.a<"u"||w.b[l]!==c.localStorage.getItem(l))&&(w.b[l]=c.localStorage.getItem(l),w.nb(l))},_o&&eu&&eu==10&&c.localStorage.getItem(l)!==a.a.newValue&&a.a.newValue!==a.a.oldValue?setTimeout(d,10):d()}}else rt(a,N(this.nb,this))},t.nb=function(a){this.a[a]&&rt(this.a[a],function(l){l()})};function Oae(a){this.a=a,this.b=hm()}var qx={name:"authEvent",F:"local"};function Fae(a){return a.b.get(qx,a.a).then(function(l){return O4(l)})}function Lae(){this.a=hm()}function Vae(){this.b=-1}function m0(a,l){this.b=x3,this.f=c.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=a,this.h=l,this.l=c.Int32Array?new Int32Array(64):Array(64),y0===void 0&&(c.Int32Array?y0=new Int32Array(M3):y0=M3),this.reset()}var y0;ge(m0,Vae);for(var x3=64,Uae=x3-1,N3=[],Hx=0;Hx<Uae;Hx++)N3[Hx]=0;var R3=aA(128,N3);m0.prototype.reset=function(){this.g=this.c=0,this.a=c.Int32Array?new Int32Array(this.h):Pc(this.h)};function $x(a){for(var l=a.f,d=a.l,g=0,y=0;y<l.length;)d[g++]=l[y]<<24|l[y+1]<<16|l[y+2]<<8|l[y+3],y=4*g;for(l=16;64>l;l++){y=d[l-15]|0,g=d[l-2]|0;var w=(d[l-16]|0)+((y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3)|0,I=(d[l-7]|0)+((g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10)|0;d[l]=w+I|0}g=a.a[0]|0,y=a.a[1]|0;var C=a.a[2]|0,L=a.a[3]|0,B=a.a[4]|0,Re=a.a[5]|0,bt=a.a[6]|0;for(w=a.a[7]|0,l=0;64>l;l++){var pt=((g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10))+(g&y^g&C^y&C)|0;I=B&Re^~B&bt,w=w+((B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7))|0,I=I+(y0[l]|0)|0,I=w+(I+(d[l]|0)|0)|0,w=bt,bt=Re,Re=B,B=L+I|0,L=C,C=y,y=g,g=I+pt|0}a.a[0]=a.a[0]+g|0,a.a[1]=a.a[1]+y|0,a.a[2]=a.a[2]+C|0,a.a[3]=a.a[3]+L|0,a.a[4]=a.a[4]+B|0,a.a[5]=a.a[5]+Re|0,a.a[6]=a.a[6]+bt|0,a.a[7]=a.a[7]+w|0}function zx(a,l,d){d===void 0&&(d=l.length);var g=0,y=a.c;if(typeof l=="string")for(;g<d;)a.f[y++]=l.charCodeAt(g++),y==a.b&&($x(a),y=0);else if(_(l))for(;g<d;){var w=l[g++];if(!(typeof w=="number"&&0<=w&&255>=w&&w==(w|0)))throw Error("message must be a byte array");a.f[y++]=w,y==a.b&&($x(a),y=0)}else throw Error("message must be string or array");a.c=y,a.g+=d}var M3=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function P3(){m0.call(this,8,jae)}ge(P3,m0);var jae=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function k3(a,l,d,g,y,w){this.v=a,this.i=l,this.l=d,this.m=g||null,this.u=y||null,this.s=w,this.h=l+":"+d,this.C=new Lae,this.g=new Oae(this.h),this.f=null,this.b=[],this.a=this.c=null}function v0(a){return new D("invalid-cordova-configuration",a)}t=k3.prototype,t.ma=function(){return this.Ia?this.Ia:this.Ia=Moe().then(function(){if(typeof Kt("universalLinks.subscribe",c)!="function")throw v0("cordova-universal-links-plugin-fix is not installed");if(typeof Kt("BuildInfo.packageName",c)>"u")throw v0("cordova-plugin-buildinfo is not installed");if(typeof Kt("cordova.plugins.browsertab.openUrl",c)!="function")throw v0("cordova-plugin-browsertab is not installed");if(typeof Kt("cordova.InAppBrowser.open",c)!="function")throw v0("cordova-plugin-inappbrowser is not installed")},function(){throw new D("cordova-not-ready")})};function Bae(){for(var a=20,l=[];0<a;)l.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),a--;return l.join("")}function qae(a){var l=new P3;zx(l,a),a=[];var d=8*l.g;56>l.c?zx(l,R3,56-l.c):zx(l,R3,l.b-(l.c-56));for(var g=63;56<=g;g--)l.f[g]=d&255,d/=256;for($x(l),g=d=0;g<l.i;g++)for(var y=24;0<=y;y-=8)a[d++]=l.a[g]>>y&255;return Joe(a)}t.Pb=function(a,l){return l(new D("operation-not-supported-in-this-environment")),Te()},t.Nb=function(){return Wt(new D("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(a,l,d,g){if(this.c)return Wt(new D("redirect-operation-pending"));var y=this,w=c.document,I=null,C=null,L=null,B=null;return this.c=Te().then(function(){return ax(l),F3(y)}).then(function(){return Hae(y,a,l,d,g)}).then(function(){return new nt(function(Re,bt){C=function(){var pt=Kt("cordova.plugins.browsertab.close",c);return Re(),typeof pt=="function"&&pt(),y.a&&typeof y.a.close=="function"&&(y.a.close(),y.a=null),!1},y.Ea(C),L=function(){I||(I=id(2e3).then(function(){bt(new D("redirect-cancelled-by-user"))}))},B=function(){jA()&&L()},w.addEventListener("resume",L,!1),ur().toLowerCase().match(/android/)||w.addEventListener("visibilitychange",B,!1)}).o(function(Re){return Gx(y).then(function(){throw Re})})}).oa(function(){L&&w.removeEventListener("resume",L,!1),B&&w.removeEventListener("visibilitychange",B,!1),I&&I.cancel(),C&&y.Ta(C),y.c=null})};function Hae(a,l,d,g,y){var w=Bae(),I=new Eo(l,g,null,w,new D("no-auth-event"),null,y),C=Kt("BuildInfo.packageName",c);if(typeof C!="string")throw new D("invalid-cordova-configuration");var L=Kt("BuildInfo.displayName",c),B={};if(ur().toLowerCase().match(/iphone|ipad|ipod/))B.ibi=C;else if(ur().toLowerCase().match(/android/))B.apn=C;else return Wt(new D("operation-not-supported-in-this-environment"));L&&(B.appDisplayName=L),w=qae(w),B.sessionId=w;var Re=am(a.v,a.i,a.l,l,d,null,g,a.m,B,a.u,y,a.s);return a.ma().then(function(){var bt=a.h;return a.C.a.set(qx,I.w(),bt)}).then(function(){var bt=Kt("cordova.plugins.browsertab.isAvailable",c);if(typeof bt!="function")throw new D("invalid-cordova-configuration");var pt=null;bt(function(Yn){if(Yn){if(pt=Kt("cordova.plugins.browsertab.openUrl",c),typeof pt!="function")throw new D("invalid-cordova-configuration");pt(Re)}else{if(pt=Kt("cordova.InAppBrowser.open",c),typeof pt!="function")throw new D("invalid-cordova-configuration");Yn=ur(),a.a=pt(Re,Yn.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||Yn.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function O3(a,l){for(var d=0;d<a.b.length;d++)try{a.b[d](l)}catch{}}function F3(a){return a.f||(a.f=a.ma().then(function(){return new nt(function(l){function d(g){return l(g),a.Ta(d),!1}a.Ea(d),$ae(a)})})),a.f}function Gx(a){var l=null;return Fae(a.g).then(function(d){return l=d,d=a.g,yd(d.b,qx,d.a)}).then(function(){return l})}function $ae(a){function l(I){g=!0,y&&y.cancel(),Gx(a).then(function(C){var L=d;if(C&&I&&I.url){var B=null;L=D4(I.url),L.indexOf("/__/auth/callback")!=-1&&(B=si(L),B=ld(Qi(B,"firebaseError")||null),B=(B=typeof B=="object"?Xa(B):null)?new Eo(C.c,C.b,null,null,B,null,C.T()):new Eo(C.c,C.b,L,C.f,null,null,C.T())),L=B||d}O3(a,L)})}var d=new Eo("unknown",null,null,null,new D("no-auth-event")),g=!1,y=id(500).then(function(){return Gx(a).then(function(){g||O3(a,d)})}),w=c.handleOpenURL;c.handleOpenURL=function(I){if(I.toLowerCase().indexOf(Kt("BuildInfo.packageName",c).toLowerCase()+"://")==0&&l({url:I}),typeof w=="function")try{w(I)}catch(C){console.error(C)}},ux||(ux=new sse),ase(l)}t.Ea=function(a){this.b.push(a),F3(this).o(function(l){l.code==="auth/invalid-cordova-configuration"&&(l=new Eo("unknown",null,null,null,new D("no-auth-event")),a(l))})},t.Ta=function(a){vo(this.b,function(l){return l==a})};function zae(a){this.a=a,this.b=hm()}var Wx={name:"pendingRedirect",F:"session"};function Gae(a){return a.b.set(Wx,"pending",a.a)}function Kx(a){return yd(a.b,Wx,a.a)}function Wae(a){return a.b.get(Wx,a.a).then(function(l){return l=="pending"})}function _0(a,l,d,g){this.i={},this.u=0,this.D=a,this.v=l,this.m=d,this.J=g,this.h=[],this.f=!1,this.l=N(this.s,this),this.b=new E0,this.C=new G3,this.g=new zae(H3(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=L3(this.D,this.v,this.m,me,this.J)}function L3(a,l,d,g,y){var w=je.SDK_VERSION||null;return FA()?new k3(a,l,d,w,g,y):new c3(a,l,d,w,g,y)}_0.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=L3(this.D,this.v,this.m,null,this.J),this.i={}};function V3(a){a.f||(a.f=!0,a.a.Ea(a.l));var l=a.a;return a.a.ma().o(function(d){throw a.a==l&&a.reset(),d})}function U3(a){a.a.Yb()&&V3(a).o(function(l){var d=new Eo("unknown",null,null,null,new D("operation-not-supported-in-this-environment"));Yx(l)&&a.s(d)}),a.a.Ub()||$3(a.b)}function w0(a,l){oa(a.h,l)||a.h.push(l),a.f||Wae(a.g).then(function(d){d?Kx(a.g).then(function(){V3(a).o(function(g){var y=new Eo("unknown",null,null,null,new D("operation-not-supported-in-this-environment"));Yx(g)&&a.s(y)})}):U3(a)}).o(function(){U3(a)})}function Qx(a,l){vo(a.h,function(d){return d==l})}_0.prototype.s=function(a){if(!a)throw new D("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),a&&a.getUid()&&this.i.hasOwnProperty(a.getUid()))return!1;for(var l=!1,d=0;d<this.h.length;d++){var g=this.h[d];if(g.Gb(a.c,a.b)){(l=this.c[a.c])&&(l.h(a,g),a&&(a.f||a.b)&&(this.i[a.getUid()]=!0,this.u=Date.now())),l=!0;break}}return $3(this.b),l};var Kae=new ru(2e3,1e4),Qae=new ru(3e4,6e4);_0.prototype.ra=function(){return this.b.ra()};function j3(a,l,d,g,y,w,I){return a.a.Nb(l,d,g,function(){a.f||(a.f=!0,a.a.Ea(a.l))},function(){a.reset()},y,w,I)}function Yx(a){return!!(a&&a.code=="auth/cordova-not-ready")}function B3(a,l,d,g,y){var w;return Gae(a.g).then(function(){return a.a.Ob(l,d,g,y).o(function(I){if(Yx(I))throw new D("operation-not-supported-in-this-environment");return w=I,Kx(a.g).then(function(){throw w})}).then(function(){return a.a.ac()?new nt(function(){}):Kx(a.g).then(function(){return a.ra()}).then(function(){}).o(function(){})})})}function q3(a,l,d,g,y){return a.a.Pb(g,function(w){l.na(d,null,w,y)},Kae.get())}var Xx={};function H3(a,l,d){return a=a+":"+l,d&&(a=a+":"+d.url),a}function Jx(a,l,d,g){var y=H3(l,d,g);return Xx[y]||(Xx[y]=new _0(a,l,d,g)),Xx[y]}function E0(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}E0.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},E0.prototype.h=function(a,l){if(a){this.reset(),this.g=!0;var d=a.c,g=a.b,y=a.a&&a.a.code=="auth/web-storage-unsupported",w=a.a&&a.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!y&&!w),d!="unknown"||y||w?a.a?(Xc(this,!0,null,a.a),Te()):l.Fa(d,g)?Yae(this,a,l):Wt(new D("invalid-auth-event")):(Xc(this,!1,null,null),Te())}else Wt(new D("invalid-auth-event"))};function $3(a){a.g||(a.g=!0,Xc(a,!1,null,null))}function I0(a){a.g&&!a.i&&Xc(a,!1,null,null)}function Yae(a,l,d){d=d.Fa(l.c,l.b);var g=l.g,y=l.f,w=l.i,I=l.T(),C=!!l.c.match(/Redirect$/);d(g,y,I,w).then(function(L){Xc(a,C,L,null)}).o(function(L){Xc(a,C,null,L)})}function Xae(a,l){if(a.b=function(){return Wt(l)},a.c.length)for(var d=0;d<a.c.length;d++)a.c[d](l)}function z3(a,l){if(a.b=function(){return Te(l)},a.f.length)for(var d=0;d<a.f.length;d++)a.f[d](l)}function Xc(a,l,d,g){l?g?Xae(a,g):z3(a,d):z3(a,{user:null}),a.f=[],a.c=[]}E0.prototype.ra=function(){var a=this;return new nt(function(l,d){a.b?a.b().then(l,d):(a.f.push(l),a.c.push(d),Jae(a))})};function Jae(a){var l=new D("timeout");a.a&&a.a.cancel(),a.a=id(Qae.get()).then(function(){a.b||(a.g=!0,Xc(a,!0,null,l))})}function G3(){}G3.prototype.h=function(a,l){if(a){var d=a.c,g=a.b;a.a?(l.na(a.c,null,a.a,a.b),Te()):l.Fa(d,g)?Zae(a,l):Wt(new D("invalid-auth-event"))}else Wt(new D("invalid-auth-event"))};function Zae(a,l){var d=a.b,g=a.c;l.Fa(g,d)(a.g,a.f,a.T(),a.i).then(function(y){l.na(g,y,null,d)}).o(function(y){l.na(g,null,y,d)})}function W3(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(a){this.jb=a},enumerable:!1})}function Zx(a,l){this.a=l,de(this,"verificationId",a)}Zx.prototype.confirm=function(a){return a=k4(this.verificationId,a),this.a(a)};function eN(a,l,d,g){return new ua(a).gb(l,d).then(function(y){return new Zx(y,g)})}function eue(a){var l=_4(a);if(!(l&&l.exp&&l.auth_time&&l.iat))throw new D("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");jr(this,{token:a,expirationTime:Gg(1e3*l.exp),authTime:Gg(1e3*l.auth_time),issuedAtTime:Gg(1e3*l.iat),signInProvider:l.firebase&&l.firebase.sign_in_provider?l.firebase.sign_in_provider:null,signInSecondFactor:l.firebase&&l.firebase.sign_in_second_factor?l.firebase.sign_in_second_factor:null,claims:l})}function tN(a,l,d){var g=l&&l[Q3];if(!g)throw new D("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=a,this.f=Za(l),this.g=d,this.c=new Xw(null,g),this.b=[];var y=this;rt(l[K3]||[],function(w){(w=GA(w))&&y.b.push(w)}),de(this,"auth",this.a),de(this,"session",this.c),de(this,"hints",this.b)}var K3="mfaInfo",Q3="mfaPendingCredential";tN.prototype.Rc=function(a){var l=this;return a.tb(this.a.a,this.c).then(function(d){var g=Za(l.f);return delete g[K3],delete g[Q3],ri(g,d),l.g(g)})};function nN(a,l,d,g){D.call(this,"multi-factor-auth-required",g,l),this.b=new tN(a,l,d),de(this,"resolver",this.b)}ge(nN,D);function Y3(a,l,d){if(a&&b(a.serverResponse)&&a.code==="auth/multi-factor-auth-required")try{return new nN(l,a.serverResponse,d,a.message)}catch{}return null}function X3(){}X3.prototype.tb=function(a,l,d){return l.type==Yg?tue(this,a,l,d):nue(this,a,l)};function tue(a,l,d,g){return d.Ha().then(function(y){return y={idToken:y},typeof g<"u"&&(y.displayName=g),ri(y,{phoneVerificationInfo:Xg(a.a)}),it(l,$se,y)})}function nue(a,l,d){return d.Ha().then(function(g){return g={mfaPendingCredential:g},ri(g,{phoneVerificationInfo:Xg(a.a)}),it(l,zse,g)})}function rN(a){de(this,"factorId",a.fa),this.a=a}ge(rN,X3);function J3(a){if(rN.call(this,a),this.a.fa!=ua.PROVIDER_ID)throw new D("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}ge(J3,rN);function vd(a,l){oi.call(this,a);for(var d in l)this[d]=l[d]}ge(vd,oi);function iN(a,l){this.a=a,this.b=[],this.c=N(this.yc,this),Ki(this.a,"userReloaded",this.c);var d=[];l&&l.multiFactor&&l.multiFactor.enrolledFactors&&rt(l.multiFactor.enrolledFactors,function(g){var y=null,w={};if(g){g.uid&&(w[KA]=g.uid),g.displayName&&(w[i4]=g.displayName),g.enrollmentTime&&(w[WA]=new Date(g.enrollmentTime).toISOString()),g.phoneNumber&&(w[QA]=g.phoneNumber);try{y=new Wg(w)}catch{}g=y}else g=null;g&&d.push(g)}),b0(this,d)}function rue(a){var l=[];return rt(a.mfaInfo||[],function(d){(d=GA(d))&&l.push(d)}),l}t=iN.prototype,t.yc=function(a){b0(this,rue(a.hd))};function b0(a,l){a.b=l,de(a,"enrolledFactors",l)}t.Sb=function(){return this.a.I().then(function(a){return new Xw(a,null)})},t.fc=function(a,l){var d=this,g=this.a.a;return this.Sb().then(function(y){return a.tb(g,y,l)}).then(function(y){return ss(d.a,y),d.a.reload()})},t.bd=function(a){var l=this,d=typeof a=="string"?a:a.uid,g=this.a.a;return this.a.I().then(function(y){return it(g,hae,{idToken:y,mfaEnrollmentId:d})}).then(function(y){var w=kg(l.b,function(I){return I.uid!=d});return b0(l,w),ss(l.a,y),l.a.reload().o(function(I){if(I.code!="auth/user-token-expired")throw I})})},t.w=function(){return{multiFactor:{enrolledFactors:Aw(this.b,function(a){return a.w()})}}};function oN(a,l,d){if(this.h=a,this.i=l,this.g=d,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}oN.prototype.start=function(){this.a=this.c,sN(this,!0)};function iue(a,l){return l?(a.a=a.c,a.g()):(l=a.a,a.a*=2,a.a>a.f&&(a.a=a.f),l)}function sN(a,l){a.stop(),a.b=id(iue(a,l)).then(function(){return koe()}).then(function(){return a.h()}).then(function(){sN(a,!0)}).o(function(d){a.i(d)&&sN(a,!1)})}oN.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function aN(a){this.f=a,this.b=this.a=null,this.c=Date.now()}aN.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function Z3(a,l){typeof l>"u"&&(a.b?(l=a.b,l=l.a-l.g):l=0),a.c=Date.now()+1e3*l}function eH(a,l){a.b=Qw(l[bo]||""),a.a=l.refreshToken,l=l.expiresIn,Z3(a,typeof l<"u"?Number(l):void 0)}function oue(a,l){a.b=l.b,a.a=l.a,a.c=l.c}function sue(a,l){return Ase(a.f,l).then(function(d){return a.b=Qw(d.access_token),a.a=d.refresh_token,Z3(a,d.expires_in),{accessToken:a.b.toString(),refreshToken:a.a}}).o(function(d){throw d.code=="auth/user-token-expired"&&(a.a=null),d})}aN.prototype.getToken=function(a){return a=!!a,this.b&&!this.a?Wt(new D("user-token-expired")):a||!this.b||Date.now()>this.c-3e4?this.a?sue(this,{grant_type:"refresh_token",refresh_token:this.a}):Te(null):Te({accessToken:this.b.toString(),refreshToken:this.a})};function T0(a,l){this.a=a||null,this.b=l||null,jr(this,{lastSignInTime:Gg(l||null),creationTime:Gg(a||null)})}function aue(a){return new T0(a.a,a.b)}T0.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function uue(a,l,d,g,y,w){jr(this,{uid:a,displayName:g||null,photoURL:y||null,email:d||null,phoneNumber:w||null,providerId:l})}function bi(a,l,d){this.N=[],this.l=a.apiKey,this.m=a.appName,this.s=a.authDomain||null;var g=je.SDK_VERSION?ud(je.SDK_VERSION):null;this.a=new Io(this.l,se(me),g),(this.u=a.emulatorConfig||null)&&d0(this.a,this.u),this.h=new aN(this.a),pN(this,l[bo]),eH(this.h,l),de(this,"refreshToken",this.h.a),nH(this,d||{}),Ur.call(this),this.P=!1,this.s&&Bc()&&(this.b=Jx(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=cue(this),this.ba=N(this.ib,this);var y=this;this.za=null,this.Pa=function(w){y.xa(w.h)},this.qa=null,this.Ba=function(w){uN(y,w.c)},this.$=null,this.aa=[],this.Oa=function(w){dm(y,w.f)},this.ja=null,this.S=new iN(this,d),de(this,"multiFactor",this.S)}ge(bi,Ur),bi.prototype.xa=function(a){this.za=a,Y4(this.a,a)};function uN(a,l){a.u=l,d0(a.a,l),a.b&&(l=a.b,a.b=Jx(a.s,a.l,a.m,a.u),a.P&&(Qx(l,a),w0(a.b,a)))}bi.prototype.la=function(){return this.za};function cN(a,l){a.qa&&Ei(a.qa,"languageCodeChanged",a.Pa),(a.qa=l)&&Ki(l,"languageCodeChanged",a.Pa)}function lN(a,l){a.$&&Ei(a.$,"emulatorConfigChanged",a.Ba),(a.$=l)&&Ki(l,"emulatorConfigChanged",a.Ba)}function dm(a,l){a.aa=l,X4(a.a,je.SDK_VERSION?ud(je.SDK_VERSION,a.aa):null)}bi.prototype.Ga=function(){return Pc(this.aa)};function hN(a,l){a.ja&&Ei(a.ja,"frameworkChanged",a.Oa),(a.ja=l)&&Ki(l,"frameworkChanged",a.Oa)}bi.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())};function dN(a){try{return je.app(a.m).auth()}catch{throw new D("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+a.m+"'!")}}function cue(a){return new oN(function(){return a.I(!0)},function(l){return!!(l&&l.code=="auth/network-request-failed")},function(){var l=a.h.c-Date.now()-3e5;return 0<l?l:0})}function tH(a){a.J||a.D.b||(a.D.start(),Ei(a,"tokenChanged",a.ba),Ki(a,"tokenChanged",a.ba))}function fN(a){Ei(a,"tokenChanged",a.ba),a.D.stop()}function pN(a,l){a.Aa=l,de(a,"_lat",l)}function lue(a,l){vo(a.W,function(d){return d==l})}function Jc(a){for(var l=[],d=0;d<a.W.length;d++)l.push(a.W[d](a));return yq(l).then(function(){return a})}function fm(a){a.b&&!a.P&&(a.P=!0,w0(a.b,a))}function nH(a,l){jr(a,{uid:l.uid,displayName:l.displayName||null,photoURL:l.photoURL||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,isAnonymous:l.isAnonymous||!1,tenantId:l.tenantId||null,metadata:new T0(l.createdAt,l.lastLoginAt),providerData:[]}),a.a.b=a.tenantId}de(bi.prototype,"providerId","firebase");function rH(){}function gN(a){return Te().then(function(){if(a.J)throw new D("app-deleted")})}function mN(a){return Aw(a.providerData,function(l){return l.providerId})}function yN(a,l){l&&(iH(a,l.providerId),a.providerData.push(l))}function iH(a,l){vo(a.providerData,function(d){return d.providerId==l})}function su(a,l,d){(l!="uid"||d)&&a.hasOwnProperty(l)&&de(a,l,d)}function C0(a,l){a!=l&&(jr(a,{uid:l.uid,displayName:l.displayName,photoURL:l.photoURL,email:l.email,emailVerified:l.emailVerified,phoneNumber:l.phoneNumber,isAnonymous:l.isAnonymous,tenantId:l.tenantId,providerData:[]}),l.metadata?de(a,"metadata",aue(l.metadata)):de(a,"metadata",new T0),rt(l.providerData,function(d){yN(a,d)}),oue(a.h,l.h),de(a,"refreshToken",a.h.a),b0(a.S,l.S.b))}t=bi.prototype,t.reload=function(){var a=this;return qn(this,gN(this).then(function(){return vN(a).then(function(){return Jc(a)}).then(rH)}))};function vN(a){return a.I().then(function(l){var d=a.isAnonymous;return hue(a,l).then(function(){return d||su(a,"isAnonymous",!1),l})})}t.oc=function(a){return this.I(a).then(function(l){return new eue(l)})},t.I=function(a){var l=this;return qn(this,gN(this).then(function(){return l.h.getToken(a)}).then(function(d){if(!d)throw new D("internal-error");return d.accessToken!=l.Aa&&(pN(l,d.accessToken),l.dispatchEvent(new vd("tokenChanged"))),su(l,"refreshToken",d.refreshToken),d.accessToken}))};function ss(a,l){l[bo]&&a.Aa!=l[bo]&&(eH(a.h,l),a.dispatchEvent(new vd("tokenChanged")),pN(a,l[bo]),su(a,"refreshToken",a.h.a))}function hue(a,l){return it(a.a,Gse,{idToken:l}).then(N(a.Kc,a))}t.Kc=function(a){if(a=a.users,!a||!a.length)throw new D("internal-error");a=a[0],nH(this,{uid:a.localId,displayName:a.displayName,photoURL:a.photoUrl,email:a.email,emailVerified:!!a.emailVerified,phoneNumber:a.phoneNumber,lastLoginAt:a.lastLoginAt,createdAt:a.createdAt,tenantId:a.tenantId});for(var l=due(a),d=0;d<l.length;d++)yN(this,l[d]);su(this,"isAnonymous",!(this.email&&a.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new vd("userReloaded",{hd:a}))};function due(a){return(a=a.providerUserInfo)&&a.length?Aw(a,function(l){return new uue(l.rawId,l.providerId,l.email,l.displayName,l.photoUrl,l.phoneNumber)}):[]}t.Lc=function(a){return BA("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(a)},t.ub=function(a){var l=this,d=null;return qn(this,a.c(this.a,this.uid).then(function(g){return ss(l,g),d=pm(l,g,"reauthenticate"),l.i=null,l.reload()}).then(function(){return d}),!0)};function S0(a,l){return vN(a).then(function(){if(oa(mN(a),l))return Jc(a).then(function(){throw new D("provider-already-linked")})})}t.Cc=function(a){return BA("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(a)},t.rb=function(a){var l=this,d=null;return qn(this,S0(this,a.providerId).then(function(){return l.I()}).then(function(g){return a.b(l.a,g)}).then(function(g){return d=pm(l,g,"link"),oH(l,g)}).then(function(){return d}))},t.Dc=function(a,l){var d=this;return qn(this,S0(this,"phone").then(function(){return eN(dN(d),a,l,N(d.rb,d))}))},t.Mc=function(a,l){var d=this;return qn(this,Te().then(function(){return eN(dN(d),a,l,N(d.ub,d))}),!0)};function pm(a,l,d){var g=sx(l);return l=E4(l),is({user:a,credential:g,additionalUserInfo:l,operationType:d})}function oH(a,l){return ss(a,l),a.reload().then(function(){return a})}t.Cb=function(a){var l=this;return qn(this,this.I().then(function(d){return l.a.Cb(d,a)}).then(function(d){return ss(l,d),l.reload()}))},t.ed=function(a){var l=this;return qn(this,this.I().then(function(d){return a.b(l.a,d)}).then(function(d){return ss(l,d),l.reload()}))},t.Db=function(a){var l=this;return qn(this,this.I().then(function(d){return l.a.Db(d,a)}).then(function(d){return ss(l,d),l.reload()}))},t.Eb=function(a){if(a.displayName===void 0&&a.photoURL===void 0)return gN(this);var l=this;return qn(this,this.I().then(function(d){return l.a.Eb(d,{displayName:a.displayName,photoUrl:a.photoURL})}).then(function(d){return ss(l,d),su(l,"displayName",d.displayName||null),su(l,"photoURL",d.photoUrl||null),rt(l.providerData,function(g){g.providerId==="password"&&(de(g,"displayName",l.displayName),de(g,"photoURL",l.photoURL))}),Jc(l)}).then(rH))},t.cd=function(a){var l=this;return qn(this,vN(this).then(function(d){return oa(mN(l),a)?Ose(l.a,d,[a]).then(function(g){var y={};return rt(g.providerUserInfo||[],function(w){y[w.providerId]=!0}),rt(mN(l),function(w){y[w]||iH(l,w)}),y[ua.PROVIDER_ID]||de(l,"phoneNumber",null),Jc(l)}):Jc(l).then(function(){throw new D("no-such-provider")})}))},t.delete=function(){var a=this;return qn(this,this.I().then(function(l){return it(a.a,jse,{idToken:l})}).then(function(){a.dispatchEvent(new vd("userDeleted"))})).then(function(){for(var l=0;l<a.N.length;l++)a.N[l].cancel("app-deleted");cN(a,null),lN(a,null),hN(a,null),a.N=[],a.J=!0,fN(a),de(a,"refreshToken",null),a.b&&Qx(a.b,a)})},t.Gb=function(a,l){return!!(a=="linkViaPopup"&&(this.g||null)==l&&this.f||a=="reauthViaPopup"&&(this.g||null)==l&&this.f||a=="linkViaRedirect"&&(this.ga||null)==l||a=="reauthViaRedirect"&&(this.ga||null)==l)},t.na=function(a,l,d,g){a!="linkViaPopup"&&a!="reauthViaPopup"||g!=(this.g||null)||(d&&this.C?this.C(d):l&&!d&&this.f&&this.f(l),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(a,l){return a=="linkViaPopup"&&l==(this.g||null)?N(this.Lb,this):a=="reauthViaPopup"&&l==(this.g||null)?N(this.Mb,this):a=="linkViaRedirect"&&(this.ga||null)==l?N(this.Lb,this):a=="reauthViaRedirect"&&(this.ga||null)==l?N(this.Mb,this):null},t.Ec=function(a){var l=this;return sH(this,"linkViaPopup",a,function(){return S0(l,a.providerId).then(function(){return Jc(l)})},!1)},t.Nc=function(a){return sH(this,"reauthViaPopup",a,function(){return Te()},!0)};function sH(a,l,d,g,y){if(!Bc())return Wt(new D("operation-not-supported-in-this-environment"));if(a.i&&!y)return Wt(a.i);var w=ex(d.providerId),I=qc(a.uid+":::"),C=null;(!$g()||LA())&&a.s&&d.isOAuthProvider&&(C=am(a.s,a.l,a.m,l,d,null,I,je.SDK_VERSION||null,null,null,a.tenantId,a.u));var L=Qq(C,w&&w.va,w&&w.ua);return g=g().then(function(){if(uH(a),!y)return a.I().then(function(){})}).then(function(){return j3(a.b,L,l,d,I,!!C,a.tenantId)}).then(function(){return new nt(function(B,Re){a.na(l,null,new D("cancelled-popup-request"),a.g||null),a.f=B,a.C=Re,a.g=I,a.c=q3(a.b,a,l,L,I)})}).then(function(B){return L&&jc(L),B?is(B):null}).o(function(B){throw L&&jc(L),B}),qn(a,g,y)}t.Fc=function(a){var l=this;return aH(this,"linkViaRedirect",a,function(){return S0(l,a.providerId)},!1)},t.Oc=function(a){return aH(this,"reauthViaRedirect",a,function(){return Te()},!0)};function aH(a,l,d,g,y){if(!Bc())return Wt(new D("operation-not-supported-in-this-environment"));if(a.i&&!y)return Wt(a.i);var w=null,I=qc(a.uid+":::");return g=g().then(function(){if(uH(a),!y)return a.I().then(function(){})}).then(function(){return a.ga=I,Jc(a)}).then(function(C){return a.ha&&(C=a.ha,C=C.b.set(_N,a.w(),C.a)),C}).then(function(){return B3(a.b,l,d,I,a.tenantId)}).o(function(C){if(w=C,a.ha)return lH(a.ha);throw w}).then(function(){if(w)throw w}),qn(a,g,y)}function uH(a){if(!a.b||!a.P)throw a.b&&!a.P?new D("internal-error"):new D("auth-domain-config-required")}t.Lb=function(a,l,d,g){var y=this;this.c&&(this.c.cancel(),this.c=null);var w=null;return d=this.I().then(function(I){return Dx(y.a,{requestUri:a,postBody:g,sessionId:l,idToken:I})}).then(function(I){return w=pm(y,I,"link"),oH(y,I)}).then(function(){return w}),qn(this,d)},t.Mb=function(a,l,d,g){var y=this;this.c&&(this.c.cancel(),this.c=null);var w=null,I=Te().then(function(){return dd(Ax(y.a,{requestUri:a,sessionId:l,postBody:g,tenantId:d}),y.uid)}).then(function(C){return w=pm(y,C,"reauthenticate"),ss(y,C),y.i=null,y.reload()}).then(function(){return w});return qn(this,I,!0)},t.vb=function(a){var l=this,d=null;return qn(this,this.I().then(function(g){return d=g,typeof a>"u"||kc(a)?{}:Ww(new Gw(a))}).then(function(g){return l.a.vb(d,g)}).then(function(g){if(l.email!=g)return l.reload()}).then(function(){}))},t.Fb=function(a,l){var d=this,g=null;return qn(this,this.I().then(function(y){return g=y,typeof l>"u"||kc(l)?{}:Ww(new Gw(l))}).then(function(y){return d.a.Fb(g,a,y)}).then(function(y){if(d.email!=y)return d.reload()}).then(function(){}))};function qn(a,l,d){var g=fue(a,l,d);return a.N.push(g),g.oa(function(){xw(a.N,g)}),g.o(function(y){var w=null;throw y&&y.code==="auth/multi-factor-auth-required"&&(w=Y3(y.w(),dN(a),N(a.jc,a))),w||y})}t.jc=function(a){var l=null,d=this;return a=dd(Te(a),d.uid).then(function(g){return l=pm(d,g,"reauthenticate"),ss(d,g),d.i=null,d.reload()}).then(function(){return l}),qn(this,a,!0)};function fue(a,l,d){return a.i&&!d?(l.cancel(),Wt(a.i)):l.o(function(g){throw!g||g.code!="auth/user-disabled"&&g.code!="auth/user-token-expired"||(a.i||a.dispatchEvent(new vd("userInvalidated")),a.i=g),g})}t.toJSON=function(){return this.w()},t.w=function(){var a={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&ri(a,this.metadata.w()),rt(this.providerData,function(l){a.providerData.push(Loe(l))}),ri(a,this.S.w()),a};function cH(a){if(!a.apiKey)return null;var l={apiKey:a.apiKey,authDomain:a.authDomain,appName:a.appName,emulatorConfig:a.emulatorConfig},d={};if(a.stsTokenManager&&a.stsTokenManager.accessToken){d[bo]=a.stsTokenManager.accessToken,d.refreshToken=a.stsTokenManager.refreshToken||null;var g=a.stsTokenManager.expirationTime;g&&(d.expiresIn=(g-Date.now())/1e3)}else return null;var y=new bi(l,d,a);return a.providerData&&rt(a.providerData,function(w){w&&yN(y,is(w))}),a.redirectEventId&&(y.ga=a.redirectEventId),y}function pue(a,l,d,g){var y=new bi(a,l);return d&&(y.ha=d),g&&dm(y,g),y.reload().then(function(){return y})}function gue(a,l,d,g){var y=a.h,w={};return w[bo]=y.b&&y.b.toString(),w.refreshToken=y.a,l=new bi(l||{apiKey:a.l,authDomain:a.s,appName:a.m},w),d&&(l.ha=d),g&&dm(l,g),C0(l,a),l}function mue(a){this.a=a,this.b=hm()}var _N={name:"redirectUser",F:"session"};function lH(a){return yd(a.b,_N,a.a)}function yue(a,l){return a.b.get(_N,a.a).then(function(d){return d&&l&&(d.authDomain=l),cH(d||{})})}function wN(a){this.a=a,this.b=hm(),this.c=null,this.f=vue(this),this.b.addListener(as("local"),this.a,N(this.g,this))}wN.prototype.g=function(){var a=this,l=as("local");_d(this,function(){return Te().then(function(){return a.c&&a.c.F!="local"?a.b.get(l,a.a):null}).then(function(d){if(d)return EN(a,"local").then(function(){a.c=l})})})};function EN(a,l){var d=[],g;for(g in gd)gd[g]!==l&&d.push(yd(a.b,as(gd[g]),a.a));return d.push(yd(a.b,IN,a.a)),aoe(d)}function vue(a){var l=as("local"),d=as("session"),g=as("none");return Pae(a.b,l,a.a).then(function(){return a.b.get(d,a.a)}).then(function(y){return y?d:a.b.get(g,a.a).then(function(w){return w?g:a.b.get(l,a.a).then(function(I){return I?l:a.b.get(IN,a.a).then(function(C){return C?as(C):l})})})}).then(function(y){return a.c=y,EN(a,y.F)}).o(function(){a.c||(a.c=l)})}var IN={name:"persistence",F:"session"};function as(a){return{name:"authUser",F:a}}wN.prototype.yb=function(a){var l=null,d=this;return Mae(a),_d(this,function(){return a!=d.c.F?d.b.get(d.c,d.a).then(function(g){return l=g,EN(d,a)}).then(function(){if(d.c=as(a),l)return d.b.set(d.c,l,d.a)}):Te()})};function _ue(a){return _d(a,function(){return a.b.set(IN,a.c.F,a.a)})}function hH(a,l){return _d(a,function(){return a.b.set(a.c,l.w(),a.a)})}function dH(a){return _d(a,function(){return yd(a.b,a.c,a.a)})}function fH(a,l,d){return _d(a,function(){return a.b.get(a.c,a.a).then(function(g){return g&&l&&(g.authDomain=l),g&&d&&(g.emulatorConfig=d),cH(g||{})})})}function _d(a,l){return a.f=a.f.then(l,l),a.f}function To(a){if(this.l=!1,de(this,"settings",new W3),de(this,"app",a),xt(this).options&&xt(this).options.apiKey)a=je.SDK_VERSION?ud(je.SDK_VERSION):null,this.a=new Io(xt(this).options&&xt(this).options.apiKey,se(me),a);else throw new D("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=je.INTERNAL.createSubscribe(N(this.zc,this)),this.W=void 0,this.ib=je.INTERNAL.createSubscribe(N(this.Ac,this)),wd(this,null),this.i=new wN(xt(this).options.apiKey+":"+xt(this).name),this.D=new mue(xt(this).options.apiKey+":"+xt(this).name),this.$=un(this,Cue(this)),this.h=un(this,Sue(this)),this.ba=!1,this.ja=N(this.Zc,this),this.Ba=N(this.da,this),this.qa=N(this.mc,this),this.za=N(this.wc,this),this.Aa=N(this.xc,this),this.b=null,Iue(this),this.INTERNAL={},this.INTERNAL.delete=N(this.delete,this),this.INTERNAL.logFramework=N(this.Gc,this),this.u=0,Ur.call(this),Eue(this),this.J=[],this.R=null}ge(To,Ur);function pH(a){oi.call(this,"languageCodeChanged"),this.h=a}ge(pH,oi);function gH(a){oi.call(this,"emulatorConfigChanged"),this.c=a}ge(gH,oi);function mH(a){oi.call(this,"frameworkChanged"),this.f=a}ge(mH,oi),t=To.prototype,t.yb=function(a){return a=this.i.yb(a),un(this,a)},t.xa=function(a){this.aa===a||this.l||(this.aa=a,Y4(this.a,this.aa),this.dispatchEvent(new pH(this.la())))},t.la=function(){return this.aa},t.fd=function(){var a=c.navigator;this.xa(a&&(a.languages&&a.languages[0]||a.language||a.userLanguage)||null)},t.gd=function(a,l){if(!this.R){if(!/^https?:\/\//.test(a))throw new D("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");l=l?!!l.disableWarnings:!1,wue(l),this.R={url:a,ec:l},this.settings.jb=!0,d0(this.a,this.R),this.dispatchEvent(new gH(this.R))}};function wue(a){typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),c.document&&!a&&Hw().then(function(){var l=c.document.createElement("div");l.innerText="Running in emulator mode. Do not use with production credentials.",l.style.position="fixed",l.style.width="100%",l.style.backgroundColor="#ffffff",l.style.border=".1em solid #000000",l.style.color="#b50000",l.style.bottom="0px",l.style.left="0px",l.style.margin="0px",l.style.zIndex=1e4,l.style.textAlign="center",l.classList.add("firebase-emulator-warning"),c.document.body.appendChild(l)})}t.Gc=function(a){this.J.push(a),X4(this.a,je.SDK_VERSION?ud(je.SDK_VERSION,this.J):null),this.dispatchEvent(new mH(this.J))},t.Ga=function(){return Pc(this.J)},t.zb=function(a){this.S===a||this.l||(this.S=a,this.a.b=this.S)},t.T=function(){return this.S};function Eue(a){Object.defineProperty(a,"lc",{get:function(){return this.la()},set:function(l){this.xa(l)},enumerable:!1}),a.aa=null,Object.defineProperty(a,"ti",{get:function(){return this.T()},set:function(l){this.zb(l)},enumerable:!1}),a.S=null,Object.defineProperty(a,"emulatorConfig",{get:function(){if(this.R){var l=si(this.R.url);l=is({protocol:l.c,host:l.a,port:l.g,options:is({disableWarnings:this.R.ec})})}else l=null;return l},enumerable:!1})}t.toJSON=function(){return{apiKey:xt(this).options.apiKey,authDomain:xt(this).options.authDomain,appName:xt(this).name,currentUser:He(this)&&He(this).w()}};function bN(a){return a.Oa||Wt(new D("auth-domain-config-required"))}function Iue(a){var l=xt(a).options.authDomain,d=xt(a).options.apiKey;l&&Bc()&&(a.Oa=a.$.then(function(){if(!a.l){if(a.b=Jx(l,d,xt(a).name,a.R),w0(a.b,a),He(a)&&fm(He(a)),a.m){fm(a.m);var g=a.m;g.xa(a.la()),cN(g,a),g=a.m,dm(g,a.J),hN(g,a),g=a.m,uN(g,a.R),lN(g,a),a.m=null}return a.b}}))}t.Gb=function(a,l){switch(a){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==l&&!!this.f;default:return!1}},t.na=function(a,l,d,g){a=="signInViaPopup"&&this.g==g&&(d&&this.C?this.C(d):l&&!d&&this.f&&this.f(l),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(a,l){return a=="signInViaRedirect"||a=="signInViaPopup"&&this.g==l&&this.f?N(this.ic,this):null},t.ic=function(a,l,d,g){var y=this,w={requestUri:a,postBody:g,sessionId:l,tenantId:d};return this.c&&(this.c.cancel(),this.c=null),y.$.then(function(){return Zc(y,Sx(y.a,w))})},t.Xc=function(a){if(!Bc())return Wt(new D("operation-not-supported-in-this-environment"));var l=this,d=ex(a.providerId),g=qc(),y=null;(!$g()||LA())&&xt(this).options.authDomain&&a.isOAuthProvider&&(y=am(xt(this).options.authDomain,xt(this).options.apiKey,xt(this).name,"signInViaPopup",a,null,g,je.SDK_VERSION||null,null,null,this.T(),this.R));var w=Qq(y,d&&d.va,d&&d.ua);return d=bN(this).then(function(I){return j3(I,w,"signInViaPopup",a,g,!!y,l.T())}).then(function(){return new nt(function(I,C){l.na("signInViaPopup",null,new D("cancelled-popup-request"),l.g),l.f=I,l.C=C,l.g=g,l.c=q3(l.b,l,"signInViaPopup",w,g)})}).then(function(I){return w&&jc(w),I?is(I):null}).o(function(I){throw w&&jc(w),I}),un(this,d)},t.Yc=function(a){if(!Bc())return Wt(new D("operation-not-supported-in-this-environment"));var l=this,d=bN(this).then(function(){return _ue(l.i)}).then(function(){return B3(l.b,"signInViaRedirect",a,void 0,l.T())});return un(this,d)};function yH(a){if(!Bc())return Wt(new D("operation-not-supported-in-this-environment"));var l=bN(a).then(function(){return a.b.ra()}).then(function(d){return d?is(d):null});return un(a,l)}t.ra=function(){var a=this;return yH(this).then(function(l){return a.b&&I0(a.b.b),l}).o(function(l){throw a.b&&I0(a.b.b),l})},t.dd=function(a){if(!a)return Wt(new D("null-user"));if(this.S!=a.tenantId)return Wt(new D("tenant-id-mismatch"));var l=this,d={};d.apiKey=xt(this).options.apiKey,d.authDomain=xt(this).options.authDomain,d.appName=xt(this).name;var g=gue(a,d,l.D,l.Ga());return un(this,this.h.then(function(){if(xt(l).options.apiKey!=a.l)return g.reload()}).then(function(){return He(l)&&a.uid==He(l).uid?(C0(He(l),a),l.da(a)):(wd(l,g),fm(g),l.da(g))}).then(function(){gm(l)}))};function bue(a,l){var d={};return d.apiKey=xt(a).options.apiKey,d.authDomain=xt(a).options.authDomain,d.appName=xt(a).name,a.R&&(d.emulatorConfig=a.R),a.$.then(function(){return pue(d,l,a.D,a.Ga())}).then(function(g){return He(a)&&g.uid==He(a).uid?(C0(He(a),g),a.da(g)):(wd(a,g),fm(g),a.da(g))}).then(function(){gm(a)})}function wd(a,l){He(a)&&(lue(He(a),a.Ba),Ei(He(a),"tokenChanged",a.qa),Ei(He(a),"userDeleted",a.za),Ei(He(a),"userInvalidated",a.Aa),fN(He(a))),l&&(l.W.push(a.Ba),Ki(l,"tokenChanged",a.qa),Ki(l,"userDeleted",a.za),Ki(l,"userInvalidated",a.Aa),0<a.u&&tH(l)),de(a,"currentUser",l),l&&(l.xa(a.la()),cN(l,a),dm(l,a.J),hN(l,a),uN(l,a.R),lN(l,a))}t.Bb=function(){var a=this,l=this.h.then(function(){return a.b&&I0(a.b.b),He(a)?(wd(a,null),dH(a.i).then(function(){gm(a)})):Te()});return un(this,l)};function Tue(a){var l=yue(a.D,xt(a).options.authDomain).then(function(d){return(a.m=d)&&(d.ha=a.D),lH(a.D)});return un(a,l)}function Cue(a){var l=xt(a).options.authDomain,d=Tue(a).then(function(){return fH(a.i,l,a.R)}).then(function(g){return g?(g.ha=a.D,a.m&&(a.m.ga||null)==(g.ga||null)?g:g.reload().then(function(){return hH(a.i,g).then(function(){return g})}).o(function(y){return y.code=="auth/network-request-failed"?g:dH(a.i)})):null}).then(function(g){wd(a,g||null)});return un(a,d)}function Sue(a){return a.$.then(function(){return yH(a)}).o(function(){}).then(function(){if(!a.l)return a.ja()}).o(function(){}).then(function(){if(!a.l){a.ba=!0;var l=a.i;l.b.addListener(as("local"),l.a,a.ja)}})}t.Zc=function(){var a=this;return fH(this.i,xt(this).options.authDomain).then(function(l){if(!a.l){var d;if(d=He(a)&&l){d=He(a).uid;var g=l.uid;d=d==null||d===""||g===void 0||g===null||g===""?!1:d==g}if(d)return C0(He(a),l),He(a).I();(He(a)||l)&&(wd(a,l),l&&(fm(l),l.ha=a.D),a.b&&w0(a.b,a),gm(a))}})},t.da=function(a){return hH(this.i,a)},t.mc=function(){gm(this),this.da(He(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()};function Zc(a,l){var d=null,g=null;return un(a,l.then(function(y){return d=sx(y),g=E4(y),bue(a,y)},function(y){var w=null;throw y&&y.code==="auth/multi-factor-auth-required"&&(w=Y3(y.w(),a,N(a.kc,a))),w||y}).then(function(){return is({user:He(a),credential:d,additionalUserInfo:g,operationType:"signIn"})}))}t.kc=function(a){var l=this;return this.h.then(function(){return Zc(l,Te(a))})},t.zc=function(a){var l=this;this.addAuthTokenListener(function(){a.next(He(l))})},t.Ac=function(a){var l=this;Due(this,function(){a.next(He(l))})},t.Ic=function(a,l,d){var g=this;return this.ba&&Promise.resolve().then(function(){typeof a=="function"?a(He(g)):typeof a.next=="function"&&a.next(He(g))}),this.Pa(a,l,d)},t.Hc=function(a,l,d){var g=this;return this.ba&&Promise.resolve().then(function(){g.W=g.getUid(),typeof a=="function"?a(He(g)):typeof a.next=="function"&&a.next(He(g))}),this.ib(a,l,d)},t.nc=function(a){var l=this,d=this.h.then(function(){return He(l)?He(l).I(a).then(function(g){return{accessToken:g}}):null});return un(this,d)},t.Tc=function(a){var l=this;return this.h.then(function(){return Zc(l,it(l.a,aae,{token:a}))}).then(function(d){var g=d.user;return su(g,"isAnonymous",!1),l.da(g),d})},t.Uc=function(a,l){var d=this;return this.h.then(function(){return Zc(d,it(d.a,s3,{email:a,password:l}))})},t.dc=function(a,l){var d=this;return this.h.then(function(){return Zc(d,it(d.a,Vse,{email:a,password:l}))})},t.ab=function(a){var l=this;return this.h.then(function(){return Zc(l,a.ka(l.a))})},t.Sc=function(a){return BA("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(a)},t.Ab=function(){var a=this;return this.h.then(function(){var l=He(a);if(l&&l.isAnonymous){var d=is({providerId:null,isNewUser:!1});return is({user:l,credential:null,additionalUserInfo:d,operationType:"signIn"})}return Zc(a,a.a.Ab()).then(function(g){var y=g.user;return su(y,"isAnonymous",!0),a.da(y),g})})};function xt(a){return a.app}function He(a){return a.currentUser}t.getUid=function(){return He(this)&&He(this).uid||null};function D0(a){return He(a)&&He(a)._lat||null}function gm(a){if(a.ba){for(var l=0;l<a.s.length;l++)a.s[l]&&a.s[l](D0(a));if(a.W!==a.getUid()&&a.N.length)for(a.W=a.getUid(),l=0;l<a.N.length;l++)a.N[l]&&a.N[l](D0(a))}}t.cc=function(a){this.addAuthTokenListener(a),this.u++,0<this.u&&He(this)&&tH(He(this))},t.Pc=function(a){var l=this;rt(this.s,function(d){d==a&&l.u--}),0>this.u&&(this.u=0),this.u==0&&He(this)&&fN(He(this)),this.removeAuthTokenListener(a)},t.addAuthTokenListener=function(a){var l=this;this.s.push(a),un(this,this.h.then(function(){l.l||oa(l.s,a)&&a(D0(l))}))},t.removeAuthTokenListener=function(a){vo(this.s,function(l){return l==a})};function Due(a,l){a.N.push(l),un(a,a.h.then(function(){!a.l&&oa(a.N,l)&&a.W!==a.getUid()&&(a.W=a.getUid(),l(D0(a)))}))}t.delete=function(){this.l=!0;for(var a=0;a<this.P.length;a++)this.P[a].cancel("app-deleted");return this.P=[],this.i&&(a=this.i,a.b.removeListener(as("local"),a.a,this.ja)),this.b&&(Qx(this.b,this),I0(this.b.b)),Promise.resolve()};function un(a,l){return a.P.push(l),l.oa(function(){xw(a.P,l)}),l}t.hc=function(a){return un(this,xse(this.a,a))},t.Bc=function(a){return!!ox(a)},t.xb=function(a,l){var d=this;return un(this,Te().then(function(){var g=new Gw(l);if(!g.c)throw new D("argument-error",JA+" must be true when sending sign in link to email");return Ww(g)}).then(function(g){return d.a.xb(a,g)}).then(function(){}))},t.jd=function(a){return this.Sa(a).then(function(l){return l.data.email})},t.ob=function(a,l){return un(this,this.a.ob(a,l).then(function(){}))},t.Sa=function(a){return un(this,this.a.Sa(a).then(function(l){return new Uoe(l)}))},t.kb=function(a){return un(this,this.a.kb(a).then(function(){}))},t.wb=function(a,l){var d=this;return un(this,Te().then(function(){return typeof l>"u"||kc(l)?{}:Ww(new Gw(l))}).then(function(g){return d.a.wb(a,g)}).then(function(){}))},t.Wc=function(a,l){return un(this,eN(this,a,l,N(this.ab,this)))},t.Vc=function(a,l){var d=this;return un(this,Te().then(function(){var g=l||Hg(),y=P4(a,g);if(g=ox(g),!g)throw new D("argument-error","Invalid email link!");if(g.tenantId!==d.T())throw new D("tenant-id-mismatch");return d.ab(y)}))};function mm(){}mm.prototype.render=function(){},mm.prototype.reset=function(){},mm.prototype.getResponse=function(){},mm.prototype.execute=function(){};function Ed(){this.a={},this.b=1e12}var TN=null;Ed.prototype.render=function(a,l){return this.a[this.b.toString()]=new A0(a,l),this.b++},Ed.prototype.reset=function(a){var l=CN(this,a);a=vH(a),l&&a&&(l.delete(),delete this.a[a])},Ed.prototype.getResponse=function(a){return(a=CN(this,a))?a.getResponse():null},Ed.prototype.execute=function(a){(a=CN(this,a))&&a.execute()};function CN(a,l){return(l=vH(l))&&a.a[l]||null}function vH(a){return(a=typeof a>"u"?1e12:a)?a.toString():null}function A0(a,l){this.g=!1,this.c=l,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=Fg(a);var d=this;this.i=function(){d.execute()},this.h?this.execute():Ki(this.f,"click",this.i)}A0.prototype.getResponse=function(){return SN(this),this.b},A0.prototype.execute=function(){SN(this);var a=this;this.a||(this.a=setTimeout(function(){a.b=Poe();var l=a.c.callback,d=a.c["expired-callback"];if(l)try{l(a.b)}catch{}a.a=setTimeout(function(){if(a.a=null,a.b=null,d)try{d()}catch{}a.h&&a.execute()},6e4)},500))},A0.prototype.delete=function(){SN(this),this.g=!0,clearTimeout(this.a),this.a=null,Ei(this.f,"click",this.i)};function SN(a){if(a.g)throw Error("reCAPTCHA mock was already deleted!")}function DN(){}de(DN,"FACTOR_ID","phone");function AN(){}AN.prototype.g=function(){return TN||(TN=new Ed),Te(TN)},AN.prototype.c=function(){};var xN=null;function NN(){this.b=c.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Aue=new ts(Nw,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),xue=new ru(3e4,6e4);NN.prototype.g=function(a){var l=this;return new nt(function(d,g){var y=setTimeout(function(){g(new D("network-request-failed"))},xue.get());if(!c.grecaptcha||a!==l.f&&!l.b){c[l.a]=function(){if(c.grecaptcha){l.f=a;var I=c.grecaptcha.render;c.grecaptcha.render=function(C,L){return C=I(C,L),l.b++,C},clearTimeout(y),d(c.grecaptcha)}else clearTimeout(y),g(new D("internal-error"));delete c[l.a]};var w=lA(Aue,{onload:l.a,hl:a||""});Te(_x(w)).o(function(){clearTimeout(y),g(new D("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(y),d(c.grecaptcha)})},NN.prototype.c=function(){this.b--};var RN=null;function MN(a,l,d,g,y,w,I){if(de(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=l,this.g=null,I?(xN||(xN=new AN),I=xN):(RN||(RN=new NN),I=RN),this.m=I,this.a=d||{theme:"light",type:"image"},this.h=[],this.a[EH])throw new D("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[Nue]==="invisible",!c.document)throw new D("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Fg(l)||!this.i&&Fg(l).hasChildNodes())throw new D("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Io(a,w||null,y||null),this.u=g||function(){return null};var C=this;this.l=[];var L=this.a[_H];this.a[_H]=function(Re){if(IH(C,Re),typeof L=="function")L(Re);else if(typeof L=="string"){var bt=Kt(L,c);typeof bt=="function"&&bt(Re)}};var B=this.a[wH];this.a[wH]=function(){if(IH(C,null),typeof B=="function")B();else if(typeof B=="string"){var Re=Kt(B,c);typeof Re=="function"&&Re()}}}var _H="callback",wH="expired-callback",EH="sitekey",Nue="size";function IH(a,l){for(var d=0;d<a.l.length;d++)try{a.l[d](l)}catch{}}function Rue(a,l){vo(a.l,function(d){return d==l})}function PN(a,l){return a.h.push(l),l.oa(function(){xw(a.h,l)}),l}t=MN.prototype,t.Ia=function(){var a=this;return this.f?this.f:this.f=PN(this,Te().then(function(){if($w()&&!wo())return Hw();throw new D("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return a.m.g(a.u())}).then(function(l){return a.g=l,it(a.s,Jse,{})}).then(function(l){a.a[EH]=l.recaptchaSiteKey}).o(function(l){throw a.f=null,l}))},t.render=function(){x0(this);var a=this;return PN(this,this.Ia().then(function(){if(a.c===null){var l=a.v;if(!a.i){var d=Fg(l);l=roe("DIV"),d.appendChild(l)}a.c=a.g.render(l,a.a)}return a.c}))},t.verify=function(){x0(this);var a=this;return PN(this,this.render().then(function(l){return new nt(function(d){var g=a.g.getResponse(l);if(g)d(g);else{var y=function(w){w&&(Rue(a,y),d(w))};a.l.push(y),a.i&&a.g.execute(a.c)}})}))},t.reset=function(){x0(this),this.c!==null&&this.g.reset(this.c)};function x0(a){if(a.J)throw new D("internal-error","RecaptchaVerifier instance has been destroyed.")}t.clear=function(){x0(this),this.J=!0,this.m.c();for(var a=0;a<this.h.length;a++)this.h[a].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){a=Fg(this.v);for(var l;l=a.firstChild;)a.removeChild(l)}};function kN(a,l,d){var g=!1;try{this.b=d||je.app()}catch{throw new D("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)d=this.b.options.apiKey;else throw new D("invalid-api-key");var y=this,w=null;try{w=this.b.auth().Ga()}catch{}try{g=this.b.auth().settings.appVerificationDisabledForTesting}catch{}w=je.SDK_VERSION?ud(je.SDK_VERSION,w):null,MN.call(this,d,a,l,function(){try{var I=y.b.auth().la()}catch{I=null}return I},w,se(me),g)}ge(kN,MN);function bH(a,l,d,g){e:{d=Array.prototype.slice.call(d);for(var y=0,w=!1,I=0;I<l.length;I++)if(l[I].optional)w=!0;else{if(w)throw new D("internal-error","Argument validator encountered a required argument after an optional argument.");y++}if(w=l.length,d.length<y||w<d.length)g="Expected "+(y==w?y==1?"1 argument":y+" arguments":y+"-"+w+" arguments")+" but got "+d.length+".";else{for(y=0;y<d.length;y++)if(w=l[y].optional&&d[y]===void 0,!l[y].M(d[y])&&!w){if(l=l[y],0>y||y>=TH.length)throw new D("internal-error","Argument validator received an unsupported number of arguments.");d=TH[y],g=(g?"":d+" argument ")+(l.name?'"'+l.name+'" ':"")+"must be "+l.K+".";break e}g=null}}if(g)throw new D("argument-error",a+" failed: "+g)}var TH="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function he(a,l){return{name:a||"",K:"a valid string",optional:!!l,M:function(d){return typeof d=="string"}}}function ON(a,l){return{name:a||"",K:"a boolean",optional:!!l,M:function(d){return typeof d=="boolean"}}}function Sn(a,l){return{name:a||"",K:"a valid object",optional:!!l,M:b}}function Id(a,l){return{name:a||"",K:"a function",optional:!!l,M:function(d){return typeof d=="function"}}}function us(a,l){return{name:a||"",K:"null",optional:!!l,M:function(d){return d===null}}}function Mue(){return{name:"",K:"an HTML element",optional:!1,M:function(a){return!!(a&&a instanceof Element)}}}function Pue(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(a){return!!(a&&a instanceof To)}}}function kue(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(a){return!!(a&&a instanceof je.app.App)}}}function au(a){return{name:a?a+"Credential":"credential",K:a?"a valid "+a+" credential":"a valid credential",optional:!1,M:function(l){if(!l)return!1;var d=!a||l.providerId===a;return!(!l.ka||!d)}}}function CH(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(a){return a?!!a.tb:!1}}}function bd(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty("isOAuthProvider"))}}}function FN(a,l){return b(a)&&typeof a.type=="string"&&a.type===l&&typeof a.Ha=="function"}function SH(a){return b(a)&&typeof a.uid=="string"}function N0(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(a){return!(!a||typeof a.type!="string"||typeof a.verify!="function")}}}function mn(a,l,d,g){return{name:d||"",K:a.K+" or "+l.K,optional:!!g,M:function(y){return a.M(y)||l.M(y)}}}function tn(a,l){for(var d in l){var g=l[d].name;a[g]=AH(g,a[d],l[d].j)}}function DH(a,l){for(var d in l){var g=l[d].name;g!==d&&Object.defineProperty(a,g,{get:ie(function(y){return this[y]},d),set:ie(function(y,w,I,C){bH(y,[I],[C],!0),this[w]=C},g,d,l[d].lb),enumerable:!0})}}function yn(a,l,d,g){a[l]=AH(l,d,g)}function AH(a,l,d){function g(){var I=Array.prototype.slice.call(arguments);return bH(y,d,I),l.apply(this,I)}if(!d)return l;var y=Oue(a),w;for(w in l)g[w]=l[w];for(w in l.prototype)g.prototype[w]=l.prototype[w];return g}function Oue(a){return a=a.split("."),a[a.length-1]}tn(To.prototype,{kb:{name:"applyActionCode",j:[he("code")]},Sa:{name:"checkActionCode",j:[he("code")]},ob:{name:"confirmPasswordReset",j:[he("code"),he("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[he("email"),he("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[he("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[he("emailLink")]},Hc:{name:"onAuthStateChanged",j:[mn(Sn(),Id(),"nextOrObserver"),Id("opt_error",!0),Id("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[mn(Sn(),Id(),"nextOrObserver"),Id("opt_error",!0),Id("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[he("email"),mn(Sn("opt_actionCodeSettings",!0),us(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[he("email"),Sn("actionCodeSettings")]},yb:{name:"setPersistence",j:[he("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[au()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[au()]},Tc:{name:"signInWithCustomToken",j:[he("token")]},Uc:{name:"signInWithEmailAndPassword",j:[he("email"),he("password")]},Vc:{name:"signInWithEmailLink",j:[he("email"),he("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[he("phoneNumber"),N0()]},Xc:{name:"signInWithPopup",j:[bd()]},Yc:{name:"signInWithRedirect",j:[bd()]},dd:{name:"updateCurrentUser",j:[mn(function(a){return{name:"user",K:"an instance of Firebase User",optional:!!a,M:function(l){return!!(l&&l instanceof bi)}}}(),us(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[he(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[he("url"),Sn("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[he("code")]}}),DH(To.prototype,{lc:{name:"languageCode",lb:mn(he(),us(),"languageCode")},ti:{name:"tenantId",lb:mn(he(),us(),"tenantId")}}),To.Persistence=gd,To.Persistence.LOCAL="local",To.Persistence.SESSION="session",To.Persistence.NONE="none",tn(bi.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[ON("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[ON("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[au()]},rb:{name:"linkWithCredential",j:[au()]},Dc:{name:"linkWithPhoneNumber",j:[he("phoneNumber"),N0()]},Ec:{name:"linkWithPopup",j:[bd()]},Fc:{name:"linkWithRedirect",j:[bd()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[au()]},ub:{name:"reauthenticateWithCredential",j:[au()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[he("phoneNumber"),N0()]},Nc:{name:"reauthenticateWithPopup",j:[bd()]},Oc:{name:"reauthenticateWithRedirect",j:[bd()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[mn(Sn("opt_actionCodeSettings",!0),us(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[he(null,!0)]},cd:{name:"unlink",j:[he("provider")]},Cb:{name:"updateEmail",j:[he("email")]},Db:{name:"updatePassword",j:[he("password")]},ed:{name:"updatePhoneNumber",j:[au("phone")]},Eb:{name:"updateProfile",j:[Sn("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[he("email"),mn(Sn("opt_actionCodeSettings",!0),us(null,!0),"opt_actionCodeSettings",!0)]}}),tn(Ed.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),tn(mm.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),tn(nt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),DH(W3.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:ON("appVerificationDisabledForTesting")}}),tn(Zx.prototype,{confirm:{name:"confirm",j:[he("verificationCode")]}}),yn(hd,"fromJSON",function(a){a=typeof a=="string"?JSON.parse(a):a;for(var l,d=[rse,ise,ose,nse],g=0;g<d.length;g++)if(l=d[g](a))return l;return null},[mn(he(),Sn(),"json")]),yn(Yi,"credential",function(a,l){return new iu(a,l)},[he("email"),he("password")]),tn(iu.prototype,{w:{name:"toJSON",j:[he(null,!0)]}}),tn(zc.prototype,{Ca:{name:"addScope",j:[he("scope")]},Ka:{name:"setCustomParameters",j:[Sn("customOAuthParameters")]}}),yn(zc,"credential",x4,[mn(he(),Sn(),"token")]),yn(Yi,"credentialWithLink",P4,[he("email"),he("emailLink")]),tn(Gc.prototype,{Ca:{name:"addScope",j:[he("scope")]},Ka:{name:"setCustomParameters",j:[Sn("customOAuthParameters")]}}),yn(Gc,"credential",N4,[mn(he(),Sn(),"token")]),tn(Wc.prototype,{Ca:{name:"addScope",j:[he("scope")]},Ka:{name:"setCustomParameters",j:[Sn("customOAuthParameters")]}}),yn(Wc,"credential",R4,[mn(he(),mn(Sn(),us()),"idToken"),mn(he(),us(),"accessToken",!0)]),tn(fd.prototype,{Ka:{name:"setCustomParameters",j:[Sn("customOAuthParameters")]}}),yn(fd,"credential",M4,[mn(he(),Sn(),"token"),he("secret",!0)]),tn(Ii.prototype,{Ca:{name:"addScope",j:[he("scope")]},credential:{name:"credential",j:[mn(he(),mn(Sn(),us()),"optionsOrIdToken"),mn(he(),us(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Sn("customOAuthParameters")]}}),tn(aa.prototype,{w:{name:"toJSON",j:[he(null,!0)]}}),tn(Hc.prototype,{w:{name:"toJSON",j:[he(null,!0)]}}),yn(ua,"credential",k4,[he("verificationId"),he("verificationCode")]),tn(ua.prototype,{gb:{name:"verifyPhoneNumber",j:[mn(he(),function(a,l){return{name:a||"phoneInfoOptions",K:"valid phone info options",optional:!!l,M:function(d){return d?d.session&&d.phoneNumber?FN(d.session,Yg)&&typeof d.phoneNumber=="string":d.session&&d.multiFactorHint?FN(d.session,Jw)&&SH(d.multiFactorHint):d.session&&d.multiFactorUid?FN(d.session,Jw)&&typeof d.multiFactorUid=="string":d.phoneNumber?typeof d.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),N0()]}}),tn(ou.prototype,{w:{name:"toJSON",j:[he(null,!0)]}}),tn(D.prototype,{toJSON:{name:"toJSON",j:[he(null,!0)]}}),tn(Jg.prototype,{toJSON:{name:"toJSON",j:[he(null,!0)]}}),tn(cx.prototype,{toJSON:{name:"toJSON",j:[he(null,!0)]}}),tn(nN.prototype,{toJSON:{name:"toJSON",j:[he(null,!0)]}}),tn(tN.prototype,{Rc:{name:"resolveSignIn",j:[CH()]}}),tn(iN.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[CH(),he("displayName",!0)]},bd:{name:"unenroll",j:[mn({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:SH},he(),"multiFactorInfoIdentifier")]}}),tn(kN.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),yn(XA,"parseLink",h4,[he("link")]),yn(DN,"assertion",function(a){return new J3(a)},[au("phone")]),function(){if(typeof je<"u"&&je.INTERNAL&&je.INTERNAL.registerComponent){var a={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:zw,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:YA,VERIFY_AND_CHANGE_EMAIL:Kg,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:To,AuthCredential:hd,Error:D};yn(a,"EmailAuthProvider",Yi,[]),yn(a,"FacebookAuthProvider",zc,[]),yn(a,"GithubAuthProvider",Gc,[]),yn(a,"GoogleAuthProvider",Wc,[]),yn(a,"TwitterAuthProvider",fd,[]),yn(a,"OAuthProvider",Ii,[he("providerId")]),yn(a,"SAMLAuthProvider",A4,[he("providerId")]),yn(a,"PhoneAuthProvider",ua,[Pue()]),yn(a,"RecaptchaVerifier",kN,[mn(he(),Mue(),"recaptchaContainer"),Sn("recaptchaParameters",!0),kue()]),yn(a,"ActionCodeURL",XA,[]),yn(a,"PhoneMultiFactorGenerator",DN,[]),je.INTERNAL.registerComponent({name:"auth",instanceFactory:function(l){return l=l.getProvider("app").getImmediate(),new To(l)},multipleInstances:!1,serviceProps:a,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(l){l.getProvider("auth-internal").initialize()}}),je.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(l){return l=l.getProvider("auth").getImmediate(),{getUid:N(l.getUid,l),getToken:N(l.nc,l),addAuthTokenListener:N(l.cc,l),removeAuthTokenListener:N(l.Pc,l)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),je.registerVersion("@firebase/auth","0.16.8"),je.INTERNAL.extendNamespace({User:bi})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});var P7=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(ye(bu),ye(Ai))},e.\u0275dir=Nn({type:e});let t=e;return t})(),k7=(()=>{let e=class e extends P7{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=_l(e)))(o||e)}})(),e.\u0275dir=Nn({type:e,features:[bs]});let t=e;return t})(),UL=new J("NgValueAccessor"),mEe={provide:UL,useExisting:Eu(()=>jL),multi:!0},jL=(()=>{let e=class e extends k7{writeValue(r){this.setProperty("checked",r)}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=_l(e)))(o||e)}})(),e.\u0275dir=Nn({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,o){i&1&&_t("change",function(u){return o.onChange(u.target.checked)})("blur",function(){return o.onTouched()})},features:[cf([mEe]),bs]});let t=e;return t})(),yEe={provide:UL,useExisting:Eu(()=>mC),multi:!0};function vEe(){let t=Cs()?Cs().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var _Ee=new J("CompositionEventMode"),mC=(()=>{let e=class e extends P7{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!vEe())}writeValue(r){let i=r==null?"":r;this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(ye(bu),ye(Ai),ye(_Ee,8))},e.\u0275dir=Nn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&_t("input",function(u){return o._handleInput(u.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(u){return o._compositionEnd(u.target.value)})},features:[cf([yEe]),bs]});let t=e;return t})();function nc(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function O7(t){return t!=null&&typeof t.length=="number"}var BL=new J("NgValidators"),F7=new J("NgAsyncValidators"),wEe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,vi=class{static min(e){return EEe(e)}static max(e){return IEe(e)}static required(e){return L7(e)}static requiredTrue(e){return bEe(e)}static email(e){return TEe(e)}static minLength(e){return CEe(e)}static maxLength(e){return SEe(e)}static pattern(e){return DEe(e)}static nullValidator(e){return lC(e)}static compose(e){return H7(e)}static composeAsync(e){return z7(e)}};function EEe(t){return e=>{if(nc(e.value)||nc(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function IEe(t){return e=>{if(nc(e.value)||nc(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function L7(t){return nc(t.value)?{required:!0}:null}function bEe(t){return t.value===!0?null:{required:!0}}function TEe(t){return nc(t.value)||wEe.test(t.value)?null:{email:!0}}function CEe(t){return e=>nc(e.value)||!O7(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function SEe(t){return e=>O7(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function DEe(t){if(!t)return lC;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(nc(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function lC(t){return null}function V7(t){return t!=null}function U7(t){return bl(t)?ze(t):t}function j7(t){let e={};return t.forEach(n=>{e=n!=null?X(X({},e),n):e}),Object.keys(e).length===0?null:e}function B7(t,e){return e.map(n=>n(t))}function AEe(t){return!t.validate}function q7(t){return t.map(e=>AEe(e)?e:n=>e.validate(n))}function H7(t){if(!t)return null;let e=t.filter(V7);return e.length==0?null:function(n){return j7(B7(n,e))}}function $7(t){return t!=null?H7(q7(t)):null}function z7(t){if(!t)return null;let e=t.filter(V7);return e.length==0?null:function(n){let r=B7(n,e).map(U7);return iR(r).pipe(le(j7))}}function G7(t){return t!=null?z7(q7(t)):null}function C7(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function W7(t){return t._rawValidators}function K7(t){return t._rawAsyncValidators}function FL(t){return t?Array.isArray(t)?t:[t]:[]}function hC(t,e){return Array.isArray(t)?t.includes(e):t===e}function S7(t,e){let n=FL(e);return FL(t).forEach(i=>{hC(n,i)||n.push(i)}),n}function D7(t,e){return FL(e).filter(n=>!hC(t,n))}var dC=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$7(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=G7(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},wp=class extends dC{get formDirective(){return null}get path(){return null}},qv=class extends dC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},fC=class{constructor(e){this._cd=e}get isTouched(){var e,n;return!!((n=(e=this._cd)==null?void 0:e.control)!=null&&n.touched)}get isUntouched(){var e,n;return!!((n=(e=this._cd)==null?void 0:e.control)!=null&&n.untouched)}get isPristine(){var e,n;return!!((n=(e=this._cd)==null?void 0:e.control)!=null&&n.pristine)}get isDirty(){var e,n;return!!((n=(e=this._cd)==null?void 0:e.control)!=null&&n.dirty)}get isValid(){var e,n;return!!((n=(e=this._cd)==null?void 0:e.control)!=null&&n.valid)}get isInvalid(){var e,n;return!!((n=(e=this._cd)==null?void 0:e.control)!=null&&n.invalid)}get isPending(){var e,n;return!!((n=(e=this._cd)==null?void 0:e.control)!=null&&n.pending)}get isSubmitted(){var e;return!!((e=this._cd)!=null&&e.submitted)}},xEe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},QBe=Xe(X({},xEe),{"[class.ng-submitted]":"isSubmitted"}),Q7=(()=>{let e=class e extends fC{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ye(qv,2))},e.\u0275dir=Nn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&gI("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[bs]});let t=e;return t})(),Y7=(()=>{let e=class e extends fC{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ye(wp,10))},e.\u0275dir=Nn({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&gI("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[bs]});let t=e;return t})();var Uv="VALID",cC="INVALID",_p="PENDING",jv="DISABLED";function qL(t){return(yC(t)?t.validators:t)||null}function NEe(t){return Array.isArray(t)?$7(t):t||null}function HL(t,e){return(yC(e)?e.asyncValidators:t)||null}function REe(t){return Array.isArray(t)?G7(t):t||null}function yC(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function X7(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new z(1e3,"");if(!r[n])throw new z(1001,"")}function J7(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new z(1002,"")})}var Ep=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Uv}get invalid(){return this.status===cC}get pending(){return this.status==_p}get disabled(){return this.status===jv}get enabled(){return this.status!==jv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(S7(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(S7(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(D7(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(D7(e,this._rawAsyncValidators))}hasValidator(e){return hC(this._rawValidators,e)}hasAsyncValidator(e){return hC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=_p,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=jv,this.errors=null,this._forEachChild(r=>{r.disable(Xe(X({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Xe(X({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Uv,this._forEachChild(r=>{r.enable(Xe(X({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Xe(X({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Uv||this.status===_p)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jv:Uv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=_p,this._hasOwnPendingAsyncValidator=!0;let n=U7(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new wn,this.statusChanges=new wn}_calculateStatus(){return this._allControlsDisabled()?jv:this.errors?cC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_p)?_p:this._anyControlsHaveStatus(cC)?cC:Uv}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yC(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=NEe(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=REe(this._rawAsyncValidators)}},Hv=class extends Ep{constructor(e,n,r){super(qL(n),HL(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){J7(this,!0,e),Object.keys(e).forEach(r=>{X7(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var LL=class extends Hv{};var $L=new J("CallSetDisabledState",{providedIn:"root",factory:()=>vC}),vC="always";function MEe(t,e){return[...e.path,t]}function A7(t,e,n=vC){var r,i;zL(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&((i=(r=e.valueAccessor).setDisabledState)==null||i.call(r,t.disabled)),kEe(t,e),FEe(t,e),OEe(t,e),PEe(t,e)}function x7(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),gC(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function pC(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function PEe(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function zL(t,e){let n=W7(t);e.validator!==null?t.setValidators(C7(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=K7(t);e.asyncValidator!==null?t.setAsyncValidators(C7(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();pC(e._rawValidators,i),pC(e._rawAsyncValidators,i)}function gC(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=W7(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=K7(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return pC(e._rawValidators,r),pC(e._rawAsyncValidators,r),n}function kEe(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Z7(t,e)})}function OEe(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Z7(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Z7(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function FEe(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function LEe(t,e){t==null,zL(t,e)}function VEe(t,e){return gC(t,e)}function UEe(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function jEe(t){return Object.getPrototypeOf(t.constructor)===k7}function BEe(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function qEe(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===mC?n=o:jEe(o)?r=o:i=o}),i||r||n||null}function HEe(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function N7(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function R7(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Bv=class extends Ep{constructor(e=null,n,r){super(qL(n),HL(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yC(n)&&(n.nonNullable||n.initialValueIsDefault)&&(R7(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){N7(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){N7(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){R7(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $Ee=t=>t instanceof Bv;var eY=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Nn({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var zEe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=ut({});let t=e;return t})();var tY=new J("NgModelWithFormControlWarning");var GEe={provide:wp,useExisting:Eu(()=>GL)},GL=(()=>{let e=class e extends wp{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new wn,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(gC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return A7(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){x7(r.control||null,r,!1),HEe(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){var i;return this.submitted=!0,BEe(this.form,this.directives),this.ngSubmit.emit(r),((i=r==null?void 0:r.target)==null?void 0:i.method)==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,o=this.form.get(r.path);i!==o&&(x7(i||null,r),$Ee(o)&&(A7(o,r,this.callSetDisabledState),r.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);LEe(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&VEe(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zL(this.form,this),this._oldForm&&gC(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(ye(BL,10),ye(F7,10),ye($L,8))},e.\u0275dir=Nn({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&_t("submit",function(u){return o.onSubmit(u)})("reset",function(){return o.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[cf([GEe]),bs,Ia]});let t=e;return t})();var WEe={provide:qv,useExisting:Eu(()=>WL)},WL=(()=>{let e=class e extends qv{set isDisabled(r){}constructor(r,i,o,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.name=null,this.update=new wn,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=qEe(this,s)}ngOnChanges(r){this._added||this._setUpControl(),UEe(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return MEe(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(ye(wp,13),ye(BL,10),ye(F7,10),ye(UL,10),ye(tY,8))},e.\u0275dir=Nn({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[cf([WEe]),bs,Ia]});let t=e;return t})();var KEe=(()=>{let e=class e{constructor(){this._validator=lC}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):lC,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Nn({type:e,features:[Ia]});let t=e;return t})();var QEe={provide:BL,useExisting:Eu(()=>KL),multi:!0};var KL=(()=>{let e=class e extends KEe{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Al,this.createValidator=r=>L7}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=_l(e)))(o||e)}})(),e.\u0275dir=Nn({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&Ts("required",o._enabled?"":null)},inputs:{required:"required"},features:[cf([QEe]),bs]});let t=e;return t})();var nY=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=ut({imports:[zEe]});let t=e;return t})(),VL=class extends Ep{constructor(e,n,r){super(qL(n),HL(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){J7(this,!1,e),e.forEach((r,i)=>{X7(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){var n;return(n=this.at(e))!=null?n:null}};function M7(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var rY=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let o=this._reduceControls(r),s={};return M7(i)?s=i:i!==null&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Hv(o,s)}record(r,i=null){let o=this._reduceControls(r);return new LL(o,i)}control(r,i,o){let s={};return this.useNonNullable?(M7(i)?s=i:(s.validators=i,s.asyncValidators=o),new Bv(r,Xe(X({},s),{nonNullable:!0}))):new Bv(r,i,o)}array(r,i,o){let s=r.map(u=>this._createControl(u));return new VL(s,i,o)}_reduceControls(r){let i={};return Object.keys(r).forEach(o=>{i[o]=this._createControl(r[o])}),i}_createControl(r){if(r instanceof Bv)return r;if(r instanceof Ep)return r;if(Array.isArray(r)){let i=r[0],o=r.length>1?r[1]:null,s=r.length>2?r[2]:null;return this.control(i,o,s)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _C=(()=>{let e=class e{static withConfig(r){var i;return{ngModule:e,providers:[{provide:$L,useValue:(i=r.callSetDisabledState)!=null?i:vC}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=ut({imports:[nY]});let t=e;return t})(),wC=(()=>{let e=class e{static withConfig(r){var i,o;return{ngModule:e,providers:[{provide:tY,useValue:(i=r.warnOnNgModelWithFormControl)!=null?i:"always"},{provide:$L,useValue:(o=r.callSetDisabledState)!=null?o:vC}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=ut({imports:[nY]});let t=e;return t})();var oY=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},XEe=function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){var o=t[n++],s=t[n++],u=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{var o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},JEe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,u=s?t[i+1]:0,c=i+2<t.length,h=c?t[i+2]:0,f=o>>2,p=(o&3)<<4|u>>4,m=(u&15)<<2|h>>6,v=h&63;c||(v=64,s||(m=64)),r.push(n[f],n[p],n[m],n[v])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oY(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XEe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length,u=s?n[t.charAt(i)]:0;++i;var c=i<t.length,h=c?n[t.charAt(i)]:64;++i;var f=i<t.length,p=f?n[t.charAt(i)]:64;if(++i,o==null||u==null||h==null||p==null)throw Error();var m=o<<2|u>>4;if(r.push(m),h!==64){var v=u<<4&240|h>>2;if(r.push(v),p!==64){var _=h<<6&192|p;r.push(_)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ZEe=function(t){var e=oY(t);return JEe.encodeByteArray(e,!0)},iY=function(t){return ZEe(t).replace(/\./g,"")};var sY=function(){function t(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){e.resolve=n,e.reject=r})}return t.prototype.wrapCallback=function(e){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof e=="function"&&(n.promise.catch(function(){}),e.length===1?e(r):e(r,i))}},t}();function aY(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Td({iss:"https://securetoken.google.com/"+r,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[iY(JSON.stringify(n)),iY(JSON.stringify(s)),u].join(".")}function rc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uY(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rc())}function eIe(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cY(){var t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lY(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hY(){return rc().indexOf("Electron/")>=0}function dY(){var t=rc();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fY(){return rc().indexOf("MSAppHost/")>=0}function pY(){return!eIe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var tIe="FirebaseError",nIe=function(t){we(e,t);function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name=tIe,Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,rIe.prototype.create),o}return e}(Error),rIe=function(){function t(e,n,r){this.service=e,this.serviceName=n,this.errors=r}return t.prototype.create=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},o=this.service+"/"+e,s=this.errors[e],u=s?iIe(s,i):"Error",c=this.serviceName+": "+u+" ("+o+").",h=new nIe(o,c,i);return h},t}();function iIe(t,e){return t.replace(oIe,function(n,r){var i=e[r];return i!=null?String(i):"<"+r+"?>"})}var oIe=/\{\$([^}]+)}/g;var ZBe=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(e,n){n||(n=0);var r=this.W_;if(typeof e=="string")for(var i=0;i<16;i++)r[i]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(var i=0;i<16;i++)r[i]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(var i=16;i<80;i++){var o=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(o<<1|o>>>31)&4294967295}for(var s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4],p,m,i=0;i<80;i++){i<40?i<20?(p=h^u&(c^h),m=1518500249):(p=u^c^h,m=1859775393):i<60?(p=u&c|h&(u|c),m=2400959708):(p=u^c^h,m=3395469782);var o=(s<<5|s>>>27)+p+f+m+r[i]&4294967295;f=h,h=c,c=(u<<30|u>>>2)&4294967295,u=s,s=o}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(e,n){if(e!=null){n===void 0&&(n=e.length);for(var r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}},t.prototype.digest=function(){var e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);for(var i=0,r=0;r<5;r++)for(var o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e},t}();var eqe=function(){function t(e,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){e(r)}).catch(function(i){r.error(i)})}return t.prototype.next=function(e){this.forEachObserver(function(n){n.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(n){n.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},t.prototype.subscribe=function(e,n,r){var i=this,o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sIe(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=QL),o.error===void 0&&(o.error=QL),o.complete===void 0&&(o.complete=QL);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?o.error(i.finalError):o.complete()}catch{}}),this.observers.push(o),s},t.prototype.unsubscribeOne=function(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,e)},t.prototype.sendOne=function(e,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[e]!==void 0)try{n(r.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})},t.prototype.close=function(e){var n=this;this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},t}();function sIe(t,e){if(typeof t!="object"||t===null)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&typeof t[i]=="function")return!0}return!1}function QL(){}var tqe=4*60*60*1e3;function Tn(t){return t&&t._delegate?t._delegate:t}function Go(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}var fh,aIe=[],wt=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(wt||{}),uIe={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},cIe=wt.INFO,lIe=(fh={},fh[wt.DEBUG]="log",fh[wt.VERBOSE]="log",fh[wt.INFO]="info",fh[wt.WARN]="warn",fh[wt.ERROR]="error",fh),hIe=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=new Date().toISOString(),o=lIe[e];if(o)console[o].apply(console,Go(["["+i+"]  "+t.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}},gY=function(){function t(e){this.name=e,this._logLevel=cIe,this._logHandler=hIe,this._userLogHandler=null,aIe.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in wt))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(e){this._logLevel=typeof e=="string"?uIe[e]:e},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Go([this,wt.DEBUG],e)),this._logHandler.apply(this,Go([this,wt.DEBUG],e))},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Go([this,wt.VERBOSE],e)),this._logHandler.apply(this,Go([this,wt.VERBOSE],e))},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Go([this,wt.INFO],e)),this._logHandler.apply(this,Go([this,wt.INFO],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Go([this,wt.WARN],e)),this._logHandler.apply(this,Go([this,wt.WARN],e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Go([this,wt.ERROR],e)),this._logHandler.apply(this,Go([this,wt.ERROR],e))},t}();var iV=function(t,e){return iV=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},iV(t,e)};function dIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");iV(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function DY(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var fIe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ce,yV=yV||{},Le=fIe||self;function DC(){}function oV(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Zv(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function pIe(t){return Object.prototype.hasOwnProperty.call(t,YL)&&t[YL]||(t[YL]=++gIe)}var YL="closure_uid_"+(1e9*Math.random()>>>0),gIe=0;function mIe(t,e,n){return t.call.apply(t.bind,arguments)}function yIe(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function mr(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?mr=mIe:mr=yIe,mr.apply(null,arguments)}function EC(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function vr(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,i,o){for(var s=Array(arguments.length-2),u=2;u<arguments.length;u++)s[u-2]=arguments[u];return e.prototype[i].apply(r,s)}}function ic(){this.s=this.s,this.o=this.o}var vIe=0,_Ie={};ic.prototype.s=!1;ic.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),vIe!=0)){var t=pIe(this);delete _Ie[t]}};ic.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var AY=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},xY=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=typeof t=="string"?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function wIe(t){e:{for(var e=hbe,n=t.length,r=typeof t=="string"?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function mY(t){return Array.prototype.concat.apply([],arguments)}function vV(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function AC(t){return/^[\s\xa0]*$/.test(t)}var yY=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Wr(t,e){return t.indexOf(e)!=-1}function XL(t,e){return t<e?-1:t>e?1:0}var Kr;e:{if(JL=Le.navigator,JL&&(ZL=JL.userAgent,ZL)){Kr=ZL;break e}Kr=""}var JL,ZL;function _V(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function NY(t){var e={};for(var n in t)e[n]=t[n];return e}var vY="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function RY(t,e){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(var o=0;o<vY.length;o++)n=vY[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function wV(t){return wV[" "](t),t}wV[" "]=DC;function EIe(t){var e=TIe;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var IIe=Wr(Kr,"Opera"),bp=Wr(Kr,"Trident")||Wr(Kr,"MSIE"),MY=Wr(Kr,"Edge"),sV=MY||bp,PY=Wr(Kr,"Gecko")&&!(Wr(Kr.toLowerCase(),"webkit")&&!Wr(Kr,"Edge"))&&!(Wr(Kr,"Trident")||Wr(Kr,"MSIE"))&&!Wr(Kr,"Edge"),bIe=Wr(Kr.toLowerCase(),"webkit")&&!Wr(Kr,"Edge");function kY(){var t=Le.document;return t?t.documentMode:void 0}var xC;e:{if(IC="",bC=function(){var t=Kr;if(PY)return/rv:([^\);]+)(\)|;)/.exec(t);if(MY)return/Edge\/([\d\.]+)/.exec(t);if(bp)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(bIe)return/WebKit\/(\S+)/.exec(t);if(IIe)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),bC&&(IC=bC?bC[1]:""),bp&&(TC=kY(),TC!=null&&TC>parseFloat(IC))){xC=String(TC);break e}xC=IC}var IC,bC,TC,TIe={};function CIe(){return EIe(function(){for(var t=0,e=yY(String(xC)).split("."),n=yY("9").split("."),r=Math.max(e.length,n.length),i=0;t==0&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o[0].length==0&&s[0].length==0)break;t=XL(o[1].length==0?0:parseInt(o[1],10),s[1].length==0?0:parseInt(s[1],10))||XL(o[2].length==0,s[2].length==0)||XL(o[2],s[2]),o=o[3],s=s[3]}while(t==0)}return 0<=t})}var aV;Le.document&&bp?(eV=kY(),aV=eV||parseInt(xC,10)||void 0):aV=void 0;var eV,SIe=aV,DIe=function(){if(!Le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Le.addEventListener("test",DC,e),Le.removeEventListener("test",DC,e)}catch{}return t}();function Rr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Rr.prototype.h=function(){this.defaultPrevented=!0};function Kv(t,e){if(Rr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(PY){e:{try{wV(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:AIe[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Kv.Z.h.call(this)}}vr(Kv,Rr);var AIe={2:"touch",3:"pen",4:"mouse"};Kv.prototype.h=function(){Kv.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var e_="closure_listenable_"+(1e6*Math.random()|0),xIe=0;function NIe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++xIe,this.ca=this.fa=!1}function FC(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function LC(t){this.src=t,this.g={},this.h=0}LC.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=cV(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):(e=new NIe(e,this.src,o,!!r,i),e.fa=n,t.push(e)),e};function uV(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=AY(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(FC(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function cV(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}var EV="closure_lm_"+(1e6*Math.random()|0),tV={};function OY(t,e,n,r,i){if(r&&r.once)return LY(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)OY(t,e[o],n,r,i);return null}return n=TV(n),t&&t[e_]?t.N(e,n,Zv(r)?!!r.capture:!!r,i):FY(t,e,n,!1,r,i)}function FY(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Zv(i)?!!i.capture:!!i,u=bV(t);if(u||(t[EV]=u=new LC(t)),n=u.add(e,n,r,s,o),n.proxy)return n;if(r=RIe(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)DIe||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(UY(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function RIe(){function t(n){return e.call(t.src,t.listener,n)}var e=MIe;return t}function LY(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)LY(t,e[o],n,r,i);return null}return n=TV(n),t&&t[e_]?t.O(e,n,Zv(r)?!!r.capture:!!r,i):FY(t,e,n,!0,r,i)}function VY(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)VY(t,e[o],n,r,i);else r=Zv(r)?!!r.capture:!!r,n=TV(n),t&&t[e_]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=cV(o,n,r,i),-1<n&&(FC(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=bV(t))&&(e=t.g[e.toString()],t=-1,e&&(t=cV(e,n,r,i)),(n=-1<t?e[t]:null)&&IV(n))}function IV(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[e_])uV(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(UY(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bV(e))?(uV(n,t),n.h==0&&(n.src=null,e[EV]=null)):FC(t)}}}function UY(t){return t in tV?tV[t]:tV[t]="on"+t}function MIe(t,e){if(t.ca)t=!0;else{e=new Kv(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&IV(t),t=n.call(r,e)}return t}function bV(t){return t=t[EV],t instanceof LC?t:null}var nV="__closure_events_fn_"+(1e9*Math.random()>>>0);function TV(t){return typeof t=="function"?t:(t[nV]||(t[nV]=function(e){return t.handleEvent(e)}),t[nV])}function nr(){ic.call(this),this.i=new LC(this),this.P=this,this.I=null}vr(nr,ic);nr.prototype[e_]=!0;nr.prototype.removeEventListener=function(t,e,n,r){VY(this,t,e,n,r)};function yr(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new Rr(e,t);else if(e instanceof Rr)e.target=e.target||t;else{var i=e;e=new Rr(r,t),RY(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=CC(s,r,!0,e)&&i}if(s=e.g=t,i=CC(s,r,!0,e)&&i,i=CC(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=CC(s,r,!1,e)&&i}nr.prototype.M=function(){if(nr.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)FC(n[r]);delete t.g[e],t.h--}}this.I=null};nr.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};nr.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function CC(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var u=s.listener,c=s.ia||s.src;s.fa&&uV(t.i,s),i=u.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var CV=Le.JSON.stringify;function PIe(){var t=BY,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var kIe=function(){function t(){this.h=this.g=null}return t.prototype.add=function(e,n){var r=jY.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r},t}(),jY=new(function(){function t(e,n){this.i=e,this.j=n,this.h=0,this.g=null}return t.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},t}())(function(){return new OIe},function(t){return t.reset()}),OIe=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(e,n){this.h=e,this.g=n,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function FIe(t){Le.setTimeout(function(){throw t},0)}function SV(t,e){lV||LIe(),hV||(lV(),hV=!0),BY.add(t,e)}var lV;function LIe(){var t=Le.Promise.resolve(void 0);lV=function(){t.then(VIe)}}var hV=!1,BY=new kIe;function VIe(){for(var t;t=PIe();){try{t.h.call(t.g)}catch(n){FIe(n)}var e=jY;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}hV=!1}function VC(t,e){nr.call(this),this.h=t||1,this.g=e||Le,this.j=mr(this.kb,this),this.l=Date.now()}vr(VC,nr);ce=VC.prototype;ce.da=!1;ce.S=null;ce.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),yr(this,"tick"),this.da&&(DV(this),this.start()))}};ce.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function DV(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}ce.M=function(){VC.Z.M.call(this),DV(this),delete this.g};function AV(t,e,n){if(typeof t=="function")n&&(t=mr(t,n));else if(t&&typeof t.handleEvent=="function")t=mr(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Le.setTimeout(t,e||0)}function qY(t){t.g=AV(function(){t.g=null,t.i&&(t.i=!1,qY(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}var UIe=function(t){dIe(e,t);function e(n,r){var i=t.call(this)||this;return i.m=n,i.j=r,i.h=null,i.i=!1,i.g=null,i}return e.prototype.l=function(n){this.h=arguments,this.g?this.i=!0:qY(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(ic);function Qv(t){ic.call(this),this.h=t,this.g={}}vr(Qv,ic);var _Y=[];function HY(t,e,n,r){Array.isArray(n)||(n&&(_Y[0]=n.toString()),n=_Y);for(var i=0;i<n.length;i++){var o=OY(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function $Y(t){_V(t.g,function(e,n){this.g.hasOwnProperty(n)&&IV(e)},t),t.g={}}Qv.prototype.M=function(){Qv.Z.M.call(this),$Y(this)};Qv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function UC(){this.g=!0}UC.prototype.Aa=function(){this.g=!1};function jIe(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",u=o.split("&"),c=0;c<u.length;c++){var h=u[c].split("=");if(1<h.length){var f=h[0];h=h[1];var p=f.split("_");s=2<=p.length&&p[1]=="type"?s+(f+"="+h+"&"):s+(f+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function BIe(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Ip(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+HIe(t,n)+(r?" "+r:"")})}function qIe(t,e){t.info(function(){return"TIMEOUT: "+e})}UC.prototype.info=function(){};function HIe(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return CV(n)}catch{return e}}var vh={},wY=null;function jC(){return wY=wY||new nr}vh.Ma="serverreachability";function zY(t){Rr.call(this,vh.Ma,t)}vr(zY,Rr);function Yv(t){var e=jC();yr(e,new zY(e,t))}vh.STAT_EVENT="statevent";function GY(t,e){Rr.call(this,vh.STAT_EVENT,t),this.stat=e}vr(GY,Rr);function Qr(t){var e=jC();yr(e,new GY(e,t))}vh.Na="timingevent";function WY(t,e){Rr.call(this,vh.Na,t),this.size=e}vr(WY,Rr);function t_(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Le.setTimeout(function(){t()},e)}var BC={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},KY={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function xV(){}xV.prototype.h=null;function EY(t){return t.h||(t.h=t.i())}function QY(){}var n_={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function NV(){Rr.call(this,"d")}vr(NV,Rr);function RV(){Rr.call(this,"c")}vr(RV,Rr);var dV;function qC(){}vr(qC,xV);qC.prototype.g=function(){return new XMLHttpRequest};qC.prototype.i=function(){return{}};dV=new qC;function r_(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Qv(this),this.P=$Ie,t=sV?125:void 0,this.W=new VC(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new YY}function YY(){this.i=null,this.g="",this.h=!1}var $Ie=45e3,fV={},NC={};ce=r_.prototype;ce.setTimeout=function(t){this.P=t};function pV(t,e,n){t.K=1,t.v=$C(Ha(e)),t.s=n,t.U=!0,XY(t,null)}function XY(t,e){t.F=Date.now(),i_(t),t.A=Ha(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),iX(n.h,"t",r),t.C=0,n=t.l.H,t.h=new YY,t.g=TX(t.l,n?e:null,!t.s),0<t.O&&(t.L=new UIe(mr(t.Ia,t,t.g),t.O)),HY(t.V,t.g,"readystatechange",t.gb),e=t.H?NY(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Yv(1),jIe(t.j,t.u,t.A,t.m,t.X,t.s)}ce.gb=function(t){t=t.target;var e=this.L;e&&qa(t)==3?e.l():this.Ia(t)};ce.Ia=function(t){try{if(t==this.g)e:{var e=qa(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(e!=3||sV||this.g&&(this.h.h||this.g.ga()||CY(this.g)))){this.I||e!=4||n==7||(n==8||0>=r?Yv(3):Yv(2)),HC(this);var i=this.g.ba();this.N=i;t:if(JY(this)){var o=CY(this.g);t="";var s=o.length,u=qa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ph(this),Gv(this);var c="";break t}this.h.i=new Le.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:u&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=i==200,BIe(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){t:{if(this.g){var h,f=this.g;if((h=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!AC(h)){var p=h;break t}}p=null}if(i=p)Ip(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gV(this,i);else{this.i=!1,this.o=3,Qr(12),ph(this),Gv(this);break e}}this.U?(ZY(this,e,c),sV&&this.i&&e==3&&(HY(this.V,this.W,"tick",this.fb),this.W.start())):(Ip(this.j,this.m,c,null),gV(this,c)),e==4&&ph(this),this.i&&!this.I&&(e==4?wX(this.l,this):(this.i=!1,i_(this)))}else i==400&&0<c.indexOf("Unknown SID")?(this.o=3,Qr(12)):(this.o=0,Qr(13)),ph(this),Gv(this)}}}catch{}finally{}};function JY(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function ZY(t,e,n){for(var r=!0,i;!t.I&&t.C<n.length;)if(i=zIe(t,n),i==NC){e==4&&(t.o=4,Qr(14),r=!1),Ip(t.j,t.m,null,"[Incomplete Response]");break}else if(i==fV){t.o=4,Qr(15),Ip(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ip(t.j,t.m,i,null),gV(t,i);JY(t)&&i!=NC&&i!=fV&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Qr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),jV(e),e.L=!0,Qr(11))):(Ip(t.j,t.m,n,"[Invalid Chunked Response]"),ph(t),Gv(t))}ce.fb=function(){if(this.g){var t=qa(this.g),e=this.g.ga();this.C<e.length&&(HC(this),ZY(this,t,e),this.i&&t!=4&&i_(this))}};function zIe(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?NC:(n=Number(e.substring(n,r)),isNaN(n)?fV:(r+=1,r+n>e.length?NC:(e=e.substr(r,n),t.C=r+n,e)))}ce.cancel=function(){this.I=!0,ph(this)};function i_(t){t.Y=Date.now()+t.P,eX(t,t.P)}function eX(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=t_(mr(t.eb,t),e)}function HC(t){t.B&&(Le.clearTimeout(t.B),t.B=null)}ce.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(qIe(this.j,this.A),this.K!=2&&(Yv(3),Qr(17)),ph(this),this.o=2,Gv(this)):eX(this,this.Y-t)};function Gv(t){t.l.G==0||t.I||wX(t.l,t)}function ph(t){HC(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,DV(t.W),$Y(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function gV(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||mV(n.i,t))){if(n.I=t.N,!t.J&&mV(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)kC(n),WC(n);else break e;UV(n),Qr(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=t_(mr(n.ab,n),6e3));if(1>=aX(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else gh(n,11)}else if((t.J||n.g==t)&&kC(n),!AC(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],n.G==2)if(o[0]=="c"){n.J=o[1],n.la=o[2];var s=o[3];s!=null&&(n.ma=s,n.h.info("VER="+n.ma));var u=o[4];u!=null&&(n.za=u,n.h.info("SVER="+n.za));var c=o[5];c!=null&&typeof c=="number"&&0<c&&(r=1.5*c,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var h=t.g;if(h){var f=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(f){var p=r.i;!p.g&&(Wr(f,"spdy")||Wr(f,"quic")||Wr(f,"h2"))&&(p.j=p.l,p.g=new Set,p.h&&(kV(p,p.h),p.h=null))}if(r.D){var m=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.sa=m,Xt(r.F,r.D,m))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var v=t;if(r.oa=bX(r,r.H?r.la:null,r.W),v.J){uX(r.i,v);var _=v,E=r.K;E&&_.setTimeout(E),_.B&&(HC(_),i_(_)),r.g=v}else vX(r);0<n.l.length&&KC(n)}else o[0]!="stop"&&o[0]!="close"||gh(n,7);else n.G==3&&(o[0]=="stop"||o[0]=="close"?o[0]=="stop"?gh(n,7):VV(n):o[0]!="noop"&&n.j&&n.j.wa(o),n.A=0)}}Yv(4)}catch{}}function GIe(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(oV(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function MV(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(oV(t)||typeof t=="string")xY(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(oV(t)||typeof t=="string"){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=GIe(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Tp(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Tp)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}ce=Tp.prototype;ce.R=function(){PV(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};ce.T=function(){return PV(this),this.g.concat()};function PV(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];mh(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)r=t.g[e],mh(i,r)||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}ce.get=function(t,e){return mh(this.h,t)?this.h[t]:e};ce.set=function(t,e){mh(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};ce.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};function mh(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var tX=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function WIe(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function yh(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof yh){this.g=e!==void 0?e:t.g,RC(this,t.j),this.s=t.s,MC(this,t.i),PC(this,t.m),this.l=t.l,e=t.h;var n=new Xv;n.i=e.i,e.g&&(n.g=new Tp(e.g),n.h=e.h),IY(this,n),this.o=t.o}else t&&(n=String(t).match(tX))?(this.g=!!e,RC(this,n[1]||"",!0),this.s=Wv(n[2]||""),MC(this,n[3]||"",!0),PC(this,n[4]),this.l=Wv(n[5]||"",!0),IY(this,n[6]||"",!0),this.o=Wv(n[7]||"")):(this.g=!!e,this.h=new Xv(null,this.g))}yh.prototype.toString=function(){var t=[],e=this.j;e&&t.push(zv(e,bY,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(zv(e,bY,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(zv(n,n.charAt(0)=="/"?JIe:XIe,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",zv(n,ebe)),t.join("")};function Ha(t){return new yh(t)}function RC(t,e,n){t.j=n?Wv(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function MC(t,e,n){t.i=n?Wv(e,!0):e}function PC(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function IY(t,e,n){e instanceof Xv?(t.h=e,tbe(t.h,t.g)):(n||(e=zv(e,ZIe)),t.h=new Xv(e,t.g))}function Xt(t,e,n){t.h.set(e,n)}function $C(t){return Xt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function KIe(t){return t instanceof yh?Ha(t):new yh(t,void 0)}function QIe(t,e,n,r){var i=new yh(null,void 0);return t&&RC(i,t),e&&MC(i,e),n&&PC(i,n),r&&(i.l=r),i}function Wv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function zv(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,YIe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function YIe(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var bY=/[#\/\?@]/g,XIe=/[#\?:]/g,JIe=/[#\?]/g,ZIe=/[#\?@]/g,ebe=/#/g;function Xv(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function oc(t){t.g||(t.g=new Tp,t.h=0,t.i&&WIe(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ce=Xv.prototype;ce.add=function(t,e){oc(this),this.i=null,t=Cp(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function nX(t,e){oc(t),e=Cp(t,e),mh(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,mh(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&PV(t)))}function rX(t,e){return oc(t),e=Cp(t,e),mh(t.g.h,e)}ce.forEach=function(t,e){oc(this),this.g.forEach(function(n,r){xY(n,function(i){t.call(e,i,r,this)},this)},this)};ce.T=function(){oc(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n};ce.R=function(t){oc(this);var e=[];if(typeof t=="string")rX(this,t)&&(e=mY(e,this.g.get(Cp(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=mY(e,t[n])}return e};ce.set=function(t,e){return oc(this),this.i=null,t=Cp(this,t),rX(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ce.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function iX(t,e,n){nX(t,e),0<n.length&&(t.i=null,t.g.set(Cp(t,e),vV(n)),t.h+=n.length)}ce.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;r[o]!==""&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};function Cp(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function tbe(t,e){e&&!t.j&&(oc(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(nX(this,r),iX(this,i,n))},t)),t.j=e}var nbe=function(){function t(e,n){this.h=e,this.g=n}return t}();function oX(t){this.l=t||rbe,Le.PerformanceNavigationTiming?(t=Le.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Le.g&&Le.g.Ea&&Le.g.Ea()&&Le.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var rbe=10;function sX(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function aX(t){return t.h?1:t.g?t.g.size:0}function mV(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function kV(t,e){t.g?t.g.add(e):t.h=e}function uX(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}oX.prototype.cancel=function(){var t,e;if(this.i=cX(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){try{for(var n=DY(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}};function cX(t){var e,n;if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){var r=t.i;try{for(var i=DY(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return vV(t.i)}function OV(){}OV.prototype.stringify=function(t){return Le.JSON.stringify(t,void 0)};OV.prototype.parse=function(t){return Le.JSON.parse(t,void 0)};function ibe(){this.g=new OV}function obe(t,e,n){var r=n||"";try{MV(t,function(i,o){var s=i;Zv(i)&&(s=CV(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function sbe(t,e){var n=new UC;if(Le.Image){var r=new Image;r.onload=EC(SC,n,r,"TestLoadImage: loaded",!0,e),r.onerror=EC(SC,n,r,"TestLoadImage: error",!1,e),r.onabort=EC(SC,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=EC(SC,n,r,"TestLoadImage: timeout",!1,e),Le.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function SC(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function o_(t){this.l=t.$b||null,this.j=t.ib||!1}vr(o_,xV);o_.prototype.g=function(){return new zC(this.l,this.j)};o_.prototype.i=function(t){return function(){return t}}({});function zC(t,e){nr.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=FV,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vr(zC,nr);var FV=0;ce=zC.prototype;ce.open=function(t,e){if(this.readyState!=FV)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Jv(this)};ce.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Le).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};ce.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,s_(this)),this.readyState=FV};ce.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Jv(this)),this.g&&(this.readyState=3,Jv(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lX(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function lX(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}ce.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?s_(this):Jv(this),this.readyState==3&&lX(this)}};ce.Ua=function(t){this.g&&(this.response=this.responseText=t,s_(this))};ce.Ta=function(t){this.g&&(this.response=t,s_(this))};ce.ha=function(){this.g&&s_(this)};function s_(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Jv(t)}ce.setRequestHeader=function(t,e){this.v.append(t,e)};ce.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ce.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Jv(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(zC.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var abe=Le.JSON.parse;function Fn(t){nr.call(this),this.headers=new Tp,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hX,this.K=this.L=!1}vr(Fn,nr);var hX="",ube=/^https?$/i,cbe=["POST","PUT"];ce=Fn.prototype;ce.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():dV.g(),this.C=this.u?EY(this.u):EY(dV),this.g.onreadystatechange=mr(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){TY(this,o);return}t=n||"";var i=new Tp(this.headers);r&&MV(r,function(o,s){i.set(s,o)}),r=wIe(i.T()),n=Le.FormData&&t instanceof Le.FormData,!(0<=AY(cbe,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,s){this.g.setRequestHeader(s,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pX(this),0<this.B&&((this.K=lbe(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mr(this.pa,this)):this.A=AV(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){TY(this,o)}};function lbe(t){return bp&&CIe()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function hbe(t){return t.toLowerCase()=="content-type"}ce.pa=function(){typeof yV<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yr(this,"timeout"),this.abort(8))};function TY(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,dX(t),GC(t)}function dX(t){t.D||(t.D=!0,yr(t,"complete"),yr(t,"error"))}ce.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,yr(this,"complete"),yr(this,"abort"),GC(this))};ce.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),GC(this,!0)),Fn.Z.M.call(this)};ce.Fa=function(){this.s||(this.F||this.v||this.l?fX(this):this.cb())};ce.cb=function(){fX(this)};function fX(t){if(t.h&&typeof yV<"u"&&(!t.C[1]||qa(t)!=4||t.ba()!=2)){if(t.v&&qa(t)==4)AV(t.Fa,0,t);else if(yr(t,"readystatechange"),qa(t)==4){t.h=!1;try{var e=t.ba();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=e===0){var o=String(t.H).match(tX)[1]||null;if(!o&&Le.self&&Le.self.location){var s=Le.self.location.protocol;o=s.substr(0,s.length-1)}i=!ube.test(o?o.toLowerCase():"")}r=i}if(r)yr(t,"complete"),yr(t,"success");else{t.m=6;try{var u=2<qa(t)?t.g.statusText:""}catch{u=""}t.j=u+" ["+t.ba()+"]",dX(t)}}finally{GC(t)}}}}function GC(t,e){if(t.g){pX(t);var n=t.g,r=t.C[0]?DC:null;t.g=null,t.C=null,e||yr(t,"ready");try{n.onreadystatechange=r}catch{}}}function pX(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Le.clearTimeout(t.A),t.A=null)}function qa(t){return t.g?t.g.readyState:0}ce.ba=function(){try{return 2<qa(this)?this.g.status:-1}catch{return-1}};ce.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};ce.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),abe(e)}};function CY(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case hX:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}ce.Da=function(){return this.m};ce.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function dbe(t){var e="";return _V(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function LV(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=dbe(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Xt(t,e,n))}function $v(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function gX(t){this.za=0,this.l=[],this.h=new UC,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=$v("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=$v("baseRetryDelayMs",5e3,t),this.$a=$v("retryDelaySeedMs",1e4,t),this.Ya=$v("forwardChannelMaxRetries",2,t),this.ra=$v("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new oX(t&&t.concurrentRequestLimit),this.Ca=new ibe,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}ce=gX.prototype;ce.ma=8;ce.G=1;function VV(t){if(mX(t),t.G==3){var e=t.V++,n=Ha(t.F);Xt(n,"SID",t.J),Xt(n,"RID",e),Xt(n,"TYPE","terminate"),a_(t,n),e=new r_(t,t.h,e,void 0),e.K=2,e.v=$C(Ha(n)),n=!1,Le.navigator&&Le.navigator.sendBeacon&&(n=Le.navigator.sendBeacon(e.v.toString(),"")),!n&&Le.Image&&(new Image().src=e.v,n=!0),n||(e.g=TX(e.l,null),e.g.ea(e.v)),e.F=Date.now(),i_(e)}IX(t)}ce.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function WC(t){t.g&&(jV(t),t.g.cancel(),t.g=null)}function mX(t){WC(t),t.u&&(Le.clearTimeout(t.u),t.u=null),kC(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Le.clearTimeout(t.m),t.m=null)}function rV(t,e){t.l.push(new nbe(t.Za++,e)),t.G==3&&KC(t)}function KC(t){sX(t.i)||t.m||(t.m=!0,SV(t.Ha,t),t.C=0)}function fbe(t,e){return aX(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=t_(mr(t.Ha,t,e),EX(t,t.C)),t.C++,!0)}ce.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new r_(this,this.h,t,void 0),n=this.s;if(this.P&&(n?(n=NY(n),RY(n,this.P)):n=this.P),this.o===null&&(e.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){t:{var o=this.l[i];if("__data__"in o.g&&(o=o.g.__data__,typeof o=="string")){o=o.length;break t}o=void 0}if(o===void 0)break;if(r+=o,4096<r){r=i;break e}if(r===4096||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=yX(this,e,r),i=Ha(this.F),Xt(i,"RID",t),Xt(i,"CVER",22),this.D&&Xt(i,"X-HTTP-Session-Id",this.D),a_(this,i),this.o&&n&&LV(i,this.o,n),kV(this.i,e),this.Ra&&Xt(i,"TYPE","init"),this.ja?(Xt(i,"$req",r),Xt(i,"SID","null"),e.$=!0,pV(e,i,null)):pV(e,i,r),this.G=2}}else this.G==3&&(t?SY(this,t):this.l.length==0||sX(this.i)||SY(this))};function SY(t,e){var n;e?n=e.m:n=t.V++;var r=Ha(t.F);Xt(r,"SID",t.J),Xt(r,"RID",n),Xt(r,"AID",t.U),a_(t,r),t.o&&t.s&&LV(r,t.o,t.s),n=new r_(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=yX(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),kV(t.i,n),pV(n,r,e)}function a_(t,e){t.j&&MV({},function(n,r){Xt(e,r,n)})}function yX(t,e,n){n=Math.min(t.l.length,n);var r=t.j?mr(t.j.Oa,t.j,t):null;e:for(var i=t.l,o=-1;;){var s=["count="+n];o==-1?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,c=0;c<n;c++){var h=i[c].h,f=i[c].g;if(h-=o,0>h)o=Math.max(0,i[c].h-100),u=!1;else try{obe(f,s,"req"+h+"_")}catch{r&&r(f)}}if(u){r=s.join("&");break e}}return t=t.l.splice(0,n),e.D=t,r}function vX(t){t.g||t.u||(t.Y=1,SV(t.Ga,t),t.A=0)}function UV(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=t_(mr(t.Ga,t),EX(t,t.A)),t.A++,!0)}ce.Ga=function(){if(this.u=null,_X(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=t_(mr(this.bb,this),t)}};ce.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qr(10),WC(this),_X(this))};function jV(t){t.B!=null&&(Le.clearTimeout(t.B),t.B=null)}function _X(t){t.g=new r_(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=Ha(t.oa);Xt(e,"RID","rpc"),Xt(e,"SID",t.J),Xt(e,"CI",t.N?"0":"1"),Xt(e,"AID",t.U),a_(t,e),Xt(e,"TYPE","xmlhttp"),t.o&&t.s&&LV(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=$C(Ha(e)),n.s=null,n.U=!0,XY(n,t)}ce.ab=function(){this.v!=null&&(this.v=null,WC(this),UV(this),Qr(19))};function kC(t){t.v!=null&&(Le.clearTimeout(t.v),t.v=null)}function wX(t,e){var n=null;if(t.g==e){kC(t),jV(t),t.g=null;var r=2}else if(mV(t.i,e))n=e.D,uX(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=jC(),yr(r,new WY(r,n,e,i)),KC(t)}else vX(t);else if(i=e.o,i==3||i==0&&0<t.I||!(r==1&&fbe(t,e)||r==2&&UV(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:gh(t,5);break;case 4:gh(t,10);break;case 3:gh(t,6);break;default:gh(t,2)}}}function EX(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function gh(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=mr(t.jb,t);n||(n=new yh("//www.google.com/images/cleardot.gif"),Le.location&&Le.location.protocol=="http"||RC(n,"https"),$C(n)),sbe(n.toString(),r)}else Qr(2);t.G=0,t.j&&t.j.va(e),IX(t),mX(t)}ce.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Qr(2)):(this.h.info("Failed to ping google.com"),Qr(1))};function IX(t){t.G=0,t.I=-1,t.j&&((cX(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,vV(t.l),t.l.length=0),t.j.ua())}function bX(t,e,n){var r=KIe(n);if(r.i!="")e&&MC(r,e+"."+r.i),PC(r,r.m);else{var i=Le.location;r=QIe(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&_V(t.aa,function(o,s){Xt(r,s,o)}),e=t.D,n=t.sa,e&&n&&Xt(r,e,n),Xt(r,"VER",t.ma),a_(t,r),r}function TX(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new Fn(new o_({ib:!0})):new Fn(t.qa),e.L=t.H,e}function CX(){}ce=CX.prototype;ce.xa=function(){};ce.wa=function(){};ce.va=function(){};ce.ua=function(){};ce.Oa=function(){};function OC(){if(bp&&!(10<=Number(SIe)))throw Error("Environmental error: no available transport.")}OC.prototype.g=function(t,e){return new ki(t,e)};function ki(t,e){nr.call(this),this.g=new gX(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!AC(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!AC(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Sp(this)}vr(ki,nr);ki.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),SV(mr(t.hb,t,e))),Qr(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=bX(t,null,t.W),KC(t)};ki.prototype.close=function(){VV(this.g)};ki.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,rV(this.g,e)}else this.v?(e={},e.__data__=CV(t),rV(this.g,e)):rV(this.g,t)};ki.prototype.M=function(){this.g.j=null,delete this.j,VV(this.g),delete this.g,ki.Z.M.call(this)};function SX(t){NV.call(this);var e=t.__sm__;if(e){e:{for(var n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}vr(SX,NV);function DX(){RV.call(this),this.status=1}vr(DX,RV);function Sp(t){this.g=t}vr(Sp,CX);Sp.prototype.xa=function(){yr(this.g,"a")};Sp.prototype.wa=function(t){yr(this.g,new SX(t))};Sp.prototype.va=function(t){yr(this.g,new DX(t))};Sp.prototype.ua=function(){yr(this.g,"b")};OC.prototype.createWebChannel=OC.prototype.g;ki.prototype.send=ki.prototype.u;ki.prototype.open=ki.prototype.m;ki.prototype.close=ki.prototype.close;BC.NO_ERROR=0;BC.TIMEOUT=8;BC.HTTP_ERROR=6;KY.COMPLETE="complete";QY.EventType=n_;n_.OPEN="a";n_.CLOSE="b";n_.ERROR="c";n_.MESSAGE="d";nr.prototype.listen=nr.prototype.N;Fn.prototype.listenOnce=Fn.prototype.O;Fn.prototype.getLastError=Fn.prototype.La;Fn.prototype.getLastErrorCode=Fn.prototype.Da;Fn.prototype.getStatus=Fn.prototype.ba;Fn.prototype.getResponseJson=Fn.prototype.Qa;Fn.prototype.getResponseText=Fn.prototype.ga;Fn.prototype.send=Fn.prototype.ea;var AX=function(){return new OC},xX=function(){return jC()},QC=BC,NX=KY,RX=vh,BV={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},MX=o_,u_=QY,PX=Fn;var Vi=function(){function t(e,n){var r=this;this.previousValue=e,n&&(n.sequenceNumberHandler=function(i){return r.t(i)},this.i=function(i){return n.writeSequenceNumber(i)})}return t.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},t.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},t}();Vi.o=-1;var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=function(t){function e(n,r){var i=this;return(i=t.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return we(e,t),e}(Error),Wo=new gY("@firebase/firestore");function GV(){return Wo.logLevel}function Z(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Wo.logLevel<=wt.DEBUG){var r=e.map(s2);Wo.debug.apply(Wo,Rt(["Firestore (8.10.0): "+t],r))}}function Un(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Wo.logLevel<=wt.ERROR){var r=e.map(s2);Wo.error.apply(Wo,Rt(["Firestore (8.10.0): "+t],r))}}function sS(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Wo.logLevel<=wt.WARN){var r=e.map(s2);Wo.warn.apply(Wo,Rt(["Firestore (8.10.0): "+t],r))}}function s2(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}var e}function _e(t){t===void 0&&(t="Unexpected state");var e="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+t;throw Un(e),new Error(e)}function xe(t,e){t||_e()}function oe(t,e){return t}function pbe(t){var e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var BJ=function(){function t(){}return t.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";r.length<20;)for(var i=pbe(40),o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length));return r},t}();function at(t,e){return t<e?-1:t>e?1:0}function Pp(t,e,n){return t.length===e.length&&t.every(function(r,i){return n(r,e[i])})}function qJ(t){return t+"\0"}var Xr=function(){function t(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)},t.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),We=function(){function t(e){this.timestamp=e}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Xr(0,0))},t.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},t.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function kX(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ah(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HJ(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var $J=function(){function t(e,n,r){n===void 0?n=0:n>e.length&&_e(),r===void 0?r=e.length-n:r>e.length-n&&_e(),this.segments=e,this.offset=n,this.len=r}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return t.comparator(this,e)===0},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(r){n.push(r)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(e){return this.segments[this.offset+e]},t.prototype.isEmpty=function(){return this.length===0},t.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0},t.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0},t.prototype.forEach=function(e){for(var n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(e,n){for(var r=Math.min(e.length,n.length),i=0;i<r;i++){var o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0},t}(),mt=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return we(e,t),e.prototype.construct=function(n,r,i){return new e(n,r,i)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=[],o=0,s=n;o<s.length;o++){var u=s[o];if(u.indexOf("//")>=0)throw new $(k.INVALID_ARGUMENT,"Invalid segment ("+u+"). Paths must not contain // in them.");i.push.apply(i,u.split("/").filter(function(c){return c.length>0}))}return new e(i)},e.emptyPath=function(){return new e([])},e}($J),gbe=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qo=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return we(e,t),e.prototype.construct=function(n,r,i){return new e(n,r,i)},e.isValidIdentifier=function(n){return gbe.test(n)},e.prototype.canonicalString=function(){return this.toArray().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(n)||(n="`"+n+"`"),n}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(n){for(var r=[],i="",o=0,s=function(){if(i.length===0)throw new $(k.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},u=!1;o<n.length;){var c=n[o];if(c==="\\"){if(o+1===n.length)throw new $(k.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var h=n[o+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new $(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=h,o+=2}else c==="`"?(u=!u,o++):c!=="."||u?(i+=c,o++):(s(),o++)}if(s(),u)throw new $(k.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new e(r)},e.emptyPath=function(){return new e([])},e}($J),kp=function(){function t(e){this.fields=e,e.sort(Qo.comparator)}return t.prototype.covers=function(e){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].isPrefixOf(e))return!0;return!1},t.prototype.isEqual=function(e){return Pp(this.fields,e.fields,function(n,r){return n.isEqual(r)})},t}(),Jr=function(){function t(e){this.binaryString=e}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(e))},t.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},t.prototype.toUint8Array=function(){return function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(e){return at(this.binaryString,e.binaryString)},t.prototype.isEqual=function(e){return this.binaryString===e.binaryString},t}();Jr.EMPTY_BYTE_STRING=new Jr("");var mbe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mc(t){if(xe(!!t),typeof t=="string"){var e=0,n=mbe.exec(t);if(xe(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vn(t.seconds),nanos:Vn(t.nanos)}}function Vn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Op(t){return typeof t=="string"?Jr.fromBase64String(t):Jr.fromUint8Array(t)}function a2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function zJ(t){var e=t.mapValue.fields.__previous_value__;return a2(e)?zJ(e):e}function p_(t){var e=mc(t.mapValue.fields.__local_write_time__.timestampValue);return new Xr(e.seconds,e.nanos)}function xh(t){return t==null}function aS(t){return t===0&&1/t==-1/0}function GJ(t){return typeof t=="number"&&Number.isInteger(t)&&!aS(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ie=function(){function t(e){this.path=e}return t.fromPath=function(e){return new t(mt.fromString(e))},t.fromName=function(e){return new t(mt.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},t.prototype.isEqual=function(e){return e!==null&&mt.comparator(this.path,e.path)===0},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(e,n){return mt.comparator(e.path,n.path)},t.isDocumentKey=function(e){return e.length%2==0},t.fromSegments=function(e){return new t(new mt(e.slice()))},t}();function Th(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?a2(t)?4:10:_e()}function Qs(t,e){var n=Th(t);if(n!==Th(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return p_(t).isEqual(p_(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var o=mc(r.timestampValue),s=mc(i.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Op(r.bytesValue).isEqual(Op(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Vn(r.geoPointValue.latitude)===Vn(i.geoPointValue.latitude)&&Vn(r.geoPointValue.longitude)===Vn(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Vn(r.integerValue)===Vn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var o=Vn(r.doubleValue),s=Vn(i.doubleValue);return o===s?aS(o)===aS(s):isNaN(o)&&isNaN(s)}return!1}(t,e);case 9:return Pp(t.arrayValue.values||[],e.arrayValue.values||[],Qs);case 10:return function(r,i){var o=r.mapValue.fields||{},s=i.mapValue.fields||{};if(kX(o)!==kX(s))return!1;for(var u in o)if(o.hasOwnProperty(u)&&(s[u]===void 0||!Qs(o[u],s[u])))return!1;return!0}(t,e);default:return _e()}}function g_(t,e){return(t.values||[]).find(function(n){return Qs(n,e)})!==void 0}function Fp(t,e){var n=Th(t),r=Th(e);if(n!==r)return at(n,r);switch(n){case 0:return 0;case 1:return at(t.booleanValue,e.booleanValue);case 2:return function(i,o){var s=Vn(i.integerValue||i.doubleValue),u=Vn(o.integerValue||o.doubleValue);return s<u?-1:s>u?1:s===u?0:isNaN(s)?isNaN(u)?0:-1:1}(t,e);case 3:return OX(t.timestampValue,e.timestampValue);case 4:return OX(p_(t),p_(e));case 5:return at(t.stringValue,e.stringValue);case 6:return function(i,o){var s=Op(i),u=Op(o);return s.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){for(var s=i.split("/"),u=o.split("/"),c=0;c<s.length&&c<u.length;c++){var h=at(s[c],u[c]);if(h!==0)return h}return at(s.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){var s=at(Vn(i.latitude),Vn(o.latitude));return s!==0?s:at(Vn(i.longitude),Vn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){for(var s=i.values||[],u=o.values||[],c=0;c<s.length&&c<u.length;++c){var h=Fp(s[c],u[c]);if(h)return h}return at(s.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){var s=i.fields||{},u=Object.keys(s),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(var f=0;f<u.length&&f<h.length;++f){var p=at(u[f],h[f]);if(p!==0)return p;var m=Fp(s[u[f]],c[h[f]]);if(m!==0)return m}return at(u.length,h.length)}(t.mapValue,e.mapValue);default:throw _e()}}function OX(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return at(t,e);var n=mc(t),r=mc(e),i=at(n.seconds,r.seconds);return i!==0?i:at(n.nanos,r.nanos)}function u2(t){return WV(t)}function WV(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){var i=mc(r);return"time("+i.seconds+","+i.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Op(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ie.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(r){for(var i="[",o=!0,s=0,u=r.values||[];s<u.length;s++)o?o=!1:i+=",",i+=WV(u[s]);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){for(var i="{",o=!0,s=0,u=Object.keys(r.fields||{}).sort();s<u.length;s++){var c=u[s];o?o=!1:i+=",",i+=c+":"+WV(r.fields[c])}return i+"}"}(t.mapValue):_e();var e,n}function uS(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function KV(t){return!!t&&"integerValue"in t}function c2(t){return!!t&&"arrayValue"in t}function FX(t){return!!t&&"nullValue"in t}function LX(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function eS(t){return!!t&&"mapValue"in t}function h_(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Ah(t.mapValue.fields,function(i,o){return e.mapValue.fields[i]=h_(o)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=h_(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Li=function(){function t(e){this.value=e}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){if(e.isEmpty())return this.value;for(var n=this.value,r=0;r<e.length-1;++r)if(!eS(n=(n.mapValue.fields||{})[e.get(r)]))return null;return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.set=function(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=h_(n)},t.prototype.setAll=function(e){var n=this,r=Qo.emptyPath(),i={},o=[];e.forEach(function(u,c){if(!r.isImmediateParentOf(c)){var h=n.getFieldsMap(r);n.applyChanges(h,i,o),i={},o=[],r=c.popLast()}u?i[c.lastSegment()]=h_(u):o.push(c.lastSegment())});var s=this.getFieldsMap(r);this.applyChanges(s,i,o)},t.prototype.delete=function(e){var n=this.field(e.popLast());eS(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]},t.prototype.isEqual=function(e){return Qs(this.value,e.value)},t.prototype.getFieldsMap=function(e){var n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(var r=0;r<e.length;++r){var i=n.mapValue.fields[e.get(r)];eS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields},t.prototype.applyChanges=function(e,n,r){Ah(n,function(u,c){return e[u]=c});for(var i=0,o=r;i<o.length;i++){var s=o[i];delete e[s]}},t.prototype.clone=function(){return new t(h_(this.value))},t}();function WJ(t){var e=[];return Ah(t.fields,function(n,r){var i=new Qo([n]);if(eS(r)){var o=WJ(r.mapValue).fields;if(o.length===0)e.push(i);else for(var s=0,u=o;s<u.length;s++){var c=u[s];e.push(i.child(c))}}else e.push(i)}),new kp(e)}var Ir=function(){function t(e,n,r,i,o){this.key=e,this.documentType=n,this.version=r,this.data=i,this.documentState=o}return t.newInvalidDocument=function(e){return new t(e,0,We.min(),Li.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Li.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Li.empty(),2)},t.prototype.convertToFoundDocument=function(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this},t.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=Li.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=Li.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return this.documentType!==0},t.prototype.isFoundDocument=function(){return this.documentType===1},t.prototype.isNoDocument=function(){return this.documentType===2},t.prototype.isUnknownDocument=function(){return this.documentType===3},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),ybe=function(t,e,n,r,i,o,s){e===void 0&&(e=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o=null),s===void 0&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function VX(t,e,n,r,i,o,s){return e===void 0&&(e=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o=null),s===void 0&&(s=null),new ybe(t,e,n,r,i,o,s)}function C_(t){var e=oe(t);if(e.h===null){var n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(r){return function(i){return i.field.canonicalString()+i.op.toString()+u2(i.value)}(r)}).join(","),n+="|ob:",n+=e.orderBy.map(function(r){return function(i){return i.field.canonicalString()+i.dir}(r)}).join(","),xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=lS(e.startAt)),e.endAt&&(n+="|ub:",n+=lS(e.endAt)),e.h=n}return e.h}function IS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Cbe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Qs(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jX(t.startAt,e.startAt)&&jX(t.endAt,e.endAt)}function cS(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ui=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).field=n,o.op=r,o.value=i,o}return we(e,t),e.create=function(n,r,i){return n.isKeyField()?r==="in"||r==="not-in"?this.l(n,r,i):new vbe(n,r,i):r==="array-contains"?new Ebe(n,i):r==="in"?new Ibe(n,i):r==="not-in"?new bbe(n,i):r==="array-contains-any"?new Tbe(n,i):new e(n,r,i)},e.l=function(n,r,i){return r==="in"?new _be(n,i):new wbe(n,i)},e.prototype.matches=function(n){var r=n.data.field(this.field);return this.op==="!="?r!==null&&this.m(Fp(r,this.value)):r!==null&&Th(this.value)===Th(r)&&this.m(Fp(r,this.value))},e.prototype.m=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return _e()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),vbe=function(t){function e(n,r,i){var o=this;return(o=t.call(this,n,r,i)||this).key=Ie.fromName(i.referenceValue),o}return we(e,t),e.prototype.matches=function(n){var r=Ie.comparator(n.key,this.key);return this.m(r)},e}(Ui),_be=function(t){function e(n,r){var i=this;return(i=t.call(this,n,"in",r)||this).keys=KJ("in",r),i}return we(e,t),e.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},e}(Ui),wbe=function(t){function e(n,r){var i=this;return(i=t.call(this,n,"not-in",r)||this).keys=KJ("not-in",r),i}return we(e,t),e.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},e}(Ui);function KJ(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return Ie.fromName(r.referenceValue)})}var Ebe=function(t){function e(n,r){return t.call(this,n,"array-contains",r)||this}return we(e,t),e.prototype.matches=function(n){var r=n.data.field(this.field);return c2(r)&&g_(r.arrayValue,this.value)},e}(Ui),Ibe=function(t){function e(n,r){return t.call(this,n,"in",r)||this}return we(e,t),e.prototype.matches=function(n){var r=n.data.field(this.field);return r!==null&&g_(this.value.arrayValue,r)},e}(Ui),bbe=function(t){function e(n,r){return t.call(this,n,"not-in",r)||this}return we(e,t),e.prototype.matches=function(n){if(g_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.data.field(this.field);return r!==null&&!g_(this.value.arrayValue,r)},e}(Ui),Tbe=function(t){function e(n,r){return t.call(this,n,"array-contains-any",r)||this}return we(e,t),e.prototype.matches=function(n){var r=this,i=n.data.field(this.field);return!(!c2(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(o){return g_(r.value.arrayValue,o)})},e}(Ui),m_=function(t,e){this.position=t,this.before=e};function lS(t){return(t.before?"b":"a")+":"+t.position.map(function(e){return u2(e)}).join(",")}var Mp=function(t,e){e===void 0&&(e="asc"),this.field=t,this.dir=e};function Cbe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function UX(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Ie.comparator(Ie.fromName(s.referenceValue),n.key):Fp(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return t.before?r<=0:r<0}function jX(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Qs(t.position[n],e.position[n]))return!1;return!0}var Wa=function(t,e,n,r,i,o,s,u){e===void 0&&(e=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o="F"),s===void 0&&(s=null),u===void 0&&(u=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.p=null,this.T=null,this.startAt,this.endAt};function QJ(t,e,n,r,i,o,s,u){return new Wa(t,e,n,r,i,o,s,u)}function Jp(t){return new Wa(t)}function tS(t){return!xh(t.limit)&&t.limitType==="F"}function hS(t){return!xh(t.limit)&&t.limitType==="L"}function l2(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function h2(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function d2(t){return t.collectionGroup!==null}function Lp(t){var e=oe(t);if(e.p===null){e.p=[];var n=h2(e),r=l2(e);if(n!==null&&r===null)n.isKeyField()||e.p.push(new Mp(n)),e.p.push(new Mp(Qo.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var u=s[o];e.p.push(u),u.field.isKeyField()&&(i=!0)}if(!i){var c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Mp(Qo.keyField(),c))}}}return e.p}function lo(t){var e=oe(t);if(!e.T)if(e.limitType==="F")e.T=VX(e.path,e.collectionGroup,Lp(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Lp(e);r<i.length;r++){var o=i[r],s=o.dir==="desc"?"asc":"desc";n.push(new Mp(o.field,s))}var u=e.endAt?new m_(e.endAt.position,!e.endAt.before):null,c=e.startAt?new m_(e.startAt.position,!e.startAt.before):null;e.T=VX(e.path,e.collectionGroup,n,e.filters,e.limit,u,c)}return e.T}function YJ(t,e,n){return new Wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function S_(t,e){return IS(lo(t),lo(e))&&t.limitType===e.limitType}function XJ(t){return C_(lo(t))+"|lt:"+t.limitType}function QV(t){return"Query(target="+function(e){var n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map(function(r){return(i=r).field.canonicalString()+" "+i.op+" "+u2(i.value);var i}).join(", ")+"]"),xh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map(function(r){return function(i){return i.field.canonicalString()+" ("+i.dir+")"}(r)}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+lS(e.startAt)),e.endAt&&(n+=", endAt: "+lS(e.endAt)),"Target("+n+")"}(lo(t))+"; limitType="+t.limitType+")"}function D_(t,e){return e.isFoundDocument()&&function(n,r){var i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Ie.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(var i=0,o=n.explicitOrderBy;i<o.length;i++){var s=o[i];if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1}return!0}(t,e)&&function(n,r){for(var i=0,o=n.filters;i<o.length;i++)if(!o[i].matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!UX(n.startAt,Lp(n),r))&&(!n.endAt||!UX(n.endAt,Lp(n),r))}(t,e)}function JJ(t){return function(e,n){for(var r=!1,i=0,o=Lp(t);i<o.length;i++){var s=o[i],u=Sbe(s,e,n);if(u!==0)return u;r=r||s.field.isKeyField()}return 0}}function Sbe(t,e,n){var r=t.field.isKeyField()?Ie.comparator(e.key,n.key):function(i,o,s){var u=o.data.field(i),c=s.data.field(i);return u!==null&&c!==null?Fp(u,c):_e()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e()}}function ZJ(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aS(e)?"-0":e}}function eZ(t){return{integerValue:""+t}}function tZ(t,e){return GJ(e)?eZ(e):ZJ(t,e)}var bS=function(){this._=void 0};function Dbe(t,e,n){return t instanceof Vp?function(r,i){var o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ch?rZ(t,e):t instanceof Sh?iZ(t,e):function(r,i){var o=nZ(r,i),s=BX(o)+BX(r.A);return KV(o)&&KV(r.A)?eZ(s):ZJ(r.R,s)}(t,e)}function Abe(t,e,n){return t instanceof Ch?rZ(t,e):t instanceof Sh?iZ(t,e):n}function nZ(t,e){return t instanceof Up?KV(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}var Vp=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return we(e,t),e}(bS),Ch=function(t){function e(n){var r=this;return(r=t.call(this)||this).elements=n,r}return we(e,t),e}(bS);function rZ(t,e){for(var n=oZ(e),r=function(s){n.some(function(u){return Qs(u,s)})||n.push(s)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Sh=function(t){function e(n){var r=this;return(r=t.call(this)||this).elements=n,r}return we(e,t),e}(bS);function iZ(t,e){for(var n=oZ(e),r=function(s){n=n.filter(function(u){return!Qs(u,s)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Up=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).R=n,i.A=r,i}return we(e,t),e}(bS);function BX(t){return Vn(t.integerValue||t.doubleValue)}function oZ(t){return c2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var A_=function(t,e){this.field=t,this.transform=e},xbe=function(t,e){this.version=t,this.transformResults=e},kr=function(){function t(e,n){this.updateTime=e,this.exists=n}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},t}();function nS(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var TS=function(){};function Nbe(t,e,n){t instanceof x_?function(r,i,o){var s=r.value.clone(),u=$X(r.fieldTransforms,i,o.transformResults);s.setAll(u),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(t,e,n):t instanceof vc?function(r,i,o){if(nS(r.precondition,i)){var s=$X(r.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(sZ(r)),u.setAll(s),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}else i.convertToUnknownDocument(o.version)}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function YV(t,e,n){t instanceof x_?function(r,i,o){if(nS(r.precondition,i)){var s=r.value.clone(),u=zX(r.fieldTransforms,o,i);s.setAll(u),i.convertToFoundDocument(HX(i),s).setHasLocalMutations()}}(t,e,n):t instanceof vc?function(r,i,o){if(nS(r.precondition,i)){var s=zX(r.fieldTransforms,o,i),u=i.data;u.setAll(sZ(r)),u.setAll(s),i.convertToFoundDocument(HX(i),u).setHasLocalMutations()}}(t,e,n):function(r,i){nS(r.precondition,i)&&i.convertToNoDocument(We.min())}(t,e)}function Rbe(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),u=nZ(o.transform,s||null);u!=null&&(n==null&&(n=Li.empty()),n.set(o.field,u))}return n||null}function qX(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Pp(n,r,function(i,o){return function(s,u){return s.field.isEqual(u.field)&&function(c,h){return c instanceof Ch&&h instanceof Ch||c instanceof Sh&&h instanceof Sh?Pp(c.elements,h.elements,Qs):c instanceof Up&&h instanceof Up?Qs(c.A,h.A):c instanceof Vp&&h instanceof Vp}(s.transform,u.transform)}(i,o)})}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function HX(t){return t.isFoundDocument()?t.version:We.min()}var x_=function(t){function e(n,r,i,o){o===void 0&&(o=[]);var s=this;return(s=t.call(this)||this).key=n,s.value=r,s.precondition=i,s.fieldTransforms=o,s.type=0,s}return we(e,t),e}(TS),vc=function(t){function e(n,r,i,o,s){s===void 0&&(s=[]);var u=this;return(u=t.call(this)||this).key=n,u.data=r,u.fieldMask=i,u.precondition=o,u.fieldTransforms=s,u.type=1,u}return we(e,t),e}(TS);function sZ(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function $X(t,e,n){var r=new Map;xe(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=e.data.field(o.field);r.set(o.field,Abe(s,u,n[i]))}return r}function zX(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],u=s.transform,c=n.data.field(s.field);r.set(s.field,Dbe(u,c,e))}return r}var Ln,dt,N_=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).key=n,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return we(e,t),e}(TS),f2=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).key=n,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return we(e,t),e}(TS),Mbe=function(t){this.count=t};function aZ(t){switch(t){case k.OK:return _e();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return _e()}}function uZ(t){if(t===void 0)return Un("GRPC error has no .code"),k.UNKNOWN;switch(t){case Ln.OK:return k.OK;case Ln.CANCELLED:return k.CANCELLED;case Ln.UNKNOWN:return k.UNKNOWN;case Ln.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Ln.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Ln.INTERNAL:return k.INTERNAL;case Ln.UNAVAILABLE:return k.UNAVAILABLE;case Ln.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Ln.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Ln.NOT_FOUND:return k.NOT_FOUND;case Ln.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Ln.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Ln.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Ln.ABORTED:return k.ABORTED;case Ln.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Ln.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Ln.DATA_LOSS:return k.DATA_LOSS;default:return _e()}}(dt=Ln||(Ln={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";var Fr=function(){function t(e,n){this.comparator=e,this.root=n||cc.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cc.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cc.BLACK,null,null))},t.prototype.get=function(e){for(var n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},t.prototype.indexOf=function(e){for(var n=0,r=this.root;!r.isEmpty();){var i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},t.prototype.forEach=function(e){this.inorderTraversal(function(n,r){return e(n,r),!1})},t.prototype.toString=function(){var e=[];return this.inorderTraversal(function(n,r){return e.push(n+":"+r),!1}),"{"+e.join(", ")+"}"},t.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},t.prototype.getIterator=function(){return new YC(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(e){return new YC(this.root,e,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new YC(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(e){return new YC(this.root,e,this.comparator,!0)},t}(),YC=function(){function t(e,n,r,i){this.isReverse=i,this.nodeStack=[];for(var o=1;!e.isEmpty();)if(o=n?r(e.key,n):1,i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return t.prototype.getNext=function(){var e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(this.nodeStack.length===0)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},t}(),cc=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=r!=null?r:t.RED,this.left=i!=null?i:t.EMPTY,this.right=o!=null?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,o!=null?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},t.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(e,n,r){var i=this,o=r(e,i.key);return(i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},t.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},t.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)},t.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();var e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)},t}();cc.EMPTY=null,cc.RED=!0,cc.BLACK=!1,cc.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw _e()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw _e()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw _e()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw _e()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw _e()},enumerable:!1,configurable:!0}),t.prototype.copy=function(e,n,r,i,o){return this},t.prototype.insert=function(e,n,r){return new cc(e,n)},t.prototype.remove=function(e,n){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(e){return!1},t.prototype.reverseTraversal=function(e){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Qn=function(){function t(e){this.comparator=e,this.data=new Fr(this.comparator)}return t.prototype.has=function(e){return this.data.get(e)!==null},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return this.data.indexOf(e)},t.prototype.forEach=function(e){this.data.inorderTraversal(function(n,r){return e(n),!1})},t.prototype.forEachInRange=function(e,n){for(var r=this.data.getIteratorFrom(e[0]);r.hasNext();){var i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}},t.prototype.forEachWhile=function(e,n){var r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return},t.prototype.firstAfterOrEqual=function(e){var n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null},t.prototype.getIterator=function(){return new GX(this.data.getIterator())},t.prototype.getIteratorFrom=function(e){return new GX(this.data.getIteratorFrom(e))},t.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},t.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(e){var n=this;return n.size<e.size&&(n=e,e=this),e.forEach(function(r){n=n.add(r)}),n},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0},t.prototype.toArray=function(){var e=[];return this.forEach(function(n){e.push(n)}),e},t.prototype.toString=function(){var e=[];return this.forEach(function(n){return e.push(n)}),"SortedSet("+e.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),GX=function(){function t(e){this.iter=e}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Pbe=new Fr(Ie.comparator);function co(){return Pbe}var kbe=new Fr(Ie.comparator);function XV(){return kbe}var Obe=new Fr(Ie.comparator);function cZ(){return Obe}var Fbe=new Qn(Ie.comparator);function At(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Fbe,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Lbe=new Qn(at);function CS(){return Lbe}var p2=function(){function t(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,g2.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(We.min(),r,CS(),co(),At())},t}(),g2=function(){function t(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Jr.EMPTY_BYTE_STRING,n,At(),At(),At())},t}(),rS=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},lZ=function(t,e){this.targetId=t,this.V=e},hZ=function(t,e,n,r){n===void 0&&(n=Jr.EMPTY_BYTE_STRING),r===void 0&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},WX=function(){function t(){this.S=0,this.D=QX(),this.C=Jr.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},t.prototype.M=function(){var e=At(),n=At(),r=At();return this.D.forEach(function(i,o){switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:_e()}}),new g2(this.C,this.N,e,n,r)},t.prototype.L=function(){this.k=!1,this.D=QX()},t.prototype.B=function(e,n){this.k=!0,this.D=this.D.insert(e,n)},t.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),Vbe=function(){function t(e){this.W=e,this.G=new Map,this.H=co(),this.J=KX(),this.Y=new Qn(at)}return t.prototype.X=function(e){for(var n=0,r=e.v;n<r.length;n++){var i=r[n];e.P&&e.P.isFoundDocument()?this.Z(i,e.P):this.tt(i,e.key,e.P)}for(var o=0,s=e.removedTargetIds;o<s.length;o++)i=s[o],this.tt(i,e.key,e.P)},t.prototype.et=function(e){var n=this;this.forEachTarget(e,function(r){var i=n.nt(r);switch(e.state){case 0:n.st(r)&&i.O(e.resumeToken);break;case 1:i.K(),i.F||i.L(),i.O(e.resumeToken);break;case 2:i.K(),i.F||n.removeTarget(r);break;case 3:n.st(r)&&(i.j(),i.O(e.resumeToken));break;case 4:n.st(r)&&(n.it(r),i.O(e.resumeToken));break;default:_e()}})},t.prototype.forEachTarget=function(e,n){var r=this;e.targetIds.length>0?e.targetIds.forEach(n):this.G.forEach(function(i,o){r.st(o)&&n(o)})},t.prototype.rt=function(e){var n=e.targetId,r=e.V.count,i=this.ot(n);if(i){var o=i.target;if(cS(o))if(r===0){var s=new Ie(o.path);this.tt(n,s,Ir.newNoDocument(s,We.min()))}else xe(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}},t.prototype.ut=function(e){var n=this,r=new Map;this.G.forEach(function(s,u){var c=n.ot(u);if(c){if(s.current&&cS(c.target)){var h=new Ie(c.target.path);n.H.get(h)!==null||n.at(u,h)||n.tt(u,h,Ir.newNoDocument(h,e))}s.$&&(r.set(u,s.M()),s.L())}});var i=At();this.J.forEach(function(s,u){var c=!0;u.forEachWhile(function(h){var f=n.ot(h);return!f||f.purpose===2||(c=!1,!1)}),c&&(i=i.add(s))});var o=new p2(e,r,this.Y,this.H,i);return this.H=co(),this.J=KX(),this.Y=new Qn(at),o},t.prototype.Z=function(e,n){if(this.st(e)){var r=this.at(e,n.key)?2:0;this.nt(e).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(e))}},t.prototype.tt=function(e,n,r){if(this.st(e)){var i=this.nt(e);this.at(e,n)?i.B(n,1):i.q(n),this.J=this.J.insert(n,this.ht(n).delete(e)),r&&(this.H=this.H.insert(n,r))}},t.prototype.removeTarget=function(e){this.G.delete(e)},t.prototype.ct=function(e){var n=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size},t.prototype.U=function(e){this.nt(e).U()},t.prototype.nt=function(e){var n=this.G.get(e);return n||(n=new WX,this.G.set(e,n)),n},t.prototype.ht=function(e){var n=this.J.get(e);return n||(n=new Qn(at),this.J=this.J.insert(e,n)),n},t.prototype.st=function(e){var n=this.ot(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n},t.prototype.ot=function(e){var n=this.G.get(e);return n&&n.F?null:this.W.lt(e)},t.prototype.it=function(e){var n=this;this.G.set(e,new WX),this.W.getRemoteKeysForTarget(e).forEach(function(r){n.tt(e,r,null)})},t.prototype.at=function(e,n){return this.W.getRemoteKeysForTarget(e).has(n)},t}();function KX(){return new Fr(Ie.comparator)}function QX(){return new Fr(Ie.comparator)}var Ube={asc:"ASCENDING",desc:"DESCENDING"},jbe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bbe=function(t,e){this.databaseId=t,this.I=e};function y_(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function dZ(t,e){return t.I?e.toBase64():e.toUint8Array()}function qbe(t,e){return y_(t,e.toTimestamp())}function wr(t){return xe(!!t),We.fromTimestamp(function(e){var n=mc(e);return new Xr(n.seconds,n.nanos)}(t))}function m2(t,e){return function(n){return new mt(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function fZ(t){var e=mt.fromString(t);return xe(EZ(e)),e}function v_(t,e){return m2(t.databaseId,e.path)}function Ws(t,e){var n=fZ(e);if(n.get(1)!==t.databaseId.projectId)throw new $(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ie(gZ(n))}function JV(t,e){return m2(t.databaseId,e)}function pZ(t){var e=fZ(t);return e.length===4?mt.emptyPath():gZ(e)}function __(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gZ(t){return xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function YX(t,e,n){return{name:v_(t,e),fields:n.value.mapValue.fields}}function mZ(t,e,n){var r=Ws(t,e.name),i=wr(e.updateTime),o=new Li({mapValue:{fields:e.fields}}),s=Ir.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function dS(t,e){var n;if(e instanceof x_)n={update:YX(t,e.key,e.value)};else if(e instanceof N_)n={delete:v_(t,e.key)};else if(e instanceof vc)n={update:YX(t,e.key,e.data),updateMask:Wbe(e.fieldMask)};else{if(!(e instanceof f2))return _e();n={verify:v_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(r){return function(i,o){var s=o.transform;if(s instanceof Vp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof Ch)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof Sh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof Up)return{fieldPath:o.field.canonicalString(),increment:s.A};throw _e()}(0,r)})),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:qbe(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:_e()}(t,e.precondition)),n}function XX(t,e){var n=e.currentDocument?function(h){return h.updateTime!==void 0?kr.updateTime(wr(h.updateTime)):h.exists!==void 0?kr.exists(h.exists):kr.none()}(e.currentDocument):kr.none(),r=e.updateTransforms?e.updateTransforms.map(function(h){return function(f,p){var m=null;if("setToServerValue"in p)xe(p.setToServerValue==="REQUEST_TIME"),m=new Vp;else if("appendMissingElements"in p){var v=p.appendMissingElements.values||[];m=new Ch(v)}else if("removeAllFromArray"in p){var _=p.removeAllFromArray.values||[];m=new Sh(_)}else"increment"in p?m=new Up(f,p.increment):_e();var E=Qo.fromServerFormat(p.fieldPath);return new A_(E,m)}(t,h)}):[];if(e.update){e.update.name;var i=Ws(t,e.update.name),o=new Li({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(h){var f=h.fieldPaths||[];return new kp(f.map(function(p){return Qo.fromServerFormat(p)}))}(e.updateMask);return new vc(i,o,s,n,r)}return new x_(i,o,n,r)}if(e.delete){var u=Ws(t,e.delete);return new N_(u,n)}if(e.verify){var c=Ws(t,e.verify);return new f2(c,n)}return _e()}function yZ(t,e){return{documents:[JV(t,e.path)]}}function vZ(t,e){var n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=JV(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=JV(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(u){if(u.length!==0){var c=u.map(function(h){return function(f){if(f.op==="=="){if(LX(f.value))return{unaryFilter:{field:Dp(f.field),op:"IS_NAN"}};if(FX(f.value))return{unaryFilter:{field:Dp(f.field),op:"IS_NULL"}}}else if(f.op==="!="){if(LX(f.value))return{unaryFilter:{field:Dp(f.field),op:"IS_NOT_NAN"}};if(FX(f.value))return{unaryFilter:{field:Dp(f.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dp(f.field),op:$be(f.op),value:f.value}}}(h)});return c.length===1?c[0]:{compositeFilter:{op:"AND",filters:c}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(u){if(u.length!==0)return u.map(function(c){return function(h){return{field:Dp(h.field),direction:Hbe(h.dir)}}(c)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(u,c){return u.I||xh(c)?c:{value:c}}(t,e.limit);return s!==null&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=JX(e.startAt)),e.endAt&&(n.structuredQuery.endAt=JX(e.endAt)),n}function _Z(t){var e=pZ(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){xe(r===1);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=wZ(n.where));var u=[];n.orderBy&&(u=n.orderBy.map(function(p){return function(m){return new Mp(Rp(m.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(p)}));var c=null;n.limit&&(c=function(p){var m;return xh(m=typeof p=="object"?p.value:p)?null:m}(n.limit));var h=null;n.startAt&&(h=ZX(n.startAt));var f=null;return n.endAt&&(f=ZX(n.endAt)),QJ(e,i,u,s,c,"F",h,f)}function wZ(t){return t?t.unaryFilter!==void 0?[Gbe(t)]:t.fieldFilter!==void 0?[zbe(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(function(e){return wZ(e)}).reduce(function(e,n){return e.concat(n)}):_e():[]}function JX(t){return{before:t.before,values:t.position}}function ZX(t){var e=!!t.before,n=t.values||[];return new m_(n,e)}function Hbe(t){return Ube[t]}function $be(t){return jbe[t]}function Dp(t){return{fieldPath:t.canonicalString()}}function Rp(t){return Qo.fromServerFormat(t.fieldPath)}function zbe(t){return Ui.create(Rp(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return _e()}}(t.fieldFilter.op),t.fieldFilter.value)}function Gbe(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Rp(t.unaryFilter.field);return Ui.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Rp(t.unaryFilter.field);return Ui.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Rp(t.unaryFilter.field);return Ui.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Rp(t.unaryFilter.field);return Ui.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return _e()}}function Wbe(t){var e=[];return t.fields.forEach(function(n){return e.push(n.canonicalString())}),{fieldPaths:e}}function EZ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Ko(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=eJ(e)),e=Kbe(t.get(n),e);return eJ(e)}function Kbe(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function eJ(t){return t+""}function $a(t){var e=t.length;if(xe(e>=2),e===2)return xe(t.charAt(0)===""&&t.charAt(1)===""),mt.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&_e(),t.charAt(s+1)){case"":var u=t.substring(o,s),c=void 0;i.length===0?c=u:(c=i+=u,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:_e()}o=s+2}return new mt(r)}var Qbe=function(t,e){this.seconds=t,this.nanoseconds=e},Oi=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Oi.store="owner",Oi.key="owner";var fc=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};fc.store="mutationQueues",fc.keyPath="userId";var Gt=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Gt.store="mutations",Gt.keyPath="batchId",Gt.userMutationsIndex="userMutationsIndex",Gt.userMutationsKeyPath=["userId","batchId"];var Mr=function(){function t(){}return t.prefixForUser=function(e){return[e]},t.prefixForPath=function(e,n){return[e,Ko(n)]},t.key=function(e,n,r){return[e,Ko(n),r]},t}();Mr.store="documentMutations",Mr.PLACEHOLDER=new Mr;var Ybe=function(t,e){this.path=t,this.readTime=e},Xbe=function(t,e){this.path=t,this.version=e},pn=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};pn.store="remoteDocuments",pn.readTimeIndex="readTimeIndex",pn.readTimeIndexPath="readTime",pn.collectionReadTimeIndex="collectionReadTimeIndex",pn.collectionReadTimeIndexPath=["parentPath","readTime"];var Gs=function(t){this.byteSize=t};Gs.store="remoteDocumentGlobal",Gs.key="remoteDocumentGlobalKey";var _i=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};_i.store="targets",_i.keyPath="targetId",_i.queryTargetsIndexName="queryTargetsIndex",_i.queryTargetsKeyPath=["canonicalId","targetId"];var Er=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Er.store="targetDocuments",Er.keyPath=["targetId","path"],Er.documentTargetsIndex="documentTargetsIndex",Er.documentTargetsKeyPath=["path","targetId"];var Fi=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Fi.key="targetGlobalKey",Fi.store="targetGlobal";var Ih=function(t,e){this.collectionId=t,this.parent=e};Ih.store="collectionParents",Ih.keyPath=["collectionId","parent"];var za=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};za.store="clientMetadata",za.keyPath="clientId";var jp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};jp.store="bundles",jp.keyPath="bundleId";var Bp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Bp.store="namedQueries",Bp.keyPath="name";var Jbe=Rt(Rt([],Rt(Rt([],Rt(Rt([],Rt(Rt([],[fc.store,Gt.store,Mr.store,pn.store,_i.store,Oi.store,Fi.store,Er.store]),[za.store])),[Gs.store])),[Ih.store])),[jp.store,Bp.store]),IZ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bZ=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},t}(),Or=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},K=function(){function t(e){var n=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return t.prototype.catch=function(e){return this.next(void 0,e)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(i,o){r.nextCallback=function(s){r.wrapSuccess(e,s).next(i,o)},r.catchCallback=function(s){r.wrapFailure(n,s).next(i,o)}})},t.prototype.toPromise=function(){var e=this;return new Promise(function(n,r){e.next(n,r)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(n,r){n(e)})},t.reject=function(e){return new t(function(n,r){r(e)})},t.waitFor=function(e){return new t(function(n,r){var i=0,o=0,s=!1;e.forEach(function(u){++i,u.next(function(){++o,s&&o===i&&n()},function(c){return r(c)})}),s=!0,o===i&&n()})},t.or=function(e){for(var n=t.resolve(!1),r=function(s){n=n.next(function(u){return u?t.resolve(u):s()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(e,n){var r=this,i=[];return e.forEach(function(o,s){i.push(n.call(r,o,s))}),this.waitFor(i)},t}(),TZ=function(){function t(e,n){var r=this;this.action=e,this.transaction=n,this.aborted=!1,this.ft=new Or,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){n.error?r.ft.reject(new d_(e,n.error)):r.ft.resolve()},this.transaction.onerror=function(i){var o=y2(i.target.error);r.ft.reject(new d_(e,o))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new d_(n,o)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(Z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(e){var n=this.transaction.objectStore(e);return new eTe(n)},t}(),qp=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,t._t(rc())===12.2&&Un("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(e){return Z("SimpleDb","Removing database:",e),_h(window.indexedDB.deleteDatabase(e)).toPromise()},t.yt=function(){if(typeof indexedDB>"u")return!1;if(t.gt())return!0;var e=rc(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.Tt)==="YES"},t.It=function(e,n){return e.store(n)},t._t=function(e){var n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},t.Et=function(e){var n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},t.prototype.At=function(e){return V(this,void 0,void 0,function(){var n,r=this;return U(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(Z("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(o,s){var u=indexedDB.open(r.name,r.version);u.onsuccess=function(c){var h=c.target.result;o(h)},u.onblocked=function(){s(new d_(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=function(c){var h=c.target.error;h.name==="VersionError"?s(new $(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s(new d_(e,h))},u.onupgradeneeded=function(c){Z("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',c.oldVersion);var h=c.target.result;r.wt.Rt(h,u.transaction,c.oldVersion,r.version).next(function(){Z("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=i.sent(),i.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(o){return r.bt(o)}),this.db)]}})})},t.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(n){return e(n)})},t.prototype.runTransaction=function(e,n,r,i){return V(this,void 0,void 0,function(){var o,s,u,c,h;return U(this,function(f){switch(f.label){case 0:o=n==="readonly",s=0,u=function(){var p,m,v,_,E;return U(this,function(b){switch(b.label){case 0:++s,b.label=1;case 1:return b.trys.push([1,4,,5]),[4,c.At(e)];case 2:return c.db=b.sent(),p=TZ.open(c.db,e,o?"readonly":"readwrite",r),m=i(p).catch(function(T){return p.abort(T),K.reject(T)}).toPromise(),v={},m.catch(function(){}),[4,p.dt];case 3:return[2,(v.value=(b.sent(),m),v)];case 4:return _=b.sent(),E=_.name!=="FirebaseError"&&s<3,Z("SimpleDb","Transaction failed with error:",_.message,"Retrying:",E),c.close(),E?[3,5]:[2,{value:Promise.reject(_)}];case 5:return[2]}})},c=this,f.label=1;case 1:return[5,u()];case 2:if(typeof(h=f.sent())=="object")return[2,h.value];f.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Zbe=function(){function t(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(e){this.St=e},t.prototype.delete=function(){return _h(this.Pt.delete())},t}(),d_=function(t){function e(n,r){var i=this;return(i=t.call(this,k.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return we(e,t),e}($);function Nh(t){return t.name==="IndexedDbTransactionError"}var eTe=function(){function t(e){this.store=e}return t.prototype.put=function(e,n){var r;return n!==void 0?(Z("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Z("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_h(r)},t.prototype.add=function(e){return Z("SimpleDb","ADD",this.store.name,e,e),_h(this.store.add(e))},t.prototype.get=function(e){var n=this;return _h(this.store.get(e)).next(function(r){return r===void 0&&(r=null),Z("SimpleDb","GET",n.store.name,e,r),r})},t.prototype.delete=function(e){return Z("SimpleDb","DELETE",this.store.name,e),_h(this.store.delete(e))},t.prototype.count=function(){return Z("SimpleDb","COUNT",this.store.name),_h(this.store.count())},t.prototype.Nt=function(e,n){var r=this.cursor(this.options(e,n)),i=[];return this.xt(r,function(o,s){i.push(s)}).next(function(){return i})},t.prototype.kt=function(e,n){Z("SimpleDb","DELETE ALL",this.store.name);var r=this.options(e,n);r.Ft=!1;var i=this.cursor(r);return this.xt(i,function(o,s,u){return u.delete()})},t.prototype.$t=function(e,n){var r;n?r=e:(r={},n=e);var i=this.cursor(r);return this.xt(i,n)},t.prototype.Ot=function(e){var n=this.cursor({});return new K(function(r,i){n.onerror=function(o){var s=y2(o.target.error);i(s)},n.onsuccess=function(o){var s=o.target.result;s?e(s.primaryKey,s.value).next(function(u){u?s.continue():r()}):r()}})},t.prototype.xt=function(e,n){var r=[];return new K(function(i,o){e.onerror=function(s){o(s.target.error)},e.onsuccess=function(s){var u=s.target.result;if(u){var c=new Zbe(u),h=n(u.primaryKey,u.value,c);if(h instanceof K){var f=h.catch(function(p){return c.done(),K.reject(p)});r.push(f)}c.isDone?i():c.Dt===null?u.continue():u.continue(c.Dt)}else i()}}).next(function(){return K.waitFor(r)})},t.prototype.options=function(e,n){var r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}},t.prototype.cursor=function(e){var n="next";if(e.reverse&&(n="prev"),e.index){var r=this.store.index(e.index);return e.Ft?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)},t}();function _h(t){return new K(function(e,n){t.onsuccess=function(r){var i=r.target.result;e(i)},t.onerror=function(r){var i=y2(r.target.error);n(i)}})}var tJ=!1;function y2(t){var e=qp._t(rc());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new $("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return tJ||(tJ=!0,setTimeout(function(){throw r},0)),r}}return t}var nJ=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).Mt=n,i.currentSequenceNumber=r,i}return we(e,t),e}(bZ);function wi(t,e){var n=oe(t);return qp.It(n.Mt,e)}var v2=function(){function t(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return t.prototype.applyToRemoteDocument=function(e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(e.key)&&Nbe(o,e,r[i])}},t.prototype.applyToLocalView=function(e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e.key)&&YV(s,e,this.localWriteTime);for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(e.key)&&YV(s,e,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(e){var n=this;this.mutations.forEach(function(r){var i=e.get(r.key),o=i;n.applyToLocalView(o),i.isValidDocument()||o.convertToNoDocument(We.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(e,n){return e.add(n.key)},At())},t.prototype.isEqual=function(e){return this.batchId===e.batchId&&Pp(this.mutations,e.mutations,function(n,r){return qX(n,r)})&&Pp(this.baseMutations,e.baseMutations,function(n,r){return qX(n,r)})},t}(),tTe=function(){function t(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return t.from=function(e,n,r){xe(e.mutations.length===r.length);for(var i=cZ(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),SS=function(){function t(e,n,r,i,o,s,u){o===void 0&&(o=We.min()),s===void 0&&(s=We.min()),u===void 0&&(u=Jr.EMPTY_BYTE_STRING),this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),CZ=function(t){this.Lt=t};function ZV(t,e){if(e.document)return mZ(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ie.fromSegments(e.noDocument.path),r=$p(e.noDocument.readTime),i=Ir.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Ie.fromSegments(e.unknownDocument.path);return r=$p(e.unknownDocument.version),Ir.newUnknownDocument(o,r)}return _e()}function rJ(t,e,n){var r=_2(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(p,m){return{name:v_(p,m.key),fields:m.data.value.mapValue.fields,updateTime:y_(p,m.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new pn(null,null,o,s,r,i)}if(e.isNoDocument()){var u=e.key.path.toArray(),c=Hp(e.version);return s=e.hasCommittedMutations,new pn(null,new Ybe(u,c),null,s,r,i)}if(e.isUnknownDocument()){var h=e.key.path.toArray(),f=Hp(e.version);return new pn(new Xbe(h,f),null,null,!0,r,i)}return _e()}function _2(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function SZ(t){var e=new Xr(t[0],t[1]);return We.fromTimestamp(e)}function Hp(t){var e=t.toTimestamp();return new Qbe(e.seconds,e.nanoseconds)}function $p(t){var e=new Xr(t.seconds,t.nanoseconds);return We.fromTimestamp(e)}function xp(t,e){for(var n=(e.baseMutations||[]).map(function(c){return XX(t.Lt,c)}),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&e.mutations[r+1].transform!==void 0){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map(function(c){return XX(t.Lt,c)}),u=Xr.fromMillis(e.localWriteTimeMs);return new v2(e.batchId,u,n,s)}function l_(t){var e,n,r=$p(t.readTime),i=t.lastLimboFreeSnapshotVersion!==void 0?$p(t.lastLimboFreeSnapshotVersion):We.min();return t.query.documents!==void 0?(xe((n=t.query).documents.length===1),e=lo(Jp(pZ(n.documents[0])))):e=function(o){return lo(_Z(o))}(t.query),new SS(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Jr.fromBase64String(t.resumeToken))}function DZ(t,e){var n,r=Hp(e.snapshotVersion),i=Hp(e.lastLimboFreeSnapshotVersion);n=cS(e.target)?yZ(t.Lt,e.target):vZ(t.Lt,e.target);var o=e.resumeToken.toBase64();return new _i(e.targetId,C_(e.target),r,o,e.sequenceNumber,i,n)}function w2(t){var e=_Z({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?YJ(e,e.limit,"L"):e}var nTe=function(){function t(){}return t.prototype.getBundleMetadata=function(e,n){return iJ(e).get(n).next(function(r){if(r)return{id:(i=r).bundleId,createTime:$p(i.createTime),version:i.version};var i})},t.prototype.saveBundleMetadata=function(e,n){return iJ(e).put({bundleId:(r=n).id,createTime:Hp(wr(r.createTime)),version:r.version});var r},t.prototype.getNamedQuery=function(e,n){return oJ(e).get(n).next(function(r){if(r)return{name:(i=r).name,query:w2(i.bundledQuery),readTime:$p(i.readTime)};var i})},t.prototype.saveNamedQuery=function(e,n){return oJ(e).put(function(r){return{name:r.name,readTime:Hp(wr(r.readTime)),bundledQuery:r.bundledQuery}}(n))},t}();function iJ(t){return wi(t,jp.store)}function oJ(t){return wi(t,Bp.store)}var rTe=function(){function t(){this.Bt=new E2}return t.prototype.addToCollectionParentIndex=function(e,n){return this.Bt.add(n),K.resolve()},t.prototype.getCollectionParents=function(e,n){return K.resolve(this.Bt.getEntries(n))},t}(),E2=function(){function t(){this.index={}}return t.prototype.add=function(e){var n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qn(mt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o},t.prototype.has=function(e){var n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)},t.prototype.getEntries=function(e){return(this.index[e]||new Qn(mt.comparator)).toArray()},t}(),iTe=function(){function t(){this.qt=new E2}return t.prototype.addToCollectionParentIndex=function(e,n){var r=this;if(!this.qt.has(n)){var i=n.lastSegment(),o=n.popLast();e.addOnCommittedListener(function(){r.qt.add(n)});var s={collectionId:i,parent:Ko(o)};return sJ(e).put(s)}return K.resolve()},t.prototype.getCollectionParents=function(e,n){var r=[],i=IDBKeyRange.bound([n,""],[qJ(n),""],!1,!0);return sJ(e).Nt(i).next(function(o){for(var s=0,u=o;s<u.length;s++){var c=u[s];if(c.collectionId!==n)break;r.push($a(c.parent))}return r})},t}();function sJ(t){return wi(t,Ih.store)}var aJ={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zs=function(){function t(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function AZ(t,e,n){var r=t.store(Gt.store),i=t.store(Mr.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,c=r.$t({range:s},function(_,E,b){return u++,b.delete()});o.push(c.next(function(){xe(u===1)}));for(var h=[],f=0,p=n.mutations;f<p.length;f++){var m=p[f],v=Mr.key(e,m.key.path,n.batchId);o.push(i.delete(v)),h.push(m.key)}return K.waitFor(o).next(function(){return h})}function fS(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw _e();e=t.noDocument}return JSON.stringify(e).length}zs.DEFAULT_COLLECTION_PERCENTILE=10,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zs.DEFAULT=new zs(41943040,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zs.DISABLED=new zs(-1,0,0);var oTe=function(){function t(e,n,r,i){this.userId=e,this.R=n,this.Ut=r,this.referenceDelegate=i,this.Kt={}}return t.Qt=function(e,n,r,i){return xe(e.uid!==""),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(e){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sc(e).$t({index:Gt.userMutationsIndex,range:r},function(i,o,s){n=!1,s.done()}).next(function(){return n})},t.prototype.addMutationBatch=function(e,n,r,i){var o=this,s=Np(e),u=sc(e);return u.add({}).next(function(c){xe(typeof c=="number");for(var h=new v2(c,n,r,i),f=function(T,S,A){var x=A.baseMutations.map(function(N){return dS(T.Lt,N)}),H=A.mutations.map(function(N){return dS(T.Lt,N)});return new Gt(S,A.batchId,A.localWriteTime.toMillis(),x,H)}(o.R,o.userId,h),p=[],m=new Qn(function(T,S){return at(T.canonicalString(),S.canonicalString())}),v=0,_=i;v<_.length;v++){var E=_[v],b=Mr.key(o.userId,E.key.path,c);m=m.add(E.key.path.popLast()),p.push(u.put(f)),p.push(s.put(b,Mr.PLACEHOLDER))}return m.forEach(function(T){p.push(o.Ut.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(function(){o.Kt[c]=h.keys()}),K.waitFor(p).next(function(){return h})})},t.prototype.lookupMutationBatch=function(e,n){var r=this;return sc(e).get(n).next(function(i){return i?(xe(i.userId===r.userId),xp(r.R,i)):null})},t.prototype.jt=function(e,n){var r=this;return this.Kt[n]?K.resolve(this.Kt[n]):this.lookupMutationBatch(e,n).next(function(i){if(i){var o=i.keys();return r.Kt[n]=o,o}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(e,n){var r=this,i=n+1,o=IDBKeyRange.lowerBound([this.userId,i]),s=null;return sc(e).$t({index:Gt.userMutationsIndex,range:o},function(u,c,h){c.userId===r.userId&&(xe(c.batchId>=i),s=xp(r.R,c)),h.done()}).next(function(){return s})},t.prototype.getHighestUnacknowledgedBatchId=function(e){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return sc(e).$t({index:Gt.userMutationsIndex,range:n,reverse:!0},function(i,o,s){r=o.batchId,s.done()}).next(function(){return r})},t.prototype.getAllMutationBatches=function(e){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sc(e).Nt(Gt.userMutationsIndex,r).next(function(i){return i.map(function(o){return xp(n.R,o)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,n){var r=this,i=Mr.prefixForPath(this.userId,n.path),o=IDBKeyRange.lowerBound(i),s=[];return Np(e).$t({range:o},function(u,c,h){var f=u[0],p=u[1],m=u[2],v=$a(p);if(f===r.userId&&n.path.isEqual(v))return sc(e).get(m).next(function(_){if(!_)throw _e();xe(_.userId===r.userId),s.push(xp(r.R,_))});h.done()}).next(function(){return s})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,n){var r=this,i=new Qn(at),o=[];return n.forEach(function(s){var u=Mr.prefixForPath(r.userId,s.path),c=IDBKeyRange.lowerBound(u),h=Np(e).$t({range:c},function(f,p,m){var v=f[0],_=f[1],E=f[2],b=$a(_);v===r.userId&&s.path.isEqual(b)?i=i.add(E):m.done()});o.push(h)}),K.waitFor(o).next(function(){return r.Wt(e,i)})},t.prototype.getAllMutationBatchesAffectingQuery=function(e,n){var r=this,i=n.path,o=i.length+1,s=Mr.prefixForPath(this.userId,i),u=IDBKeyRange.lowerBound(s),c=new Qn(at);return Np(e).$t({range:u},function(h,f,p){var m=h[0],v=h[1],_=h[2],E=$a(v);m===r.userId&&i.isPrefixOf(E)?E.length===o&&(c=c.add(_)):p.done()}).next(function(){return r.Wt(e,c)})},t.prototype.Wt=function(e,n){var r=this,i=[],o=[];return n.forEach(function(s){o.push(sc(e).get(s).next(function(u){if(u===null)throw _e();xe(u.userId===r.userId),i.push(xp(r.R,u))}))}),K.waitFor(o).next(function(){return i})},t.prototype.removeMutationBatch=function(e,n){var r=this;return AZ(e.Mt,this.userId,n).next(function(i){return e.addOnCommittedListener(function(){r.Gt(n.batchId)}),K.forEach(i,function(o){return r.referenceDelegate.markPotentiallyOrphaned(e,o)})})},t.prototype.Gt=function(e){delete this.Kt[e]},t.prototype.performConsistencyCheck=function(e){var n=this;return this.checkEmpty(e).next(function(r){if(!r)return K.resolve();var i=IDBKeyRange.lowerBound(Mr.prefixForUser(n.userId)),o=[];return Np(e).$t({range:i},function(s,u,c){if(s[0]===n.userId){var h=$a(s[1]);o.push(h)}else c.done()}).next(function(){xe(o.length===0)})})},t.prototype.containsKey=function(e,n){return xZ(e,this.userId,n)},t.prototype.zt=function(e){var n=this;return NZ(e).get(this.userId).next(function(r){return r||new fc(n.userId,-1,"")})},t}();function xZ(t,e,n){var r=Mr.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Np(t).$t({range:o,Ft:!0},function(u,c,h){var f=u[0],p=u[1];u[2],f===e&&p===i&&(s=!0),h.done()}).next(function(){return s})}function sc(t){return wi(t,Gt.store)}function Np(t){return wi(t,Mr.store)}function NZ(t){return wi(t,fc.store)}var pS=function(){function t(e){this.Ht=e}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),sTe=function(){function t(e,n){this.referenceDelegate=e,this.R=n}return t.prototype.allocateTargetId=function(e){var n=this;return this.Xt(e).next(function(r){var i=new pS(r.highestTargetId);return r.highestTargetId=i.next(),n.Zt(e,r).next(function(){return r.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next(function(n){return We.fromTimestamp(new Xr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next(function(n){return n.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(e,n,r){var i=this;return this.Xt(e).next(function(o){return o.highestListenSequenceNumber=n,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),n>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=n),i.Zt(e,o)})},t.prototype.addTargetData=function(e,n){var r=this;return this.te(e,n).next(function(){return r.Xt(e).next(function(i){return i.targetCount+=1,r.ee(n,i),r.Zt(e,i)})})},t.prototype.updateTargetData=function(e,n){return this.te(e,n)},t.prototype.removeTargetData=function(e,n){var r=this;return this.removeMatchingKeysForTargetId(e,n.targetId).next(function(){return Ap(e).delete(n.targetId)}).next(function(){return r.Xt(e)}).next(function(i){return xe(i.targetCount>0),i.targetCount-=1,r.Zt(e,i)})},t.prototype.removeTargets=function(e,n,r){var i=this,o=0,s=[];return Ap(e).$t(function(u,c){var h=l_(c);h.sequenceNumber<=n&&r.get(h.targetId)===null&&(o++,s.push(i.removeTargetData(e,h)))}).next(function(){return K.waitFor(s)}).next(function(){return o})},t.prototype.forEachTarget=function(e,n){return Ap(e).$t(function(r,i){var o=l_(i);n(o)})},t.prototype.Xt=function(e){return uJ(e).get(Fi.key).next(function(n){return xe(n!==null),n})},t.prototype.Zt=function(e,n){return uJ(e).put(Fi.key,n)},t.prototype.te=function(e,n){return Ap(e).put(DZ(this.R,n))},t.prototype.ee=function(e,n){var r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r},t.prototype.getTargetCount=function(e){return this.Xt(e).next(function(n){return n.targetCount})},t.prototype.getTargetData=function(e,n){var r=C_(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ap(e).$t({range:i,index:_i.queryTargetsIndexName},function(s,u,c){var h=l_(u);IS(n,h.target)&&(o=h,c.done())}).next(function(){return o})},t.prototype.addMatchingKeys=function(e,n,r){var i=this,o=[],s=lc(e);return n.forEach(function(u){var c=Ko(u.path);o.push(s.put(new Er(r,c))),o.push(i.referenceDelegate.addReference(e,r,u))}),K.waitFor(o)},t.prototype.removeMatchingKeys=function(e,n,r){var i=this,o=lc(e);return K.forEach(n,function(s){var u=Ko(s.path);return K.waitFor([o.delete([r,u]),i.referenceDelegate.removeReference(e,r,s)])})},t.prototype.removeMatchingKeysForTargetId=function(e,n){var r=lc(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},t.prototype.getMatchingKeysForTargetId=function(e,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=lc(e),o=At();return i.$t({range:r,Ft:!0},function(s,u,c){var h=$a(s[1]),f=new Ie(h);o=o.add(f)}).next(function(){return o})},t.prototype.containsKey=function(e,n){var r=Ko(n.path),i=IDBKeyRange.bound([r],[qJ(r)],!1,!0),o=0;return lc(e).$t({index:Er.documentTargetsIndex,Ft:!0,range:i},function(s,u,c){var h=s[0];s[1],h!==0&&(o++,c.done())}).next(function(){return o>0})},t.prototype.lt=function(e,n){return Ap(e).get(n).next(function(r){return r?l_(r):null})},t}();function Ap(t){return wi(t,_i.store)}function uJ(t){return wi(t,Fi.store)}function lc(t){return wi(t,Er.store)}function Rh(t){return V(this,void 0,void 0,function(){return U(this,function(e){if(t.code!==k.FAILED_PRECONDITION||t.message!==IZ)throw t;return Z("LocalStore","Unexpectedly lost primary lease"),[2]})})}function cJ(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=at(n,i);return s===0?at(r,o):s}var aTe=function(){function t(e){this.ne=e,this.buffer=new Qn(cJ),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(e){var n=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();cJ(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),uTe=function(){function t(e,n){this.garbageCollector=e,this.asyncQueue=n,this.oe=!1,this.ce=null}return t.prototype.start=function(e){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(e)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),t.prototype.ue=function(e){var n=this,r=this.oe?3e5:6e4;Z("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return V(n,void 0,void 0,function(){var i;return U(this,function(o){switch(o.label){case 0:this.ce=null,this.oe=!0,o.label=1;case 1:return o.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return o.sent(),[3,7];case 3:return Nh(i=o.sent())?(Z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,Rh(i)];case 5:o.sent(),o.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return o.sent(),[2]}})})})},t}(),cTe=function(){function t(e,n){this.ae=e,this.params=n}return t.prototype.calculateTargetCount=function(e,n){return this.ae.he(e).next(function(r){return Math.floor(n/100*r)})},t.prototype.nthSequenceNumber=function(e,n){var r=this;if(n===0)return K.resolve(Vi.o);var i=new aTe(n);return this.ae.forEachTarget(e,function(o){return i.re(o.sequenceNumber)}).next(function(){return r.ae.le(e,function(o){return i.re(o)})}).next(function(){return i.maxValue})},t.prototype.removeTargets=function(e,n,r){return this.ae.removeTargets(e,n,r)},t.prototype.removeOrphanedDocuments=function(e,n){return this.ae.removeOrphanedDocuments(e,n)},t.prototype.collect=function(e,n){var r=this;return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(aJ)):this.getCacheSize(e).next(function(i){return i<r.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),aJ):r.fe(e,n)})},t.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},t.prototype.fe=function(e,n){var r,i,o,s,u,c,h,f=this,p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(m){return m>f.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+f.params.maximumSequenceNumbersToCollect+" from "+m),i=f.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),f.nthSequenceNumber(e,i)}).next(function(m){return r=m,u=Date.now(),f.removeTargets(e,r,n)}).next(function(m){return o=m,c=Date.now(),f.removeOrphanedDocuments(e,r)}).next(function(m){return h=Date.now(),GV()<=wt.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(s-p)+`ms
	Determined least recently used `+i+" in "+(u-s)+`ms
	Removed `+o+" targets in "+(c-u)+`ms
	Removed `+m+" documents in "+(h-c)+`ms
Total Duration: `+(h-p)+"ms"),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})})},t}(),lTe=function(){function t(e,n){this.db=e,this.garbageCollector=function(r,i){return new cTe(r,i)}(this,n)}return t.prototype.he=function(e){var n=this.de(e);return this.db.getTargetCache().getTargetCount(e).next(function(r){return n.next(function(i){return r+i})})},t.prototype.de=function(e){var n=0;return this.le(e,function(r){n++}).next(function(){return n})},t.prototype.forEachTarget=function(e,n){return this.db.getTargetCache().forEachTarget(e,n)},t.prototype.le=function(e,n){return this.we(e,function(r,i){return n(i)})},t.prototype.addReference=function(e,n,r){return XC(e,r)},t.prototype.removeReference=function(e,n,r){return XC(e,r)},t.prototype.removeTargets=function(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)},t.prototype.markPotentiallyOrphaned=function(e,n){return XC(e,n)},t.prototype._e=function(e,n){return function(r,i){var o=!1;return NZ(r).Ot(function(s){return xZ(r,s,i).next(function(u){return u&&(o=!0),K.resolve(!u)})}).next(function(){return o})}(e,n)},t.prototype.removeOrphanedDocuments=function(e,n){var r=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[],s=0;return this.we(e,function(u,c){if(c<=n){var h=r._e(e,u).next(function(f){if(!f)return s++,i.getEntry(e,u).next(function(){return i.removeEntry(u),lc(e).delete([0,Ko(u.path)])})});o.push(h)}}).next(function(){return K.waitFor(o)}).next(function(){return i.apply(e)}).next(function(){return s})},t.prototype.removeTarget=function(e,n){var r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)},t.prototype.updateLimboDocument=function(e,n){return XC(e,n)},t.prototype.we=function(e,n){var r,i=lc(e),o=Vi.o;return i.$t({index:Er.documentTargetsIndex},function(s,u){var c=s[0];s[1];var h=u.path,f=u.sequenceNumber;c===0?(o!==Vi.o&&n(new Ie($a(r)),o),o=f,r=h):o=Vi.o}).next(function(){o!==Vi.o&&n(new Ie($a(r)),o)})},t.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},t}();function XC(t,e){return lc(t).put(function(n,r){return new Er(0,Ko(n.path),r)}(e,t.currentSequenceNumber))}var Zp=function(){function t(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}return t.prototype.get=function(e){var n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0)for(var i=0,o=r;i<o.length;i++){var s=o[i],u=s[0],c=s[1];if(this.equalsFn(u,e))return c}},t.prototype.has=function(e){return this.get(e)!==void 0},t.prototype.set=function(e,n){var r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(var o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n])}else this.inner[r]=[[e,n]]},t.prototype.delete=function(e){var n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1},t.prototype.forEach=function(e){Ah(this.inner,function(n,r){for(var i=0,o=r;i<o.length;i++){var s=o[i],u=s[0],c=s[1];e(u,c)}})},t.prototype.isEmpty=function(){return HJ(this.inner)},t}(),RZ=function(){function t(){this.changes=new Zp(function(e){return e.toString()},function(e,n){return e.isEqual(n)}),this.changesApplied=!1}return t.prototype.getReadTime=function(e){var n=this.changes.get(e);return n?n.readTime:We.min()},t.prototype.addEntry=function(e,n){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:n})},t.prototype.removeEntry=function(e,n){n===void 0&&(n=null),this.assertNotApplied(),this.changes.set(e,{document:Ir.newInvalidDocument(e),readTime:n})},t.prototype.getEntry=function(e,n){this.assertNotApplied();var r=this.changes.get(n);return r!==void 0?K.resolve(r.document):this.getFromCache(e,n)},t.prototype.getEntries=function(e,n){return this.getAllFromCache(e,n)},t.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},t.prototype.assertNotApplied=function(){},t}(),hTe=function(){function t(e,n){this.R=e,this.Ut=n}return t.prototype.addEntry=function(e,n,r){return uc(e).put(JC(n),r)},t.prototype.removeEntry=function(e,n){var r=uc(e),i=JC(n);return r.delete(i)},t.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(i){return i.byteSize+=n,r.me(e,i)})},t.prototype.getEntry=function(e,n){var r=this;return uc(e).get(JC(n)).next(function(i){return r.ye(n,i)})},t.prototype.ge=function(e,n){var r=this;return uc(e).get(JC(n)).next(function(i){return{document:r.ye(n,i),size:fS(i)}})},t.prototype.getEntries=function(e,n){var r=this,i=co();return this.pe(e,n,function(o,s){var u=r.ye(o,s);i=i.insert(o,u)}).next(function(){return i})},t.prototype.Ee=function(e,n){var r=this,i=co(),o=new Fr(Ie.comparator);return this.pe(e,n,function(s,u){var c=r.ye(s,u);i=i.insert(s,c),o=o.insert(s,fS(u))}).next(function(){return{documents:i,Te:o}})},t.prototype.pe=function(e,n,r){if(n.isEmpty())return K.resolve();var i=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),o=n.getIterator(),s=o.getNext();return uc(e).$t({range:i},function(u,c,h){for(var f=Ie.fromSegments(u);s&&Ie.comparator(s,f)<0;)r(s,null),s=o.getNext();s&&s.isEqual(f)&&(r(s,c),s=o.hasNext()?o.getNext():null),s?h.Ct(s.path.toArray()):h.done()}).next(function(){for(;s;)r(s,null),s=o.hasNext()?o.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(e,n,r){var i=this,o=co(),s=n.path.length+1,u={};if(r.isEqual(We.min())){var c=n.path.toArray();u.range=IDBKeyRange.lowerBound(c)}else{var h=n.path.toArray(),f=_2(r);u.range=IDBKeyRange.lowerBound([h,f],!0),u.index=pn.collectionReadTimeIndex}return uc(e).$t(u,function(p,m,v){if(p.length===s){var _=ZV(i.R,m);n.path.isPrefixOf(_.key.path)?D_(n,_)&&(o=o.insert(_.key,_)):v.done()}}).next(function(){return o})},t.prototype.newChangeBuffer=function(e){return new dTe(this,!!e&&e.trackRemovals)},t.prototype.getSize=function(e){return this.getMetadata(e).next(function(n){return n.byteSize})},t.prototype.getMetadata=function(e){return lJ(e).get(Gs.key).next(function(n){return xe(!!n),n})},t.prototype.me=function(e,n){return lJ(e).put(Gs.key,n)},t.prototype.ye=function(e,n){if(n){var r=ZV(this.R,n);if(!r.isNoDocument()||!r.version.isEqual(We.min()))return r}return Ir.newInvalidDocument(e)},t}(),dTe=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).Ie=n,i.trackRemovals=r,i.Ae=new Zp(function(o){return o.toString()},function(o,s){return o.isEqual(s)}),i}return we(e,t),e.prototype.applyChanges=function(n){var r=this,i=[],o=0,s=new Qn(function(u,c){return at(u.canonicalString(),c.canonicalString())});return this.changes.forEach(function(u,c){var h=r.Ae.get(u);if(c.document.isValidDocument()){var f=rJ(r.Ie.R,c.document,r.getReadTime(u));s=s.add(u.path.popLast());var p=fS(f);o+=p-h,i.push(r.Ie.addEntry(n,u,f))}else if(o-=h,r.trackRemovals){var m=rJ(r.Ie.R,Ir.newNoDocument(u,We.min()),r.getReadTime(u));i.push(r.Ie.addEntry(n,u,m))}else i.push(r.Ie.removeEntry(n,u))}),s.forEach(function(u){i.push(r.Ie.Ut.addToCollectionParentIndex(n,u))}),i.push(this.Ie.updateMetadata(n,o)),K.waitFor(i)},e.prototype.getFromCache=function(n,r){var i=this;return this.Ie.ge(n,r).next(function(o){return i.Ae.set(r,o.size),o.document})},e.prototype.getAllFromCache=function(n,r){var i=this;return this.Ie.Ee(n,r).next(function(o){var s=o.documents;return o.Te.forEach(function(u,c){i.Ae.set(u,c)}),s})},e}(RZ);function lJ(t){return wi(t,Gs.store)}function uc(t){return wi(t,pn.store)}function JC(t){return t.path.toArray()}var fTe=function(){function t(e){this.R=e}return t.prototype.Rt=function(e,n,r,i){var o=this;xe(r<i&&r>=0&&i<=11);var s=new TZ("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore(Oi.store)}(e),function(c){c.createObjectStore(fc.store,{keyPath:fc.keyPath}),c.createObjectStore(Gt.store,{keyPath:Gt.keyPath,autoIncrement:!0}).createIndex(Gt.userMutationsIndex,Gt.userMutationsKeyPath,{unique:!0}),c.createObjectStore(Mr.store)}(e),hJ(e),function(c){c.createObjectStore(pn.store)}(e));var u=K.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore(Er.store),c.deleteObjectStore(_i.store),c.deleteObjectStore(Fi.store)}(e),hJ(e)),u=u.next(function(){return function(c){var h=c.store(Fi.store),f=new Fi(0,0,We.min().toTimestamp(),0);return h.put(Fi.key,f)}(s)})),r<4&&i>=4&&(r!==0&&(u=u.next(function(){return function(c,h){return h.store(Gt.store).Nt().next(function(f){c.deleteObjectStore(Gt.store),c.createObjectStore(Gt.store,{keyPath:Gt.keyPath,autoIncrement:!0}).createIndex(Gt.userMutationsIndex,Gt.userMutationsKeyPath,{unique:!0});var p=h.store(Gt.store),m=f.map(function(v){return p.put(v)});return K.waitFor(m)})}(e,s)})),u=u.next(function(){(function(c){c.createObjectStore(za.store,{keyPath:za.keyPath})})(e)})),r<5&&i>=5&&(u=u.next(function(){return o.Re(s)})),r<6&&i>=6&&(u=u.next(function(){return function(c){c.createObjectStore(Gs.store)}(e),o.be(s)})),r<7&&i>=7&&(u=u.next(function(){return o.ve(s)})),r<8&&i>=8&&(u=u.next(function(){return o.Pe(e,s)})),r<9&&i>=9&&(u=u.next(function(){(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e),function(c){var h=c.objectStore(pn.store);h.createIndex(pn.readTimeIndex,pn.readTimeIndexPath,{unique:!1}),h.createIndex(pn.collectionReadTimeIndex,pn.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(u=u.next(function(){return o.Ve(s)})),r<11&&i>=11&&(u=u.next(function(){(function(c){c.createObjectStore(jp.store,{keyPath:jp.keyPath})})(e),function(c){c.createObjectStore(Bp.store,{keyPath:Bp.keyPath})}(e)})),u},t.prototype.be=function(e){var n=0;return e.store(pn.store).$t(function(r,i){n+=fS(i)}).next(function(){var r=new Gs(n);return e.store(Gs.store).put(Gs.key,r)})},t.prototype.Re=function(e){var n=this,r=e.store(fc.store),i=e.store(Gt.store);return r.Nt().next(function(o){return K.forEach(o,function(s){var u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.Nt(Gt.userMutationsIndex,u).next(function(c){return K.forEach(c,function(h){xe(h.userId===s.userId);var f=xp(n.R,h);return AZ(e,s.userId,f).next(function(){})})})})})},t.prototype.ve=function(e){var n=e.store(Er.store),r=e.store(pn.store);return e.store(Fi.store).get(Fi.key).next(function(i){var o=[];return r.$t(function(s,u){var c=new mt(s),h=function(f){return[0,Ko(f)]}(c);o.push(n.get(h).next(function(f){return f?K.resolve():function(p){return n.put(new Er(0,Ko(p),i.highestListenSequenceNumber))}(c)}))}).next(function(){return K.waitFor(o)})})},t.prototype.Pe=function(e,n){e.createObjectStore(Ih.store,{keyPath:Ih.keyPath});var r=n.store(Ih.store),i=new E2,o=function(s){if(i.add(s)){var u=s.lastSegment(),c=s.popLast();return r.put({collectionId:u,parent:Ko(c)})}};return n.store(pn.store).$t({Ft:!0},function(s,u){var c=new mt(s);return o(c.popLast())}).next(function(){return n.store(Mr.store).$t({Ft:!0},function(s,u){s[0];var c=s[1];s[2];var h=$a(c);return o(h.popLast())})})},t.prototype.Ve=function(e){var n=this,r=e.store(_i.store);return r.$t(function(i,o){var s=l_(o),u=DZ(n.R,s);return r.put(u)})},t}();function hJ(t){t.createObjectStore(Er.store,{keyPath:Er.keyPath}).createIndex(Er.documentTargetsIndex,Er.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(_i.store,{keyPath:_i.keyPath}).createIndex(_i.queryTargetsIndexName,_i.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Fi.store)}var qV="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pTe=function(){function t(e,n,r,i,o,s,u,c,h,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=u,this.De=h,this.Ce=f,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(p){return Promise.resolve()},!t.yt())throw new $(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lTe(this,i),this.Le=n+"main",this.R=new CZ(c),this.Be=new qp(this.Le,11,new fTe(this.R)),this.qe=new sTe(this.referenceDelegate,this.R),this.Ut=new iTe,this.Ue=function(p,m){return new hTe(p,m)}(this.R,this.Ut),this.Ke=new nTe,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,f===!1&&Un("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new $(k.FAILED_PRECONDITION,qV);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return e.qe.getHighestSequenceNumber(n)})}).then(function(n){e.Ne=new Vi(n,e.De)}).then(function(){e.xe=!0}).catch(function(n){return e.Be&&e.Be.close(),Promise.reject(n)})},t.prototype.He=function(e){var n=this;return this.Me=function(r){return V(n,void 0,void 0,function(){return U(this,function(i){return this.started?[2,e(r)]:[2]})})},e(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(e){var n=this;this.Be.vt(function(r){return V(n,void 0,void 0,function(){return U(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,e()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget(function(){return V(n,void 0,void 0,function(){return U(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return ZC(n).put(new za(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.Je(n).next(function(r){r||(e.isPrimary=!1,e.Se.enqueueRetryable(function(){return e.Me(!1)}))})}).next(function(){return e.Ye(n)}).next(function(r){return e.isPrimary&&!r?e.Xe(n).next(function(){return!1}):!!r&&e.Ze(n).next(function(){return!0})})}).catch(function(n){if(Nh(n))return Z("IndexedDbPersistence","Failed to extend owner lease: ",n),e.isPrimary;if(!e.allowTabSynchronization)throw n;return Z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){e.isPrimary!==n&&e.Se.enqueueRetryable(function(){return e.Me(n)}),e.isPrimary=n})},t.prototype.Je=function(e){var n=this;return c_(e).get(Oi.key).next(function(r){return K.resolve(n.tn(r))})},t.prototype.en=function(e){return ZC(e).delete(this.clientId)},t.prototype.nn=function(){return V(this,void 0,void 0,function(){var e,n,r,i,o=this;return U(this,function(s){switch(s.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(u){var c=wi(u,za.store);return c.Nt().next(function(h){var f=o.rn(h,18e5),p=h.filter(function(m){return f.indexOf(m)===-1});return K.forEach(p,function(m){return c.delete(m.clientId)}).next(function(){return p})})}).catch(function(){return[]})]);case 1:if(e=s.sent(),this.Qe)for(n=0,r=e;n<r.length;n++)i=r[n],this.Qe.removeItem(this.on(i.clientId));s.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.je().then(function(){return e.nn()}).then(function(){return e.ze()})})},t.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},t.prototype.Ye=function(e){var n=this;return this.Ce?K.resolve(!0):c_(e).get(Oi.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)){if(n.tn(r)&&n.networkEnabled)return!0;if(!n.tn(r)){if(!r.allowTabSynchronization)throw new $(k.FAILED_PRECONDITION,qV);return!1}}return!(!n.networkEnabled||!n.inForeground)||ZC(e).Nt().next(function(i){return n.rn(i,5e3).find(function(o){if(n.clientId!==o.clientId){var s=!n.networkEnabled&&o.networkEnabled,u=!n.inForeground&&o.inForeground,c=n.networkEnabled===o.networkEnabled;if(s||u&&c)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&Z("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},t.prototype.shutdown=function(){return V(this,void 0,void 0,function(){var e=this;return U(this,function(n){switch(n.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Oi.store,za.store],function(r){var i=new nJ(r,Vi.o);return e.Xe(i).next(function(){return e.en(i)})})];case 1:return n.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(e,n){var r=this;return e.filter(function(i){return r.sn(i.updateTimeMs,n)&&!r.cn(i.clientId)})},t.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(n){return ZC(n).Nt().next(function(r){return e.rn(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(e){return oTe.Qt(e,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(e,n,r){var i=this;Z("IndexedDbPersistence","Starting transaction:",e);var o,s=n==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(e,s,Jbe,function(u){return o=new nJ(u,i.Ne?i.Ne.next():Vi.o),n==="readwrite-primary"?i.Je(o).next(function(c){return!!c||i.Ye(o)}).next(function(c){if(!c)throw Un("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new $(k.FAILED_PRECONDITION,IZ);return r(o)}).next(function(c){return i.Ze(o).next(function(){return c})}):i.dn(o).next(function(){return r(o)})}).then(function(u){return o.raiseOnCommittedEvent(),u})},t.prototype.dn=function(e){var n=this;return c_(e).get(Oi.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)&&!n.tn(r)&&!(n.Ce||n.allowTabSynchronization&&r.allowTabSynchronization))throw new $(k.FAILED_PRECONDITION,qV)})},t.prototype.Ze=function(e){var n=new Oi(this.clientId,this.allowTabSynchronization,Date.now());return c_(e).put(Oi.key,n)},t.yt=function(){return qp.yt()},t.prototype.Xe=function(e){var n=this,r=c_(e);return r.get(Oi.key).next(function(i){return n.tn(i)?(Z("IndexedDbPersistence","Releasing primary lease."),r.delete(Oi.key)):K.resolve()})},t.prototype.sn=function(e,n){var r=Date.now();return!(e<r-n||e>r&&(Un("Detected an update time that is in the future: "+e+" > "+r),1))},t.prototype.We=function(){var e=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Fe=function(){e.Se.enqueueAndForget(function(){return e.inForeground=e.document.visibilityState==="visible",e.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground=this.document.visibilityState==="visible")},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var e,n=this;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ke=function(){n.un(),pY()&&navigator.appVersion.match("Version/14")&&n.Se.enterRestrictedMode(!0),n.Se.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(e){var n;try{var r=((n=this.Qe)===null||n===void 0?void 0:n.getItem(this.on(e)))!==null;return Z("IndexedDbPersistence","Client '"+e+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return Un("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){Un("Failed to set zombie client id.",e)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},t.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},t}();function c_(t){return wi(t,Oi.store)}function ZC(t){return wi(t,za.store)}function I2(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var gTe=function(t,e){this.progress=t,this.wn=e},MZ=function(){function t(e,n,r){this.Ue=e,this._n=n,this.Ut=r}return t.prototype.mn=function(e,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,n).next(function(i){return r.yn(e,n,i)})},t.prototype.yn=function(e,n,r){return this.Ue.getEntry(e,n).next(function(i){for(var o=0,s=r;o<s.length;o++)s[o].applyToLocalView(i);return i})},t.prototype.gn=function(e,n){e.forEach(function(r,i){for(var o=0,s=n;o<s.length;o++)s[o].applyToLocalView(i)})},t.prototype.pn=function(e,n){var r=this;return this.Ue.getEntries(e,n).next(function(i){return r.En(e,i).next(function(){return i})})},t.prototype.En=function(e,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,n).next(function(i){return r.gn(n,i)})},t.prototype.getDocumentsMatchingQuery=function(e,n,r){return function(i){return Ie.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(e,n.path):d2(n)?this.In(e,n,r):this.An(e,n,r)},t.prototype.Tn=function(e,n){return this.mn(e,new Ie(n)).next(function(r){var i=XV();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})},t.prototype.In=function(e,n,r){var i=this,o=n.collectionGroup,s=XV();return this.Ut.getCollectionParents(e,o).next(function(u){return K.forEach(u,function(c){var h=function(f,p){return new Wa(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(o));return i.An(e,h,r).next(function(f){f.forEach(function(p,m){s=s.insert(p,m)})})}).next(function(){return s})})},t.prototype.An=function(e,n,r){var i,o,s=this;return this.Ue.getDocumentsMatchingQuery(e,n,r).next(function(u){return i=u,s._n.getAllMutationBatchesAffectingQuery(e,n)}).next(function(u){return o=u,s.Rn(e,o,i).next(function(c){i=c;for(var h=0,f=o;h<f.length;h++)for(var p=f[h],m=0,v=p.mutations;m<v.length;m++){var _=v[m],E=_.key,b=i.get(E);b==null&&(b=Ir.newInvalidDocument(E),i=i.insert(E,b)),YV(_,b,p.localWriteTime),b.isFoundDocument()||(i=i.remove(E))}})}).next(function(){return i.forEach(function(u,c){D_(n,c)||(i=i.remove(u))}),i})},t.prototype.Rn=function(e,n,r){for(var i=At(),o=0,s=n;o<s.length;o++)for(var u=0,c=s[o].mutations;u<c.length;u++){var h=c[u];h instanceof vc&&r.get(h.key)===null&&(i=i.add(h.key))}var f=r;return this.Ue.getEntries(e,i).next(function(p){return p.forEach(function(m,v){v.isFoundDocument()&&(f=f.insert(m,v))}),f})},t}(),mTe=function(){function t(e,n,r,i){this.targetId=e,this.fromCache=n,this.bn=r,this.vn=i}return t.Pn=function(e,n){for(var r=At(),i=At(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),PZ=function(){function t(){}return t.prototype.Vn=function(e){this.Sn=e},t.prototype.getDocumentsMatchingQuery=function(e,n,r,i){var o=this;return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(We.min())?this.Dn(e,n):this.Sn.pn(e,i).next(function(s){var u=o.Cn(n,s);return(tS(n)||hS(n))&&o.Nn(n.limitType,u,i,r)?o.Dn(e,n):(GV()<=wt.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),QV(n)),o.Sn.getDocumentsMatchingQuery(e,n,r).next(function(c){return u.forEach(function(h){c=c.insert(h.key,h)}),c}))})},t.prototype.Cn=function(e,n){var r=new Qn(JJ(e));return n.forEach(function(i,o){D_(e,o)&&(r=r.add(o))}),r},t.prototype.Nn=function(e,n,r,i){if(r.size!==n.size)return!0;var o=e==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)},t.prototype.Dn=function(e,n){return GV()<=wt.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",QV(n)),this.Sn.getDocumentsMatchingQuery(e,n,We.min())},t}(),yTe=function(){function t(e,n,r,i){this.persistence=e,this.xn=n,this.R=i,this.kn=new Fr(at),this.Fn=new Zp(function(o){return C_(o)},IS),this.$n=We.min(),this._n=e.getMutationQueue(r),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new MZ(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return e.collect(r,n.kn)})},t}();function kZ(t,e,n,r){return new yTe(t,e,n,r)}function OZ(t,e){return V(this,void 0,void 0,function(){var n,r,i,o;return U(this,function(s){switch(s.label){case 0:return n=oe(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(u){var c;return n._n.getAllMutationBatches(u).next(function(h){return c=h,r=n.persistence.getMutationQueue(e),i=new MZ(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(u)}).next(function(h){for(var f=[],p=[],m=At(),v=0,_=c;v<_.length;v++){var E=_[v];f.push(E.batchId);for(var b=0,T=E.mutations;b<T.length;b++){var S=T[b];m=m.add(S.key)}}for(var A=0,x=h;A<x.length;A++){var H=x[A];p.push(H.batchId);for(var N=0,ie=H.mutations;N<ie.length;N++){var Ye=ie[N];m=m.add(Ye.key)}}return i.pn(u,m).next(function(ge){return{Ln:ge,removedBatchIds:f,addedBatchIds:p}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function vTe(t,e){var n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=e.batch.keys(),o=n.On.newChangeBuffer({trackRemovals:!0});return function(s,u,c,h){var f=c.batch,p=f.keys(),m=K.resolve();return p.forEach(function(v){m=m.next(function(){return h.getEntry(u,v)}).next(function(_){var E=c.docVersions.get(v);xe(E!==null),_.version.compareTo(E)<0&&(f.applyToRemoteDocument(_,c),_.isValidDocument()&&h.addEntry(_,c.commitVersion))})}),m.next(function(){return s._n.removeMutationBatch(u,f)})}(n,r,e,o).next(function(){return o.apply(r)}).next(function(){return n._n.performConsistencyCheck(r)}).next(function(){return n.Mn.pn(r,i)})})}function FZ(t){var e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return e.qe.getLastRemoteSnapshotVersion(n)})}function _Te(t,e){var n=oe(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var s=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var u=[];e.targetChanges.forEach(function(f,p){var m=i.get(p);if(m){u.push(n.qe.removeMatchingKeys(o,f.removedDocuments,p).next(function(){return n.qe.addMatchingKeys(o,f.addedDocuments,p)}));var v=f.resumeToken;if(v.approximateByteSize()>0){var _=m.withResumeToken(v,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(p,_),function(E,b,T){return xe(b.resumeToken.approximateByteSize()>0),E.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8||T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(m,_,f)&&u.push(n.qe.updateTargetData(o,_))}}});var c=co();if(e.documentUpdates.forEach(function(f,p){e.resolvedLimboDocuments.has(f)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),u.push(LZ(o,s,e.documentUpdates,r,void 0).next(function(f){c=f})),!r.isEqual(We.min())){var h=n.qe.getLastRemoteSnapshotVersion(o).next(function(f){return n.qe.setTargetsMetadata(o,o.currentSequenceNumber,r)});u.push(h)}return K.waitFor(u).next(function(){return s.apply(o)}).next(function(){return n.Mn.En(o,c)}).next(function(){return c})}).then(function(o){return n.kn=i,o})}function LZ(t,e,n,r,i){var o=At();return n.forEach(function(s){return o=o.add(s)}),e.getEntries(t,o).next(function(s){var u=co();return n.forEach(function(c,h){var f=s.get(c),p=(i==null?void 0:i.get(c))||r;h.isNoDocument()&&h.version.isEqual(We.min())?(e.removeEntry(c,p),u=u.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h,p),u=u.insert(c,h)):Z("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)}),u})}function wTe(t,e){var n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return e===void 0&&(e=-1),n._n.getNextMutationBatchAfterBatchId(r,e)})}function zp(t,e){var n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n.qe.getTargetData(r,e).next(function(o){return o?(i=o,K.resolve(i)):n.qe.allocateTargetId(r).next(function(s){return i=new SS(e,s,0,r.currentSequenceNumber),n.qe.addTargetData(r,i).next(function(){return i})})})}).then(function(r){var i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.Fn.set(e,r.targetId)),r})}function Gp(t,e,n){return V(this,void 0,void 0,function(){var r,i,o,s;return U(this,function(u){switch(u.label){case 0:r=oe(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(c){return r.persistence.referenceDelegate.removeTarget(c,i)})];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!Nh(s=u.sent()))throw s;return Z("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}})})}function gS(t,e,n){var r=oe(t),i=We.min(),o=At();return r.persistence.runTransaction("Execute query","readonly",function(s){return function(u,c,h){var f=oe(u),p=f.Fn.get(h);return p!==void 0?K.resolve(f.kn.get(p)):f.qe.getTargetData(c,h)}(r,s,lo(e)).next(function(u){if(u)return i=u.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(s,u.targetId).next(function(c){o=c})}).next(function(){return r.xn.getDocumentsMatchingQuery(s,e,n?i:We.min(),n?o:At())}).next(function(u){return{documents:u,Bn:o}})})}function VZ(t,e){var n=oe(t),r=oe(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(o){return r.lt(o,e).next(function(s){return s?s.target:null})})}function UZ(t){var e=oe(t);return e.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,i,o){var s=oe(r),u=co(),c=_2(o),h=uc(i),f=IDBKeyRange.lowerBound(c,!0);return h.$t({index:pn.readTimeIndex,range:f},function(p,m){var v=ZV(s.R,m);u=u.insert(v.key,v),c=m.readTime}).next(function(){return{wn:u,readTime:SZ(c)}})}(e.On,n,e.$n)}).then(function(n){var r=n.wn,i=n.readTime;return e.$n=i,r})}function ETe(t){return V(this,void 0,void 0,function(){var e;return U(this,function(n){return[2,(e=oe(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(i){var o=uc(i),s=We.min();return o.$t({index:pn.readTimeIndex,reverse:!0},function(u,c,h){c.readTime&&(s=SZ(c.readTime)),h.done()}).next(function(){return s})}(r)}).then(function(r){e.$n=r})]})})}function ITe(t,e,n,r){return V(this,void 0,void 0,function(){var i,o,s,u,c,h,f,p,m,v;return U(this,function(_){switch(_.label){case 0:for(i=oe(t),o=At(),s=co(),u=cZ(),c=0,h=n;c<h.length;c++)f=h[c],p=e.qn(f.metadata.name),f.document&&(o=o.add(p)),s=s.insert(p,e.Un(f)),u=u.insert(p,e.Kn(f.metadata.readTime));return m=i.On.newChangeBuffer({trackRemovals:!0}),[4,zp(i,function(E){return lo(Jp(mt.fromString("__bundle__/docs/"+E)))}(r))];case 1:return v=_.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(E){return LZ(E,m,s,We.min(),u).next(function(b){return m.apply(E),b}).next(function(b){return i.qe.removeMatchingKeysForTargetId(E,v.targetId).next(function(){return i.qe.addMatchingKeys(E,o,v.targetId)}).next(function(){return i.Mn.En(E,b)}).next(function(){return b})})})]}})})}function bTe(t,e,n){return n===void 0&&(n=At()),V(this,void 0,void 0,function(){var r,i;return U(this,function(o){switch(o.label){case 0:return[4,zp(t,lo(w2(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=oe(t)).persistence.runTransaction("Save named query","readwrite",function(s){var u=wr(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ke.saveNamedQuery(s,e);var c=r.withResumeToken(Jr.EMPTY_BYTE_STRING,u);return i.kn=i.kn.insert(c.targetId,c),i.qe.updateTargetData(s,c).next(function(){return i.qe.removeMatchingKeysForTargetId(s,r.targetId)}).next(function(){return i.qe.addMatchingKeys(s,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(s,e)})})]}})})}var TTe=function(){function t(e){this.R=e,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(e,n){return K.resolve(this.Qn.get(n))},t.prototype.saveBundleMetadata=function(e,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:wr(r.createTime)}),K.resolve()},t.prototype.getNamedQuery=function(e,n){return K.resolve(this.jn.get(n))},t.prototype.saveNamedQuery=function(e,n){return this.jn.set(n.name,function(r){return{name:r.name,query:w2(r.bundledQuery),readTime:wr(r.readTime)}}(n)),K.resolve()},t}(),b2=function(){function t(){this.Wn=new Qn(rr.Gn),this.zn=new Qn(rr.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(e,n){var r=new rr(e,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},t.prototype.Jn=function(e,n){var r=this;e.forEach(function(i){return r.addReference(i,n)})},t.prototype.removeReference=function(e,n){this.Yn(new rr(e,n))},t.prototype.Xn=function(e,n){var r=this;e.forEach(function(i){return r.removeReference(i,n)})},t.prototype.Zn=function(e){var n=this,r=new Ie(new mt([])),i=new rr(r,e),o=new rr(r,e+1),s=[];return this.zn.forEachInRange([i,o],function(u){n.Yn(u),s.push(u.key)}),s},t.prototype.ts=function(){var e=this;this.Wn.forEach(function(n){return e.Yn(n)})},t.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},t.prototype.es=function(e){var n=new Ie(new mt([])),r=new rr(n,e),i=new rr(n,e+1),o=At();return this.zn.forEachInRange([r,i],function(s){o=o.add(s.key)}),o},t.prototype.containsKey=function(e){var n=new rr(e,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)},t}(),rr=function(){function t(e,n){this.key=e,this.ns=n}return t.Gn=function(e,n){return Ie.comparator(e.key,n.key)||at(e.ns,n.ns)},t.Hn=function(e,n){return at(e.ns,n.ns)||Ie.comparator(e.key,n.key)},t}(),CTe=function(){function t(e,n){this.Ut=e,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new Qn(rr.Gn)}return t.prototype.checkEmpty=function(e){return K.resolve(this._n.length===0)},t.prototype.addMutationBatch=function(e,n,r,i){var o=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var s=new v2(o,n,r,i);this._n.push(s);for(var u=0,c=i;u<c.length;u++){var h=c[u];this.rs=this.rs.add(new rr(h.key,o)),this.Ut.addToCollectionParentIndex(e,h.key.path.popLast())}return K.resolve(s)},t.prototype.lookupMutationBatch=function(e,n){return K.resolve(this.os(n))},t.prototype.getNextMutationBatchAfterBatchId=function(e,n){var r=n+1,i=this.cs(r),o=i<0?0:i;return K.resolve(this._n.length>o?this._n[o]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return K.resolve(this._n.length===0?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(e){return K.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,n){var r=this,i=new rr(n,0),o=new rr(n,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([i,o],function(u){var c=r.os(u.ns);s.push(c)}),K.resolve(s)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,n){var r=this,i=new Qn(at);return n.forEach(function(o){var s=new rr(o,0),u=new rr(o,Number.POSITIVE_INFINITY);r.rs.forEachInRange([s,u],function(c){i=i.add(c.ns)})}),K.resolve(this.us(i))},t.prototype.getAllMutationBatchesAffectingQuery=function(e,n){var r=n.path,i=r.length+1,o=r;Ie.isDocumentKey(o)||(o=o.child(""));var s=new rr(new Ie(o),0),u=new Qn(at);return this.rs.forEachWhile(function(c){var h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(c.ns)),!0)},s),K.resolve(this.us(u))},t.prototype.us=function(e){var n=this,r=[];return e.forEach(function(i){var o=n.os(i);o!==null&&r.push(o)}),r},t.prototype.removeMutationBatch=function(e,n){var r=this;xe(this.hs(n.batchId,"removed")===0),this._n.shift();var i=this.rs;return K.forEach(n.mutations,function(o){var s=new rr(o.key,n.batchId);return i=i.delete(s),r.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(function(){r.rs=i})},t.prototype.Gt=function(e){},t.prototype.containsKey=function(e,n){var r=new rr(n,0),i=this.rs.firstAfterOrEqual(r);return K.resolve(n.isEqual(i&&i.key))},t.prototype.performConsistencyCheck=function(e){return this._n.length,K.resolve()},t.prototype.hs=function(e,n){return this.cs(e)},t.prototype.cs=function(e){return this._n.length===0?0:e-this._n[0].batchId},t.prototype.os=function(e){var n=this.cs(e);return n<0||n>=this._n.length?null:this._n[n]},t}(),STe=function(){function t(e,n){this.Ut=e,this.ls=n,this.docs=new Fr(Ie.comparator),this.size=0}return t.prototype.addEntry=function(e,n,r){var i=n.key,o=this.docs.get(i),s=o?o.size:0,u=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:u,readTime:r}),this.size+=u-s,this.Ut.addToCollectionParentIndex(e,i.path.popLast())},t.prototype.removeEntry=function(e){var n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)},t.prototype.getEntry=function(e,n){var r=this.docs.get(n);return K.resolve(r?r.document.clone():Ir.newInvalidDocument(n))},t.prototype.getEntries=function(e,n){var r=this,i=co();return n.forEach(function(o){var s=r.docs.get(o);i=i.insert(o,s?s.document.clone():Ir.newInvalidDocument(o))}),K.resolve(i)},t.prototype.getDocumentsMatchingQuery=function(e,n,r){for(var i=co(),o=new Ie(n.path.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,h=u.value,f=h.document,p=h.readTime;if(!n.path.isPrefixOf(c.path))break;p.compareTo(r)<=0||D_(n,f)&&(i=i.insert(f.key,f.clone()))}return K.resolve(i)},t.prototype.fs=function(e,n){return K.forEach(this.docs,function(r){return n(r)})},t.prototype.newChangeBuffer=function(e){return new DTe(this)},t.prototype.getSize=function(e){return K.resolve(this.size)},t}(),DTe=function(t){function e(n){var r=this;return(r=t.call(this)||this).Ie=n,r}return we(e,t),e.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(o,s){s.document.isValidDocument()?i.push(r.Ie.addEntry(n,s.document,r.getReadTime(o))):r.Ie.removeEntry(o)}),K.waitFor(i)},e.prototype.getFromCache=function(n,r){return this.Ie.getEntry(n,r)},e.prototype.getAllFromCache=function(n,r){return this.Ie.getEntries(n,r)},e}(RZ),ATe=function(){function t(e){this.persistence=e,this.ds=new Zp(function(n){return C_(n)},IS),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.ws=0,this._s=new b2,this.targetCount=0,this.ys=pS.Jt()}return t.prototype.forEachTarget=function(e,n){return this.ds.forEach(function(r,i){return n(i)}),K.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(e){return K.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(e){return K.resolve(this.ws)},t.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),K.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),K.resolve()},t.prototype.te=function(e){this.ds.set(e.target,e);var n=e.targetId;n>this.highestTargetId&&(this.ys=new pS(n),this.highestTargetId=n),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},t.prototype.addTargetData=function(e,n){return this.te(n),this.targetCount+=1,K.resolve()},t.prototype.updateTargetData=function(e,n){return this.te(n),K.resolve()},t.prototype.removeTargetData=function(e,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,K.resolve()},t.prototype.removeTargets=function(e,n,r){var i=this,o=0,s=[];return this.ds.forEach(function(u,c){c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i.ds.delete(u),s.push(i.removeMatchingKeysForTargetId(e,c.targetId)),o++)}),K.waitFor(s).next(function(){return o})},t.prototype.getTargetCount=function(e){return K.resolve(this.targetCount)},t.prototype.getTargetData=function(e,n){var r=this.ds.get(n)||null;return K.resolve(r)},t.prototype.addMatchingKeys=function(e,n,r){return this._s.Jn(n,r),K.resolve()},t.prototype.removeMatchingKeys=function(e,n,r){this._s.Xn(n,r);var i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(function(s){o.push(i.markPotentiallyOrphaned(e,s))}),K.waitFor(o)},t.prototype.removeMatchingKeysForTargetId=function(e,n){return this._s.Zn(n),K.resolve()},t.prototype.getMatchingKeysForTargetId=function(e,n){var r=this._s.es(n);return K.resolve(r)},t.prototype.containsKey=function(e,n){return K.resolve(this._s.containsKey(n))},t}(),xTe=function(){function t(e,n){var r=this;this.gs={},this.Ne=new Vi(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new ATe(this),this.Ut=new rTe,this.Ue=function(i,o){return new STe(i,function(s){return r.referenceDelegate.ps(s)})}(this.Ut),this.R=new CZ(n),this.Ke=new TTe(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(e){var n=this.gs[e.toKey()];return n||(n=new CTe(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=n),n},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(e,n,r){var i=this;Z("MemoryPersistence","Starting transaction:",e);var o=new NTe(this.Ne.next());return this.referenceDelegate.Es(),r(o).next(function(s){return i.referenceDelegate.Ts(o).next(function(){return s})}).toPromise().then(function(s){return o.raiseOnCommittedEvent(),s})},t.prototype.Is=function(e,n){return K.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(e,n)}}))},t}(),NTe=function(t){function e(n){var r=this;return(r=t.call(this)||this).currentSequenceNumber=n,r}return we(e,t),e}(bZ),RTe=function(){function t(e){this.persistence=e,this.As=new b2,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw _e()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(e,n,r){return this.As.addReference(r,n),this.vs.delete(r.toString()),K.resolve()},t.prototype.removeReference=function(e,n,r){return this.As.removeReference(r,n),this.vs.add(r.toString()),K.resolve()},t.prototype.markPotentiallyOrphaned=function(e,n){return this.vs.add(n.toString()),K.resolve()},t.prototype.removeTarget=function(e,n){var r=this;this.As.Zn(n.targetId).forEach(function(o){return r.vs.add(o.toString())});var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(function(o){o.forEach(function(s){return r.vs.add(s.toString())})}).next(function(){return i.removeTargetData(e,n)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(e){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.vs,function(i){var o=Ie.fromPath(i);return n.Ps(e,o).next(function(s){s||r.removeEntry(o)})}).next(function(){return n.Rs=null,r.apply(e)})},t.prototype.updateLimboDocument=function(e,n){var r=this;return this.Ps(e,n).next(function(i){i?r.vs.delete(n.toString()):r.vs.add(n.toString())})},t.prototype.ps=function(e){return 0},t.prototype.Ps=function(e,n){var r=this;return K.or([function(){return K.resolve(r.As.containsKey(n))},function(){return r.persistence.getTargetCache().containsKey(e,n)},function(){return r.persistence.Is(e,n)}])},t}(),_r=function(){function t(e){this.uid=e}return t.prototype.isAuthenticated=function(){return this.uid!=null},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(e){return e.uid===this.uid},t}();function dJ(t,e){return"firestore_clients_"+t+"_"+e}function fJ(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function HV(t,e){return"firestore_targets_"+t+"_"+e}_r.UNAUTHENTICATED=new _r(null),_r.GOOGLE_CREDENTIALS=new _r("google-credentials-uid"),_r.FIRST_PARTY=new _r("first-party-uid"),_r.MOCK_USER=new _r("mock-user");var pJ=function(){function t(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return s&&o.error&&(s=typeof o.error.message=="string"&&typeof o.error.code=="string")&&(i=new $(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Un("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),$V=function(){function t(e,n,r){this.targetId=e,this.state=n,this.error=r}return t.Vs=function(e,n){var r,i=JSON.parse(n),o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(r=new $(i.error.code,i.error.message)),o?new t(e,i.state,r):(Un("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),gJ=function(){function t(e,n){this.clientId=e,this.activeTargetIds=n}return t.Vs=function(e,n){for(var r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=CS(),s=0;i&&s<r.activeTargetIds.length;++s)i=GJ(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Un("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),MTe=function(){function t(e,n){this.clientId=e,this.onlineState=n}return t.Vs=function(e){var n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Un("SharedClientState","Failed to parse online state: "+e),null)},t}(),e2=function(){function t(){this.activeTargetIds=CS()}return t.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},t.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},t.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},t}(),zV=function(){function t(e,n,r,i,o){this.window=e,this.Se=n,this.persistenceKey=r,this.Ns=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Fr(at),this.started=!1,this.$s=[];var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Os=dJ(this.persistenceKey,this.Ns),this.Ms=function(u){return"firestore_sequence_number_"+u}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new e2),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(u){return"firestore_online_state_"+u}(this.persistenceKey),this.Ks=function(u){return"firestore_bundle_loaded_"+u}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(e){return!(!e||!e.localStorage)},t.prototype.start=function(){return V(this,void 0,void 0,function(){var e,n,r,i,o,s,u,c,h,f,p,m=this;return U(this,function(v){switch(v.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=v.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.Ns&&(o=this.getItem(dJ(this.persistenceKey,i)))&&(s=gJ.Vs(i,o))&&(this.Fs=this.Fs.insert(s.clientId,s));for(this.Qs(),(u=this.storage.getItem(this.Us))&&(c=this.js(u))&&this.Ws(c),h=0,f=this.$s;h<f.length;h++)p=f[h],this.ks(p);return this.$s=[],this.window.addEventListener("pagehide",function(){return m.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(e){var n=!1;return this.Fs.forEach(function(r,i){i.activeTargetIds.has(e)&&(n=!0)}),n},t.prototype.addPendingMutation=function(e){this.zs(e,"pending")},t.prototype.updateMutationState=function(e,n,r){this.zs(e,n,r),this.Hs(e)},t.prototype.addLocalQueryTarget=function(e){var n="not-current";if(this.isActiveQueryTarget(e)){var r=this.storage.getItem(HV(this.persistenceKey,e));if(r){var i=$V.Vs(e,r);i&&(n=i.state)}}return this.Js.Ds(e),this.Qs(),n},t.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},t.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},t.prototype.clearQueryState=function(e){this.removeItem(HV(this.persistenceKey,e))},t.prototype.updateQueryState=function(e,n,r){this.Ys(e,n,r)},t.prototype.handleUserChange=function(e,n,r){var i=this;n.forEach(function(o){i.Hs(o)}),this.currentUser=e,r.forEach(function(o){i.addPendingMutation(o)})},t.prototype.setOnlineState=function(e){this.Xs(e)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(e){var n=this.storage.getItem(e);return Z("SharedClientState","READ",e,n),n},t.prototype.setItem=function(e,n){Z("SharedClientState","SET",e,n),this.storage.setItem(e,n)},t.prototype.removeItem=function(e){Z("SharedClientState","REMOVE",e),this.storage.removeItem(e)},t.prototype.ks=function(e){var n=this,r=e;if(r.storageArea===this.storage){if(Z("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void Un("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return V(n,void 0,void 0,function(){var i,o,s,u,c,h;return U(this,function(f){if(this.started){if(r.key!==null){if(this.Ls.test(r.key)){if(r.newValue==null)return i=this.ti(r.key),[2,this.ei(i,null)];if(o=this.ni(r.key,r.newValue))return[2,this.ei(o.clientId,o)]}else if(this.Bs.test(r.key)){if(r.newValue!==null&&(s=this.si(r.key,r.newValue)))return[2,this.ii(s)]}else if(this.qs.test(r.key)){if(r.newValue!==null&&(u=this.ri(r.key,r.newValue)))return[2,this.oi(u)]}else if(r.key===this.Us){if(r.newValue!==null&&(c=this.js(r.newValue)))return[2,this.Ws(c)]}else if(r.key===this.Ms)(h=function(p){var m=Vi.o;if(p!=null)try{var v=JSON.parse(p);xe(typeof v=="number"),m=v}catch(_){Un("SharedClientState","Failed to read sequence number from WebStorage",_)}return m}(r.newValue))!==Vi.o&&this.sequenceNumberHandler(h);else if(r.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(r);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(e,n,r){var i=new pJ(this.currentUser,e,n,r),o=fJ(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ss())},t.prototype.Hs=function(e){var n=fJ(this.persistenceKey,this.currentUser,e);this.removeItem(n)},t.prototype.Xs=function(e){var n={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(n))},t.prototype.Ys=function(e,n,r){var i=HV(this.persistenceKey,e),o=new $V(e,n,r);this.setItem(i,o.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(e){var n=this.Ls.exec(e);return n?n[1]:null},t.prototype.ni=function(e,n){var r=this.ti(e);return gJ.Vs(r,n)},t.prototype.si=function(e,n){var r=this.Bs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return pJ.Vs(new _r(o),i,n)},t.prototype.ri=function(e,n){var r=this.qs.exec(e),i=Number(r[1]);return $V.Vs(i,n)},t.prototype.js=function(e){return MTe.Vs(e)},t.prototype.ii=function(e){return V(this,void 0,void 0,function(){return U(this,function(n){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(Z("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},t.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},t.prototype.ei=function(e,n){var r=this,i=n?this.Fs.insert(e,n):this.Fs.remove(e),o=this.Gs(this.Fs),s=this.Gs(i),u=[],c=[];return s.forEach(function(h){o.has(h)||u.push(h)}),o.forEach(function(h){s.has(h)||c.push(h)}),this.syncEngine.hi(u,c).then(function(){r.Fs=i})},t.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},t.prototype.Gs=function(e){var n=CS();return e.forEach(function(r,i){n=n.unionWith(i.activeTargetIds)}),n},t}(),jZ=function(){function t(){this.li=new e2,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(e){},t.prototype.updateMutationState=function(e,n,r){},t.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},t.prototype.updateQueryState=function(e,n,r){this.fi[e]=n},t.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},t.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},t.prototype.clearQueryState=function(e){delete this.fi[e]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},t.prototype.start=function(){return this.li=new e2,Promise.resolve()},t.prototype.handleUserChange=function(e,n,r){},t.prototype.setOnlineState=function(e){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(e){},t.prototype.notifyBundleLoaded=function(){},t}(),PTe=function(){function t(){}return t.prototype.di=function(e){},t.prototype.shutdown=function(){},t}(),mJ=function(){function t(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return t.prototype.di=function(e){this.gi.push(e)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,n=this.gi;e<n.length;e++)(0,n[e])(0)},t.prototype.yi=function(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,n=this.gi;e<n.length;e++)(0,n[e])(1)},t.yt=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},t}(),kTe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},OTe=function(){function t(e){this.Ei=e.Ei,this.Ti=e.Ti}return t.prototype.Ii=function(e){this.Ai=e},t.prototype.Ri=function(e){this.bi=e},t.prototype.onMessage=function(e){this.vi=e},t.prototype.close=function(){this.Ti()},t.prototype.send=function(e){this.Ei(e)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(e){this.bi(e)},t.prototype.Si=function(e){this.vi(e)},t}(),FTe=function(t){function e(n){var r=this;return(r=t.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.autoDetectLongPolling=n.autoDetectLongPolling,r.useFetchStreams=n.useFetchStreams,r}return we(e,t),e.prototype.Fi=function(n,r,i,o){return new Promise(function(s,u){var c=new PX;c.listenOnce(NX.COMPLETE,function(){try{switch(c.getLastErrorCode()){case QC.NO_ERROR:var f=c.getResponseJson();Z("Connection","XHR received:",JSON.stringify(f)),s(f);break;case QC.TIMEOUT:Z("Connection",'RPC "'+n+'" timed out'),u(new $(k.DEADLINE_EXCEEDED,"Request time out"));break;case QC.HTTP_ERROR:var p=c.getStatus();if(Z("Connection",'RPC "'+n+'" failed with status:',p,"response text:",c.getResponseText()),p>0){var m=c.getResponseJson().error;if(m&&m.status&&m.message){var v=function(_){var E=_.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(E)>=0?E:k.UNKNOWN}(m.status);u(new $(v,m.message))}else u(new $(k.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new $(k.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{Z("Connection",'RPC "'+n+'" completed.')}});var h=JSON.stringify(o);c.send(r,"POST",h,i,15)})},e.prototype.Oi=function(n,r){var i=[this.Di,"/","google.firestore.v1.Firestore","/",n,"/channel"],o=AX(),s=xX(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new MX({})),this.ki(u.initMessageHeaders,r),uY()||lY()||hY()||dY()||fY()||cY()||(u.httpHeadersOverwriteParam="$httpHeaders");var c=i.join("");Z("Connection","Creating WebChannel: "+c,u);var h=o.createWebChannel(c,u),f=!1,p=!1,m=new OTe({Ei:function(_){p?Z("Connection","Not sending because WebChannel is closed:",_):(f||(Z("Connection","Opening WebChannel transport."),h.open(),f=!0),Z("Connection","WebChannel sending:",_),h.send(_))},Ti:function(){return h.close()}}),v=function(_,E,b){_.listen(E,function(T){try{b(T)}catch(S){setTimeout(function(){throw S},0)}})};return v(h,u_.EventType.OPEN,function(){p||Z("Connection","WebChannel transport opened.")}),v(h,u_.EventType.CLOSE,function(){p||(p=!0,Z("Connection","WebChannel transport closed"),m.Vi())}),v(h,u_.EventType.ERROR,function(_){p||(p=!0,sS("Connection","WebChannel transport errored:",_),m.Vi(new $(k.UNAVAILABLE,"The operation could not be completed")))}),v(h,u_.EventType.MESSAGE,function(_){var E;if(!p){var b=_.data[0];xe(!!b);var T=b,S=T.error||((E=T[0])===null||E===void 0?void 0:E.error);if(S){Z("Connection","WebChannel received error:",S);var A=S.status,x=function(N){var ie=Ln[N];if(ie!==void 0)return uZ(ie)}(A),H=S.message;x===void 0&&(x=k.INTERNAL,H="Unknown error status: "+A+" with message "+S.message),p=!0,m.Vi(new $(x,H)),h.close()}else Z("Connection","WebChannel received:",b),m.Si(b)}}),v(s,RX.STAT_EVENT,function(_){_.stat===BV.PROXY?Z("Connection","Detected buffering proxy"):_.stat===BV.NOPROXY&&Z("Connection","Detected no buffering proxy")}),setTimeout(function(){m.Pi()},0),m},e}(function(){function t(e){this.databaseInfo=e,this.databaseId=e.databaseId;var n=e.ssl?"https":"http";this.Di=n+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(e,n,r,i){var o=this.xi(e,n);Z("RestConnection","Sending: ",o,r);var s={};return this.ki(s,i),this.Fi(e,o,s,r).then(function(u){return Z("RestConnection","Received: ",u),u},function(u){throw sS("RestConnection",e+" failed with error: ",u,"url: ",o,"request:",r),u})},t.prototype.$i=function(e,n,r,i){return this.Ni(e,n,r,i)},t.prototype.ki=function(e,n){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(var r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(e[r]=n.authHeaders[r])},t.prototype.xi=function(e,n){var r=kTe[e];return this.Di+"/v1/"+n+":"+r},t}());function BZ(){return typeof window<"u"?window:null}function iS(){return typeof document<"u"?document:null}function DS(t){return new Bbe(t,!0)}var T2=function(){function t(e,n,r,i,o){r===void 0&&(r=1e3),i===void 0&&(i=1.5),o===void 0&&(o=6e4),this.Se=e,this.timerId=n,this.Mi=r,this.Li=i,this.Bi=o,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(e){var n=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),i=Math.max(0,Date.now()-this.Ki),o=Math.max(0,r-i);o>0&&Z("ExponentialBackoff","Backing off for "+o+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,o,function(){return n.Ki=Date.now(),e()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),qZ=function(){function t(e,n,r,i,o,s){this.Se=e,this.zi=r,this.Hi=i,this.Ji=o,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new T2(e,n)}return t.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},t.prototype.er=function(){return this.state===2},t.prototype.start=function(){this.state!==3?this.auth():this.nr()},t.prototype.stop=function(){return V(this,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var e=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return e.rr()}))},t.prototype.cr=function(e){this.ur(),this.stream.send(e)},t.prototype.rr=function(){return V(this,void 0,void 0,function(){return U(this,function(e){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(e,n){return V(this,void 0,void 0,function(){return U(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,e!==3?this.Zi.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Un(n.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===k.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(n)];case 1:return r.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var e=this;this.state=1;var n=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(i){e.Yi===r&&e.lr(i)},function(i){n(function(){var o=new $(k.UNKNOWN,"Fetching auth token failed: "+i.message);return e.dr(o)})})},t.prototype.lr=function(e){var n=this,r=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(function(){r(function(){return n.state=2,n.listener.Ii()})}),this.stream.Ri(function(i){r(function(){return n.dr(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},t.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji(function(){return V(e,void 0,void 0,function(){return U(this,function(n){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(e){return Z("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},t.prototype.hr=function(e){var n=this;return function(r){n.Se.enqueueAndForget(function(){return n.Yi===e?r():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),LTe=function(t){function e(n,r,i,o,s){var u=this;return(u=t.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,s)||this).R=o,u}return we(e,t),e.prototype.wr=function(n){return this.Hi.Oi("Listen",n)},e.prototype.onMessage=function(n){this.Zi.reset();var r=function(o,s){var u;if("targetChange"in s){s.targetChange;var c=function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:_e()}(s.targetChange.targetChangeType||"NO_CHANGE"),h=s.targetChange.targetIds||[],f=function(b,T){return b.I?(xe(T===void 0||typeof T=="string"),Jr.fromBase64String(T||"")):(xe(T===void 0||T instanceof Uint8Array),Jr.fromUint8Array(T||new Uint8Array))}(o,s.targetChange.resumeToken),p=(m=s.targetChange.cause)&&function(b){var T=b.code===void 0?k.UNKNOWN:uZ(b.code);return new $(T,b.message||"")}(m);u=new hZ(c,h,f,p||null)}else if("documentChange"in s){s.documentChange,(c=s.documentChange).document,c.document.name,c.document.updateTime,h=Ws(o,c.document.name),f=wr(c.document.updateTime);var m=new Li({mapValue:{fields:c.document.fields}}),v=(p=Ir.newFoundDocument(h,f,m),c.targetIds||[]),_=c.removedTargetIds||[];u=new rS(v,_,p.key,p)}else if("documentDelete"in s)s.documentDelete,(c=s.documentDelete).document,h=Ws(o,c.document),f=c.readTime?wr(c.readTime):We.min(),m=Ir.newNoDocument(h,f),p=c.removedTargetIds||[],u=new rS([],p,m.key,m);else if("documentRemove"in s)s.documentRemove,(c=s.documentRemove).document,h=Ws(o,c.document),f=c.removedTargetIds||[],u=new rS([],f,h,null);else{if(!("filter"in s))return _e();s.filter;var E=s.filter;E.targetId,c=E.count||0,h=new Mbe(c),f=E.targetId,u=new lZ(f,h)}return u}(this.R,n),i=function(o){if(!("targetChange"in o))return We.min();var s=o.targetChange;return s.targetIds&&s.targetIds.length?We.min():s.readTime?wr(s.readTime):We.min()}(n);return this.listener._r(r,i)},e.prototype.mr=function(n){var r={};r.database=__(this.R),r.addTarget=function(o,s){var u,c=s.target;return(u=cS(c)?{documents:yZ(o,c)}:{query:vZ(o,c)}).targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=dZ(o,s.resumeToken):s.snapshotVersion.compareTo(We.min())>0&&(u.readTime=y_(o,s.snapshotVersion.toTimestamp())),u}(this.R,n);var i=function(o,s){var u=function(c,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _e()}}(0,s.purpose);return u==null?null:{"goog-listen-tags":u}}(this.R,n);i&&(r.labels=i),this.cr(r)},e.prototype.yr=function(n){var r={};r.database=__(this.R),r.removeTarget=n,this.cr(r)},e}(qZ),VTe=function(t){function e(n,r,i,o,s){var u=this;return(u=t.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,s)||this).R=o,u.gr=!1,u}return we(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(n){return this.Hi.Oi("Write",n)},e.prototype.onMessage=function(n){if(xe(!!n.streamToken),this.lastStreamToken=n.streamToken,this.gr){this.Zi.reset();var r=function(o,s){return o&&o.length>0?(xe(s!==void 0),o.map(function(u){return function(c,h){var f=c.updateTime?wr(c.updateTime):wr(h);return f.isEqual(We.min())&&(f=wr(h)),new xbe(f,c.transformResults||[])}(u,s)})):[]}(n.writeResults,n.commitTime),i=wr(n.commitTime);return this.listener.Tr(i,r)}return xe(!n.writeResults||n.writeResults.length===0),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var n={};n.database=__(this.R),this.cr(n)},e.prototype.Er=function(n){var r=this,i={streamToken:this.lastStreamToken,writes:n.map(function(o){return dS(r.R,o)})};this.cr(i)},e}(qZ),UTe=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).credentials=n,o.Hi=r,o.R=i,o.Rr=!1,o}return we(e,t),e.prototype.br=function(){if(this.Rr)throw new $(k.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(n,r,i){var o=this;return this.br(),this.credentials.getToken().then(function(s){return o.Hi.Ni(n,r,i,s)}).catch(function(s){throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&o.credentials.invalidateToken(),s):new $(k.UNKNOWN,s.toString())})},e.prototype.$i=function(n,r,i){var o=this;return this.br(),this.credentials.getToken().then(function(s){return o.Hi.$i(n,r,i,s)}).catch(function(s){throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&o.credentials.invalidateToken(),s):new $(k.UNKNOWN,s.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),jTe=function(){function t(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var e=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(e){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},t.prototype.set=function(e){this.kr(),this.vr=0,e==="Online"&&(this.Vr=!1),this.Dr(e)},t.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},t.prototype.Cr=function(e){var n="Could not reach Cloud Firestore backend. "+e+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(Un(n),this.Vr=!1):Z("OnlineStateTracker",n)},t.prototype.kr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},t}(),BTe=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(s){n.enqueueAndForget(function(){return V(o,void 0,void 0,function(){return U(this,function(u){switch(u.label){case 0:return _c(this)?(Z("RemoteStore","Restarting streams for network reachability change."),[4,function(c){return V(this,void 0,void 0,function(){var h;return U(this,function(f){switch(f.label){case 0:return(h=oe(c)).Or.add(4),[4,eg(h)];case 1:return f.sent(),h.Br.set("Unknown"),h.Or.delete(4),[4,R_(h)];case 2:return f.sent(),[2]}})})}(this)]):[3,2];case 1:u.sent(),u.label=2;case 2:return[2]}})})})}),this.Br=new jTe(n,r)};function R_(t){return V(this,void 0,void 0,function(){var e,n;return U(this,function(r){switch(r.label){case 0:if(!_c(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function eg(t){return V(this,void 0,void 0,function(){var e,n;return U(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function AS(t,e){var n=oe(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),D2(n)?S2(n):ng(n).er()&&C2(n,e))}function w_(t,e){var n=oe(t),r=ng(n);n.$r.delete(e),r.er()&&HZ(n,e),n.$r.size===0&&(r.er()?r.ir():_c(n)&&n.Br.set("Unknown"))}function C2(t,e){t.qr.U(e.targetId),ng(t).mr(e)}function HZ(t,e){t.qr.U(e),ng(t).yr(e)}function S2(t){t.qr=new Vbe({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),ng(t).start(),t.Br.Sr()}function D2(t){return _c(t)&&!ng(t).tr()&&t.$r.size>0}function _c(t){return oe(t).Or.size===0}function $Z(t){t.qr=void 0}function qTe(t){return V(this,void 0,void 0,function(){return U(this,function(e){return t.$r.forEach(function(n,r){C2(t,n)}),[2]})})}function HTe(t,e){return V(this,void 0,void 0,function(){return U(this,function(n){return $Z(t),D2(t)?(t.Br.Nr(e),S2(t)):t.Br.set("Unknown"),[2]})})}function $Te(t,e,n){return V(this,void 0,void 0,function(){var r,i,o;return U(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof hZ&&e.state===2&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(u,c){return V(this,void 0,void 0,function(){var h,f,p,m;return U(this,function(v){switch(v.label){case 0:h=c.cause,f=0,p=c.targetIds,v.label=1;case 1:return f<p.length?(m=p[f],u.$r.has(m)?[4,u.remoteSyncer.rejectListen(m,h)]:[3,3]):[3,5];case 2:v.sent(),u.$r.delete(m),u.qr.removeTarget(m),v.label=3;case 3:v.label=4;case 4:return f++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,mS(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof rS?t.qr.X(e):e instanceof lZ?t.qr.rt(e):t.qr.et(e),n.isEqual(We.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,FZ(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(u,c){var h=u.qr.ut(c);return h.targetChanges.forEach(function(f,p){if(f.resumeToken.approximateByteSize()>0){var m=u.$r.get(p);m&&u.$r.set(p,m.withResumeToken(f.resumeToken,c))}}),h.targetMismatches.forEach(function(f){var p=u.$r.get(f);if(p){u.$r.set(f,p.withResumeToken(Jr.EMPTY_BYTE_STRING,p.snapshotVersion)),HZ(u,f);var m=new SS(p.target,f,1,p.sequenceNumber);C2(u,m)}}),u.remoteSyncer.applyRemoteEvent(h)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Z("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,mS(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function mS(t,e,n){return V(this,void 0,void 0,function(){var r=this;return U(this,function(i){switch(i.label){case 0:if(!Nh(e))throw e;return t.Or.add(1),[4,eg(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return FZ(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return V(r,void 0,void 0,function(){return U(this,function(o){switch(o.label){case 0:return Z("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return o.sent(),t.Or.delete(1),[4,R_(t)];case 2:return o.sent(),[2]}})})}),[2]}})})}function zZ(t,e){return e().catch(function(n){return mS(t,n,e)})}function tg(t){return V(this,void 0,void 0,function(){var e,n,r,i,o;return U(this,function(s){switch(s.label){case 0:e=oe(t),n=yc(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,s.label=1;case 1:if(!function(u){return _c(u)&&u.Fr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,wTe(e.localStore,r)];case 3:return(i=s.sent())===null?(e.Fr.length===0&&n.ir(),[3,7]):(r=i.batchId,function(u,c){u.Fr.push(c);var h=yc(u);h.er()&&h.pr&&h.Er(c.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,mS(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return GZ(e)&&WZ(e),[2]}})})}function GZ(t){return _c(t)&&!yc(t).tr()&&t.Fr.length>0}function WZ(t){yc(t).start()}function zTe(t){return V(this,void 0,void 0,function(){return U(this,function(e){return yc(t).Ar(),[2]})})}function GTe(t){return V(this,void 0,void 0,function(){var e,n,r,i;return U(this,function(o){for(e=yc(t),n=0,r=t.Fr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]})})}function WTe(t,e,n){return V(this,void 0,void 0,function(){var r,i;return U(this,function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=tTe.from(r,e,n),[4,zZ(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,tg(t)];case 2:return o.sent(),[2]}})})}function KTe(t,e){return V(this,void 0,void 0,function(){return U(this,function(n){switch(n.label){case 0:return e&&yc(t).pr?[4,function(r,i){return V(this,void 0,void 0,function(){var o,s;return U(this,function(u){switch(u.label){case 0:return aZ(s=i.code)&&s!==k.ABORTED?(o=r.Fr.shift(),yc(r).sr(),[4,zZ(r,function(){return r.remoteSyncer.rejectFailedWrite(o.batchId,i)})]):[3,3];case 1:return u.sent(),[4,tg(r)];case 2:u.sent(),u.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return GZ(t)&&WZ(t),[2]}})})}function t2(t,e){return V(this,void 0,void 0,function(){var n;return U(this,function(r){switch(r.label){case 0:return n=oe(t),e?(n.Or.delete(2),[4,R_(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,eg(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function ng(t){var e=this;return t.Ur||(t.Ur=function(n,r,i){var o=oe(n);return o.br(),new LTe(r,o.Hi,o.credentials,o.R,i)}(t.datastore,t.asyncQueue,{Ii:qTe.bind(null,t),Ri:HTe.bind(null,t),_r:$Te.bind(null,t)}),t.Mr.push(function(n){return V(e,void 0,void 0,function(){return U(this,function(r){switch(r.label){case 0:return n?(t.Ur.sr(),D2(t)?S2(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:r.sent(),$Z(t),r.label=3;case 3:return[2]}})})})),t.Ur}function yc(t){var e=this;return t.Kr||(t.Kr=function(n,r,i){var o=oe(n);return o.br(),new VTe(r,o.Hi,o.credentials,o.R,i)}(t.datastore,t.asyncQueue,{Ii:zTe.bind(null,t),Ri:KTe.bind(null,t),Ir:GTe.bind(null,t),Tr:WTe.bind(null,t)}),t.Mr.push(function(n){return V(e,void 0,void 0,function(){return U(this,function(r){switch(r.label){case 0:return n?(t.Kr.sr(),[4,tg(t)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:r.sent(),t.Fr.length>0&&(Z("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),r.label=4;case 4:return[2]}})})})),t.Kr}var QTe=function(){function t(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(s){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(e){var n=this;this.timerHandle=setTimeout(function(){return n.handleDelayElapsed()},e)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},t.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return e.timerHandle!==null?(e.clearTimeout(),e.op().then(function(n){return e.deferred.resolve(n)})):Promise.resolve()})},t.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function rg(t,e){if(Un("AsyncQueue",e+": "+t),Nh(t))return new $(k.UNAVAILABLE,e+": "+t);throw t}var KZ=function(){function t(e){this.comparator=e?function(n,r){return e(n,r)||Ie.comparator(n.key,r.key)}:function(n,r){return Ie.comparator(n.key,r.key)},this.keyedMap=XV(),this.sortedSet=new Fr(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(e){return this.keyedMap.get(e)!=null},t.prototype.get=function(e){return this.keyedMap.get(e)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(e){var n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(n,r){return e(n),!1})},t.prototype.add=function(e){var n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))},t.prototype.delete=function(e){var n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var e=[];return this.forEach(function(n){e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),yJ=function(){function t(){this.Qr=new Fr(Ie.comparator)}return t.prototype.track=function(e){var n=e.doc.key,r=this.Qr.get(n);r?e.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,e):e.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Qr=this.Qr.remove(n):e.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):_e():this.Qr=this.Qr.insert(n,e)},t.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal(function(n,r){e.push(r)}),e},t}(),yS=function(){function t(e,n,r,i,o,s,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=c}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(s){o.push({type:0,doc:s})}),new t(e,n,KZ.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&S_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},t}(),YTe=function(){this.Wr=void 0,this.listeners=[]},XTe=function(){this.queries=new Zp(function(t){return XJ(t)},S_),this.onlineState="Unknown",this.Gr=new Set};function A2(t,e){return V(this,void 0,void 0,function(){var n,r,i,o,s,u,c;return U(this,function(h){switch(h.label){case 0:if(n=oe(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new YTe),!i)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=h.sent(),[3,4];case 3:return u=h.sent(),c=rg(u,"Initialization of query '"+QV(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&N2(n),[2]}})})}function x2(t,e){return V(this,void 0,void 0,function(){var n,r,i,o,s;return U(this,function(u){return n=oe(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=o.listeners.length===0),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function JTe(t,e){for(var n=oe(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,c=n.queries.get(u);if(c){for(var h=0,f=c.listeners;h<f.length;h++)f[h].Hr(s)&&(r=!0);c.Wr=s}}r&&N2(n)}function ZTe(t,e,n){var r=oe(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function N2(t){t.Gr.forEach(function(e){e.next()})}var R2=function(){function t(e,n,r){this.query=e,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return t.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=e.docChanges;r<i.length;r++){var o=i[r];o.type!==3&&n.push(o)}e=new yS(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),s=!0):this.eo(e,this.onlineState)&&(this.no(e),s=!0),this.Xr=e,s},t.prototype.onError=function(e){this.Jr.error(e)},t.prototype.zr=function(e){this.onlineState=e;var n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),n=!0),n},t.prototype.eo=function(e,n){if(!e.fromCache)return!0;var r=n!=="Offline";return!(this.options.so&&r||e.docs.isEmpty()&&n!=="Offline")},t.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var n=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0},t.prototype.no=function(e){e=yS.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},t}(),eCe=function(){function t(e,n){this.payload=e,this.byteLength=n}return t.prototype.io=function(){return"metadata"in this.payload},t}(),vJ=function(){function t(e){this.R=e}return t.prototype.qn=function(e){return Ws(this.R,e)},t.prototype.Un=function(e){return e.metadata.exists?mZ(this.R,e.document,!1):Ir.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},t.prototype.Kn=function(e){return wr(e)},t}(),cqe=function(){function t(e,n,r){this.ro=e,this.localStore=n,this.R=r,this.queries=[],this.documents=[],this.progress=tCe(e)}return t.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var n=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n),n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null},t.prototype.co=function(e){for(var n=new Map,r=new vJ(this.R),i=0,o=e;i<o.length;i++){var s=o[i];if(s.metadata.queries)for(var u=r.qn(s.metadata.name),c=0,h=s.metadata.queries;c<h.length;c++){var f=h[c],p=(n.get(f)||At()).add(u);n.set(f,p)}}return n},t.prototype.complete=function(){return V(this,void 0,void 0,function(){var e,n,r,i,o;return U(this,function(s){switch(s.label){case 0:return[4,ITe(this.localStore,new vJ(this.R),this.documents,this.ro.id)];case 1:e=s.sent(),n=this.co(this.documents),r=0,i=this.queries,s.label=2;case 2:return r<i.length?(o=i[r],[4,bTe(this.localStore,o,n.get(o.name))]):[3,5];case 3:s.sent(),s.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new gTe(Object.assign({},this.progress),e))]}})})},t}();function tCe(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var QZ=function(t){this.key=t},YZ=function(t){this.key=t},XZ=function(){function t(e,n){this.query=e,this.uo=n,this.ao=null,this.current=!1,this.ho=At(),this.mutatedKeys=At(),this.lo=JJ(e),this.fo=new KZ(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(e,n){var r=this,i=n?n.mo:new yJ,o=n?n.fo:this.fo,s=n?n.mutatedKeys:this.mutatedKeys,u=o,c=!1,h=tS(this.query)&&o.size===this.query.limit?o.last():null,f=hS(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(function(m,v){var _=o.get(m),E=D_(r.query,v)?v:null,b=!!_&&r.mutatedKeys.has(_.key),T=!!E&&(E.hasLocalMutations||r.mutatedKeys.has(E.key)&&E.hasCommittedMutations),S=!1;_&&E?_.data.isEqual(E.data)?b!==T&&(i.track({type:3,doc:E}),S=!0):r.yo(_,E)||(i.track({type:2,doc:E}),S=!0,(h&&r.lo(E,h)>0||f&&r.lo(E,f)<0)&&(c=!0)):!_&&E?(i.track({type:0,doc:E}),S=!0):_&&!E&&(i.track({type:1,doc:_}),S=!0,(h||f)&&(c=!0)),S&&(E?(u=u.add(E),s=T?s.add(m):s.delete(m)):(u=u.delete(m),s=s.delete(m)))}),tS(this.query)||hS(this.query))for(;u.size>this.query.limit;){var p=tS(this.query)?u.last():u.first();u=u.delete(p.key),s=s.delete(p.key),i.track({type:1,doc:p})}return{fo:u,mo:i,Nn:c,mutatedKeys:s}},t.prototype.yo=function(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations},t.prototype.applyChanges=function(e,n,r){var i=this,o=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var s=e.mo.jr();s.sort(function(f,p){return function(m,v){var _=function(E){switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return _(m)-_(v)}(f.type,p.type)||i.lo(f.doc,p.doc)}),this.po(r);var u=n?this.Eo():[],c=this.ho.size===0&&this.current?1:0,h=c!==this.ao;return this.ao=c,s.length!==0||h?{snapshot:new yS(this.query,e.fo,o,s,e.mutatedKeys,c===0,h,!1),To:u}:{To:u}},t.prototype.zr=function(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new yJ,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},t.prototype.po=function(e){var n=this;e&&(e.addedDocuments.forEach(function(r){return n.uo=n.uo.add(r)}),e.modifiedDocuments.forEach(function(r){}),e.removedDocuments.forEach(function(r){return n.uo=n.uo.delete(r)}),this.current=e.current)},t.prototype.Eo=function(){var e=this;if(!this.current)return[];var n=this.ho;this.ho=At(),this.fo.forEach(function(i){e.Io(i.key)&&(e.ho=e.ho.add(i.key))});var r=[];return n.forEach(function(i){e.ho.has(i)||r.push(new YZ(i))}),this.ho.forEach(function(i){n.has(i)||r.push(new QZ(i))}),r},t.prototype.Ao=function(e){this.uo=e.Bn,this.ho=At();var n=this._o(e.documents);return this.applyChanges(n,!0)},t.prototype.Ro=function(){return yS.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},t}(),nCe=function(t,e,n){this.query=t,this.targetId=e,this.view=n},rCe=function(t){this.key=t,this.bo=!1},iCe=function(){function t(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new Zp(function(u){return XJ(u)},S_),this.Vo=new Map,this.So=new Set,this.Do=new Fr(Ie.comparator),this.Co=new Map,this.No=new b2,this.xo={},this.ko=new Map,this.Fo=pS.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),t}();function oCe(t,e){return V(this,void 0,void 0,function(){var n,r,i,o,s,u;return U(this,function(c){switch(c.label){case 0:return n=F2(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,zp(n.localStore,lo(e))];case 2:return s=c.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,M2(n,e,r,u==="current")];case 3:i=c.sent(),n.isPrimaryClient&&AS(n.remoteStore,s),c.label=4;case 4:return[2,i]}})})}function M2(t,e,n,r){return V(this,void 0,void 0,function(){var i,o,s,u,c,h;return U(this,function(f){switch(f.label){case 0:return t.Oo=function(p,m,v){return function(_,E,b,T){return V(this,void 0,void 0,function(){var S,A,x;return U(this,function(H){switch(H.label){case 0:return S=E.view._o(b),S.Nn?[4,gS(_.localStore,E.query,!1).then(function(N){var ie=N.documents;return E.view._o(ie,S)})]:[3,2];case 1:S=H.sent(),H.label=2;case 2:return A=T&&T.targetChanges.get(E.targetId),x=E.view.applyChanges(S,_.isPrimaryClient,A),[2,(n2(_,E.targetId,x.To),x.snapshot)]}})})}(t,p,m,v)},[4,gS(t.localStore,e,!0)];case 1:return i=f.sent(),o=new XZ(e,i.Bn),s=o._o(i.documents),u=g2.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),c=o.applyChanges(s,t.isPrimaryClient,u),n2(t,n,c.To),h=new nCe(e,n,o),[2,(t.Po.set(e,h),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}})})}function sCe(t,e){return V(this,void 0,void 0,function(){var n,r,i;return U(this,function(o){switch(o.label){case 0:return n=oe(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(s){return!S_(s,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Gp(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),w_(n.remoteStore,r.targetId),Wp(n,r.targetId)}).catch(Rh)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Wp(n,r.targetId),[4,Gp(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function aCe(t,e,n){return V(this,void 0,void 0,function(){var r,i,o,s;return U(this,function(u){switch(u.label){case 0:r=L2(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(c,h){var f,p=oe(c),m=Xr.now(),v=h.reduce(function(_,E){return _.add(E.key)},At());return p.persistence.runTransaction("Locally write mutations","readwrite",function(_){return p.Mn.pn(_,v).next(function(E){f=E;for(var b=[],T=0,S=h;T<S.length;T++){var A=S[T],x=Rbe(A,f.get(A.key));x!=null&&b.push(new vc(A.key,x,WJ(x.value.mapValue),kr.exists(!0)))}return p._n.addMutationBatch(_,m,b,h)})}).then(function(_){return _.applyToLocalDocumentSet(f),{batchId:_.batchId,changes:f}})}(r.localStore,e)];case 2:return i=u.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(c,h,f){var p=c.xo[c.currentUser.toKey()];p||(p=new Fr(at)),p=p.insert(h,f),c.xo[c.currentUser.toKey()]=p}(r,i.batchId,n),[4,wc(r,i.changes)];case 3:return u.sent(),[4,tg(r.remoteStore)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=rg(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function JZ(t,e){return V(this,void 0,void 0,function(){var n,r;return U(this,function(i){switch(i.label){case 0:n=oe(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,_Te(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(o,s){var u=n.Co.get(s);u&&(xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.bo=!0:o.modifiedDocuments.size>0?xe(u.bo):o.removedDocuments.size>0&&(xe(u.bo),u.bo=!1))}),[4,wc(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Rh(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function _J(t,e,n){var r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){var i=[];r.Po.forEach(function(o,s){var u=s.view.zr(e);u.snapshot&&i.push(u.snapshot)}),function(o,s){var u=oe(o);u.onlineState=s;var c=!1;u.queries.forEach(function(h,f){for(var p=0,m=f.listeners;p<m.length;p++)m[p].zr(s)&&(c=!0)}),c&&N2(u)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function uCe(t,e,n){return V(this,void 0,void 0,function(){var r,i,o,s,u,c;return U(this,function(h){switch(h.label){case 0:return(r=oe(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Fr(Ie.comparator)).insert(o,Ir.newNoDocument(o,We.min())),u=At().add(o),c=new p2(We.min(),new Map,new Qn(at),s,u),[4,JZ(r,c)]):[3,2];case 1:return h.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),O2(r),[3,4];case 2:return[4,Gp(r.localStore,e,!1).then(function(){return Wp(r,e,n)}).catch(Rh)];case 3:h.sent(),h.label=4;case 4:return[2]}})})}function cCe(t,e){return V(this,void 0,void 0,function(){var n,r,i;return U(this,function(o){switch(o.label){case 0:n=oe(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,vTe(n.localStore,e)];case 2:return i=o.sent(),k2(n,r,null),P2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,wc(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Rh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function lCe(t,e,n){return V(this,void 0,void 0,function(){var r,i;return U(this,function(o){switch(o.label){case 0:r=oe(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(s,u){var c=oe(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",function(h){var f;return c._n.lookupMutationBatch(h,u).next(function(p){return xe(p!==null),f=p.keys(),c._n.removeMutationBatch(h,p)}).next(function(){return c._n.performConsistencyCheck(h)}).next(function(){return c.Mn.pn(h,f)})})}(r.localStore,e)];case 2:return i=o.sent(),k2(r,e,n),P2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,wc(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Rh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function hCe(t,e){return V(this,void 0,void 0,function(){var n,r,i,o,s;return U(this,function(u){switch(u.label){case 0:_c((n=oe(t)).remoteStore)||Z("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(c){var h=oe(c);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(f){return h._n.getHighestUnacknowledgedBatchId(f)})}(n.localStore)];case 2:return(r=u.sent())===-1?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=u.sent(),s=rg(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function P2(t,e){(t.ko.get(e)||[]).forEach(function(n){n.resolve()}),t.ko.delete(e)}function k2(t,e,n){var r=oe(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Wp(t,e,n){n===void 0&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(s){t.No.containsKey(s)||ZZ(t,s)})}function ZZ(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);n!==null&&(w_(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),O2(t))}function n2(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof QZ?(t.No.addReference(o.key,e),dCe(t,o)):o instanceof YZ?(Z("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||ZZ(t,o.key)):_e()}}function dCe(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.So.add(r),O2(t))}function O2(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Ie(mt.fromString(e)),r=t.Fo.next();t.Co.set(r,new rCe(n)),t.Do=t.Do.insert(n,r),AS(t.remoteStore,new SS(lo(Jp(n.path)),r,2,Vi.o))}}function wc(t,e,n){return V(this,void 0,void 0,function(){var r,i,o,s;return U(this,function(u){switch(u.label){case 0:return r=oe(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(c,h){s.push(r.Oo(h,e,n).then(function(f){if(f){r.isPrimaryClient&&r.sharedClientState.updateQueryState(h.targetId,f.fromCache?"not-current":"current"),i.push(f);var p=mTe.Pn(h.targetId,f);o.push(p)}}))}),[4,Promise.all(s)]);case 1:return u.sent(),r.vo._r(i),[4,function(c,h){return V(this,void 0,void 0,function(){var f,p,m,v,_,E,b,T,S;return U(this,function(A){switch(A.label){case 0:f=oe(c),A.label=1;case 1:return A.trys.push([1,3,,4]),[4,f.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(x){return K.forEach(h,function(H){return K.forEach(H.bn,function(N){return f.persistence.referenceDelegate.addReference(x,H.targetId,N)}).next(function(){return K.forEach(H.vn,function(N){return f.persistence.referenceDelegate.removeReference(x,H.targetId,N)})})})})];case 2:return A.sent(),[3,4];case 3:if(!Nh(p=A.sent()))throw p;return Z("LocalStore","Failed to update sequence numbers: "+p),[3,4];case 4:for(m=0,v=h;m<v.length;m++)_=v[m],E=_.targetId,_.fromCache||(b=f.kn.get(E),T=b.snapshotVersion,S=b.withLastLimboFreeSnapshotVersion(T),f.kn=f.kn.insert(E,S));return[2]}})})}(r.localStore,o)];case 2:u.sent(),u.label=3;case 3:return[2]}})})}function fCe(t,e){return V(this,void 0,void 0,function(){var n,r;return U(this,function(i){switch(i.label){case 0:return(n=oe(t)).currentUser.isEqual(e)?[3,3]:(Z("SyncEngine","User change. New user:",e.toKey()),[4,OZ(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(o,s){o.ko.forEach(function(u){u.forEach(function(c){c.reject(new $(k.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,wc(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function pCe(t,e){var n=oe(t),r=n.Co.get(e);if(r&&r.bo)return At().add(r.key);var i=At(),o=n.Vo.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var c=u[s],h=n.Po.get(c);i=i.unionWith(h.view.wo)}return i}function gCe(t,e){return V(this,void 0,void 0,function(){var n,r,i;return U(this,function(o){switch(o.label){case 0:return[4,gS((n=oe(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&n2(n,e.targetId,i.To),i)]}})})}function mCe(t){return V(this,void 0,void 0,function(){var e;return U(this,function(n){return[2,UZ((e=oe(t)).localStore).then(function(r){return wc(e,r)})]})})}function yCe(t,e,n,r){return V(this,void 0,void 0,function(){var i,o;return U(this,function(s){switch(s.label){case 0:return[4,function(u,c){var h=oe(u),f=oe(h._n);return h.persistence.runTransaction("Lookup mutation documents","readonly",function(p){return f.jt(p,c).next(function(m){return m?h.Mn.pn(p,m):K.resolve(null)})})}((i=oe(t)).localStore,e)];case 1:return(o=s.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,tg(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(k2(i,e,r||null),P2(i,e),function(u,c){oe(oe(u)._n).Gt(c)}(i.localStore,e)):_e(),s.label=4;case 4:return[4,wc(i,o)];case 5:return s.sent(),[3,7];case 6:Z("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function vCe(t,e){return V(this,void 0,void 0,function(){var n,r,i,o,s,u,c,h;return U(this,function(f){switch(f.label){case 0:return F2(n=oe(t)),L2(n),e!==!0||n.$o===!0?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,wJ(n,r.toArray())]);case 1:return i=f.sent(),n.$o=!0,[4,t2(n.remoteStore,!0)];case 2:for(f.sent(),o=0,s=i;o<s.length;o++)u=s[o],AS(n.remoteStore,u);return[3,7];case 3:return e!==!1||n.$o===!1?[3,7]:(c=[],h=Promise.resolve(),n.Vo.forEach(function(p,m){n.sharedClientState.isLocalQueryTarget(m)?c.push(m):h=h.then(function(){return Wp(n,m),Gp(n.localStore,m,!0)}),w_(n.remoteStore,m)}),[4,h]);case 4:return f.sent(),[4,wJ(n,c)];case 5:return f.sent(),function(p){var m=oe(p);m.Co.forEach(function(v,_){w_(m.remoteStore,_)}),m.No.ts(),m.Co=new Map,m.Do=new Fr(Ie.comparator)}(n),n.$o=!1,[4,t2(n.remoteStore,!1)];case 6:f.sent(),f.label=7;case 7:return[2]}})})}function wJ(t,e,n){return V(this,void 0,void 0,function(){var r,i,o,s,u,c,h,f,p,m,v,_,E,b;return U(this,function(T){switch(T.label){case 0:r=oe(t),i=[],o=[],s=0,u=e,T.label=1;case 1:return s<u.length?(c=u[s],h=void 0,(f=r.Vo.get(c))&&f.length!==0?[4,zp(r.localStore,lo(f[0]))]:[3,7]):[3,13];case 2:h=T.sent(),p=0,m=f,T.label=3;case 3:return p<m.length?(v=m[p],_=r.Po.get(v),[4,gCe(r,_)]):[3,6];case 4:(E=T.sent()).snapshot&&o.push(E.snapshot),T.label=5;case 5:return p++,[3,3];case 6:return[3,11];case 7:return[4,VZ(r.localStore,c)];case 8:return b=T.sent(),[4,zp(r.localStore,b)];case 9:return h=T.sent(),[4,M2(r,eee(b),c,!1)];case 10:T.sent(),T.label=11;case 11:i.push(h),T.label=12;case 12:return s++,[3,1];case 13:return[2,(r.vo._r(o),i)]}})})}function eee(t){return QJ(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function _Ce(t){var e=oe(t);return oe(oe(e.localStore).persistence).fn()}function wCe(t,e,n,r){return V(this,void 0,void 0,function(){var i,o,s;return U(this,function(u){switch(u.label){case 0:return(i=oe(t)).$o?(Z("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,UZ(i.localStore)];case 3:return o=u.sent(),s=p2.createSynthesizedRemoteEventForCurrentChange(e,n==="current"),[4,wc(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,Gp(i.localStore,e,!0)];case 6:return u.sent(),Wp(i,e,r),[3,8];case 7:_e(),u.label=8;case 8:return[2]}})})}function ECe(t,e,n){return V(this,void 0,void 0,function(){var r,i,o,s,u,c,h,f,p,m;return U(this,function(v){switch(v.label){case 0:if(!(r=F2(t)).$o)return[3,10];i=0,o=e,v.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(Z("SyncEngine","Adding an already active target "+s),[3,5]):[4,VZ(r.localStore,s)]):[3,6];case 2:return u=v.sent(),[4,zp(r.localStore,u)];case 3:return c=v.sent(),[4,M2(r,eee(u),c.targetId,!1)];case 4:v.sent(),AS(r.remoteStore,c),v.label=5;case 5:return i++,[3,1];case 6:h=function(_){return U(this,function(E){switch(E.label){case 0:return r.Vo.has(_)?[4,Gp(r.localStore,_,!1).then(function(){w_(r.remoteStore,_),Wp(r,_)}).catch(Rh)]:[3,2];case 1:E.sent(),E.label=2;case 2:return[2]}})},f=0,p=n,v.label=7;case 7:return f<p.length?(m=p[f],[5,h(m)]):[3,10];case 8:v.sent(),v.label=9;case 9:return f++,[3,7];case 10:return[2]}})})}function F2(t){var e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JZ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pCe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uCe.bind(null,e),e.vo._r=JTe.bind(null,e.eventManager),e.vo.Mo=ZTe.bind(null,e.eventManager),e}function L2(t){var e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cCe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lCe.bind(null,e),e}var tee=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(e){return V(this,void 0,void 0,function(){return U(this,function(n){switch(n.label){case 0:return this.R=DS(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return n.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}})})},t.prototype.Uo=function(e){return null},t.prototype.Ko=function(e){return kZ(this.persistence,new PZ,e.initialUser,this.R)},t.prototype.qo=function(e){return new xTe(RTe.bs,this.R)},t.prototype.Bo=function(e){return new jZ},t.prototype.terminate=function(){return V(this,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}})})},t}(),nee=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).Qo=n,o.cacheSizeBytes=r,o.forceOwnership=i,o.synchronizeTabs=!1,o}return we(e,t),e.prototype.initialize=function(n){return V(this,void 0,void 0,function(){var r=this;return U(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,n)];case 1:return i.sent(),[4,ETe(this.localStore)];case 2:return i.sent(),[4,this.Qo.initialize(this,n)];case 3:return i.sent(),[4,L2(this.Qo.syncEngine)];case 4:return i.sent(),[4,tg(this.Qo.remoteStore)];case 5:return i.sent(),[4,this.persistence.He(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()})];case 6:return i.sent(),[2]}})})},e.prototype.Ko=function(n){return kZ(this.persistence,new PZ,n.initialUser,this.R)},e.prototype.Uo=function(n){var r=this.persistence.referenceDelegate.garbageCollector;return new uTe(r,n.asyncQueue)},e.prototype.qo=function(n){var r=I2(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?zs.withCacheSize(this.cacheSizeBytes):zs.DEFAULT;return new pTe(this.synchronizeTabs,r,n.clientId,i,n.asyncQueue,BZ(),iS(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(n){return new jZ},e}(tee),ICe=function(t){function e(n,r){var i=this;return(i=t.call(this,n,r,!1)||this).Qo=n,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return we(e,t),e.prototype.initialize=function(n){return V(this,void 0,void 0,function(){var r,i=this;return U(this,function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,n)];case 1:return o.sent(),r=this.Qo.syncEngine,this.sharedClientState instanceof zV?(this.sharedClientState.syncEngine={ui:yCe.bind(null,r),ai:wCe.bind(null,r),hi:ECe.bind(null,r),fn:_Ce.bind(null,r),ci:mCe.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He(function(s){return V(i,void 0,void 0,function(){return U(this,function(u){switch(u.label){case 0:return[4,vCe(this.Qo.syncEngine,s)];case 1:return u.sent(),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):s||this.gcScheduler.stop()),[2]}})})})];case 4:return o.sent(),[2]}})})},e.prototype.Bo=function(n){var r=BZ();if(!zV.yt(r))throw new $(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=I2(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new zV(r,n.asyncQueue,i,n.clientId,n.initialUser)},e}(nee),r2=function(){function t(){}return t.prototype.initialize=function(e,n){return V(this,void 0,void 0,function(){var r=this;return U(this,function(i){switch(i.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(o){return _J(r.syncEngine,o,1)},this.remoteStore.remoteSyncer.handleCredentialChange=fCe.bind(null,this.syncEngine),[4,t2(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(e){return new XTe},t.prototype.createDatastore=function(e){var n,r=DS(e.databaseInfo.databaseId),i=(n=e.databaseInfo,new FTe(n));return function(o,s,u){return new UTe(o,s,u)}(e.credentials,i,r)},t.prototype.createRemoteStore=function(e){var n,r,i,o,s,u=this;return n=this.localStore,r=this.datastore,i=e.asyncQueue,o=function(c){return _J(u.syncEngine,c,0)},s=mJ.yt()?new mJ:new PTe,new BTe(n,r,i,o,s)},t.prototype.createSyncEngine=function(e,n){return function(r,i,o,s,u,c,h){var f=new iCe(r,i,o,s,u,c);return h&&(f.$o=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)},t.prototype.terminate=function(){return function(e){return V(this,void 0,void 0,function(){var n;return U(this,function(r){switch(r.label){case 0:return n=oe(e),Z("RemoteStore","RemoteStore shutting down."),n.Or.add(5),[4,eg(n)];case 1:return r.sent(),n.Lr.shutdown(),n.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}();var xS=function(){function t(e){this.observer=e,this.muted=!1}return t.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},t.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(e,n){var r=this;this.muted||setTimeout(function(){r.muted||e(n)},0)},t}(),lqe=function(){function t(e,n){var r=this;this.Go=e,this.R=n,this.metadata=new Or,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(i){i&&i.io()?r.metadata.resolve(i.payload.metadata):r.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             `+JSON.stringify(i==null?void 0:i.payload)))},function(i){return r.metadata.reject(i)})}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return V(this,void 0,void 0,function(){return U(this,function(e){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return V(this,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return V(this,void 0,void 0,function(){var e,n,r,i;return U(this,function(o){switch(o.label){case 0:return[4,this.Jo()];case 1:return(e=o.sent())===null?[2,null]:(n=this.zo.decode(e),r=Number(n),isNaN(r)&&this.Yo("length string ("+n+") is not valid number"),[4,this.Xo(r)]);case 2:return i=o.sent(),[2,new eCe(JSON.parse(i),e.length+r)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(e){return e===123})},t.prototype.Jo=function(){return V(this,void 0,void 0,function(){var e,n;return U(this,function(r){switch(r.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(r.sent())return[3,3];r.label=2;case 2:return[3,0];case 3:return this.buffer.length===0?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),n)])}})})},t.prototype.Xo=function(e){return V(this,void 0,void 0,function(){var n;return U(this,function(r){switch(r.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:r.sent()&&this.Yo("Reached the end of bundle when more is expected."),r.label=2;case 2:return[3,0];case 3:return n=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),n)]}})})},t.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},t.prototype.tc=function(){return V(this,void 0,void 0,function(){var e,n;return U(this,function(r){switch(r.label){case 0:return[4,this.Go.read()];case 1:return(e=r.sent()).done||((n=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n),[2,e.done]}})})},t}(),bCe=function(){function t(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(e){return V(this,void 0,void 0,function(){var n,r=this;return U(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new $(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(o,s){return V(this,void 0,void 0,function(){var u,c,h,f,p,m;return U(this,function(v){switch(v.label){case 0:return u=oe(o),c=__(u.R)+"/documents",h={documents:s.map(function(_){return v_(u.R,_)})},[4,u.$i("BatchGetDocuments",c,h)];case 1:return f=v.sent(),p=new Map,f.forEach(function(_){var E=function(b,T){return"found"in T?function(S,A){xe(!!A.found),A.found.name,A.found.updateTime;var x=Ws(S,A.found.name),H=wr(A.found.updateTime),N=new Li({mapValue:{fields:A.found.fields}});return Ir.newFoundDocument(x,H,N)}(b,T):"missing"in T?function(S,A){xe(!!A.missing),xe(!!A.readTime);var x=Ws(S,A.missing),H=wr(A.readTime);return Ir.newNoDocument(x,H)}(b,T):_e()}(u.R,_);p.set(E.key.toString(),E)}),m=[],[2,(s.forEach(function(_){var E=p.get(_.toString());xe(!!E),m.push(E)}),m)]}})})}(this.datastore,e)];case 1:return[2,((n=i.sent()).forEach(function(o){return r.recordVersion(o)}),n)]}})})},t.prototype.set=function(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},t.prototype.update=function(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())},t.prototype.delete=function(e){this.write(new N_(e,this.precondition(e))),this.writtenDocs.add(e.toString())},t.prototype.commit=function(){return V(this,void 0,void 0,function(){var e,n=this;return U(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(i){e.delete(i.key.toString())}),e.forEach(function(i,o){var s=Ie.fromPath(o);n.mutations.push(new f2(s,n.precondition(s)))}),[4,function(i,o){return V(this,void 0,void 0,function(){var s,u,c;return U(this,function(h){switch(h.label){case 0:return s=oe(i),u=__(s.R)+"/documents",c={writes:o.map(function(f){return dS(s.R,f)})},[4,s.Ni("Commit",u,c)];case 1:return h.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(e){var n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw _e();n=We.min()}var r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new $(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)},t.prototype.precondition=function(e){var n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?kr.updateTime(n):kr.none()},t.prototype.preconditionForUpdate=function(e){var n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(We.min()))throw new $(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kr.updateTime(n)}return kr.exists(!0)},t.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},t.prototype.ensureCommitNotCalled=function(){},t}(),TCe=function(){function t(e,n,r,i){this.asyncQueue=e,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ec=5,this.Zi=new T2(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var e=this;this.Zi.ji(function(){return V(e,void 0,void 0,function(){var n,r,i=this;return U(this,function(o){return n=new bCe(this.datastore),(r=this.sc(n))&&r.then(function(s){i.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){i.deferred.resolve(s)}).catch(function(u){i.ic(u)})})}).catch(function(s){i.ic(s)}),[2]})})})},t.prototype.sc=function(e){try{var n=this.updateFunction(e);return!xh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},t.prototype.ic=function(e){var n=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return n.nc(),Promise.resolve()})):this.deferred.reject(e)},t.prototype.rc=function(e){if(e.name==="FirebaseError"){var n=e.code;return n==="aborted"||n==="failed-precondition"||!aZ(n)}return!1},t}(),CCe=function(){function t(e,n,r){var i=this;this.credentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=_r.UNAUTHENTICATED,this.clientId=BJ.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(n,function(o){return V(i,void 0,void 0,function(){return U(this,function(s){switch(s.label){case 0:return Z("FirestoreClient","Received user=",o.uid),[4,this.credentialListener(o)];case 1:return s.sent(),this.user=o,[2]}})})})}return t.prototype.getConfiguration=function(){return V(this,void 0,void 0,function(){return U(this,function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new $(k.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var n=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return V(e,void 0,void 0,function(){var r,i;return U(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:o.sent(),o.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:o.sent(),o.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return r=o.sent(),i=rg(r,"Failed to shutdown persistence"),n.reject(i),[3,6];case 6:return[2]}})})}),n.promise},t}();function ree(t,e){return V(this,void 0,void 0,function(){var n,r,i=this;return U(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(s){return V(i,void 0,void 0,function(){return U(this,function(u){switch(u.label){case 0:return r.isEqual(s)?[3,2]:[4,OZ(e.localStore,s)];case 1:u.sent(),r=s,u.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function iee(t,e){return V(this,void 0,void 0,function(){var n,r;return U(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,V2(t)];case 1:return n=i.sent(),Z("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(o){return function(s,u){return V(this,void 0,void 0,function(){var c,h;return U(this,function(f){switch(f.label){case 0:return(c=oe(s)).asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials"),h=_c(c),c.Or.add(3),[4,eg(c)];case 1:return f.sent(),h&&c.Br.set("Unknown"),[4,c.remoteSyncer.handleCredentialChange(u)];case 2:return f.sent(),c.Or.delete(3),[4,R_(c)];case 3:return f.sent(),[2]}})})}(e.remoteStore,o)}),t.onlineComponents=e,[2]}})})}function V2(t){return V(this,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Z("FirestoreClient","Using default OfflineComponentProvider"),[4,ree(t,new tee)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function NS(t){return V(this,void 0,void 0,function(){return U(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Z("FirestoreClient","Using default OnlineComponentProvider"),[4,iee(t,new r2)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function EJ(t){return V2(t).then(function(e){return e.persistence})}function oee(t){return V2(t).then(function(e){return e.localStore})}function IJ(t){return NS(t).then(function(e){return e.remoteStore})}function see(t){return NS(t).then(function(e){return e.syncEngine})}function Kp(t){return V(this,void 0,void 0,function(){var e,n;return U(this,function(r){switch(r.label){case 0:return[4,NS(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=oCe.bind(null,e.syncEngine),n.onUnlisten=sCe.bind(null,e.syncEngine),n)]}})})}function bJ(t,e,n){var r=this;n===void 0&&(n={});var i=new Or;return t.asyncQueue.enqueueAndForget(function(){return V(r,void 0,void 0,function(){var o;return U(this,function(s){switch(s.label){case 0:return o=function(u,c,h,f,p){var m=new xS({next:function(_){c.enqueueAndForget(function(){return x2(u,v)});var E=_.docs.has(h);!E&&_.fromCache?p.reject(new $(k.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&f&&f.source==="server"?p.reject(new $(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(_)},error:function(_){return p.reject(_)}}),v=new R2(Jp(h.path),m,{includeMetadataChanges:!0,so:!0});return A2(u,v)},[4,Kp(t)];case 1:return[2,o.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function TJ(t,e,n){var r=this;n===void 0&&(n={});var i=new Or;return t.asyncQueue.enqueueAndForget(function(){return V(r,void 0,void 0,function(){var o;return U(this,function(s){switch(s.label){case 0:return o=function(u,c,h,f,p){var m=new xS({next:function(_){c.enqueueAndForget(function(){return x2(u,v)}),_.fromCache&&f.source==="server"?p.reject(new $(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(_)},error:function(_){return p.reject(_)}}),v=new R2(h,m,{includeMetadataChanges:!0,so:!0});return A2(u,v)},[4,Kp(t)];case 1:return[2,o.apply(void 0,[s.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var SCe=function(t,e,n,r,i,o,s,u){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u},vS=function(){function t(e,n){this.projectId=e,this.database=n||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),CJ=new Map,aee=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},SJ=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(e,n){this.changeListener=n,e.enqueueRetryable(function(){return n(_r.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),DCe=function(){function t(e){this.token=e,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(e,n){var r=this;this.changeListener=n,e.enqueueRetryable(function(){return n(r.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ACe=function(){function t(e){var n=this;this.currentUser=_r.UNAUTHENTICATED,this.oc=new Or,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){n.cc++,n.currentUser=n.ac(),n.oc.resolve(),n.changeListener&&n.asyncQueue.enqueueRetryable(function(){return n.changeListener(n.currentUser)})};var r=function(i){Z("FirebaseCredentialsProvider","Auth detected"),n.auth=i,n.auth.addAuthTokenListener(n.uc)};e.onInit(function(i){return r(i)}),setTimeout(function(){if(!n.auth){var i=e.getImmediate({optional:!0});i?r(i):(Z("FirebaseCredentialsProvider","Auth not yet detected"),n.oc.resolve())}},0)}return t.prototype.getToken=function(){var e=this,n=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return e.cc!==n?(Z("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):i?(xe(typeof i.accessToken=="string"),new aee(i.accessToken,e.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(e,n){var r=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable(function(){return V(r,void 0,void 0,function(){return U(this,function(i){switch(i.label){case 0:return[4,this.oc.promise];case 1:return i.sent(),[4,n(this.currentUser)];case 2:return i.sent(),this.changeListener=n,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new _r(e)},t}(),xCe=function(){function t(e,n,r){this.hc=e,this.lc=n,this.fc=r,this.type="FirstParty",this.user=_r.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},n=this.hc.auth.getAuthHeaderValueForFirstParty([]);return n&&(e.Authorization=n),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),t}(),NCe=function(){function t(e,n,r){this.hc=e,this.lc=n,this.fc=r}return t.prototype.getToken=function(){return Promise.resolve(new xCe(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(e,n){e.enqueueRetryable(function(){return n(_r.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function U2(t,e,n){if(!n)throw new $(k.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function j2(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new $(k.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function uee(t,e,n,r){if(e===!0&&r===!0)throw new $(k.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function DJ(t){if(!Ie.isDocumentKey(t))throw new $(k.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function AJ(t){if(Ie.isDocumentKey(t))throw new $(k.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function RS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";var e=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return typeof t=="function"?"a function":_e()}function It(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=RS(t);throw new $(k.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function xJ(t,e){if(e<=0)throw new $(k.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var NJ=function(){function t(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new $(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,uee("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},t}(),E_=function(){function t(e,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NJ({}),this._settingsFrozen=!1,e instanceof vS?(this._databaseId=e,this._credentials=new SJ):(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new $(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vS(r.options.projectId)}(e),this._credentials=new ACe(n))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new $(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(e){if(this._settingsFrozen)throw new $(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NJ(e),e.credentials!==void 0&&(this._credentials=function(n){if(!n)return new SJ;switch(n.type){case"gapi":var r=n.client;return xe(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new NCe(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new $(k.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return e=this,(n=CJ.get(e))&&(Z("ComponentProvider","Removing Datastore"),CJ.delete(e),n.terminate()),Promise.resolve();var e,n},t}(),on=function(){function t(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new pc(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ji=function(){function t(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),pc=function(t){function e(n,r,i){var o=this;return(o=t.call(this,n,r,Jp(i))||this)._path=i,o.type="collection",o}return we(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var n=this._path.popLast();return n.isEmpty()?null:new on(this.firestore,null,new Ie(n))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(n){return new e(this.firestore,n,this._path)},e}(ji);function cee(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Tn(t),U2("collection","path",e),t instanceof E_)return AJ(n=mt.fromString.apply(mt,Rt([e],r))),new pc(t,null,n);if(!(t instanceof on||t instanceof pc))throw new $(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return AJ(n=mt.fromString.apply(mt,Rt([t.path],r)).child(mt.fromString(e))),new pc(t.firestore,null,n)}function oS(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Tn(t),arguments.length===1&&(e=BJ.u()),U2("doc","path",e),t instanceof E_)return DJ(n=mt.fromString.apply(mt,Rt([e],r))),new on(t,null,new Ie(n));if(!(t instanceof on||t instanceof pc))throw new $(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return DJ(n=t._path.child(mt.fromString.apply(mt,Rt([e],r)))),new on(t.firestore,t instanceof pc?t.converter:null,new Ie(n))}function lee(t,e){return t=Tn(t),e=Tn(e),(t instanceof on||t instanceof pc)&&(e instanceof on||e instanceof pc)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function hee(t,e){return t=Tn(t),e=Tn(e),t instanceof ji&&e instanceof ji&&t.firestore===e.firestore&&S_(t._query,e._query)&&t.converter===e.converter}var RCe=function(){function t(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new T2(this,"async_queue_retry"),this.Ic=function(){var r=iS();r&&Z("AsyncQueue","Visibility state changed to "+r.visibilityState),e.Zi.Gi()};var n=iS();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(e){this.enqueue(e)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},t.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var n=iS();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(e){var n=this;if(this.Ac(),this._c)return new Promise(function(){});var r=new Or;return this.Rc(function(){return n._c&&n.Ec?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)}).then(function(){return r.promise})},t.prototype.enqueueRetryable=function(e){var n=this;this.enqueueAndForget(function(){return n.wc.push(e),n.bc()})},t.prototype.bc=function(){return V(this,void 0,void 0,function(){var e,n=this;return U(this,function(r){switch(r.label){case 0:if(this.wc.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Nh(e=r.sent()))throw e;return Z("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return n.bc()}),r.label=5;case 5:return[2]}})})},t.prototype.Rc=function(e){var n=this,r=this.dc.then(function(){return n.gc=!0,e().catch(function(i){throw n.yc=i,n.gc=!1,Un("INTERNAL UNHANDLED ERROR: ",function(o){var s=o.message||"";return o.stack&&(s=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),s}(i)),i}).then(function(i){return n.gc=!1,i})});return this.dc=r,r},t.prototype.enqueueAfterDelay=function(e,n,r){var i=this;this.Ac(),this.Tc.indexOf(e)>-1&&(n=0);var o=QTe.createAndSchedule(this,e,n,r,function(s){return i.vc(s)});return this.mc.push(o),o},t.prototype.Ac=function(){this.yc&&_e()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return V(this,void 0,void 0,function(){var e;return U(this,function(n){switch(n.label){case 0:return[4,e=this.dc];case 1:n.sent(),n.label=2;case 2:if(e!==this.dc)return[3,0];n.label=3;case 3:return[2]}})})},t.prototype.Vc=function(e){for(var n=0,r=this.mc;n<r.length;n++)if(r[n].timerId===e)return!0;return!1},t.prototype.Sc=function(e){var n=this;return this.Pc().then(function(){n.mc.sort(function(s,u){return s.targetTimeMs-u.targetTimeMs});for(var r=0,i=n.mc;r<i.length;r++){var o=i[r];if(o.skipDelay(),e!=="all"&&o.timerId===e)break}return n.Pc()})},t.prototype.Dc=function(e){this.Tc.push(e)},t.prototype.vc=function(e){var n=this.mc.indexOf(e);this.mc.splice(n,1)},t}();function Qp(t){return function(e,n){if(typeof e!="object"||e===null)return!1;for(var r=e,i=0,o=["next","error","complete"];i<o.length;i++){var s=o[i];if(s in r&&typeof r[s]=="function")return!0}return!1}(t)}var hqe=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(e,n,r){this._progressObserver={next:e,error:n,complete:r}},t.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},t.prototype.then=function(e,n){return this._taskCompletionResolver.promise.then(e,n)},t.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},t.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},t.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},t}(),dee=-1,jn=function(t){function e(n,r){var i=this;return(i=t.call(this,n,r)||this).type="firestore",i._queue=new RCe,i._persistenceKey="name"in n?n.name:"[DEFAULT]",i}return we(e,t),e.prototype._terminate=function(){return this._firestoreClient||fee(this),this._firestoreClient.terminate()},e}(E_);function Pr(t){return t._firestoreClient||fee(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function fee(t){var e,n=t._freezeSettings(),r=function(i,o,s,u){return new SCe(i,o,s,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new CCe(t._credentials,t._queue,r)}function RJ(t,e,n){var r=this,i=new Or;return t.asyncQueue.enqueue(function(){return V(r,void 0,void 0,function(){var o;return U(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,ree(t,n)];case 1:return s.sent(),[4,iee(t,e)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(u){return u.name==="FirebaseError"?u.code===k.FAILED_PRECONDITION||u.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11}(o=s.sent()))throw o;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),i.reject(o),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function MJ(t){if(t._initialized||t._terminated)throw new $(k.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ks=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=0;r<e.length;++r)if(e[r].length===0)throw new $(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qo(e)}return t.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},t}(),Dh=function(){function t(e){this._byteString=e}return t.fromBase64String=function(e){try{return new t(Jr.fromBase64String(e))}catch(n){throw new $(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(Jr.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},t}(),Mh=function(t){this._methodName=t},M_=function(){function t(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(e){return at(this._lat,e._lat)||at(this._long,e._long)},t}(),MCe=/^__.*__$/,PCe=function(){function t(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}return t.prototype.toMutation=function(e,n){return this.fieldMask!==null?new vc(e,this.data,this.fieldMask,n,this.fieldTransforms):new x_(e,this.data,n,this.fieldTransforms)},t}(),pee=function(){function t(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}return t.prototype.toMutation=function(e,n){return new vc(e,this.data,this.fieldMask,n,this.fieldTransforms)},t}();function gee(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}var mee=function(){function t(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Cc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(e){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xc({path:r,Fc:!1});return i.$c(e),i},t.prototype.Oc=function(e){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xc({path:r,Fc:!1});return i.Cc(),i},t.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(e){return _S(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(e){return this.fieldMask.find(function(n){return e.isPrefixOf(n)})!==void 0||this.fieldTransforms.find(function(n){return e.isPrefixOf(n.field)})!==void 0},t.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},t.prototype.$c=function(e){if(e.length===0)throw this.Lc("Document fields must not be empty");if(gee(this.Nc)&&MCe.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),kCe=function(){function t(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.R=r||DS(e)}return t.prototype.Uc=function(e,n,r,i){return i===void 0&&(i=!1),new mee({Nc:e,methodName:n,qc:r,path:Qo.emptyPath(),Fc:!1,Bc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Ph(t){var e=t._freezeSettings(),n=DS(t._databaseId);return new kCe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function MS(t,e,n,r,i,o){o===void 0&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);$2("Data must be an object, but it was:",s,r);var u,c,h=_ee(r,s);if(o.merge)u=new kp(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){for(var f=[],p=0,m=o.mergeFields;p<m.length;p++){var v=i2(e,m[p],n);if(!s.contains(v))throw new $(k.INVALID_ARGUMENT,"Field '"+v+"' is specified in your field mask but missing from your input data.");Eee(f,v)||f.push(v)}u=new kp(f),c=s.fieldTransforms.filter(function(_){return u.covers(_.field)})}else u=null,c=s.fieldTransforms;return new PCe(new Li(h),u,c)}var B2=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return we(e,t),e.prototype._toFieldTransform=function(n){if(n.Nc!==2)throw n.Nc===1?n.Lc(this._methodName+"() can only appear at the top level of your update data"):n.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.fieldMask.push(n.path),null},e.prototype.isEqual=function(n){return n instanceof e},e}(Mh);function yee(t,e,n){return new mee({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var OCe=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return we(e,t),e.prototype._toFieldTransform=function(n){return new A_(n.path,new Vp)},e.prototype.isEqual=function(n){return n instanceof e},e}(Mh),FCe=function(t){function e(n,r){var i=this;return(i=t.call(this,n)||this).Kc=r,i}return we(e,t),e.prototype._toFieldTransform=function(n){var r=yee(this,n,!0),i=this.Kc.map(function(s){return kh(s,r)}),o=new Ch(i);return new A_(n.path,o)},e.prototype.isEqual=function(n){return this===n},e}(Mh),LCe=function(t){function e(n,r){var i=this;return(i=t.call(this,n)||this).Kc=r,i}return we(e,t),e.prototype._toFieldTransform=function(n){var r=yee(this,n,!0),i=this.Kc.map(function(s){return kh(s,r)}),o=new Sh(i);return new A_(n.path,o)},e.prototype.isEqual=function(n){return this===n},e}(Mh),VCe=function(t){function e(n,r){var i=this;return(i=t.call(this,n)||this).Qc=r,i}return we(e,t),e.prototype._toFieldTransform=function(n){var r=new Up(n.R,tZ(n.R,this.Qc));return new A_(n.path,r)},e.prototype.isEqual=function(n){return this===n},e}(Mh);function q2(t,e,n,r){var i=t.Uc(1,e,n);$2("Data must be an object, but it was:",i,r);var o=[],s=Li.empty();Ah(r,function(c,h){var f=z2(e,c,n);h=Tn(h);var p=i.Oc(f);if(h instanceof B2)o.push(f);else{var m=kh(h,p);m!=null&&(o.push(f),s.set(f,m))}});var u=new kp(o);return new pee(s,u,i.fieldTransforms)}function H2(t,e,n,r,i,o){var s=t.Uc(1,e,n),u=[i2(e,r,n)],c=[i];if(o.length%2!=0)throw new $(k.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<o.length;h+=2)u.push(i2(e,o[h])),c.push(o[h+1]);for(var f=[],p=Li.empty(),m=u.length-1;m>=0;--m)if(!Eee(f,u[m])){var v=u[m],_=c[m];_=Tn(_);var E=s.Oc(v);if(_ instanceof B2)f.push(v);else{var b=kh(_,E);b!=null&&(f.push(v),p.set(v,b))}}var T=new kp(f);return new pee(p,T,s.fieldTransforms)}function vee(t,e,n,r){return r===void 0&&(r=!1),kh(n,t.Uc(r?4:3,e))}function kh(t,e){if(wee(t=Tn(t)))return $2("Unsupported field value:",e,t),_ee(t,e);if(t instanceof Mh)return function(n,r){if(!gee(r.Nc))throw r.Lc(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Lc(n._methodName+"() is not currently supported inside arrays");var i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&e.Nc!==4)throw e.Lc("Nested arrays are not supported");return function(n,r){for(var i=[],o=0,s=0,u=n;s<u.length;s++){var c=kh(u[s],r.Mc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Tn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return tZ(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var i=Xr.fromDate(n);return{timestampValue:y_(r.R,i)}}if(n instanceof Xr)return i=new Xr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:y_(r.R,i)};if(n instanceof M_)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Dh)return{bytesValue:dZ(r.R,n._byteString)};if(n instanceof on){i=r.databaseId;var o=n.firestore._databaseId;if(!o.isEqual(i))throw r.Lc("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:m2(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Lc("Unsupported field value: "+RS(n))}(t,e)}function _ee(t,e){var n={};return HJ(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ah(t,function(r,i){var o=kh(i,e.kc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function wee(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xr||t instanceof M_||t instanceof Dh||t instanceof on||t instanceof Mh)}function $2(t,e,n){if(!wee(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){var r=RS(n);throw r==="an object"?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function i2(t,e,n){if((e=Tn(e))instanceof Ks)return e._internalPath;if(typeof e=="string")return z2(t,e);throw _S("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var UCe=new RegExp("[~\\*/\\[\\]]");function z2(t,e,n){if(e.search(UCe)>=0)throw _S("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return new(Ks.bind.apply(Ks,Rt([void 0],e.split("."))))()._internalPath}catch{throw _S("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function _S(t,e,n,r,i){var o=r&&!r.isEmpty(),s=i!==void 0,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var c="";return(o||s)&&(c+=" (found",o&&(c+=" in field "+r),s&&(c+=" in document "+i),c+=")"),new $(k.INVALID_ARGUMENT,(u+=". ")+t+c)}function Eee(t,e){return t.some(function(n){return n.isEqual(e)})}var I_=function(){function t(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new on(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return this._document!==null},t.prototype.data=function(){if(this._document){if(this._converter){var e=new jCe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(e){if(this._document){var n=this._document.data.field(wS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}},t}(),jCe=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return we(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(I_);function wS(t,e){return typeof e=="string"?z2(t,e):e instanceof Ks?e._internalPath:e._delegate._internalPath}var wh=function(){function t(e,n){this.hasPendingWrites=e,this.fromCache=n}return t.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},t}(),Ga=function(t){function e(n,r,i,o,s,u){var c=this;return(c=t.call(this,n,r,i,o,u)||this)._firestore=n,c._firestoreImpl=n,c.metadata=s,c}return we(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(n){if(n===void 0&&(n={}),this._document){if(this._converter){var r=new f_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}},e.prototype.get=function(n,r){if(r===void 0&&(r={}),this._document){var i=this._document.data.field(wS("DocumentSnapshot.get",n));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}},e}(I_),f_=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return we(e,t),e.prototype.data=function(n){return n===void 0&&(n={}),t.prototype.data.call(this,n)},e}(Ga),hc=function(){function t(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new wh(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(t.prototype,"docs",{get:function(){var e=[];return this.forEach(function(n){return e.push(n)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),t.prototype.forEach=function(e,n){var r=this;this._snapshot.docs.forEach(function(i){e.call(n,new f_(r._firestore,r._userDataWriter,i.key,i,new wh(r._snapshot.mutatedKeys.has(i.key),r._snapshot.fromCache),r.query.converter))})},t.prototype.docChanges=function(e){e===void 0&&(e={});var n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){var o=0;return r._snapshot.docChanges.map(function(u){return{type:"added",doc:new f_(r._firestore,r._userDataWriter,u.doc.key,u.doc,new wh(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}})}var s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(u){return i||u.type!==3}).map(function(u){var c=new f_(r._firestore,r._userDataWriter,u.doc.key,u.doc,new wh(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),h=-1,f=-1;return u.type!==0&&(h=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),u.type!==1&&(f=(s=s.add(u.doc)).indexOf(u.doc.key)),{type:BCe(u.type),doc:c,oldIndex:h,newIndex:f}})}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges},t}();function BCe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}function Iee(t,e){return t instanceof Ga&&e instanceof Ga?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof hc&&e instanceof hc&&t._firestore===e._firestore&&hee(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function bee(t){if(hS(t)&&t.explicitOrderBy.length===0)throw new $(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var P_=function(){};function ac(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var qCe=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).jc=n,o.Wc=r,o.Gc=i,o.type="where",o}return we(e,t),e.prototype._apply=function(n){var r=Ph(n.firestore),i=function(o,s,u,c,h,f,p){var m;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new $(k.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+f+"' queries on FieldPath.documentId().");if(f==="in"||f==="not-in"){LJ(p,f);for(var v=[],_=0,E=p;_<E.length;_++){var b=E[_];v.push(FJ(c,o,b))}m={arrayValue:{values:v}}}else m=FJ(c,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||LJ(p,f),m=vee(u,"where",p,f==="in"||f==="not-in");var T=Ui.create(h,f,m);return function(S,A){if(A.g()){var x=h2(S);if(x!==null&&!x.isEqual(A.field))throw new $(k.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+x.toString()+"' and '"+A.field.toString()+"'");var H=l2(S);H!==null&&Cee(S,A.field,H)}var N=function(ie,Ye){for(var ge=0,en=ie.filters;ge<en.length;ge++){var D=en[ge];if(Ye.indexOf(D.op)>=0)return D.op}return null}(S,function(ie){switch(ie){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(A.op));if(N!==null)throw N===A.op?new $(k.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+A.op.toString()+"' filter."):new $(k.INVALID_ARGUMENT,"Invalid query. You cannot use '"+A.op.toString()+"' filters with '"+N.toString()+"' filters.")}(o,T),T}(n._query,0,r,n.firestore._databaseId,this.jc,this.Wc,this.Gc);return new ji(n.firestore,n.converter,function(o,s){var u=o.filters.concat([s]);return new Wa(o.path,o.collectionGroup,o.explicitOrderBy.slice(),u,o.limit,o.limitType,o.startAt,o.endAt)}(n._query,i))},e}(P_),HCe=function(t){function e(n,r){var i=this;return(i=t.call(this)||this).jc=n,i.zc=r,i.type="orderBy",i}return we(e,t),e.prototype._apply=function(n){var r=function(i,o,s){if(i.startAt!==null)throw new $(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var u=new Mp(o,s);return function(c,h){if(l2(c)===null){var f=h2(c);f!==null&&Cee(c,f,h.field)}}(i,u),u}(n._query,this.jc,this.zc);return new ji(n.firestore,n.converter,function(i,o){var s=i.explicitOrderBy.concat([o]);return new Wa(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(n._query,r))},e}(P_),PJ=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).type=n,o.Hc=r,o.Jc=i,o}return we(e,t),e.prototype._apply=function(n){return new ji(n.firestore,n.converter,YJ(n._query,this.Hc,this.Jc))},e}(P_),kJ=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).type=n,o.Yc=r,o.Xc=i,o}return we(e,t),e.prototype._apply=function(n){var r=Tee(n,this.type,this.Yc,this.Xc);return new ji(n.firestore,n.converter,function(i,o){return new Wa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(n._query,r))},e}(P_),OJ=function(t){function e(n,r,i){var o=this;return(o=t.call(this)||this).type=n,o.Yc=r,o.Xc=i,o}return we(e,t),e.prototype._apply=function(n){var r=Tee(n,this.type,this.Yc,this.Xc);return new ji(n.firestore,n.converter,function(i,o){return new Wa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(n._query,r))},e}(P_);function Tee(t,e,n,r){if(n[0]=Tn(n[0]),n[0]instanceof I_)return function(o,s,u,c,h){if(!c)throw new $(k.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+u+"().");for(var f=[],p=0,m=Lp(o);p<m.length;p++){var v=m[p];if(v.field.isKeyField())f.push(uS(s,c.key));else{var _=c.data.field(v.field);if(a2(_))throw new $(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){var E=v.field.canonicalString();throw new $(k.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+E+"' (used as the orderBy) does not exist.")}f.push(_)}}return new m_(f,h)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Ph(t.firestore);return function(o,s,u,c,h,f){var p=o.explicitOrderBy;if(h.length>p.length)throw new $(k.INVALID_ARGUMENT,"Too many arguments provided to "+c+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var m=[],v=0;v<h.length;v++){var _=h[v];if(p[v].field.isKeyField()){if(typeof _!="string")throw new $(k.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+c+"(), but got a "+typeof _);if(!d2(o)&&_.indexOf("/")!==-1)throw new $(k.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+c+"() must be a plain document ID, but '"+_+"' contains a slash.");var E=o.path.child(mt.fromString(_));if(!Ie.isDocumentKey(E))throw new $(k.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+c+"() must result in a valid document path, but '"+E+"' is not because it contains an odd number of segments.");var b=new Ie(E);m.push(uS(s,b))}else{var T=vee(u,c,_);m.push(T)}}return new m_(m,f)}(t._query,t.firestore._databaseId,i,e,n,r)}function FJ(t,e,n){if(typeof(n=Tn(n))=="string"){if(n==="")throw new $(k.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!d2(e)&&n.indexOf("/")!==-1)throw new $(k.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(mt.fromString(n));if(!Ie.isDocumentKey(r))throw new $(k.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return uS(t,new Ie(r))}if(n instanceof on)return uS(t,n._key);throw new $(k.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+RS(n)+".")}function LJ(t,e){if(!Array.isArray(t)||t.length===0)throw new $(k.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new $(k.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Cee(t,e,n){if(!n.isEqual(e))throw new $(k.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var G2=function(){function t(){}return t.prototype.convertValue=function(e,n){switch(n===void 0&&(n="none"),Th(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Op(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw _e()}},t.prototype.convertObject=function(e,n){var r=this,i={};return Ah(e.fields,function(o,s){i[o]=r.convertValue(s,n)}),i},t.prototype.convertGeoPoint=function(e){return new M_(Vn(e.latitude),Vn(e.longitude))},t.prototype.convertArray=function(e,n){var r=this;return(e.values||[]).map(function(i){return r.convertValue(i,n)})},t.prototype.convertServerTimestamp=function(e,n){switch(n){case"previous":var r=zJ(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(p_(e));default:return null}},t.prototype.convertTimestamp=function(e){var n=mc(e);return new Xr(n.seconds,n.nanos)},t.prototype.convertDocumentKey=function(e,n){var r=mt.fromString(e);xe(EZ(r));var i=new vS(r.get(1),r.get(3)),o=new Ie(r.popFirst(5));return i.isEqual(n)||Un("Document "+o+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),o},t}();function PS(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var $Ce=function(t){function e(n){var r=this;return(r=t.call(this)||this).firestore=n,r}return we(e,t),e.prototype.convertBytes=function(n){return new Dh(n)},e.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new on(this.firestore,null,r)},e}(G2),zCe=function(){function t(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ph(e)}return t.prototype.set=function(e,n,r){this._verifyNotCommitted();var i=dc(e,this._firestore),o=PS(i.converter,n,r),s=MS(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,kr.none())),this},t.prototype.update=function(e,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];this._verifyNotCommitted();var s,u=dc(e,this._firestore);return s=typeof(n=Tn(n))=="string"||n instanceof Ks?H2(this._dataReader,"WriteBatch.update",u._key,n,r,i):q2(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(s.toMutation(u._key,kr.exists(!0))),this},t.prototype.delete=function(e){this._verifyNotCommitted();var n=dc(e,this._firestore);return this._mutations=this._mutations.concat(new N_(n._key,kr.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new $(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function dc(t,e){if((t=Tn(t)).firestore!==e)throw new $(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var bh=function(t){function e(n){var r=this;return(r=t.call(this)||this).firestore=n,r}return we(e,t),e.prototype.convertBytes=function(n){return new Dh(n)},e.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new on(this.firestore,null,r)},e}(G2);function VJ(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=It(t,on);var o=It(t.firestore,jn),s=Ph(o);return b_(o,[(typeof(e=Tn(e))=="string"||e instanceof Ks?H2(s,"updateDoc",t._key,e,n,r):q2(s,"updateDoc",t._key,e)).toMutation(t._key,kr.exists(!0))])}function See(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Tn(t);var s={includeMetadataChanges:!1},u=0;typeof i[u]!="object"||Qp(i[u])||(s=i[u],u++);var c,h,f,p={includeMetadataChanges:s.includeMetadataChanges};if(Qp(i[u])){var m=i[u];i[u]=(e=m.next)===null||e===void 0?void 0:e.bind(m),i[u+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),i[u+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}if(t instanceof on)h=It(t.firestore,jn),f=Jp(t._key.path),c={next:function(E){i[u]&&i[u](o2(h,t,E))},error:i[u+1],complete:i[u+2]};else{var v=It(t,ji);h=It(v.firestore,jn),f=v._query;var _=new bh(h);c={next:function(E){i[u]&&i[u](new hc(h,_,v,E))},error:i[u+1],complete:i[u+2]},bee(t._query)}return function(E,b,T,S){var A=this,x=new xS(S),H=new R2(b,x,T);return E.asyncQueue.enqueueAndForget(function(){return V(A,void 0,void 0,function(){var N;return U(this,function(ie){switch(ie.label){case 0:return N=A2,[4,Kp(E)];case 1:return[2,N.apply(void 0,[ie.sent(),H])]}})})}),function(){x.Wo(),E.asyncQueue.enqueueAndForget(function(){return V(A,void 0,void 0,function(){var N;return U(this,function(ie){switch(ie.label){case 0:return N=x2,[4,Kp(E)];case 1:return[2,N.apply(void 0,[ie.sent(),H])]}})})})}}(Pr(h),f,p,c)}function b_(t,e){return function(n,r){var i=this,o=new Or;return n.asyncQueue.enqueueAndForget(function(){return V(i,void 0,void 0,function(){var s;return U(this,function(u){switch(u.label){case 0:return s=aCe,[4,see(n)];case 1:return[2,s.apply(void 0,[u.sent(),r,o])]}})})}),o.promise}(Pr(t),e)}function o2(t,e,n){var r=n.docs.get(e._key),i=new bh(t);return new Ga(t,i,e._key,r,new wh(n.hasPendingWrites,n.fromCache),e.converter)}var GCe=function(t){function e(n,r){var i=this;return(i=t.call(this,n,r)||this)._firestore=n,i}return we(e,t),e.prototype.get=function(n){var r=this,i=dc(n,this._firestore),o=new bh(this._firestore);return t.prototype.get.call(this,n).then(function(s){return new Ga(r._firestore,o,i._key,s._document,new wh(!1,!1),i.converter)})},e}(function(){function t(e,n){this._firestore=e,this._transaction=n,this._dataReader=Ph(e)}return t.prototype.get=function(e){var n=this,r=dc(e,this._firestore),i=new $Ce(this._firestore);return this._transaction.lookup([r._key]).then(function(o){if(!o||o.length!==1)return _e();var s=o[0];if(s.isFoundDocument())return new I_(n._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new I_(n._firestore,i,r._key,null,r.converter);throw _e()})},t.prototype.set=function(e,n,r){var i=dc(e,this._firestore),o=PS(i.converter,n,r),s=MS(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this},t.prototype.update=function(e,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s,u=dc(e,this._firestore);return s=typeof(n=Tn(n))=="string"||n instanceof Ks?H2(this._dataReader,"Transaction.update",u._key,n,r,i):q2(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,s),this},t.prototype.delete=function(e){var n=dc(e,this._firestore);return this._transaction.delete(n._key),this},t}());function UJ(){if(typeof Uint8Array>"u")throw new $(k.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function jJ(){if(typeof atob>"u")throw new $(k.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var W2=function(){function t(e){this._delegate=e}return t.fromBase64String=function(e){return jJ(),new t(Dh.fromBase64String(e))},t.fromUint8Array=function(e){return UJ(),new t(Dh.fromUint8Array(e))},t.prototype.toBase64=function(){return jJ(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return UJ(),this._delegate.toUint8Array()},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Dee=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(e,n){return function(r,i){MJ(r=It(r,jn));var o=Pr(r),s=r._freezeSettings(),u=new r2;return RJ(o,u,new nee(u,s.cacheSizeBytes,i==null?void 0:i.forceOwnership))}(e._delegate,{forceOwnership:n})},t.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(n){MJ(n=It(n,jn));var r=Pr(n),i=n._freezeSettings(),o=new r2;return RJ(r,o,new ICe(o,i.cacheSizeBytes))}(e._delegate)},t.prototype.clearIndexedDbPersistence=function(e){return function(n){var r=this;if(n._initialized&&!n._terminated)throw new $(k.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return V(r,void 0,void 0,function(){var o;return U(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(u){return V(this,void 0,void 0,function(){var c;return U(this,function(h){switch(h.label){case 0:return qp.yt()?(c=u+"main",[4,qp.delete(c)]):[2,Promise.resolve()];case 1:return h.sent(),[2]}})})}(I2(n._databaseId,n._persistenceKey))];case 1:return s.sent(),i.resolve(),[3,3];case 2:return o=s.sent(),i.reject(o),[3,3];case 3:return[2]}})})}),i.promise}(e._delegate)},t}(),K2=function(){function t(e,n,r){var i=this;this._delegate=n,this.Zc=r,this.INTERNAL={delete:function(){return i.terminate()}},e instanceof vS||(this.tu=e)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(e){var n=this._delegate._getSettings();e.merge||n.host===e.host||sS("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)},t.prototype.useEmulator=function(e,n,r){r===void 0&&(r={}),function(i,o,s,u){var c;u===void 0&&(u={});var h=(i=It(i,E_))._getSettings();if(h.host!=="firestore.googleapis.com"&&h.host!==o&&sS("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},h),{host:o+":"+s,ssl:!1})),u.mockUserToken){var f,p;if(typeof u.mockUserToken=="string")f=u.mockUserToken,p=_r.MOCK_USER;else{f=aY(u.mockUserToken,(c=i._app)===null||c===void 0?void 0:c.options.projectId);var m=u.mockUserToken.sub||u.mockUserToken.user_id;if(!m)throw new $(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new _r(m)}i._credentials=new DCe(new aee(f,p))}}(this._delegate,e,n,r)},t.prototype.enableNetwork=function(){return function(e){var n=this;return e.asyncQueue.enqueue(function(){return V(n,void 0,void 0,function(){var r,i;return U(this,function(o){switch(o.label){case 0:return[4,EJ(e)];case 1:return r=o.sent(),[4,IJ(e)];case 2:return i=o.sent(),[2,(r.setNetworkEnabled(!0),function(s){var u=oe(s);return u.Or.delete(0),R_(u)}(i))]}})})})}(Pr(It(this._delegate,jn)))},t.prototype.disableNetwork=function(){return function(e){var n=this;return e.asyncQueue.enqueue(function(){return V(n,void 0,void 0,function(){var r,i;return U(this,function(o){switch(o.label){case 0:return[4,EJ(e)];case 1:return r=o.sent(),[4,IJ(e)];case 2:return i=o.sent(),[2,(r.setNetworkEnabled(!1),function(s){return V(this,void 0,void 0,function(){var u;return U(this,function(c){switch(c.label){case 0:return(u=oe(s)).Or.add(0),[4,eg(u)];case 1:return c.sent(),u.Br.set("Offline"),[2]}})})}(i))]}})})})}(Pr(It(this._delegate,jn)))},t.prototype.enablePersistence=function(e){var n=!1,r=!1;return e&&uee("synchronizeTabs",n=!!e.synchronizeTabs,"experimentalForceOwningTab",r=!!e.experimentalForceOwningTab),n?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,r)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(e){var n=this,r=new Or;return e.asyncQueue.enqueueAndForget(function(){return V(n,void 0,void 0,function(){var i;return U(this,function(o){switch(o.label){case 0:return i=hCe,[4,see(e)];case 1:return[2,i.apply(void 0,[o.sent(),r])]}})})}),r.promise}(Pr(It(this._delegate,jn)))},t.prototype.onSnapshotsInSync=function(e){return function(n,r){return function(i,o){var s=this,u=new xS(o);return i.asyncQueue.enqueueAndForget(function(){return V(s,void 0,void 0,function(){var c;return U(this,function(h){switch(h.label){case 0:return c=function(f,p){oe(f).Gr.add(p),p.next()},[4,Kp(i)];case 1:return[2,c.apply(void 0,[h.sent(),u])]}})})}),function(){u.Wo(),i.asyncQueue.enqueueAndForget(function(){return V(s,void 0,void 0,function(){var c;return U(this,function(h){switch(h.label){case 0:return c=function(f,p){oe(f).Gr.delete(p)},[4,Kp(i)];case 1:return[2,c.apply(void 0,[h.sent(),u])]}})})})}}(Pr(n=It(n,jn)),Qp(r)?r:{next:r})}(this._delegate,e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new $(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new T_(this,cee(this._delegate,e))}catch(n){throw Yr(n,"collection()","Firestore.collection()")}},t.prototype.doc=function(e){try{return new gc(this,oS(this._delegate,e))}catch(n){throw Yr(n,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(e){try{return new k_(this,function(n,r){if(n=It(n,E_),U2("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new $(k.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ji(n,null,function(i){return new Wa(mt.emptyPath(),i)}(r))}(this._delegate,e))}catch(n){throw Yr(n,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(e){var n=this;return function(r,i){return function(o,s){var u=this,c=new Or;return o.asyncQueue.enqueueAndForget(function(){return V(u,void 0,void 0,function(){var h;return U(this,function(f){switch(f.label){case 0:return[4,function(p){return NS(p).then(function(m){return m.datastore})}(o)];case 1:return h=f.sent(),new TCe(o.asyncQueue,h,s,c).run(),[2]}})})}),c.promise}(Pr(r),function(o){return i(new GCe(r,o))})}(this._delegate,function(r){return e(new Q2(n,r))})},t.prototype.batch=function(){var e=this;return Pr(this._delegate),new Y2(new zCe(this._delegate,function(n){return b_(e._delegate,n)}))},t.prototype.loadBundle=function(e){throw new $(k.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(e){throw new $(k.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),kS=function(t){function e(n){var r=this;return(r=t.call(this)||this).firestore=n,r}return we(e,t),e.prototype.convertBytes=function(n){return new W2(new Dh(n))},e.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return gc.eu(r,this.firestore,null)},e}(G2);function Aee(t){var e;e=t,Wo.setLogLevel(e)}var Q2=function(){function t(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new kS(e)}return t.prototype.get=function(e){var n=this,r=Eh(e);return this._delegate.get(r).then(function(i){return new Yp(n._firestore,new Ga(n._firestore._delegate,n._userDataWriter,i._key,i._document,i.metadata,r.converter))})},t.prototype.set=function(e,n,r){var i=Eh(e);return r?(j2("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},t.prototype.update=function(e,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=Eh(e);return arguments.length===2?this._delegate.update(u,n):(i=this._delegate).update.apply(i,Rt([u,n,r],o)),this},t.prototype.delete=function(e){var n=Eh(e);return this._delegate.delete(n),this},t}(),Y2=function(){function t(e){this._delegate=e}return t.prototype.set=function(e,n,r){var i=Eh(e);return r?(j2("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},t.prototype.update=function(e,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=Eh(e);return arguments.length===2?this._delegate.update(u,n):(i=this._delegate).update.apply(i,Rt([u,n,r],o)),this},t.prototype.delete=function(e){var n=Eh(e);return this._delegate.delete(n),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),OS=function(){function t(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}return t.prototype.fromFirestore=function(e,n){var r=new f_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xp(this._firestore,r),n!=null?n:{})},t.prototype.toFirestore=function(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new kS(e),n),i.set(n,o)),o},t}();OS.su=new WeakMap;var gc=function(){function t(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new kS(e)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new $(k.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new on(n._delegate,r,new Ie(e)))},t.eu=function(e,n,r){return new t(n,new on(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new T_(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new T_(this.firestore,cee(this._delegate,e))}catch(n){throw Yr(n,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(e){return(e=Tn(e))instanceof on&&lee(this._delegate,e)},t.prototype.set=function(e,n){n=j2("DocumentReference.set",n);try{return function(r,i,o){r=It(r,on);var s=It(r.firestore,jn),u=PS(r.converter,i,o);return b_(s,[MS(Ph(s),"setDoc",r._key,u,r.converter!==null,o).toMutation(r._key,kr.none())])}(this._delegate,e,n)}catch(r){throw Yr(r,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return arguments.length===1?VJ(this._delegate,e):VJ.apply(void 0,Rt([this._delegate,e,n],r))}catch(o){throw Yr(o,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return b_(It((e=this._delegate).firestore,jn),[new N_(e._key,kr.none())]);var e},t.prototype.onSnapshot=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=xee(n),o=Nee(n,function(s){return new Yp(e.firestore,new Ga(e.firestore._delegate,e._userDataWriter,s._key,s._document,s.metadata,e._delegate.converter))});return See(this._delegate,i,o)},t.prototype.get=function(e){var n=this;return((e==null?void 0:e.source)==="cache"?function(r){r=It(r,on);var i=It(r.firestore,jn),o=Pr(i),s=new bh(i);return function(u,c){var h=this,f=new Or;return u.asyncQueue.enqueueAndForget(function(){return V(h,void 0,void 0,function(){var p;return U(this,function(m){switch(m.label){case 0:return p=function(v,_,E){return V(this,void 0,void 0,function(){var b,T;return U(this,function(S){switch(S.label){case 0:return S.trys.push([0,2,,3]),[4,function(A,x){var H=oe(A);return H.persistence.runTransaction("read document","readonly",function(N){return H.Mn.mn(N,x)})}(v,_)];case 1:return(T=S.sent()).isFoundDocument()?E.resolve(T):T.isNoDocument()?E.resolve(null):E.reject(new $(k.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return b=S.sent(),T=rg(b,"Failed to get document '"+_+" from cache"),E.reject(T),[3,3];case 3:return[2]}})})},[4,oee(u)];case 1:return[2,p.apply(void 0,[m.sent(),c,f])]}})})}),f.promise}(o,r._key).then(function(u){return new Ga(i,s,r._key,u,new wh(u!==null&&u.hasLocalMutations,!0),r.converter)})}(this._delegate):(e==null?void 0:e.source)==="server"?function(r){r=It(r,on);var i=It(r.firestore,jn);return bJ(Pr(i),r._key,{source:"server"}).then(function(o){return o2(i,r,o)})}(this._delegate):function(r){r=It(r,on);var i=It(r.firestore,jn);return bJ(Pr(i),r._key).then(function(o){return o2(i,r,o)})}(this._delegate)).then(function(r){return new Yp(n.firestore,new Ga(n.firestore._delegate,n._userDataWriter,r._key,r._document,r.metadata,n._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(OS.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Yr(t,e,n){return t.message=t.message.replace(e,n),t}function xee(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(typeof r=="object"&&!Qp(r))return r}return{}}function Nee(t,e){var n,r,i;return{next:function(o){i.next&&i.next(e(o))},error:(n=(i=Qp(t[0])?t[0]:Qp(t[1])?t[1]:typeof t[0]=="function"?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Yp=function(){function t(e,n){this._firestore=e,this._delegate=n}return Object.defineProperty(t.prototype,"ref",{get:function(){return new gc(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(e){return this._delegate.data(e)},t.prototype.get=function(e,n){return this._delegate.get(e,n)},t.prototype.isEqual=function(e){return Iee(this._delegate,e._delegate)},t}(),Xp=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return we(e,t),e.prototype.data=function(n){return this._delegate.data(n)},e}(Yp),k_=function(){function t(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new kS(e)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,ac(this._delegate,function(i,o,s){var u=o,c=wS("where",i);return new qCe(c,u,s)}(e,n,r)))}catch(i){throw Yr(i,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,ac(this._delegate,function(r,i){i===void 0&&(i="asc");var o=i,s=wS("orderBy",r);return new HCe(s,o)}(e,n)))}catch(r){throw Yr(r,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,ac(this._delegate,function(n){return xJ("limit",n),new PJ("limit",n,"F")}(e)))}catch(n){throw Yr(n,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,ac(this._delegate,function(n){return xJ("limitToLast",n),new PJ("limitToLast",n,"L")}(e)))}catch(n){throw Yr(n,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ac(this._delegate,(function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new kJ("startAt",r,!0)}).apply(void 0,e)))}catch(r){throw Yr(r,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ac(this._delegate,(function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new kJ("startAfter",r,!1)}).apply(void 0,e)))}catch(r){throw Yr(r,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ac(this._delegate,(function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new OJ("endBefore",r,!0)}).apply(void 0,e)))}catch(r){throw Yr(r,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ac(this._delegate,(function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new OJ("endAt",r,!1)}).apply(void 0,e)))}catch(r){throw Yr(r,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(e){return hee(this._delegate,e._delegate)},t.prototype.get=function(e){var n=this;return((e==null?void 0:e.source)==="cache"?function(r){r=It(r,ji);var i=It(r.firestore,jn),o=Pr(i),s=new bh(i);return function(u,c){var h=this,f=new Or;return u.asyncQueue.enqueueAndForget(function(){return V(h,void 0,void 0,function(){var p;return U(this,function(m){switch(m.label){case 0:return p=function(v,_,E){return V(this,void 0,void 0,function(){var b,T,S,A,x;return U(this,function(H){switch(H.label){case 0:return H.trys.push([0,2,,3]),[4,gS(v,_,!0)];case 1:return x=H.sent(),b=new XZ(_,x.Bn),T=b._o(x.documents),S=b.applyChanges(T,!1),E.resolve(S.snapshot),[3,3];case 2:return A=H.sent(),x=rg(A,"Failed to execute query '"+_+" against cache"),E.reject(x),[3,3];case 3:return[2]}})})},[4,oee(u)];case 1:return[2,p.apply(void 0,[m.sent(),c,f])]}})})}),f.promise}(o,r._query).then(function(u){return new hc(i,s,r,u)})}(this._delegate):(e==null?void 0:e.source)==="server"?function(r){r=It(r,ji);var i=It(r.firestore,jn),o=Pr(i),s=new bh(i);return TJ(o,r._query,{source:"server"}).then(function(u){return new hc(i,s,r,u)})}(this._delegate):function(r){r=It(r,ji);var i=It(r.firestore,jn),o=Pr(i),s=new bh(i);return bee(r._query),TJ(o,r._query).then(function(u){return new hc(i,s,r,u)})}(this._delegate)).then(function(r){return new ES(n.firestore,new hc(n.firestore._delegate,n._userDataWriter,n._delegate,r._snapshot))})},t.prototype.onSnapshot=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=xee(n),o=Nee(n,function(s){return new ES(e.firestore,new hc(e.firestore._delegate,e._userDataWriter,e._delegate,s._snapshot))});return See(this._delegate,i,o)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(OS.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),WCe=function(){function t(e,n){this._firestore=e,this._delegate=n}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Xp(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),ES=function(){function t(e,n){this._firestore=e,this._delegate=n}return Object.defineProperty(t.prototype,"query",{get:function(){return new k_(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(n){return new Xp(e._firestore,n)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(e){var n=this;return this._delegate.docChanges(e).map(function(r){return new WCe(n._firestore,r)})},t.prototype.forEach=function(e,n){var r=this;this._delegate.forEach(function(i){e.call(n,new Xp(r._firestore,i))})},t.prototype.isEqual=function(e){return Iee(this._delegate,e._delegate)},t}(),T_=function(t){function e(n,r){var i=this;return(i=t.call(this,n,r)||this).firestore=n,i._delegate=r,i}return we(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var n=this._delegate.parent;return n?new gc(this.firestore,n):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(n){try{return new gc(this.firestore,n===void 0?oS(this._delegate):oS(this._delegate,n))}catch(r){throw Yr(r,"doc()","CollectionReference.doc()")}},e.prototype.add=function(n){var r=this;return function(i,o){var s=It(i.firestore,jn),u=oS(i),c=PS(i.converter,o);return b_(s,[MS(Ph(i.firestore),"addDoc",u._key,c,i.converter!==null,{}).toMutation(u._key,kr.exists(!1))]).then(function(){return u})}(this._delegate,n).then(function(i){return new gc(r.firestore,i)})},e.prototype.isEqual=function(n){return lee(this._delegate,n._delegate)},e.prototype.withConverter=function(n){return new e(this.firestore,n?this._delegate.withConverter(OS.nu(this.firestore,n)):this._delegate.withConverter(null))},e}(k_);function Eh(t){return It(t,on)}var Ree=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._delegate=new(Ks.bind.apply(Ks,Rt([void 0],e)))}return t.documentId=function(){return new t(Qo.keyField().canonicalString())},t.prototype.isEqual=function(e){return(e=Tn(e))instanceof Ks&&this._delegate._internalPath.isEqual(e._internalPath)},t}(),Mee=function(){function t(e){this._delegate=e}return t.serverTimestamp=function(){var e=new OCe("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new B2("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new FCe("arrayUnion",i)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new LCe("arrayRemove",i)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(r){return new VCe("increment",r)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t}();var Pee=function(){function t(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},t}();var Oh="[DEFAULT]";var KCe=function(){function t(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(e){var n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){var r=new sY;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise},t.prototype.getImmediate=function(e){var n,r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var n,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,!!this.shouldAutoInitialize()){if(YCe(e))try{this.getOrInitializeService({instanceIdentifier:Oh})}catch{}try{for(var i=uu(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=cs(o.value,2),u=s[0],c=s[1],h=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService({instanceIdentifier:h});c.resolve(f)}catch{}}}catch(p){n={error:p}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},t.prototype.clearInstance=function(e){e===void 0&&(e=Oh),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return V(this,void 0,void 0,function(){var e;return U(this,function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Rt(Rt([],cs(e.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),cs(e.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.isInitialized=function(e){return e===void 0&&(e=Oh),this.instances.has(e)},t.prototype.getOptions=function(e){return e===void 0&&(e=Oh),this.instancesOptions.get(e)||{}},t.prototype.initialize=function(e){var n,r;e===void 0&&(e={});var i=e.options,o=i===void 0?{}:i,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var c=uu(this.instancesDeferred.entries()),h=c.next();!h.done;h=c.next()){var f=cs(h.value,2),p=f[0],m=f[1],v=this.normalizeInstanceIdentifier(p);s===v&&m.resolve(u)}}catch(_){n={error:_}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return u},t.prototype.onInit=function(e,n){var r,i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);var s=this.instances.get(i);return s&&e(s,i),function(){o.delete(e)}},t.prototype.invokeOnInitCallbacks=function(e,n){var r,i,o=this.onInitCallbacks.get(n);if(o)try{for(var s=uu(o),u=s.next();!u.done;u=s.next()){var c=u.value;try{c(e,n)}catch{}}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.getOrInitializeService=function(e){var n=e.instanceIdentifier,r=e.options,i=r===void 0?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:QCe(n),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch{}return o||null},t.prototype.normalizeInstanceIdentifier=function(e){return e===void 0&&(e=Oh),this.component?this.component.multipleInstances?e:Oh:e},t.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},t}();function QCe(t){return t===Oh?void 0:t}function YCe(t){return t.instantiationMode==="EAGER"}var gqe=function(){function t(e){this.name=e,this.providers=new Map}return t.prototype.addComponent=function(e){var n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);n.setComponent(e)},t.prototype.addOrOverwriteComponent=function(e){var n=this.getProvider(e.name);n.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},t.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var n=new KCe(e,this);return this.providers.set(e,n),n},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();var XCe={Firestore:K2,GeoPoint:M_,Timestamp:Xr,Blob:W2,Transaction:Q2,WriteBatch:Y2,DocumentReference:gc,DocumentSnapshot:Yp,Query:k_,QueryDocumentSnapshot:Xp,QuerySnapshot:ES,CollectionReference:T_,FieldPath:Ree,FieldValue:Mee,setLogLevel:Aee,CACHE_SIZE_UNLIMITED:dee};function JCe(t){(function(e,n){e.INTERNAL.registerComponent(new Pee("firestore",function(r){var i=r.getProvider("app").getImmediate();return n(i,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},XCe)))})(t,function(e,n){return new K2(e,new jn(e,n),new Dee)}),t.registerVersion("@firebase/firestore","2.4.0")}JCe(je);var kee=(()=>{let e=class e{constructor(r){this.afAuth=r}signUp(r,i){return this.afAuth.createUserWithEmailAndPassword(r,i)}signIn(r,i){return F(this,null,function*(){return yield this.afAuth.signInWithEmailAndPassword(r,i)})}signOut(){return this.afAuth.signOut()}};e.\u0275fac=function(i){return new(i||e)(M(Na))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Oee=(()=>{let e=class e{get windowRef(){return window}constructor(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ys="*";function Fee(t,e){return{type:7,name:t,definitions:e,options:{}}}function X2(t,e=null){return{type:4,styles:e,timings:t}}function Lee(t,e=null){return{type:2,steps:t,options:e}}function Fh(t){return{type:6,styles:t,offset:null}}function FS(t,e,n){return{type:0,name:t,styles:e,options:n}}function J2(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}var Ec=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},O_=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++n==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,u)=>Math.max(s,u.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((n,r)=>n===null||r.totalTime>n.totalTime?r:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},LS="!";var Vee=["toast-component",""];function tSe(t,e){if(t&1){let n=ko();G(0,"button",5),_t("click",function(){pi(n);let i=et();return gi(i.remove())}),G(1,"span",6),fe(2,"\xD7"),W()()}}function nSe(t,e){if(t&1&&(mI(0),fe(1),yI()),t&2){let n=et(2);ae(1),Wn("[",n.duplicatesCount+1,"]")}}function rSe(t,e){if(t&1&&(G(0,"div"),fe(1),Ct(2,nSe,2,1,"ng-container",4),W()),t&2){let n=et();Ca(n.options.titleClass),Ts("aria-label",n.title),ae(1),Wn(" ",n.title," "),ae(1),De("ngIf",n.duplicatesCount)}}function iSe(t,e){if(t&1&&ot(0,"div",7),t&2){let n=et();Ca(n.options.messageClass),De("innerHTML",n.message,eP)}}function oSe(t,e){if(t&1&&(G(0,"div",8),fe(1),W()),t&2){let n=et();Ca(n.options.messageClass),Ts("aria-label",n.message),ae(1),Wn(" ",n.message," ")}}function sSe(t,e){if(t&1&&(G(0,"div"),ot(1,"div",9),W()),t&2){let n=et();ae(1),Il("width",n.width+"%")}}function aSe(t,e){if(t&1){let n=ko();G(0,"button",5),_t("click",function(){pi(n);let i=et();return gi(i.remove())}),G(1,"span",6),fe(2,"\xD7"),W()()}}function uSe(t,e){if(t&1&&(mI(0),fe(1),yI()),t&2){let n=et(2);ae(1),Wn("[",n.duplicatesCount+1,"]")}}function cSe(t,e){if(t&1&&(G(0,"div"),fe(1),Ct(2,uSe,2,1,"ng-container",4),W()),t&2){let n=et();Ca(n.options.titleClass),Ts("aria-label",n.title),ae(1),Wn(" ",n.title," "),ae(1),De("ngIf",n.duplicatesCount)}}function lSe(t,e){if(t&1&&ot(0,"div",7),t&2){let n=et();Ca(n.options.messageClass),De("innerHTML",n.message,eP)}}function hSe(t,e){if(t&1&&(G(0,"div",8),fe(1),W()),t&2){let n=et();Ca(n.options.messageClass),Ts("aria-label",n.message),ae(1),Wn(" ",n.message," ")}}function dSe(t,e){if(t&1&&(G(0,"div"),ot(1,"div",9),W()),t&2){let n=et();ae(1),Il("width",n.width+"%")}}var Z2=class{constructor(e,n){R(this,"_attachedHost");R(this,"component");R(this,"viewContainerRef");R(this,"injector");this.component=e,this.injector=n}attach(e,n){return this._attachedHost=e,e.attach(this,n)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},eU=class{constructor(){R(this,"_attachedPortal");R(this,"_disposeFn")}attach(e,n){return this._attachedPortal=e,this.attachComponentPortal(e,n)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},tU=class{constructor(e){R(this,"_overlayRef");R(this,"componentInstance");R(this,"duplicatesCount",0);R(this,"_afterClosed",new Nt);R(this,"_activate",new Nt);R(this,"_manualClose",new Nt);R(this,"_resetTimeout",new Nt);R(this,"_countDuplicate",new Nt);this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,n){e&&this._resetTimeout.next(),n&&this._countDuplicate.next(++this.duplicatesCount)}},ig=class{constructor(e,n,r,i,o,s){R(this,"toastId");R(this,"config");R(this,"message");R(this,"title");R(this,"toastType");R(this,"toastRef");R(this,"_onTap",new Nt);R(this,"_onAction",new Nt);this.toastId=e,this.config=n,this.message=r,this.title=i,this.toastType=o,this.toastRef=s,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},Uee={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},jee=new J("ToastConfig"),nU=class extends eU{constructor(n,r,i){super();R(this,"_hostDomElement");R(this,"_componentFactoryResolver");R(this,"_appRef");this._hostDomElement=n,this._componentFactoryResolver=r,this._appRef=i}attachComponentPortal(n,r){let i=this._componentFactoryResolver.resolveComponentFactory(n.component),o;return o=i.create(n.injector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()}),r?this._hostDomElement.insertBefore(this._getComponentRootNode(o),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(o)),o}_getComponentRootNode(n){return n.hostView.rootNodes[0]}},fSe=(()=>{let e=class e{constructor(){R(this,"_document",ee(qt));R(this,"_containerElement")}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let r=this._document.createElement("div");r.classList.add("overlay-container"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),this._containerElement=r}};R(e,"\u0275fac",function(i){return new(i||e)}),R(e,"\u0275prov",Y({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})(),rU=class{constructor(e){R(this,"_portalHost");this._portalHost=e}attach(e,n=!0){return this._portalHost.attach(e,n)}detach(){return this._portalHost.detach()}},pSe=(()=>{let e=class e{constructor(){R(this,"_overlayContainer",ee(fSe));R(this,"_componentFactoryResolver",ee(sf));R(this,"_appRef",ee(xi));R(this,"_document",ee(qt));R(this,"_paneElements",new Map)}create(r,i){return this._createOverlayRef(this.getPaneElement(r,i))}getPaneElement(r="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[r]||(this._paneElements.get(i)[r]=this._createPaneElement(r,i)),this._paneElements.get(i)[r]}_createPaneElement(r,i){let o=this._document.createElement("div");return o.id="toast-container",o.classList.add(r),o.classList.add("toast-container"),i?i.getContainerElement().appendChild(o):this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalHost(r){return new nU(r,this._componentFactoryResolver,this._appRef)}_createOverlayRef(r){return new rU(this._createPortalHost(r))}};R(e,"\u0275fac",function(i){return new(i||e)}),R(e,"\u0275prov",Y({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})(),VS=(()=>{let e=class e{constructor(r,i,o,s,u){R(this,"overlay");R(this,"_injector");R(this,"sanitizer");R(this,"ngZone");R(this,"toastrConfig");R(this,"currentlyActive",0);R(this,"toasts",[]);R(this,"overlayContainer");R(this,"previousToastMessage");R(this,"index",0);this.overlay=i,this._injector=o,this.sanitizer=s,this.ngZone=u,this.toastrConfig=X(X({},r.default),r.config),r.config.iconClasses&&(this.toastrConfig.iconClasses=X(X({},r.default.iconClasses),r.config.iconClasses))}show(r,i,o={},s=""){return this._preBuildNotification(s,r,i,this.applyConfig(o))}success(r,i,o={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,r,i,this.applyConfig(o))}error(r,i,o={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,r,i,this.applyConfig(o))}info(r,i,o={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,r,i,this.applyConfig(o))}warning(r,i,o={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,r,i,this.applyConfig(o))}clear(r){for(let i of this.toasts)if(r!==void 0){if(i.toastId===r){i.toastRef.manualClose();return}}else i.toastRef.manualClose()}remove(r){let i=this._findToast(r);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let o=this.toasts[this.currentlyActive].toastRef;o.isInactive()||(this.currentlyActive=this.currentlyActive+1,o.activate())}return!0}findDuplicate(r="",i="",o,s){let{includeTitleDuplicates:u}=this.toastrConfig;for(let c of this.toasts){let h=u&&c.title===r;if((!u||h)&&c.message===i)return c.toastRef.onDuplicate(o,s),c}return null}applyConfig(r={}){return X(X({},this.toastrConfig),r)}_findToast(r){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===r)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(r,i,o,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(r,i,o,s)):this._buildNotification(r,i,o,s)}_buildNotification(r,i,o,s){if(!s.toastComponent)throw new Error("toastComponent required");let u=this.findDuplicate(o,i,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&o||i)&&this.toastrConfig.preventDuplicates&&u!==null)return u;this.previousToastMessage=i;let c=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(c=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let h=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let f=i;i&&s.enableHtml&&(f=this.sanitizer.sanitize(Di.HTML,i));let p=new tU(h),m=new ig(this.index,s,f,o,r,p),v=[{provide:ig,useValue:m}],_=dr.create({providers:v,parent:this._injector}),E=new Z2(s.toastComponent,_),b=h.attach(E,s.newestOnTop);p.componentInstance=b.instance;let T={toastId:this.index,title:o||"",message:i||"",toastRef:p,onShown:p.afterActivate(),onHidden:p.afterClosed(),onTap:m.onTap(),onAction:m.onAction(),portal:b};return c||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{T.toastRef.activate()})),this.toasts.push(T),T}};R(e,"\u0275fac",function(i){return new(i||e)(M(jee),M(pSe),M(dr),M(WP),M(ke))}),R(e,"\u0275prov",Y({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})(),gSe=(()=>{let e=class e{constructor(r,i,o){R(this,"toastrService");R(this,"toastPackage");R(this,"ngZone");R(this,"message");R(this,"title");R(this,"options");R(this,"duplicatesCount");R(this,"originalTimeout");R(this,"width",-1);R(this,"toastClasses","");R(this,"state");R(this,"timeout");R(this,"intervalId");R(this,"hideTime");R(this,"sub");R(this,"sub1");R(this,"sub2");R(this,"sub3");this.toastrService=r,this.toastPackage=i,this.ngZone=o,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}get displayStyle(){if(this.state.value==="inactive")return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Xe(X({},this.state),{value:"active"}),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let r=new Date().getTime(),i=this.hideTime-r;this.width=i/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Xe(X({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state.value!=="removed"&&(clearTimeout(this.timeout),this.state=Xe(X({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state.value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state.value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state.value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(r,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(r),i)):this.timeout=setTimeout(()=>r(),i)}outsideInterval(r,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(r),i)):this.intervalId=setInterval(()=>r(),i)}runInsideAngular(r){this.ngZone?this.ngZone.run(()=>r()):r()}};R(e,"\u0275fac",function(i){return new(i||e)(ye(VS),ye(ig),ye(ke))}),R(e,"\u0275cmp",Cr({type:e,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,o){i&1&&_t("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),i&2&&(mP("@flyInOut",o.state),Ca(o.toastClasses),Il("display",o.displayStyle))},standalone:!0,features:[$m],attrs:Vee,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,o){i&1&&Ct(0,tSe,3,0,"button",0)(1,rSe,3,5,"div",1)(2,iSe,1,3,"div",2)(3,oSe,2,4,"div",3)(4,sSe,2,2,"div",4),i&2&&(De("ngIf",o.options.closeButton),ae(1),De("ngIf",o.title),ae(1),De("ngIf",o.message&&o.options.enableHtml),ae(1),De("ngIf",o.message&&!o.options.enableHtml),ae(1),De("ngIf",o.options.progressBar))},dependencies:[Aa],encapsulation:2,data:{animation:[Fee("flyInOut",[FS("inactive",Fh({opacity:0})),FS("active",Fh({opacity:1})),FS("removed",Fh({opacity:0})),J2("inactive => active",X2("{{ easeTime }}ms {{ easing }}")),J2("active => removed",X2("{{ easeTime }}ms {{ easing }}"))])]}}));let t=e;return t})(),mSe=Xe(X({},Uee),{toastComponent:gSe}),ySe=(t={})=>of([{provide:jee,useValue:{default:mSe,config:t}}]),Bee=(()=>{let e=class e{static forRoot(r={}){return{ngModule:e,providers:[ySe(r)]}}};R(e,"\u0275fac",function(i){return new(i||e)}),R(e,"\u0275mod",ct({type:e})),R(e,"\u0275inj",ut({}));let t=e;return t})();var vSe=(()=>{let e=class e{constructor(r,i,o){R(this,"toastrService");R(this,"toastPackage");R(this,"appRef");R(this,"message");R(this,"title");R(this,"options");R(this,"duplicatesCount");R(this,"originalTimeout");R(this,"width",-1);R(this,"toastClasses","");R(this,"state","inactive");R(this,"timeout");R(this,"intervalId");R(this,"hideTime");R(this,"sub");R(this,"sub1");R(this,"sub2");R(this,"sub3");this.toastrService=r,this.toastPackage=i,this.appRef=o,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}get displayStyle(){return this.state==="inactive"?"none":null}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let r=new Date().getTime(),i=this.hideTime-r;this.width=i/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state!=="removed"&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}};R(e,"\u0275fac",function(i){return new(i||e)(ye(VS),ye(ig),ye(xi))}),R(e,"\u0275cmp",Cr({type:e,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(i,o){i&1&&_t("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),i&2&&(Ca(o.toastClasses),Il("display",o.displayStyle))},standalone:!0,features:[$m],attrs:Vee,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,o){i&1&&Ct(0,aSe,3,0,"button",0)(1,cSe,3,5,"div",1)(2,lSe,1,3,"div",2)(3,hSe,2,4,"div",3)(4,dSe,2,2,"div",4),i&2&&(De("ngIf",o.options.closeButton),ae(1),De("ngIf",o.title),ae(1),De("ngIf",o.message&&o.options.enableHtml),ae(1),De("ngIf",o.message&&!o.options.enableHtml),ae(1),De("ngIf",o.options.progressBar))},dependencies:[Aa],encapsulation:2}));let t=e;return t})(),Vqe=Xe(X({},Uee),{toastComponent:vSe});var US=(()=>{let e=class e{constructor(r){this.toastr=r}showSuccess(r,i){this.toastr.success(r,i)}showError(r,i){this.toastr.error(r,i)}};e.\u0275fac=function(i){return new(i||e)(M(VS))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Hee=(()=>{let e=class e{constructor(r,i){this.firestore=r,this.helper=i,this.userSubject=new _n(null)}setUser(r){this.userSubject.next(r)}getUser(){return this.userSubject.asObservable()}saveUserToFirestore(r){this.firestore.collection("users").add(r).then(o=>{this.helper.showSuccess("Success","Sign-up successful!"),console.log("User document added with ID:",o.id)}).catch(o=>{this.helper.showError("Error!","Error while creating user")})}};e.\u0275fac=function(i){return new(i||e)(M(Ba),M(US))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ESe=["targetElementRef"];function ISe(t,e){t&1&&(G(0,"div",15),fe(1,"Login Form"),W())}function bSe(t,e){t&1&&(G(0,"div",16),fe(1,"Signup Form"),W())}function TSe(t,e){t&1&&(G(0,"div",28),fe(1," Email is required. "),W())}function CSe(t,e){t&1&&(G(0,"div",28),fe(1," Invalid email address. "),W())}function SSe(t,e){t&1&&(G(0,"div",28),fe(1," Password is required. "),W())}function DSe(t,e){t&1&&(G(0,"div",28),fe(1," Password must be at least 6 characters. "),W())}function ASe(t,e){if(t&1){let n=ko();G(0,"form",17),_t("submit",function(){pi(n);let i=et();return gi(i.signIn())}),G(1,"div",18),ot(2,"input",19),Ct(3,TSe,2,0,"div",20)(4,CSe,2,0,"div",20),W(),G(5,"div",18),ot(6,"input",21),Ct(7,SSe,2,0,"div",20)(8,DSe,2,0,"div",20),W(),G(9,"div",22)(10,"a"),fe(11,"Forgot password?"),W()(),G(12,"div",23),ot(13,"div",24)(14,"input",25),W(),G(15,"div",26),fe(16,"Not a member? "),G(17,"a",27),_t("click",function(){pi(n);let i=et();return gi(i.toggleForm("login"))}),fe(18,"Signup now"),W()()()}if(t&2){let n=et(),r,i,o,s;De("formGroup",n.loginForm),ae(3),De("ngIf",((r=n.loginForm.get("email"))==null?null:r.hasError("required"))&&((r=n.loginForm.get("email"))==null?null:r.touched)),ae(1),De("ngIf",((i=n.loginForm.get("email"))==null?null:i.hasError("email"))&&((i=n.loginForm.get("email"))==null?null:i.touched)),ae(3),De("ngIf",((o=n.loginForm.get("password"))==null?null:o.hasError("required"))&&((o=n.loginForm.get("password"))==null?null:o.touched)),ae(1),De("ngIf",((s=n.loginForm.get("password"))==null?null:s.hasError("minlength"))&&((s=n.loginForm.get("password"))==null?null:s.touched))}}function xSe(t,e){t&1&&(G(0,"div",28),fe(1," Full Name is required. "),W())}function NSe(t,e){t&1&&(G(0,"div",28),fe(1," Email is required. "),W())}function RSe(t,e){t&1&&(G(0,"div",28),fe(1," Full Name is required. "),W())}function MSe(t,e){t&1&&(G(0,"div",28),fe(1," Invalid phone number. "),W())}function PSe(t,e){t&1&&(G(0,"div"),fe(1," Password is required. "),W())}function kSe(t,e){t&1&&(G(0,"div",28),fe(1," Password must be at least 6 characters. "),W())}function OSe(t,e){t&1&&(G(0,"div",28),fe(1," You must accept the terms and conditions. "),W())}function FSe(t,e){if(t&1){let n=ko();G(0,"form",29),_t("submit",function(){pi(n);let i=et();return gi(i.signUp())}),G(1,"div",18),ot(2,"input",30),Ct(3,xSe,2,0,"div",20),W(),G(4,"div",18),ot(5,"input",19),Ct(6,NSe,2,0,"div",20),W(),G(7,"div",18),ot(8,"input",31),Ct(9,RSe,2,0,"div",20)(10,MSe,2,0,"div",20),W(),G(11,"div",18),ot(12,"input",21),Ct(13,PSe,2,0,"div",32)(14,kSe,2,0,"div",20),W(),G(15,"div",18)(16,"div",33),ot(17,"input",34),G(18,"label",35),fe(19,"I accept all terms & conditions"),W()(),Ct(20,OSe,2,0,"div",20),W(),G(21,"div",23),ot(22,"div",24)(23,"input",36),W()()}if(t&2){let n=et(),r,i,o,s,u,c,h;De("formGroup",n.signupForm),ae(3),De("ngIf",((r=n.signupForm.get("fullName"))==null?null:r.hasError("required"))&&((r=n.signupForm.get("fullName"))==null?null:r.touched)),ae(3),De("ngIf",((i=n.signupForm.get("email"))==null?null:i.hasError("required"))&&((i=n.signupForm.get("email"))==null?null:i.touched)),ae(3),De("ngIf",((o=n.signupForm.get("phone"))==null?null:o.hasError("required"))&&((o=n.signupForm.get("phone"))==null?null:o.touched)),ae(1),De("ngIf",((s=n.signupForm.get("phone"))==null?null:s.hasError("phone"))&&((s=n.signupForm.get("phone"))==null?null:s.touched)),ae(3),De("ngIf",((u=n.signupForm.get("password"))==null?null:u.hasError("required"))&&((u=n.signupForm.get("password"))==null?null:u.touched)),ae(1),De("ngIf",((c=n.signupForm.get("password"))==null?null:c.hasError("minlength"))&&((c=n.signupForm.get("password"))==null?null:c.touched)),ae(6),De("ngIf",((h=n.signupForm.get("acceptTerms"))==null?null:h.hasError("required"))&&((h=n.signupForm.get("acceptTerms"))==null?null:h.touched))}}var $ee=(()=>{let e=class e{constructor(r,i,o,s,u,c,h){this.fb=r,this.authService=i,this.win=o,this.ngZone=s,this.router=u,this.userState=c,this.helper=h,this.isWrapperActive=!1,this.tab="signup",this.formToggle=!1,this.loginForm=this.fb.group({email:["",[vi.required,vi.email]],password:["",[vi.required,vi.minLength(6)]]}),this.signupForm=this.fb.group({fullName:["",[vi.required]],email:["",[vi.required,vi.email]],phone:["",[vi.required]],password:["",[vi.required,vi.minLength(6)]],acceptTerms:[!1,vi.requiredTrue]})}ngOnInit(){}toggleForm(r){r=="signup"?this.formToggle=!0:this.formToggle=!1}signUp(){var r,i,o,s,u,c,h,f,p,m;if(console.log("this.signupForm",this.signupForm),this.signupForm.valid){let v=(i=(r=this.signupForm.get("fullName"))==null?void 0:r.value)!=null?i:"",_=(s=(o=this.signupForm.get("email"))==null?void 0:o.value)!=null?s:"",E=(c=(u=this.signupForm.get("phone"))==null?void 0:u.value)!=null?c:"",b=(f=(h=this.signupForm.get("password"))==null?void 0:h.value)!=null?f:"",T=(m=(p=this.signupForm.get("acceptTerms"))==null?void 0:p.value)!=null?m:!1,S={name:v,email:_,mobileNumber:E,acceptTerms:T};this.authService.signUp(_,b).then(A=>{this.userState.saveUserToFirestore(S),this.toggleForm("login"),this.signupForm.reset()}).catch(A=>{console.error("Sign-up error:",A)})}}signIn(){this.loginForm.valid&&this.authService.signIn(this.loginForm.value.email,this.loginForm.value.password).then(r=>{this.user=r.user,this.helper.showSuccess("Success","Sign-up successful!"),this.userState.setUser(this.user),this.loginForm.reset(),this.router.navigate(["/"])}).catch(r=>{this.helper.showError("Error!","Error while signing in")})}signOut(){this.authService.signOut().then(()=>{this.helper.showSuccess("Success","Sign-out successful!")}).catch(r=>{this.helper.showError("Sign-out error!",r)})}};e.\u0275fac=function(i){return new(i||e)(ye(rY),ye(kee),ye(Oee),ye(ke),ye(xs),ye(Hee),ye(US))},e.\u0275cmp=Cr({type:e,selectors:[["app-login"]],viewQuery:function(i,o){if(i&1&&yW(ESe,7),i&2){let s;_P(s=wP())&&(o.targetElementRef=s.first)}},decls:17,vars:4,consts:[[1,"container"],[1,"wrapper"],[1,"title-text"],["class","title login",4,"ngIf"],["class","title signup",4,"ngIf"],[1,"form-container"],[1,"slide-controls"],["type","radio","name","slide","id","login","checked",""],["type","radio","name","slide","id","signup"],["for","login",1,"slide","login",3,"click"],["for","signup",1,"slide","signup",3,"click"],[1,"slider-tab"],[1,"form-inner"],["class","login",3,"formGroup","submit",4,"ngIf"],["class","signup",3,"formGroup","submit",4,"ngIf"],[1,"title","login"],[1,"title","signup"],[1,"login",3,"formGroup","submit"],[1,"field"],["type","text","placeholder","Email address","formControlName","email","required",""],["class","err",4,"ngIf"],["type","password","placeholder","Password","formControlName","password","required",""],[1,"pass-link"],[1,"field","btn"],[1,"btn-layer"],["type","submit","value","Login"],[1,"signup-link"],[3,"click"],[1,"err"],[1,"signup",3,"formGroup","submit"],["type","text","placeholder","Full name","formControlName","fullName","required",""],["type","text","placeholder","Mobile Number","formControlName","phone","required",""],[4,"ngIf"],[1,"checkbox"],["type","checkbox","id","signupCheck","formControlName","acceptTerms"],["for","signupCheck"],["type","submit","value","Signup"]],template:function(i,o){i&1&&(G(0,"div",0)(1,"div",1)(2,"div",2),Ct(3,ISe,2,0,"div",3)(4,bSe,2,0,"div",4),W(),G(5,"div",5)(6,"div",6),ot(7,"input",7)(8,"input",8),G(9,"label",9),_t("click",function(){return o.toggleForm("login")}),fe(10,"Login"),W(),G(11,"label",10),_t("click",function(){return o.toggleForm("signup")}),fe(12,"Signup"),W(),ot(13,"div",11),W(),G(14,"div",12),Ct(15,ASe,19,5,"form",13)(16,FSe,24,8,"form",14),W()()()()),i&2&&(ae(3),De("ngIf",!o.formToggle),ae(1),De("ngIf",o.formToggle),ae(11),De("ngIf",!o.formToggle),ae(1),De("ngIf",o.formToggle))},dependencies:[Aa,eY,mC,jL,Q7,Y7,KL,GL,WL],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJbecmNE.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLGT9Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLEj6Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLCz7Z11lFc-K.woff2) format("woff2");unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+20F0,U+25CC,U+A830-A839,U+A8E0-A8FF,U+11B00-11B09}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v20/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.container[_ngcontent-%COMP%]{margin-top:100px;display:grid;height:100%;width:100%;place-items:center}[_ngcontent-%COMP%]::selection{color:#fff}.wrapper[_ngcontent-%COMP%]{overflow:hidden;max-width:390px;background:#fff;padding:30px;border-radius:15px;box-shadow:0 15px 20px #0000001a}.wrapper[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{display:flex;width:200%}.wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:50%;font-size:35px;font-weight:600;text-align:center;transition:all .6s cubic-bezier(.68,-.55,.265,1.55)}.wrapper[_ngcontent-%COMP%]   .slide-controls[_ngcontent-%COMP%]{position:relative;display:flex;height:50px;width:100%;overflow:hidden;margin:30px 0 10px;justify-content:space-between;border:1px solid lightgrey;border-radius:15px}.slide-controls[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]{height:100%;width:100%;color:#fff;font-size:18px;font-weight:500;text-align:center;line-height:48px;cursor:pointer;z-index:1;transition:all .6s ease}.slide-controls[_ngcontent-%COMP%]   label.signup[_ngcontent-%COMP%]{color:#000}.slide-controls[_ngcontent-%COMP%]   .slider-tab[_ngcontent-%COMP%]{position:absolute;height:100%;width:50%;left:0;z-index:0;border-radius:15px;background:-webkit-linear-gradient(left,#b35700,#e68200);transition:all .6s cubic-bezier(.68,-.55,.265,1.55)}input[type=radio][_ngcontent-%COMP%]{display:none}#signup[_ngcontent-%COMP%]:checked ~ .slider-tab[_ngcontent-%COMP%]{left:50%}#signup[_ngcontent-%COMP%]:checked ~ label.signup[_ngcontent-%COMP%]{color:#fff;cursor:default;-webkit-user-select:none;user-select:none}#signup[_ngcontent-%COMP%]:checked ~ label.login[_ngcontent-%COMP%]{color:#000}#login[_ngcontent-%COMP%]:checked ~ label.signup[_ngcontent-%COMP%]{color:#000}#login[_ngcontent-%COMP%]:checked ~ label.login[_ngcontent-%COMP%]{cursor:default;-webkit-user-select:none;user-select:none}.wrapper[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{width:100%;overflow:hidden}.form-container[_ngcontent-%COMP%]   .form-inner[_ngcontent-%COMP%]{display:flex;width:200%}.form-container[_ngcontent-%COMP%]   .form-inner[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:50%;transition:all .6s cubic-bezier(.68,-.55,.265,1.55)}.form-inner[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{height:50px;width:100%;margin-top:20px}.form-inner[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:100%;width:100%;outline:none;padding-left:15px;border-radius:15px;border:1px solid lightgrey;border-bottom-width:2px;font-size:17px;transition:all .3s ease}.form-inner[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#ff8d1a}.form-inner[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999;transition:all .3s ease}form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus::placeholder{color:#ff851a}.form-inner[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .pass-link[_ngcontent-%COMP%]{margin-top:5px}.form-inner[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .signup-link[_ngcontent-%COMP%]{text-align:center;margin-top:30px}.form-inner[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .pass-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .form-inner[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ff941a;text-decoration:none}.form-inner[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .pass-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .form-inner[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{height:50px;width:100%;border-radius:15px;position:relative;overflow:hidden}form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .btn-layer[_ngcontent-%COMP%]{height:100%;width:300%;position:absolute;left:-100%;background:-webkit-linear-gradient(right,#b35700,#e68200);border-radius:15px;transition:all .4s ease}form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover   .btn-layer[_ngcontent-%COMP%]{left:0}form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{height:100%;width:100%;z-index:1;position:relative;background:none;border:none;color:#fff;padding-left:0;border-radius:15px;font-size:20px;font-weight:500;cursor:pointer}.err[_ngcontent-%COMP%]{color:var(--tangerine)}.checkbox[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px;width:12px!important}.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex-grow:1}']});let t=e;return t})();function LSe(t,e){if(t&1&&(G(0,"div",13)(1,"div",14),ot(2,"img",15),W(),G(3,"div",16)(4,"p",17),fe(5),W(),G(6,"div",18)(7,"p",19),fe(8,"Price:"),W(),G(9,"data",20),fe(10),W()(),G(11,"div",21)(12,"p")(13,"strong"),fe(14,"Quantity:"),W(),fe(15),W()()()()),t&2){let n=et().$implicit,r=et(3);ae(2),Tl("src",n.image,qm),Tl("alt",n.name),ae(3),Oo(n.name),ae(5),Oo(r.getPrice(n)),ae(5),Wn(" ",n.selection.quantity,"")}}function VSe(t,e){if(t&1&&(G(0,"div",11),Ct(1,LSe,16,5,"div",12),W()),t&2){let n=et().$implicit,r=et(2);ae(1),De("ngIf",r.getValue(n).isActive)}}var USe=t=>({active:t});function jSe(t,e){if(t&1){let n=ko();G(0,"div",7)(1,"div",8),_t("click",function(){let o=pi(n).$implicit,s=et(2);return gi(s.getValue(o).isActive=!s.getValue(o).isActive)}),G(2,"div")(3,"p",2),_t("click",function(){let o=pi(n).$implicit,s=et(2);return gi(s.check(o))}),G(4,"strong"),fe(5,"Customer"),W(),ot(6,"br"),fe(7),W(),G(8,"span"),fe(9),W()(),G(10,"span"),fe(11),W(),G(12,"span",9),fe(13," \u25BC "),W()(),Ct(14,VSe,2,1,"div",10),W()}if(t&2){let n=e.$implicit,r=et(2);ae(7),Wn(" Name: ",r.getValue(n).customer.name,""),ae(2),Wn("Mail: ",r.getValue(n).customer.email,""),ae(2),Wn("Mob: ",r.getValue(n).customer.mobileNumber,""),ae(1),De("ngClass",_I(5,USe,r.getValue(n).isActive)),ae(2),De("ngForOf",r.getValue(n).order)}}function BSe(t,e){if(t&1&&(G(0,"div")(1,"h2"),fe(2),W(),G(3,"div",5),Ct(4,jSe,15,7,"div",6),Cl(5,"keyvalue"),W()()),t&2){let n=e.$implicit,r=et();ae(2),Oo(n.key),ae(2),De("ngForOf",Sl(5,2,r.getValue(n)))}}var zee=(()=>{let e=class e{constructor(r){this.firestore=r,this.currentMonthIndex=new Date().getMonth()+1,this.currentYear=new Date().getFullYear(),this.activeAccordion=null}toggleAccordion(r){this.activeAccordion===r.key?this.activeAccordion=null:this.activeAccordion=r.key}isAccordionActive(r){return this.activeAccordion===r.key}check(r){console.log(r)}get currentMonth(){return this.getMonthName(this.currentMonthIndex)}ngOnInit(){this.updateCurrentMonth()}getMonthName(r){return["January","February","March","April","May","June","July","August","September","October","November","December"][r-1]}getValue(r){return r.value}getFormattedDate(r,i){return`${r<10?`0${r}`:r}-${i}`}getOrders(r,i){let o=this.getFormattedDate(r,i);return this.firestore.collection("admin_orders").doc(o).valueChanges()}prev(){this.currentMonthIndex--,this.currentMonthIndex<1&&(this.currentMonthIndex=12,this.currentYear--),this.updateCurrentMonth()}next(){this.currentMonthIndex++,this.currentMonthIndex>12&&(this.currentMonthIndex=1,this.currentYear++),this.updateCurrentMonth()}updateCurrentMonth(){this.getOrders(this.currentMonthIndex,this.currentYear).subscribe(r=>{this.orders=r,console.log(this.orders)})}getPrice(r){let{selection:i,fullPrice:o,halfPrice:s}=r,u=(i==null?void 0:i.quantity)||1,c=(i==null?void 0:i.fhPlate)||"full";return c==="full"?(u*o).toFixed(2):c==="half"?(u*s).toFixed(2):"0.00"}};e.\u0275fac=function(i){return new(i||e)(ye(Ba))},e.\u0275cmp=Cr({type:e,selectors:[["app-orders"]],decls:11,vars:4,consts:[[1,"admin_orders"],[1,"month"],[3,"click"],[1,"order_container"],[4,"ngFor","ngForOf"],[1,"orders_list"],["class","admin_orders_order",4,"ngFor","ngForOf"],[1,"admin_orders_order"],[1,"customer_details",3,"click"],[1,"arrow",3,"ngClass"],["class","order_items",4,"ngFor","ngForOf"],[1,"order_items"],["class","item",4,"ngIf"],[1,"item"],[1,"food_image"],["loading","lazy",3,"src","alt"],[1,"food_details"],[1,"h1","card-title"],[1,"price-wrapper"],[1,"price-text"],[1,"price"],[1,"quantity"]],template:function(i,o){i&1&&(G(0,"div",0)(1,"div",1)(2,"span",2),_t("click",function(){return o.prev()}),fe(3,"-"),W(),G(4,"h3"),fe(5),W(),G(6,"span",2),_t("click",function(){return o.next()}),fe(7,"+"),W()(),G(8,"div",3),Ct(9,BSe,6,4,"div",4),Cl(10,"keyvalue"),W()()),i&2&&(ae(5),Oo(o.currentMonth),ae(4),De("ngForOf",Sl(10,2,o.orders)))},dependencies:[AI,df,Aa,xI],styles:[".admin_orders[_ngcontent-%COMP%]{height:80vh;overflow-y:scroll}.admin_orders[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]{margin-top:16px;display:flex;justify-content:center;position:sticky;top:0}.admin_orders[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:40px;background:#f0f8ff;text-align:center;font-size:x-large;margin:0 8px;cursor:pointer}.admin_orders[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{cursor:pointer}.orders_list[_ngcontent-%COMP%]{padding:0 8px}.arrow[_ngcontent-%COMP%]{font-size:2rem;transition:transform 1s ease}.arrow.active[_ngcontent-%COMP%]{transform:rotate(180deg)}.customer_details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 8px;background:orange;margin-bottom:12px;color:#3e3e3e}.item[_ngcontent-%COMP%]{padding:8px;display:flex}.item[_ngcontent-%COMP%]   .food_image[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:cover}.item[_ngcontent-%COMP%]   .food_image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]{display:flex;flex-grow:1;margin-left:20px;flex-direction:column}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#000}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .price-wrapper[_ngcontent-%COMP%]{display:flex;color:#000}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .price-wrapper[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{margin-left:5px}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{display:flex}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:40px;height:40px;background:#f0f8ff;justify-content:center;display:flex;align-items:center;font-size:15px;color:#000;cursor:pointer}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:67px;height:40px;text-align:center;padding-left:18px;color:#000;border-radius:4px}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]   .removeBtn[_ngcontent-%COMP%]{position:absolute;right:8%}"]});let t=e;return t})();function qSe(t,e){if(t&1&&(G(0,"div",13)(1,"div",14),ot(2,"img",15),W(),G(3,"div",16)(4,"p",17),fe(5),W(),G(6,"div",18)(7,"p",19),fe(8,"Price:"),W(),G(9,"data",20),fe(10),W()(),G(11,"div",21)(12,"p")(13,"strong"),fe(14,"Quantity:"),W(),fe(15),W()()()()),t&2){let n=et().$implicit,r=et(3);ae(2),Tl("src",n.image,qm),Tl("alt",n.name),ae(3),Oo(n.name),ae(5),Oo(r.getPrice(n)),ae(5),Wn(" ",n.selection.quantity,"")}}function HSe(t,e){if(t&1&&(G(0,"div",11),Ct(1,qSe,16,5,"div",12),W()),t&2){let n=et().$implicit,r=et(2);ae(1),De("ngIf",r.getValue(n).isActive)}}var $Se=t=>({active:t});function zSe(t,e){if(t&1){let n=ko();G(0,"div",7)(1,"div",8),_t("click",function(){let o=pi(n).$implicit,s=et(2);return gi(s.getValue(o).isActive=!s.getValue(o).isActive)}),G(2,"div")(3,"p",2),_t("click",function(){let o=pi(n).$implicit,s=et(2);return gi(s.check(o))}),G(4,"strong"),fe(5,"Customer"),W(),ot(6,"br"),fe(7),W(),G(8,"span"),fe(9),W()(),G(10,"span"),fe(11),W(),G(12,"span",9),fe(13," \u25BC "),W()(),Ct(14,HSe,2,1,"div",10),W()}if(t&2){let n=e.$implicit,r=et(2);ae(7),Wn(" Name: ",r.getValue(n).customer.name,""),ae(2),Wn("Mail: ",r.getValue(n).customer.email,""),ae(2),Wn("Mob: ",r.getValue(n).customer.mobileNumber,""),ae(1),De("ngClass",_I(5,$Se,r.getValue(n).isActive)),ae(2),De("ngForOf",r.getValue(n).order)}}function GSe(t,e){if(t&1&&(G(0,"div")(1,"h2"),fe(2),W(),G(3,"div",5),Ct(4,zSe,15,7,"div",6),Cl(5,"keyvalue"),W()()),t&2){let n=e.$implicit,r=et();ae(2),Oo(n.key),ae(2),De("ngForOf",Sl(5,2,r.getValue(n)))}}var Gee=(()=>{let e=class e{constructor(r){this.firestore=r,this.currentMonthIndex=new Date().getMonth()+1,this.currentYear=new Date().getFullYear(),this.activeAccordion=null}toggleAccordion(r){this.activeAccordion===r.key?this.activeAccordion=null:this.activeAccordion=r.key}isAccordionActive(r){return this.activeAccordion===r.key}check(r){console.log(r)}get currentMonth(){return this.getMonthName(this.currentMonthIndex)}ngOnInit(){this.updateCurrentMonth()}getMonthName(r){return["January","February","March","April","May","June","July","August","September","October","November","December"][r-1]}getValue(r){return r.value}getFormattedDate(r,i){return`${r<10?`0${r}`:r}-${i}`}getOrders(r,i){let o=this.getFormattedDate(r,i);return this.firestore.collection("admin_tableBookings").doc(o).valueChanges()}prev(){this.currentMonthIndex--,this.currentMonthIndex<1&&(this.currentMonthIndex=12,this.currentYear--),this.updateCurrentMonth()}next(){this.currentMonthIndex++,this.currentMonthIndex>12&&(this.currentMonthIndex=1,this.currentYear++),this.updateCurrentMonth()}updateCurrentMonth(){this.getOrders(this.currentMonthIndex,this.currentYear).subscribe(r=>{this.orders=r,console.log(this.orders)})}getPrice(r){let{selection:i,fullPrice:o,halfPrice:s}=r,u=(i==null?void 0:i.quantity)||1,c=(i==null?void 0:i.fhPlate)||"full";return c==="full"?(u*o).toFixed(2):c==="half"?(u*s).toFixed(2):"0.00"}};e.\u0275fac=function(i){return new(i||e)(ye(Ba))},e.\u0275cmp=Cr({type:e,selectors:[["app-table-bookings"]],decls:11,vars:4,consts:[[1,"admin_orders"],[1,"month"],[3,"click"],[1,"order_container"],[4,"ngFor","ngForOf"],[1,"orders_list"],["class","admin_orders_order",4,"ngFor","ngForOf"],[1,"admin_orders_order"],[1,"customer_details",3,"click"],[1,"arrow",3,"ngClass"],["class","order_items",4,"ngFor","ngForOf"],[1,"order_items"],["class","item",4,"ngIf"],[1,"item"],[1,"food_image"],["loading","lazy",3,"src","alt"],[1,"food_details"],[1,"h1","card-title"],[1,"price-wrapper"],[1,"price-text"],[1,"price"],[1,"quantity"]],template:function(i,o){i&1&&(G(0,"div",0)(1,"div",1)(2,"span",2),_t("click",function(){return o.prev()}),fe(3,"-"),W(),G(4,"h3"),fe(5),W(),G(6,"span",2),_t("click",function(){return o.next()}),fe(7,"+"),W()(),G(8,"div",3),Ct(9,GSe,6,4,"div",4),Cl(10,"keyvalue"),W()()),i&2&&(ae(5),Oo(o.currentMonth),ae(4),De("ngForOf",Sl(10,2,o.orders)))},dependencies:[AI,df,Aa,xI],styles:[".admin_orders[_ngcontent-%COMP%]{height:80vh;overflow-y:scroll}.admin_orders[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]{margin-top:16px;display:flex;justify-content:center;position:sticky;top:0}.admin_orders[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:40px;background:#f0f8ff;text-align:center;font-size:x-large;margin:0 8px;cursor:pointer}.admin_orders[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{cursor:pointer}.orders_list[_ngcontent-%COMP%]{padding:0 8px}.arrow[_ngcontent-%COMP%]{font-size:2rem;transition:transform 1s ease}.arrow.active[_ngcontent-%COMP%]{transform:rotate(180deg)}.customer_details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 8px;background:orange;margin-bottom:12px;color:#3e3e3e}.item[_ngcontent-%COMP%]{padding:8px;display:flex}.item[_ngcontent-%COMP%]   .food_image[_ngcontent-%COMP%]{width:120px;height:120px;object-fit:cover}.item[_ngcontent-%COMP%]   .food_image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]{display:flex;flex-grow:1;margin-left:20px;flex-direction:column}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#000}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .price-wrapper[_ngcontent-%COMP%]{display:flex;color:#000}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .price-wrapper[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{margin-left:5px}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{display:flex}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:40px;height:40px;background:#f0f8ff;justify-content:center;display:flex;align-items:center;font-size:15px;color:#000;cursor:pointer}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:67px;height:40px;text-align:center;padding-left:18px;color:#000;border-radius:4px}.item[_ngcontent-%COMP%]   .food_details[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]   .removeBtn[_ngcontent-%COMP%]{position:absolute;right:8%}"]});let t=e;return t})();var WSe=[{path:"",component:h7},{path:"login",component:$ee},{path:"orders",component:zee},{path:"table-bookings",component:Gee}],Wee=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=ut({imports:[k1.forRoot(WSe),k1]});let t=e;return t})();var nte="firebasestorage.googleapis.com",rte="storageBucket",KSe=2*60*1e3,QSe=10*60*1e3,YSe=1e3;var sn=class t extends O0{constructor(e,n,r=0){super(iU(e),`Firebase Storage: ${n} (${iU(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iU(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Jt=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Jt||{});function iU(t){return"storage/"+t}function dU(){let t="An unknown error occurred, please check the error payload for server response.";return new sn(Jt.UNKNOWN,t)}function XSe(t){return new sn(Jt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function JSe(t){return new sn(Jt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ZSe(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new sn(Jt.UNAUTHENTICATED,t)}function eDe(){return new sn(Jt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function tDe(t){return new sn(Jt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ite(){return new sn(Jt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ote(){return new sn(Jt.CANCELED,"User canceled the upload/download.")}function nDe(t){return new sn(Jt.INVALID_URL,"Invalid URL '"+t+"'.")}function rDe(t){return new sn(Jt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function iDe(){return new sn(Jt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rte+"' property when initializing the app?")}function ste(){return new sn(Jt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function oDe(){return new sn(Jt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function sDe(){return new sn(Jt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function aDe(t){return new sn(Jt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Lh(t){return new sn(Jt.INVALID_ARGUMENT,t)}function ate(){return new sn(Jt.APP_DELETED,"The Firebase app was deleted.")}function fU(t){return new sn(Jt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function L_(t,e){return new sn(Jt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function F_(t){throw new sn(Jt.INTERNAL_ERROR,"Internal error: "+t)}var Zr=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw rDe(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}let s="(/(.*))?$",u=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function h(x){x.path_=decodeURIComponent(x.path)}let f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${p}/${f}/b/${i}/o${m}`,"i"),_={bucket:1,path:3},E=n===nte?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",T=new RegExp(`^https?://${E}/${i}/${b}`,"i"),A=[{regex:u,indices:c,postModify:o},{regex:v,indices:_,postModify:h},{regex:T,indices:{bucket:1,path:2},postModify:h}];for(let x=0;x<A.length;x++){let H=A[x],N=H.regex.exec(e);if(N){let ie=N[H.indices.bucket],Ye=N[H.indices.path];Ye||(Ye=""),r=new t(ie,Ye),H.postModify(r);break}}if(r==null)throw nDe(e);return r}},sU=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function uDe(t,e,n){let r=1,i=null,o=null,s=!1,u=0;function c(){return u===2}let h=!1;function f(...b){h||(h=!0,e.apply(null,b))}function p(b){i=setTimeout(()=>{i=null,t(v,c())},b)}function m(){o&&clearTimeout(o)}function v(b,...T){if(h){m();return}if(b){m(),f.call(null,b,...T);return}if(c()||s){m(),f.call(null,b,...T);return}r<64&&(r*=2);let A;u===1?(u=2,A=0):A=(r+Math.random())*1e3,p(A)}let _=!1;function E(b){_||(_=!0,m(),!h&&(i!==null?(b||(u=2),clearTimeout(i),p(0)):b||(u=1)))}return p(0),o=setTimeout(()=>{s=!0,E(!0)},n),E}function cDe(t){t(!1)}function lDe(t){return t!==void 0}function hDe(t){return typeof t=="function"}function dDe(t){return typeof t=="object"&&!Array.isArray(t)}function qS(t){return typeof t=="string"||t instanceof String}function Kee(t){return pU()&&t instanceof Blob}function pU(){return typeof Blob<"u"}function aU(t,e,n,r){if(r<e)throw Lh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Lh(`Invalid value for '${t}'. Expected ${n} or less.`)}function Ic(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function ute(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ag=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(ag||{});function cte(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}var uU=class{constructor(e,n,r,i,o,s,u,c,h,f,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=u,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,_)=>{this.resolve_=v,this.reject_=_,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new sg(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=u=>{let c=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let u=o.getErrorCode()===ag.NO_ERROR,c=o.getStatus();if(!u||cte(c,this.additionalRetryCodes_)&&this.retry){let f=o.getErrorCode()===ag.ABORT;r(!1,new sg(!1,null,f));return}let h=this.successCodes_.indexOf(c)!==-1;r(!0,new sg(h,o))})},n=(r,i)=>{let o=this.resolve_,s=this.reject_,u=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(u,u.getResponse());lDe(c)?o(c):o()}catch(c){s(c)}else if(u!==null){let c=dU();c.serverResponse=u.getErrorText(),this.errorCallback_?s(this.errorCallback_(u,c)):s(c)}else if(i.canceled){let c=this.appDelete_?ate():ote();s(c)}else{let c=ite();s(c)}};this.canceled_?n(!1,new sg(!1,null,!0)):this.backoffId_=uDe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&cDe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},sg=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function fDe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function pDe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function gDe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function mDe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function yDe(t,e,n,r,i,o,s=!0){let u=ute(t.urlParams),c=t.url+u,h=Object.assign({},t.headers);return gDe(h,e),fDe(h,n),pDe(h,o),mDe(h,r),new uU(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}function vDe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _De(...t){let e=vDe();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(pU())return new Blob(t);throw new sn(Jt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function wDe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function EDe(t){if(typeof atob>"u")throw aDe("base-64");return atob(t)}var Bi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},V_=class{constructor(e,n){this.data=e,this.contentType=n||null}};function gU(t,e){switch(t){case Bi.RAW:return new V_(lte(e));case Bi.BASE64:case Bi.BASE64URL:return new V_(hte(t,e));case Bi.DATA_URL:return new V_(bDe(e),TDe(e))}throw dU()}function lte(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function IDe(t){let e;try{e=decodeURIComponent(t)}catch{throw L_(Bi.DATA_URL,"Malformed data URL.")}return lte(e)}function hte(t,e){switch(t){case Bi.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw L_(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Bi.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw L_(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=EDe(e)}catch(i){throw i.message.includes("polyfill")?i:L_(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var BS=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw L_(Bi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=CDe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function bDe(t){let e=new BS(t);return e.base64?hte(Bi.BASE64,e.rest):IDe(e.rest)}function TDe(t){return new BS(t).contentType}function CDe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var ug=class t{constructor(e,n){let r=0,i="";Kee(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Kee(this.data_)){let r=this.data_,i=wDe(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(pU()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(_De.apply(null,n))}else{let n=e.map(s=>qS(s)?gU(Bi.RAW,s).data:s.data_),r=0;n.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return n.forEach(s=>{for(let u=0;u<s.length;u++)i[o++]=s[u]}),new t(i,!0)}}uploadData(){return this.data_}};function mU(t){let e;try{e=JSON.parse(t)}catch{return null}return dDe(e)?e:null}function SDe(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function DDe(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function dte(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function ADe(t,e){return e}var br=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||ADe}},jS=null;function xDe(t){return!qS(t)||t.length<2?t:dte(t)}function HS(){if(jS)return jS;let t=[];t.push(new br("bucket")),t.push(new br("generation")),t.push(new br("metageneration")),t.push(new br("name","fullPath",!0));function e(o,s){return xDe(s)}let n=new br("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}let i=new br("size");return i.xform=r,t.push(i),t.push(new br("timeCreated")),t.push(new br("updated")),t.push(new br("md5Hash",null,!0)),t.push(new br("cacheControl",null,!0)),t.push(new br("contentDisposition",null,!0)),t.push(new br("contentEncoding",null,!0)),t.push(new br("contentLanguage",null,!0)),t.push(new br("contentType",null,!0)),t.push(new br("metadata","customMetadata",!0)),jS=t,jS}function NDe(t,e){function n(){let r=t.bucket,i=t.fullPath,o=new Zr(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function RDe(t,e,n){let r={};r.type="file";let i=n.length;for(let o=0;o<i;o++){let s=n[o];r[s.local]=s.xform(r,e[s.server])}return NDe(r,t),r}function fte(t,e,n){let r=mU(e);return r===null?null:RDe(t,r,n)}function MDe(t,e,n,r){let i=mU(e);if(i===null||!qS(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(h=>{let f=t.bucket,p=t.fullPath,m="/b/"+s(f)+"/o/"+s(p),v=Ic(m,n,r),_=ute({alt:"media",token:h});return v+_})[0]}function yU(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Qee="prefixes",Yee="items";function PDe(t,e,n){let r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Qee])for(let i of n[Qee]){let o=i.replace(/\/$/,""),s=t._makeStorageReference(new Zr(e,o));r.prefixes.push(s)}if(n[Yee])for(let i of n[Yee]){let o=t._makeStorageReference(new Zr(e,i.name));r.items.push(o)}return r}function kDe(t,e,n){let r=mU(n);return r===null?null:PDe(t,e,r)}var Yo=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Js(t){if(!t)throw dU()}function $S(t,e){function n(r,i){let o=fte(t,i,e);return Js(o!==null),o}return n}function ODe(t,e){function n(r,i){let o=kDe(t,e,i);return Js(o!==null),o}return n}function FDe(t,e){function n(r,i){let o=fte(t,i,e);return Js(o!==null),MDe(o,i,t.host,t._protocol)}return n}function hg(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=eDe():i=ZSe():n.getStatus()===402?i=JSe(t.bucket):n.getStatus()===403?i=tDe(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function zS(t){let e=hg(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=XSe(t.path)),o.serverResponse=i.serverResponse,o}return n}function pte(t,e,n){let r=e.fullServerUrl(),i=Ic(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,u=new Yo(i,o,$S(t,n),s);return u.errorHandler=zS(e),u}function LDe(t,e,n,r,i){let o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);let s=e.bucketOnlyServerUrl(),u=Ic(s,t.host,t._protocol),c="GET",h=t.maxOperationRetryTime,f=new Yo(u,c,ODe(t,e.bucket),h);return f.urlParams=o,f.errorHandler=hg(e),f}function VDe(t,e,n){let r=e.fullServerUrl(),i=Ic(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,u=new Yo(i,o,FDe(t,n),s);return u.errorHandler=zS(e),u}function UDe(t,e,n,r){let i=e.fullServerUrl(),o=Ic(i,t.host,t._protocol),s="PATCH",u=yU(n,r),c={"Content-Type":"application/json; charset=utf-8"},h=t.maxOperationRetryTime,f=new Yo(o,s,$S(t,r),h);return f.headers=c,f.body=u,f.errorHandler=zS(e),f}function jDe(t,e){let n=e.fullServerUrl(),r=Ic(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(c,h){}let u=new Yo(r,i,s,o);return u.successCodes=[200,204],u.errorHandler=zS(e),u}function BDe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function gte(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=BDe(null,e)),r}function qDe(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function u(){let A="";for(let x=0;x<2;x++)A=A+Math.random().toString().slice(2);return A}let c=u();s["Content-Type"]="multipart/related; boundary="+c;let h=gte(e,r,i),f=yU(h,n),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,m=`\r
--`+c+"--",v=ug.getBlob(p,r,m);if(v===null)throw ste();let _={name:h.fullPath},E=Ic(o,t.host,t._protocol),b="POST",T=t.maxUploadRetryTime,S=new Yo(E,b,$S(t,n),T);return S.urlParams=_,S.headers=s,S.body=v.uploadData(),S.errorHandler=hg(e),S}var cg=class{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}};function vU(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Js(!1)}return Js(!!n&&(e||["active"]).indexOf(n)!==-1),n}function HDe(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s=gte(e,r,i),u={name:s.fullPath},c=Ic(o,t.host,t._protocol),h="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},p=yU(s,n),m=t.maxUploadRetryTime;function v(E){vU(E);let b;try{b=E.getResponseHeader("X-Goog-Upload-URL")}catch{Js(!1)}return Js(qS(b)),b}let _=new Yo(c,h,v,m);return _.urlParams=u,_.headers=f,_.body=p,_.errorHandler=hg(e),_}function $De(t,e,n,r){let i={"X-Goog-Upload-Command":"query"};function o(h){let f=vU(h,["active","final"]),p=null;try{p=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Js(!1)}p||Js(!1);let m=Number(p);return Js(!isNaN(m)),new cg(m,r.size(),f==="final")}let s="POST",u=t.maxUploadRetryTime,c=new Yo(n,s,o,u);return c.headers=i,c.errorHandler=hg(e),c}var Xee=256*1024;function zDe(t,e,n,r,i,o,s,u){let c=new cg(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw oDe();let h=c.total-c.current,f=h;i>0&&(f=Math.min(f,i));let p=c.current,m=p+f,v="";f===0?v="finalize":h===f?v="upload, finalize":v="upload";let _={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":`${c.current}`},E=r.slice(p,m);if(E===null)throw ste();function b(x,H){let N=vU(x,["active","final"]),ie=c.current+f,Ye=r.size(),ge;return N==="final"?ge=$S(e,o)(x,H):ge=null,new cg(ie,Ye,N==="final",ge)}let T="POST",S=e.maxUploadRetryTime,A=new Yo(n,T,b,S);return A.headers=_,A.body=E.uploadData(),A.progressCallback=u||null,A.errorHandler=hg(t),A}var mte={STATE_CHANGED:"state_changed"},Lr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function oU(t){switch(t){case"running":case"pausing":case"canceling":return Lr.RUNNING;case"paused":return Lr.PAUSED;case"success":return Lr.SUCCESS;case"canceled":return Lr.CANCELED;case"error":return Lr.ERROR;default:return Lr.ERROR}}var cU=class{constructor(e,n,r){if(hDe(e)||n!=null||r!=null)this.next=e,this.error=n!=null?n:void 0,this.complete=r!=null?r:void 0;else{let o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function og(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var Jee=null,lU=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ag.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ag.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ag.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw F_("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw F_("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw F_("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw F_("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw F_("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},hU=class extends lU{initXhr(){this.xhr_.responseType="text"}};function Xs(){return Jee?Jee():new hU}var U_=class{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=HS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Jt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(cte(i.status,[]))if(o)i=ite();else{this.sleepTime=Math.max(this.sleepTime*2,YSe),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Jt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let r=HDe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xs,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,r)=>{let i=$De(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Xs,n,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=Xee*this._chunkMultiplier,n=new cg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=zDe(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}let u=this._ref.storage._makeRequest(s,Xs,i,o,!1);this._request=u,u.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Xee*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let r=pte(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Xs,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let r=qDe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xs,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=ote(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=oU(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){let o=new cU(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(oU(this._state)){case Lr.SUCCESS:og(this._resolve.bind(null,this.snapshot))();break;case Lr.CANCELED:case Lr.ERROR:let n=this._reject;og(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(oU(this._state)){case Lr.RUNNING:case Lr.PAUSED:e.next&&og(e.next.bind(e,this.snapshot))();break;case Lr.SUCCESS:e.complete&&og(e.complete.bind(e))();break;case Lr.CANCELED:case Lr.ERROR:e.error&&og(e.error.bind(e,this._error))();break;default:e.error&&og(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var lg=class t{constructor(e,n){this._service=e,n instanceof Zr?this._location=n:this._location=Zr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Zr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dte(this._location.path)}get storage(){return this._service}get parent(){let e=SDe(this._location.path);if(e===null)return null;let n=new Zr(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fU(e)}};function GDe(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new U_(t,new ug(e),n)}function WDe(t){let e={prefixes:[],items:[]};return yte(t,e).then(()=>e)}function yte(t,e,n){return F(this,null,function*(){let i=yield vte(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&(yield yte(t,e,i.nextPageToken))})}function vte(t,e){e!=null&&typeof e.maxResults=="number"&&aU("options.maxResults",1,1e3,e.maxResults);let n=e||{},r=LDe(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Xs)}function KDe(t){t._throwIfRoot("getMetadata");let e=pte(t.storage,t._location,HS());return t.storage.makeRequestWithTokens(e,Xs)}function QDe(t,e){t._throwIfRoot("updateMetadata");let n=UDe(t.storage,t._location,e,HS());return t.storage.makeRequestWithTokens(n,Xs)}function YDe(t){t._throwIfRoot("getDownloadURL");let e=VDe(t.storage,t._location,HS());return t.storage.makeRequestWithTokens(e,Xs).then(n=>{if(n===null)throw sDe();return n})}function XDe(t){t._throwIfRoot("deleteObject");let e=jDe(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Xs)}function _te(t,e){let n=DDe(t._location.path,e),r=new Zr(t._location.bucket,n);return new lg(t.storage,r)}function JDe(t){return/^[A-Za-z]+:\/\//.test(t)}function ZDe(t,e){return new lg(t,e)}function wte(t,e){if(t instanceof j_){let n=t;if(n._bucket==null)throw iDe();let r=new lg(n,n._bucket);return e!=null?wte(r,e):r}else return e!==void 0?_te(t,e):t}function eAe(t,e){if(e&&JDe(e)){if(t instanceof j_)return ZDe(t,e);throw Lh("To use ref(service, url), the first argument must be a Storage instance.")}else return wte(t,e)}function Zee(t,e){let n=e==null?void 0:e[rte];return n==null?null:Zr.makeFromBucketSpec(n,t)}function tAe(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Sd(i,t.app.options.projectId))}var j_=class{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=nte,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=KSe,this._maxUploadRetryTime=QSe,this._requests=new Set,i!=null?this._bucket=Zr.makeFromBucketSpec(i,this._host):this._bucket=Zee(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zr.makeFromBucketSpec(this._url,e):this._bucket=Zee(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aU("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aU("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return F(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return F(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lg(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new sU(ate());{let s=yDe(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){return F(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},ete="@firebase/storage",tte="0.12.0";var nAe="storage";function Ete(t,e,n){return t=Me(t),GDe(t,e,n)}function Ite(t){return t=Me(t),KDe(t)}function bte(t,e){return t=Me(t),QDe(t,e)}function Tte(t,e){return t=Me(t),vte(t,e)}function Cte(t){return t=Me(t),WDe(t)}function Ste(t){return t=Me(t),YDe(t)}function Dte(t){return t=Me(t),XDe(t)}function _U(t,e){return t=Me(t),eAe(t,e)}function Ate(t,e){return _te(t,e)}function xte(t,e,n,r={}){tAe(t,e,n,r)}function rAe(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new j_(n,r,i,e,Dd)}function iAe(){ha(new cr(nAe,rAe,"PUBLIC").setMultipleInstances(!0)),ci(ete,tte,""),ci(ete,tte,"esm2017")}iAe();var dg=class{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var GS=class{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new dg(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new dg(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(typeof n=="function"?o=s=>n(new dg(s,this,this._ref)):o={next:n.next?s=>n.next(new dg(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}},WS=class{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Vh(e,this._service))}get items(){return this._delegate.items.map(e=>new Vh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Vh=class t{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let n=Ate(this._delegate,e);return new t(n,this.storage)}get root(){return new t(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new t(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new GS(Ete(this._delegate,e,n),this)}putString(e,n=Bi.RAW,r){this._throwIfRoot("putString");let i=gU(n,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new GS(new U_(this._delegate,new ug(i.data,!0),o),this)}listAll(){return Cte(this._delegate).then(e=>new WS(e,this.storage))}list(e){return Tte(this._delegate,e||void 0).then(n=>new WS(n,this.storage))}getMetadata(){return Ite(this._delegate)}updateMetadata(e){return bte(this._delegate,e)}getDownloadURL(){return Ste(this._delegate)}delete(){return this._throwIfRoot("delete"),Dte(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw fU(e)}};var KS=class{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Nte(e))throw Lh("ref() expected a child path but got a URL, use refFromURL instead.");return new Vh(_U(this._delegate,e),this)}refFromURL(e){if(!Nte(e))throw Lh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Zr.makeFromUrl(e,this._delegate.host)}catch{throw Lh("refFromUrl() expected a valid full URL but got an invalid one.")}return new Vh(_U(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){xte(this._delegate,e,n,r)}};function Nte(t){return/^[A-Za-z]+:\/\//.test(t)}var oAe="@firebase/storage-compat",sAe="0.3.3";var aAe="storage-compat";function uAe(t,{instanceIdentifier:e}){let n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new KS(n,r)}function cAe(t){let e={TaskState:Lr,TaskEvent:mte,StringFormat:Bi,Storage:KS,Reference:Vh};t.INTERNAL.registerComponent(new cr(aAe,uAe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(oAe,sAe)}cAe(nn);function lAe(t){return new Ve(e=>{let n=s=>e.next(s),r=s=>e.error(s),i=()=>e.complete();n(t.snapshot);let o=t.on("state_changed",n);return t.then(s=>{n(s),i()},s=>{n(t.snapshot),r(s)}),function(){o()}}).pipe(oR(0))}function Rte(t){let e=lAe(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(le(n=>n.bytesTransferred/n.totalBytes*100))}}function QS(t){return{getDownloadURL:()=>pe(void 0).pipe(L1,Tt(()=>t.getDownloadURL()),Qt),getMetadata:()=>pe(void 0).pipe(L1,Tt(()=>t.getMetadata()),Qt),delete:()=>ze(t.delete()),child:e=>QS(t.child(e)),updateMetadata:e=>ze(t.updateMetadata(e)),put:(e,n)=>{let r=t.put(e,n);return Rte(r)},putString:(e,n,r)=>{let i=t.putString(e,n,r);return Rte(i)},list:e=>ze(t.list(e)),listAll:()=>ze(t.listAll())}}var hAe=new J("angularfire2.storageBucket"),dAe=new J("angularfire2.storage.maxUploadRetryTime"),fAe=new J("angularfire2.storage.maxOperationRetryTime"),pAe=new J("angularfire2.storage.use-emulator"),gAe=(()=>{let e=class e{constructor(r,i,o,s,u,c,h,f,p,m){R(this,"storage");let v=xa(r,u,i);this.storage=Mu(`${v.name}.storage.${o}`,"AngularFireStorage",v.name,()=>{let _=u.runOutsideAngular(()=>v.storage(o||void 0)),E=p;return E&&_.useEmulator(...E),h&&_.setMaxUploadRetryTime(h),f&&_.setMaxOperationRetryTime(f),_},[h,f])}ref(r){return QS(this.storage.ref(r))}refFromURL(r){return QS(this.storage.refFromURL(r))}upload(r,i,o){let s=this.storage.ref(r);return QS(s).put(i,o)}};R(e,"\u0275fac",function(i){return new(i||e)(M(Ns),M(Rs,8),M(hAe,8),M(Gn),M(ke),M(Nu),M(dAe,8),M(fAe,8),M(pAe,8),M(Fo,8))}),R(e,"\u0275prov",Y({token:e,factory:e.\u0275fac,providedIn:"any"}));let t=e;return t})();var mAe=(()=>{let e=class e{};R(e,"\u0275fac",function(i){return new(i||e)}),R(e,"\u0275mod",ct({type:e})),R(e,"\u0275inj",ut({}));let t=e;return t})(),Mte=(()=>{let e=class e{constructor(){nn.registerVersion("angularfire",Lo.full,"gcs-compat")}};R(e,"\u0275fac",function(i){return new(i||e)}),R(e,"\u0275mod",ct({type:e})),R(e,"\u0275inj",ut({providers:[gAe],imports:[mAe]}));let t=e;return t})();var Pte="@firebase/database",kte="1.0.2";var Rj="";function Mj(t){Rj=t}var DU=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Dn(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:F0(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var AU=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ji(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var hne=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new DU(e)}}catch{}return new AU},jh=hne("localStorage"),xU=hne("sessionStorage");var mg=new lu("@firebase/database"),dne=function(){let t=1;return function(){return t++}}(),fne=function(t){let e=jH(t),n=new UH;n.update(e);let r=n.digest();return M0.encodeByteArray(r)},lw=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=lw.apply(null,r):typeof r=="object"?e+=Dn(r):e+=r,e+=" "}return e},Bh=null,Ote=!0,pne=function(t,e){Q(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(mg.logLevel=Zi.VERBOSE,Bh=mg.log.bind(mg),e&&xU.set("logging_enabled",!0)):typeof t=="function"?Bh=t:(Bh=null,xU.remove("logging_enabled"))},ir=function(...t){if(Ote===!0&&(Ote=!1,Bh===null&&xU.get("logging_enabled")===!0&&pne(!0)),Bh){let e=lw.apply(null,t);Bh(e)}},hw=function(t){return function(...e){ir(t,...e)}},NU=function(...t){let e="FIREBASE INTERNAL ERROR: "+lw(...t);mg.error(e)},ta=function(...t){let e=`FIREBASE FATAL ERROR: ${lw(...t)}`;throw mg.error(e),new Error(e)},Vr=function(...t){let e="FIREBASE WARNING: "+lw(...t);mg.warn(e)},yAe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Vr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},bD=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},vAe=function(t){if(ls()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Sc="[MIN_NAME]",Ka="[MAX_NAME]",Hh=function(t,e){if(t===e)return 0;if(t===Sc||e===Ka)return-1;if(e===Sc||t===Ka)return 1;{let n=Fte(t),r=Fte(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},_Ae=function(t,e){return t===e?0:t<e?-1:1},B_=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Dn(e))},Pj=function(t){if(typeof t!="object"||t===null)return Dn(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Dn(e[r]),n+=":",n+=Pj(t[e[r]]);return n+="}",n},gne=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function or(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var mne=function(t){Q(!bD(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,u,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(u=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=u+r,s=Math.round(t*Math.pow(2,n-u)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let h=[];for(c=n;c;c-=1)h.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)h.push(o%2?1:0),o=Math.floor(o/2);h.push(i?1:0),h.reverse();let f=h.join(""),p="";for(c=0;c<64;c+=8){let m=parseInt(f.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),p=p+m}return p.toLowerCase()},wAe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},EAe=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function IAe(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var bAe=new RegExp("^-?(0*)\\d{1,10}$"),TAe=-2147483648,CAe=2147483647,Fte=function(t){if(bAe.test(t)){let e=Number(t);if(e>=TAe&&e<=CAe)return e}return null},Cg=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Vr("Exception was thrown by user callback.",n),e},Math.floor(0))}},SAe=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},z_=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var RU=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Vr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var MU=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ir("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vr(e)}},G_=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),XS="5",yne="v",vne="s",_ne="r",wne="f",Ene=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ine="ls",bne="p",PU="ac",Tne="websocket",Cne="long_polling";var JS=class{constructor(e,n,r,i,o=!1,s="",u=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jh.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jh.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function DAe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Sne(t,e,n){Q(typeof e=="string","typeof type must == string"),Q(typeof n=="object","typeof params must == object");let r;if(e===Tne)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Cne)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);DAe(t)&&(n.ns=t.namespace);let i=[];return or(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var kU=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Ji(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return MH(this.counters_)}};var wU={},EU={};function kj(t){let e=t.toString();return wU[e]||(wU[e]=new kU),wU[e]}function AAe(t,e){let n=t.toString();return EU[n]||(EU[n]=e()),EU[n]}var OU=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Cg(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Lte="start",xAe="close",NAe="pLPCommand",RAe="pRTLPCB",Dne="id",Ane="pw",xne="ser",MAe="cb",PAe="seg",kAe="ts",OAe="d",FAe="dframe",Nne=1870,Rne=30,LAe=Nne-Rne,VAe=25e3,UAe=3e4,Y_=class t{constructor(e,n,r,i,o,s,u){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hw(e),this.stats_=kj(n),this.urlFn=c=>(this.appCheckToken&&(c[PU]=this.appCheckToken),Sne(n,Cne,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new OU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(UAe)),vAe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new FU((...o)=>{let[s,u,c,h,f]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===Lte)this.id=u,this.password=c;else if(s===xAe)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,u]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,u)},()=>{this.onClosed_()},this.urlFn);let r={};r[Lte]="t",r[xne]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[MAe]=this.scriptTagHolder.uniqueCallbackIdentifier),r[yne]=XS,this.transportSessionId&&(r[vne]=this.transportSessionId),this.lastSessionId&&(r[Ine]=this.lastSessionId),this.applicationId&&(r[bne]=this.applicationId),this.appCheckToken&&(r[PU]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ene.test(location.hostname)&&(r[_ne]=wne);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return ls()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!wAe()&&!EAe()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=Dn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=RH(n),i=gne(r,LAe);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(ls())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[FAe]="t",r[Dne]=e,r[Ane]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=Dn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},FU=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,ls())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=dne(),window[NAe+this.uniqueCallbackIdentifier]=e,window[RAe+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){ir("frame writing exception"),u.stack&&ir(u.stack),ir(u)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ir("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Dne]=this.myID,e[Ane]=this.myPW,e[xne]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Rne+r.length<=Nne;){let s=this.pendingSegs.shift();r=r+"&"+PAe+i+"="+s.seg+"&"+kAe+i+"="+s.ts+"&"+OAe+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(VAe)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){ls()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ir("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var jAe=16384,BAe=45e3,ZS=null;typeof MozWebSocket<"u"?ZS=MozWebSocket:typeof WebSocket<"u"&&(ZS=WebSocket);var pg=(()=>{class t{constructor(n,r,i,o,s,u,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hw(this.connId),this.stats_=kj(r),this.connURL=t.connectionURL_(r,u,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let u={};return u[yne]=XS,!ls()&&typeof location<"u"&&location.hostname&&Ene.test(location.hostname)&&(u[_ne]=wne),r&&(u[vne]=r),i&&(u[Ine]=i),o&&(u[PU]=o),s&&(u[bne]=s),Sne(n,Tne,u)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jh.set("previous_websocket_failure",!0);try{let i;if(ls()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${XS}/${Rj}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,u=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;u&&(i.proxy={origin:u})}this.mySock=new ZS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&ZS!==null&&!t.forceDisallow_}static previouslyFailed(){return jh.isInMemoryStorage||jh.get("previous_websocket_failure")===!0}markConnectionHealthy(){jh.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=F0(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(Q(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Dn(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=gne(r,jAe);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(BAe))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),Mne=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Y_,pg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=pg&&pg.isAvailable(),i=r&&!pg.previouslyFailed();if(n.webSocketOnly&&(r||Vr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[pg];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),qAe=6e4,HAe=5e3,$Ae=10*1024,zAe=100*1024,IU="t",Vte="d",GAe="s",Ute="r",WAe="e",jte="o",Bte="a",qte="n",Hte="p",KAe="h",LU=class{constructor(e,n,r,i,o,s,u,c,h,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=u,this.onDisconnect_=c,this.onKill_=h,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hw("c:"+this.id+":"),this.transportManager_=new Mne(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=z_(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>zAe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>$Ae?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(IU in e){let n=e[IU];n===Bte?this.upgradeIfSecondaryHealthy_():n===Ute?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===jte&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=B_("t",e),r=B_("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Hte,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Bte,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:qte,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=B_("t",e),r=B_("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=B_(IU,e);if(Vte in e){let r=e[Vte];if(n===KAe){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===qte){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===GAe?this.onConnectionShutdown_(r):n===Ute?this.onReset_(r):n===WAe?NU("Server Error: "+r):n===jte?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):NU("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),XS!==r&&Vr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),z_(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(qAe))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):z_(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(HAe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Hte,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var eD=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var tD=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){Q(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var nD=class t extends tD{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!UN()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return Q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var $te=32,zte=768,vt=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function yt(){return new vt("")}function Ke(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Dc(t){return t.pieces_.length-t.pieceNum_}function Ft(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new vt(t.pieces_,e)}function Oj(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function QAe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function X_(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Pne(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new vt(e,0)}function Zt(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof vt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new vt(n,0)}function Qe(t){return t.pieceNum_>=t.pieces_.length}function ei(t,e){let n=Ke(t),r=Ke(e);if(n===null)return e;if(n===r)return ei(Ft(t),Ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function YAe(t,e){let n=X_(t,0),r=X_(e,0);for(let i=0;i<n.length&&i<r.length;i++){let o=Hh(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Fj(t,e){if(Dc(t)!==Dc(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ho(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Dc(t)>Dc(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var VU=class{constructor(e,n){this.errorPrefix_=n,this.parts_=X_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=vm(this.parts_[r]);kne(this)}};function XAe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=vm(e),kne(t)}function JAe(t){let e=t.parts_.pop();t.byteLength_-=vm(e),t.parts_.length>0&&(t.byteLength_-=1)}function kne(t){if(t.byteLength_>zte)throw new Error(t.errorPrefix_+"has a key path longer than "+zte+" bytes ("+t.byteLength_+").");if(t.parts_.length>$te)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$te+") or object contains a cycle "+Uh(t))}function Uh(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var UU=class t extends tD{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return Q(e==="visible","Unknown event type: "+e),[this.visible_]}};var q_=1e3,ZAe=60*5*1e3,Gte=30*1e3,exe=1.3,txe=3e4,nxe="server_kill",Wte=3,Lj=(()=>{class t extends eD{constructor(n,r,i,o,s,u,c,h){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=u,this.appCheckTokenProvider_=c,this.authOverride_=h,this.id=t.nextPersistentConnectionId_++,this.log_=hw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=q_,this.maxReconnectDelay_=ZAe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!ls())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");UU.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&nD.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(Dn(s)),Q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Xn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:u=>{let c=u.d;u.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,u=n._path.toString();this.log_("Listen called for "+u+" "+s),this.listens.has(u)||this.listens.set(u,new Map),Q(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Q(!this.listens.get(u).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(u).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},u="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(u,s,c=>{let h=c.d,f=c.s;t.warnOnListenWarnings_(h,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),f!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(f,h))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Ji(n,"w")){let i=cu(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Vr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||LH(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Gte)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=FH(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,u=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),Q(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},u="n";o&&(s.q=i,s.t=o),this.sendRequest(u,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,u=>{o&&setTimeout(()=>{o(u.s,u.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let u={p:r,d:i};s!==void 0&&(u.h=s),this.outstandingPuts_.push({action:n,request:u,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Dn(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):NU("Unrecognized action received from server: "+Dn(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){Q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=q_,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=q_,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>txe&&(this.reconnectDelay_=q_),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*exe)}this.onConnectStatus_(!1)}establishConnection_(){return F(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,h=function(){c?c.close():(u=!0,i())},f=function(m){Q(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:h,sendRequest:f};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,v]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);u?ir("getToken() completed but was canceled"):(ir("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=v&&v.token,c=new LU(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,_=>{Vr(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(nxe)},s))}catch(m){this.log_("Failed to get token: "+m),u||(this.repoInfo_.nodeAdmin&&Vr(m),h())}}})}interrupt(n){ir("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){ir("Resuming connection for reason: "+n),delete this.interruptReasons_[n],L0(this.interruptReasons_)&&(this.reconnectDelay_=q_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Pj(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new vt(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){ir("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Wte&&(this.reconnectDelay_=Gte,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){ir("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Wte&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";ls()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Rj.replace(/\./g,"-")]=1,UN()?n["framework.cordova"]=1:PH()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=nD.getInstance().currentlyOnline();return L0(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),tt=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var yg=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new tt(Sc,e),i=new tt(Sc,n);return this.compare(r,i)!==0}minPost(){return tt.MIN}};var YS,rD=class extends yg{static get __EMPTY_NODE(){return YS}static set __EMPTY_NODE(e){YS=e}compare(e,n){return Hh(e.name,n.name)}isDefinedOn(e){throw Cd("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return tt.MIN}maxPost(){return new tt(Ka,YS)}makePost(e,n){return Q(typeof e=="string","KeyIndex indexValue must always be a string."),new tt(e,YS)}toString(){return".key"}},ea=new rD;var gg=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Xo=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i!=null?i:t.RED,this.left=o!=null?o:fo.EMPTY_NODE,this.right=s!=null?s:fo.EMPTY_NODE}copy(n,r,i,o,s){return new t(n!=null?n:this.key,r!=null?r:this.value,i!=null?i:this.color,o!=null?o:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return fo.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return fo.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),jU=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new Xo(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},fo=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Xo.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Xo.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new gg(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new gg(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new gg(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new gg(this.root_,null,this.comparator_,!0,e)}};fo.EMPTY_NODE=new jU;function rxe(t,e){return Hh(t.name,e.name)}function Vj(t,e){return Hh(t,e)}var BU;function ixe(t){BU=t}var One=function(t){return typeof t=="number"?"number:"+mne(t):"string:"+t},Fne=function(t){if(t.isLeafNode()){let e=t.val();Q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ji(e,".sv"),"Priority must be a string or number.")}else Q(t===BU||t.isEmpty(),"priority of unexpected type.");Q(t===BU||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Kte,vg=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,Q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Fne(this.priorityNode_)}static set __childrenNodeConstructor(n){Kte=n}static get __childrenNodeConstructor(){return Kte}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Qe(n)?this:Ke(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=Ke(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(Q(i!==".priority"||Dc(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ft(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+One(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=mne(this.value_):n+=this.value_,this.lazyHash_=fne(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(Q(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return Q(o>=0,"Unknown leaf type: "+r),Q(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),Lne,Vne;function oxe(t){Lne=t}function sxe(t){Vne=t}var qU=class extends yg{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?Hh(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return tt.MIN}maxPost(){return new tt(Ka,new vg("[PRIORITY-POST]",Vne))}makePost(e,n){let r=Lne(e);return new tt(n,new vg("[PRIORITY-POST]",r))}toString(){return".priority"}},jt=new qU;var axe=Math.log(2),HU=class{constructor(e){let n=o=>parseInt(Math.log(o)/axe,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},iD=function(t,e,n,r){t.sort(e);let i=function(c,h){let f=h-c,p,m;if(f===0)return null;if(f===1)return p=t[c],m=n?n(p):p,new Xo(m,p.node,Xo.BLACK,null,null);{let v=parseInt(f/2,10)+c,_=i(c,v),E=i(v+1,h);return p=t[v],m=n?n(p):p,new Xo(m,p.node,Xo.BLACK,_,E)}},o=function(c){let h=null,f=null,p=t.length,m=function(_,E){let b=p-_,T=p;p-=_;let S=i(b+1,T),A=t[b],x=n?n(A):A;v(new Xo(x,A.node,E,null,S))},v=function(_){h?(h.left=_,h=_):(f=_,h=_)};for(let _=0;_<c.count;++_){let E=c.nextBitIsOne(),b=Math.pow(2,c.count-(_+1));E?m(b,Xo.BLACK):(m(b,Xo.BLACK),m(b,Xo.RED))}return f},s=new HU(t.length),u=o(s);return new fo(r||e,u)};var bU,fg={},_g=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Q(fg&&jt,"ChildrenNode.ts has not been loaded"),bU=bU||new t({".priority":fg},{".priority":jt}),bU}get(e){let n=cu(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof fo?n:null}hasIndex(e){return Ji(this.indexSet_,e.toString())}addIndex(e,n){Q(e!==ea,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(tt.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let u;i?u=iD(r,e.getCompare()):u=fg;let c=e.toString(),h=Object.assign({},this.indexSet_);h[c]=e;let f=Object.assign({},this.indexes_);return f[c]=u,new t(f,h)}addToIndexes(e,n){let r=ym(this.indexes_,(i,o)=>{let s=cu(this.indexSet_,o);if(Q(s,"Missing index implementation for "+o),i===fg)if(s.isDefinedOn(e.node)){let u=[],c=n.getIterator(tt.Wrap),h=c.getNext();for(;h;)h.name!==e.name&&u.push(h),h=c.getNext();return u.push(e),iD(u,s.getCompare())}else return fg;else{let u=n.get(e.name),c=i;return u&&(c=c.remove(new tt(e.name,u))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=ym(this.indexes_,i=>{if(i===fg)return i;{let o=n.get(e.name);return o?i.remove(new tt(e.name,o)):i}});return new t(r,this.indexSet_)}};var H_,Be=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Fne(this.priorityNode_),this.children_.isEmpty()&&Q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return H_||(H_=new t(new fo(Vj),null,_g.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||H_}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?H_:r}}getChild(n){let r=Ke(n);return r===null?this:this.getImmediateChild(r).getChild(Ft(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(Q(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new tt(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let u=o.isEmpty()?H_:this.priorityNode_;return new t(o,u,s)}}updateChild(n,r){let i=Ke(n);if(i===null)return r;{Q(Ke(n)!==".priority"||Dc(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(Ft(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(jt,(u,c)=>{r[u]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(u)?o=Math.max(o,Number(u)):s=!1}),!n&&s&&o<2*i){let u=[];for(let c in r)u[c]=r[c];return u}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+One(this.getPriority().val())+":"),this.forEachChild(jt,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":fne(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new tt(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new tt(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new tt(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,tt.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,tt.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===dw?-1:0}withIndex(n){if(n===ea||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===ea||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(jt),o=r.getIterator(jt),s=i.getNext(),u=o.getNext();for(;s&&u;){if(s.name!==u.name||!s.node.equals(u.node))return!1;s=i.getNext(),u=o.getNext()}return s===null&&u===null}else return!1;else return!1}}resolveIndex_(n){return n===ea?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),$U=class extends Be{constructor(){super(new fo(Vj),Be.EMPTY_NODE,_g.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Be.EMPTY_NODE}isEmpty(){return!1}},dw=new $U;Object.defineProperties(tt,{MIN:{value:new tt(Sc,Be.EMPTY_NODE)},MAX:{value:new tt(Ka,dw)}});rD.__EMPTY_NODE=Be.EMPTY_NODE;vg.__childrenNodeConstructor=Be;ixe(dw);sxe(dw);var uxe=!0;function an(t,e=null){if(t===null)return Be.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new vg(n,an(e))}if(!(t instanceof Array)&&uxe){let n=[],r=!1;if(or(t,(s,u)=>{if(s.substring(0,1)!=="."){let c=an(u);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new tt(s,c)))}}),n.length===0)return Be.EMPTY_NODE;let o=iD(n,rxe,s=>s.name,Vj);if(r){let s=iD(n,jt.getCompare());return new Be(o,an(e),new _g({".priority":s},{".priority":jt}))}else return new Be(o,an(e),_g.Default)}else{let n=Be.EMPTY_NODE;return or(t,(r,i)=>{if(Ji(t,r)&&r.substring(0,1)!=="."){let o=an(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(an(e))}}oxe(an);var J_=class extends yg{constructor(e){super(),this.indexPath_=e,Q(!Qe(e)&&Ke(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?Hh(e.name,n.name):o}makePost(e,n){let r=an(e),i=Be.EMPTY_NODE.updateChild(this.indexPath_,r);return new tt(n,i)}maxPost(){let e=Be.EMPTY_NODE.updateChild(this.indexPath_,dw);return new tt(Ka,e)}toString(){return X_(this.indexPath_,0).join("/")}};var zU=class extends yg{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Hh(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return tt.MIN}maxPost(){return tt.MAX}makePost(e,n){let r=an(e);return new tt(n,r)}toString(){return".value"}},Uj=new zU;function Une(t){return{type:"value",snapshotNode:t}}function wg(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Z_(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ew(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function cxe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var tw=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){Q(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let u=e.getImmediateChild(n);return u.getChild(i).equals(r.getChild(i))&&u.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(Z_(n,u)):Q(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?s.trackChildChange(wg(n,r)):s.trackChildChange(ew(n,r,u))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(jt,(i,o)=>{n.hasChild(i)||r.trackChildChange(Z_(i,o))}),n.isLeafNode()||n.forEachChild(jt,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(ew(i,o,s))}else r.trackChildChange(wg(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Be.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var oD=class t{constructor(e){this.indexedFilter_=new tw(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new tt(n,r))||(r=Be.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Be.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Be.EMPTY_NODE);let o=this;return n.forEachChild(jt,(s,u)=>{o.matches(new tt(s,u))||(i=i.updateImmediateChild(s,Be.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var GU=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new oD(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new tt(n,r))||(r=Be.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Be.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Be.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let u=o.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))i=i.updateImmediateChild(u.name,u.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Be.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let u=o.getNext();s<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?s++:i=i.updateImmediateChild(u.name,Be.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let p=this.index_.getCompare();s=(m,v)=>p(v,m)}else s=this.index_.getCompare();let u=e;Q(u.numChildren()===this.limit_,"");let c=new tt(n,r),h=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),f=this.rangedFilter_.matches(c);if(u.hasChild(n)){let p=u.getImmediateChild(n),m=i.getChildAfterChild(this.index_,h,this.reverse_);for(;m!=null&&(m.name===n||u.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);let v=m==null?1:s(m,c);if(f&&!r.isEmpty()&&v>=0)return o!=null&&o.trackChildChange(ew(n,r,p)),u.updateImmediateChild(n,r);{o!=null&&o.trackChildChange(Z_(n,p));let E=u.updateImmediateChild(n,Be.EMPTY_NODE);return m!=null&&this.rangedFilter_.matches(m)?(o!=null&&o.trackChildChange(wg(m.name,m.node)),E.updateImmediateChild(m.name,m.node)):E}}else return r.isEmpty()?e:f&&s(h,c)>=0?(o!=null&&(o.trackChildChange(Z_(h.name,h.node)),o.trackChildChange(wg(n,r))),u.updateImmediateChild(n,r).updateImmediateChild(h.name,Be.EMPTY_NODE)):e}};var nw=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=jt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Sc}hasEnd(){return this.endSet_}getIndexEndValue(){return Q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ka}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===jt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function lxe(t){return t.loadsAllData()?new tw(t.getIndex()):t.hasLimit()?new GU(t):new oD(t)}function hxe(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function dxe(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function WU(t,e,n){let r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function fxe(t,e,n){let r;return t.index_===ea||n?r=WU(t,e,n):r=WU(t,e,Ka),r.startAfterSet_=!0,r}function KU(t,e,n){let r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function pxe(t,e,n){let r;return t.index_===ea||n?r=KU(t,e,n):r=KU(t,e,Sc),r.endBeforeSet_=!0,r}function TD(t,e){let n=t.copy();return n.index_=e,n}function Qte(t){let e={};if(t.isDefault())return e;let n;if(t.index_===jt?n="$priority":t.index_===Uj?n="$value":t.index_===ea?n="$key":(Q(t.index_ instanceof J_,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Dn(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=Dn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Dn(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Dn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Dn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Yte(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==jt&&(e.i=t.index_.toString()),e}var QU=class t extends eD{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=hw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),u={};this.listens_[s]=u;let c=Qte(e._queryParams);this.restRequest_(o+".json",c,(h,f)=>{let p=f;if(h===404&&(p=null,h=null),h===null&&this.onDataUpdate_(o,p,!1,r),cu(this.listens_,s)===u){let m;h?h===401?m="permission_denied":m="rest_error:"+h:m="ok",i(m,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=Qte(e._queryParams),r=e._path.toString(),i=new Xn;return this.restRequest_(r+".json",n,(o,s)=>{let u=s;o===404&&(u=null,o=null),o===null?(this.onDataUpdate_(r,u,!1,null),i.resolve(u)):i.reject(new Error(u))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+VH(n);this.log_("Sending REST request for "+s);let u=new XMLHttpRequest;u.onreadystatechange=()=>{if(r&&u.readyState===4){this.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);let c=null;if(u.status>=200&&u.status<300){try{c=F0(u.responseText)}catch{Vr("Failed to parse JSON response for "+s+": "+u.responseText)}r(null,c)}else u.status!==401&&u.status!==404&&Vr("Got unsuccessful REST response for "+s+" Status: "+u.status),r(u.status);r=null}},u.open("GET",s,!0),u.send()})}};var YU=class{constructor(){this.rootNode_=Be.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function sD(){return{value:null,children:new Map}}function Sg(t,e,n){if(Qe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=Ke(e);t.children.has(r)||t.children.set(r,sD());let i=t.children.get(r);e=Ft(e),Sg(i,e,n)}}function XU(t,e){if(Qe(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{let n=t.value;return t.value=null,n.forEachChild(jt,(r,i)=>{Sg(t,new vt(r),i)}),XU(t,e)}}else if(t.children.size>0){let n=Ke(e);return e=Ft(e),t.children.has(n)&&XU(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function JU(t,e,n){t.value!==null?n(e,t.value):gxe(t,(r,i)=>{let o=new vt(e.toString()+"/"+r);JU(i,o,n)})}function gxe(t,e){t.children.forEach((n,r)=>{e(r,n)})}var ZU=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&or(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var Xte=10*1e3,mxe=30*1e3,yxe=5*60*1e3,ej=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ZU(e);let r=Xte+(mxe-Xte)*Math.random();z_(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;or(e,(i,o)=>{o>0&&Ji(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),z_(this.reportStats_.bind(this),Math.floor(Math.random()*2*yxe))}};var Zs=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Zs||{});function jj(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Bj(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function qj(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var tj=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Zs.ACK_USER_WRITE,this.source=jj()}operationForChild(e){if(Qe(this.path)){if(this.affectedTree.value!=null)return Q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new vt(e));return new t(yt(),n,this.revert)}}else return Q(Ke(this.path)===e,"operationForChild called for unrelated child."),new t(Ft(this.path),this.affectedTree,this.revert)}};var aD=class t{constructor(e,n){this.source=e,this.path=n,this.type=Zs.LISTEN_COMPLETE}operationForChild(e){return Qe(this.path)?new t(this.source,yt()):new t(this.source,Ft(this.path))}};var Eg=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Zs.OVERWRITE}operationForChild(e){return Qe(this.path)?new t(this.source,yt(),this.snap.getImmediateChild(e)):new t(this.source,Ft(this.path),this.snap)}};var rw=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Zs.MERGE}operationForChild(e){if(Qe(this.path)){let n=this.children.subtree(new vt(e));return n.isEmpty()?null:n.value?new Eg(this.source,yt(),n.value):new t(this.source,yt(),n)}else return Q(Ke(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var na=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Qe(e))return this.isFullyInitialized()&&!this.filtered_;let n=Ke(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var nj=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function vxe(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(cxe(s.childName,s.snapshotNode))}),$_(t,i,"child_removed",e,r,n),$_(t,i,"child_added",e,r,n),$_(t,i,"child_moved",o,r,n),$_(t,i,"child_changed",e,r,n),$_(t,i,"value",e,r,n),i}function $_(t,e,n,r,i,o){let s=r.filter(u=>u.type===n);s.sort((u,c)=>wxe(t,u,c)),s.forEach(u=>{let c=_xe(t,u,o);i.forEach(h=>{h.respondsTo(u.type)&&e.push(h.createEvent(c,t.query_))})})}function _xe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function wxe(t,e,n){if(e.childName==null||n.childName==null)throw Cd("Should only compare child_ events.");let r=new tt(e.childName,e.snapshotNode),i=new tt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function CD(t,e){return{eventCache:t,serverCache:e}}function W_(t,e,n,r){return CD(new na(e,n,r),t.serverCache)}function jne(t,e,n,r){return CD(t.eventCache,new na(e,n,r))}function uD(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function qh(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var TU,Exe=()=>(TU||(TU=new fo(_Ae)),TU),ti=class t{constructor(e,n=Exe()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return or(e,(r,i)=>{n=n.set(new vt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:yt(),value:this.value};if(Qe(e))return null;{let r=Ke(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(Ft(e),n);return o!=null?{path:Zt(new vt(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Qe(e))return this;{let n=Ke(e),r=this.children.get(n);return r!==null?r.subtree(Ft(e)):new t(null)}}set(e,n){if(Qe(e))return new t(n,this.children);{let r=Ke(e),o=(this.children.get(r)||new t(null)).set(Ft(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(Qe(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=Ke(e),r=this.children.get(n);if(r){let i=r.remove(Ft(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(Qe(e))return this.value;{let n=Ke(e),r=this.children.get(n);return r?r.get(Ft(e)):null}}setTree(e,n){if(Qe(e))return n;{let r=Ke(e),o=(this.children.get(r)||new t(null)).setTree(Ft(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(yt(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Zt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,yt(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(Qe(e))return null;{let o=Ke(e),s=this.children.get(o);return s?s.findOnPath_(Ft(e),Zt(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,yt(),n)}foreachOnPath_(e,n,r){if(Qe(e))return this;{this.value&&r(n,this.value);let i=Ke(e),o=this.children.get(i);return o?o.foreachOnPath_(Ft(e),Zt(n,i),r):new t(null)}}foreach(e){this.foreach_(yt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Zt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Jo=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new ti(null))}};function K_(t,e,n){if(Qe(e))return new Jo(new ti(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=ei(i,e);return o=o.updateChild(s,n),new Jo(t.writeTree_.set(i,o))}else{let i=new ti(n),o=t.writeTree_.setTree(e,i);return new Jo(o)}}}function rj(t,e,n){let r=t;return or(n,(i,o)=>{r=K_(r,Zt(e,i),o)}),r}function Jte(t,e){if(Qe(e))return Jo.empty();{let n=t.writeTree_.setTree(e,new ti(null));return new Jo(n)}}function ij(t,e){return $h(t,e)!=null}function $h(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ei(n.path,e)):null}function Zte(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(jt,(r,i)=>{e.push(new tt(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new tt(r,i.value))}),e}function Tc(t,e){if(Qe(e))return t;{let n=$h(t,e);return n!=null?new Jo(new ti(n)):new Jo(t.writeTree_.subtree(e))}}function oj(t){return t.writeTree_.isEmpty()}function Ig(t,e){return Bne(yt(),t.writeTree_,e)}function Bne(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(Q(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=Bne(Zt(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Zt(t,".priority"),r)),n}}function SD(t,e){return zne(e,t)}function Ixe(t,e,n,r,i){Q(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=K_(t.visibleWrites,e,n)),t.lastWriteId=r}function bxe(t,e,n,r){Q(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=rj(t.visibleWrites,e,n),t.lastWriteId=r}function Txe(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function Cxe(t,e){let n=t.allWrites.findIndex(u=>u.writeId===e);Q(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let u=t.allWrites[s];u.visible&&(s>=n&&Sxe(u,r.path)?i=!1:ho(r.path,u.path)&&(o=!0)),s--}if(i){if(o)return Dxe(t),!0;if(r.snap)t.visibleWrites=Jte(t.visibleWrites,r.path);else{let u=r.children;or(u,c=>{t.visibleWrites=Jte(t.visibleWrites,Zt(r.path,c))})}return!0}else return!1}function Sxe(t,e){if(t.snap)return ho(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&ho(Zt(t.path,n),e))return!0;return!1}function Dxe(t){t.visibleWrites=qne(t.allWrites,Axe,yt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Axe(t){return t.visible}function qne(t,e,n){let r=Jo.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,u;if(o.snap)ho(n,s)?(u=ei(n,s),r=K_(r,u,o.snap)):ho(s,n)&&(u=ei(s,n),r=K_(r,yt(),o.snap.getChild(u)));else if(o.children){if(ho(n,s))u=ei(n,s),r=rj(r,u,o.children);else if(ho(s,n))if(u=ei(s,n),Qe(u))r=rj(r,yt(),o.children);else{let c=cu(o.children,Ke(u));if(c){let h=c.getChild(Ft(u));r=K_(r,yt(),h)}}}else throw Cd("WriteRecord should have .snap or .children")}}return r}function Hne(t,e,n,r,i){if(!r&&!i){let o=$h(t.visibleWrites,e);if(o!=null)return o;{let s=Tc(t.visibleWrites,e);if(oj(s))return n;if(n==null&&!ij(s,yt()))return null;{let u=n||Be.EMPTY_NODE;return Ig(s,u)}}}else{let o=Tc(t.visibleWrites,e);if(!i&&oj(o))return n;if(!i&&n==null&&!ij(o,yt()))return null;{let s=function(h){return(h.visible||i)&&(!r||!~r.indexOf(h.writeId))&&(ho(h.path,e)||ho(e,h.path))},u=qne(t.allWrites,s,e),c=n||Be.EMPTY_NODE;return Ig(u,c)}}}function xxe(t,e,n){let r=Be.EMPTY_NODE,i=$h(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(jt,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Tc(t.visibleWrites,e);return n.forEachChild(jt,(s,u)=>{let c=Ig(Tc(o,new vt(s)),u);r=r.updateImmediateChild(s,c)}),Zte(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Tc(t.visibleWrites,e);return Zte(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function Nxe(t,e,n,r,i){Q(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Zt(e,n);if(ij(t.visibleWrites,o))return null;{let s=Tc(t.visibleWrites,o);return oj(s)?i.getChild(n):Ig(s,i.getChild(n))}}function Rxe(t,e,n,r){let i=Zt(e,n),o=$h(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Tc(t.visibleWrites,i);return Ig(s,r.getNode().getImmediateChild(n))}else return null}function Mxe(t,e){return $h(t.visibleWrites,e)}function Pxe(t,e,n,r,i,o,s){let u,c=Tc(t.visibleWrites,e),h=$h(c,yt());if(h!=null)u=h;else if(n!=null)u=Ig(c,n);else return[];if(u=u.withIndex(s),!u.isEmpty()&&!u.isLeafNode()){let f=[],p=s.getCompare(),m=o?u.getReverseIteratorFrom(r,s):u.getIteratorFrom(r,s),v=m.getNext();for(;v&&f.length<i;)p(v,r)!==0&&f.push(v),v=m.getNext();return f}else return[]}function kxe(){return{visibleWrites:Jo.empty(),allWrites:[],lastWriteId:-1}}function cD(t,e,n,r){return Hne(t.writeTree,t.treePath,e,n,r)}function Hj(t,e){return xxe(t.writeTree,t.treePath,e)}function ene(t,e,n,r){return Nxe(t.writeTree,t.treePath,e,n,r)}function lD(t,e){return Mxe(t.writeTree,Zt(t.treePath,e))}function Oxe(t,e,n,r,i,o){return Pxe(t.writeTree,t.treePath,e,n,r,i,o)}function $j(t,e,n){return Rxe(t.writeTree,t.treePath,e,n)}function $ne(t,e){return zne(Zt(t.treePath,e),t.writeTree)}function zne(t,e){return{treePath:t,writeTree:e}}var sj=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;Q(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Q(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,ew(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Z_(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,wg(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,ew(r,e.snapshotNode,i.oldSnap));else throw Cd("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var aj=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},Gne=new aj,iw=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new na(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $j(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:qh(this.viewCache_),o=Oxe(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function Fxe(t){return{filter:t}}function Lxe(t,e){Q(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Q(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Vxe(t,e,n,r,i){let o=new sj,s,u;if(n.type===Zs.OVERWRITE){let h=n;h.source.fromUser?s=uj(t,e,h.path,h.snap,r,i,o):(Q(h.source.fromServer,"Unknown source."),u=h.source.tagged||e.serverCache.isFiltered()&&!Qe(h.path),s=hD(t,e,h.path,h.snap,r,i,u,o))}else if(n.type===Zs.MERGE){let h=n;h.source.fromUser?s=jxe(t,e,h.path,h.children,r,i,o):(Q(h.source.fromServer,"Unknown source."),u=h.source.tagged||e.serverCache.isFiltered(),s=cj(t,e,h.path,h.children,r,i,u,o))}else if(n.type===Zs.ACK_USER_WRITE){let h=n;h.revert?s=Hxe(t,e,h.path,r,i,o):s=Bxe(t,e,h.path,h.affectedTree,r,i,o)}else if(n.type===Zs.LISTEN_COMPLETE)s=qxe(t,e,n.path,r,o);else throw Cd("Unknown operation type: "+n.type);let c=o.getChanges();return Uxe(e,s,c),{viewCache:s,changes:c}}function Uxe(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=uD(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Une(uD(e)))}}function Wne(t,e,n,r,i,o){let s=e.eventCache;if(lD(r,n)!=null)return e;{let u,c;if(Qe(n))if(Q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let h=qh(e),f=h instanceof Be?h:Be.EMPTY_NODE,p=Hj(r,f);u=t.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{let h=cD(r,qh(e));u=t.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{let h=Ke(n);if(h===".priority"){Q(Dc(n)===1,"Can't have a priority with additional path components");let f=s.getNode();c=e.serverCache.getNode();let p=ene(r,n,f,c);p!=null?u=t.filter.updatePriority(f,p):u=s.getNode()}else{let f=Ft(n),p;if(s.isCompleteForChild(h)){c=e.serverCache.getNode();let m=ene(r,n,s.getNode(),c);m!=null?p=s.getNode().getImmediateChild(h).updateChild(f,m):p=s.getNode().getImmediateChild(h)}else p=$j(r,h,e.serverCache);p!=null?u=t.filter.updateChild(s.getNode(),h,p,f,i,o):u=s.getNode()}}return W_(e,u,s.isFullyInitialized()||Qe(n),t.filter.filtersNodes())}}function hD(t,e,n,r,i,o,s,u){let c=e.serverCache,h,f=s?t.filter:t.filter.getIndexedFilter();if(Qe(n))h=f.updateFullNode(c.getNode(),r,null);else if(f.filtersNodes()&&!c.isFiltered()){let v=c.getNode().updateChild(n,r);h=f.updateFullNode(c.getNode(),v,null)}else{let v=Ke(n);if(!c.isCompleteForPath(n)&&Dc(n)>1)return e;let _=Ft(n),b=c.getNode().getImmediateChild(v).updateChild(_,r);v===".priority"?h=f.updatePriority(c.getNode(),b):h=f.updateChild(c.getNode(),v,b,_,Gne,null)}let p=jne(e,h,c.isFullyInitialized()||Qe(n),f.filtersNodes()),m=new iw(i,p,o);return Wne(t,p,n,i,m,u)}function uj(t,e,n,r,i,o,s){let u=e.eventCache,c,h,f=new iw(i,e,o);if(Qe(n))h=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=W_(e,h,!0,t.filter.filtersNodes());else{let p=Ke(n);if(p===".priority")h=t.filter.updatePriority(e.eventCache.getNode(),r),c=W_(e,h,u.isFullyInitialized(),u.isFiltered());else{let m=Ft(n),v=u.getNode().getImmediateChild(p),_;if(Qe(m))_=r;else{let E=f.getCompleteChild(p);E!=null?Oj(m)===".priority"&&E.getChild(Pne(m)).isEmpty()?_=E:_=E.updateChild(m,r):_=Be.EMPTY_NODE}if(v.equals(_))c=e;else{let E=t.filter.updateChild(u.getNode(),p,_,m,f,s);c=W_(e,E,u.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function tne(t,e){return t.eventCache.isCompleteForChild(e)}function jxe(t,e,n,r,i,o,s){let u=e;return r.foreach((c,h)=>{let f=Zt(n,c);tne(e,Ke(f))&&(u=uj(t,u,f,h,i,o,s))}),r.foreach((c,h)=>{let f=Zt(n,c);tne(e,Ke(f))||(u=uj(t,u,f,h,i,o,s))}),u}function nne(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function cj(t,e,n,r,i,o,s,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,h;Qe(n)?h=r:h=new ti(null).setTree(n,r);let f=e.serverCache.getNode();return h.children.inorderTraversal((p,m)=>{if(f.hasChild(p)){let v=e.serverCache.getNode().getImmediateChild(p),_=nne(t,v,m);c=hD(t,c,new vt(p),_,i,o,s,u)}}),h.children.inorderTraversal((p,m)=>{let v=!e.serverCache.isCompleteForChild(p)&&m.value===null;if(!f.hasChild(p)&&!v){let _=e.serverCache.getNode().getImmediateChild(p),E=nne(t,_,m);c=hD(t,c,new vt(p),E,i,o,s,u)}}),c}function Bxe(t,e,n,r,i,o,s){if(lD(i,n)!=null)return e;let u=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Qe(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return hD(t,e,n,c.getNode().getChild(n),i,o,u,s);if(Qe(n)){let h=new ti(null);return c.getNode().forEachChild(ea,(f,p)=>{h=h.set(new vt(f),p)}),cj(t,e,n,h,i,o,u,s)}else return e}else{let h=new ti(null);return r.foreach((f,p)=>{let m=Zt(n,f);c.isCompleteForPath(m)&&(h=h.set(f,c.getNode().getChild(m)))}),cj(t,e,n,h,i,o,u,s)}}function qxe(t,e,n,r,i){let o=e.serverCache,s=jne(e,o.getNode(),o.isFullyInitialized()||Qe(n),o.isFiltered());return Wne(t,s,n,r,Gne,i)}function Hxe(t,e,n,r,i,o){let s;if(lD(r,n)!=null)return e;{let u=new iw(r,e,i),c=e.eventCache.getNode(),h;if(Qe(n)||Ke(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=cD(r,qh(e));else{let p=e.serverCache.getNode();Q(p instanceof Be,"serverChildren would be complete if leaf node"),f=Hj(r,p)}f=f,h=t.filter.updateFullNode(c,f,o)}else{let f=Ke(n),p=$j(r,f,e.serverCache);p==null&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),p!=null?h=t.filter.updateChild(c,f,p,Ft(n),u,o):e.eventCache.getNode().hasChild(f)?h=t.filter.updateChild(c,f,Be.EMPTY_NODE,Ft(n),u,o):h=c,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=cD(r,qh(e)),s.isLeafNode()&&(h=t.filter.updateFullNode(h,s,o)))}return s=e.serverCache.isFullyInitialized()||lD(r,yt())!=null,W_(e,h,s,t.filter.filtersNodes())}}var lj=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new tw(r.getIndex()),o=lxe(r);this.processor_=Fxe(o);let s=n.serverCache,u=n.eventCache,c=i.updateFullNode(Be.EMPTY_NODE,s.getNode(),null),h=o.updateFullNode(Be.EMPTY_NODE,u.getNode(),null),f=new na(c,s.isFullyInitialized(),i.filtersNodes()),p=new na(h,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=CD(p,f),this.eventGenerator_=new nj(this.query_)}get query(){return this.query_}};function $xe(t){return t.viewCache_.serverCache.getNode()}function zxe(t){return uD(t.viewCache_)}function Gxe(t,e){let n=qh(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Qe(e)&&!n.getImmediateChild(Ke(e)).isEmpty())?n.getChild(e):null}function rne(t){return t.eventRegistrations_.length===0}function Wxe(t,e){t.eventRegistrations_.push(e)}function ine(t,e,n){let r=[];if(n){Q(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function one(t,e,n,r){e.type===Zs.MERGE&&e.source.queryId!==null&&(Q(qh(t.viewCache_),"We should always have a full cache before handling merges"),Q(uD(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=Vxe(t.processor_,i,e,n,r);return Lxe(t.processor_,o.viewCache),Q(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,Kne(t,o.changes,o.viewCache.eventCache.getNode(),null)}function Kxe(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(jt,(o,s)=>{r.push(wg(o,s))}),n.isFullyInitialized()&&r.push(Une(n.getNode())),Kne(t,r,n.getNode(),e)}function Kne(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return vxe(t.eventGenerator_,e,n,i)}var dD,fD=class{constructor(){this.views=new Map}};function Qxe(t){Q(!dD,"__referenceConstructor has already been defined"),dD=t}function Yxe(){return Q(dD,"Reference.ts has not been loaded"),dD}function Xxe(t){return t.views.size===0}function zj(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return Q(o!=null,"SyncTree gave us an op for an invalid query."),one(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(one(s,e,n,r));return o}}function Qne(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let u=cD(n,i?r:null),c=!1;u?c=!0:r instanceof Be?(u=Hj(n,r),c=!1):(u=Be.EMPTY_NODE,c=!1);let h=CD(new na(u,c,!1),new na(r,i,!1));return new lj(e,h)}return s}function Jxe(t,e,n,r,i,o){let s=Qne(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),Wxe(s,n),Kxe(s,n)}function Zxe(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],u=Ac(t);if(i==="default")for(let[c,h]of t.views.entries())s=s.concat(ine(h,n,r)),rne(h)&&(t.views.delete(c),h.query._queryParams.loadsAllData()||o.push(h.query));else{let c=t.views.get(i);c&&(s=s.concat(ine(c,n,r)),rne(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return u&&!Ac(t)&&o.push(new(Yxe())(e._repo,e._path)),{removed:o,events:s}}function Yne(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Cc(t,e){let n=null;for(let r of t.views.values())n=n||Gxe(r,e);return n}function Xne(t,e){if(e._queryParams.loadsAllData())return DD(t);{let r=e._queryIdentifier;return t.views.get(r)}}function Jne(t,e){return Xne(t,e)!=null}function Ac(t){return DD(t)!=null}function DD(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var pD;function eNe(t){Q(!pD,"__referenceConstructor has already been defined"),pD=t}function tNe(){return Q(pD,"Reference.ts has not been loaded"),pD}var nNe=1,gD=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ti(null),this.pendingWriteTree_=kxe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Gj(t,e,n,r,i){return Ixe(t.pendingWriteTree_,e,n,r,i),i?Dg(t,new Eg(jj(),e,n)):[]}function rNe(t,e,n,r){bxe(t.pendingWriteTree_,e,n,r);let i=ti.fromObject(n);return Dg(t,new rw(jj(),e,i))}function bc(t,e,n=!1){let r=Txe(t.pendingWriteTree_,e);if(Cxe(t.pendingWriteTree_,e)){let o=new ti(null);return r.snap!=null?o=o.set(yt(),!0):or(r.children,s=>{o=o.set(new vt(s),!0)}),Dg(t,new tj(r.path,o,n))}else return[]}function fw(t,e,n){return Dg(t,new Eg(Bj(),e,n))}function iNe(t,e,n){let r=ti.fromObject(n);return Dg(t,new rw(Bj(),e,r))}function oNe(t,e){return Dg(t,new aD(Bj(),e))}function sNe(t,e,n){let r=Wj(t,n);if(r){let i=Kj(r),o=i.path,s=i.queryId,u=ei(o,e),c=new aD(qj(s),u);return Qj(t,o,c)}else return[]}function mD(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),u=[];if(s&&(e._queryIdentifier==="default"||Jne(s,e))){let c=Zxe(s,e,n,r);Xxe(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let h=c.removed;if(u=c.events,!i){let f=h.findIndex(m=>m._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(o,(m,v)=>Ac(v));if(f&&!p){let m=t.syncPointTree_.subtree(o);if(!m.isEmpty()){let v=cNe(m);for(let _=0;_<v.length;++_){let E=v[_],b=E.query,T=nre(t,E);t.listenProvider_.startListening(Q_(b),ow(t,b),T.hashFn,T.onComplete)}}}!p&&h.length>0&&!r&&(f?t.listenProvider_.stopListening(Q_(e),null):h.forEach(m=>{let v=t.queryToTagMap.get(xD(m));t.listenProvider_.stopListening(Q_(m),v)}))}lNe(t,h)}return u}function Zne(t,e,n,r){let i=Wj(t,r);if(i!=null){let o=Kj(i),s=o.path,u=o.queryId,c=ei(s,e),h=new Eg(qj(u),c,n);return Qj(t,s,h)}else return[]}function aNe(t,e,n,r){let i=Wj(t,r);if(i){let o=Kj(i),s=o.path,u=o.queryId,c=ei(s,e),h=ti.fromObject(n),f=new rw(qj(u),c,h);return Qj(t,s,f)}else return[]}function hj(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(m,v)=>{let _=ei(m,i);o=o||Cc(v,_),s=s||Ac(v)});let u=t.syncPointTree_.get(i);u?(s=s||Ac(u),o=o||Cc(u,yt())):(u=new fD,t.syncPointTree_=t.syncPointTree_.set(i,u));let c;o!=null?c=!0:(c=!1,o=Be.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((v,_)=>{let E=Cc(_,yt());E&&(o=o.updateImmediateChild(v,E))}));let h=Jne(u,e);if(!h&&!e._queryParams.loadsAllData()){let m=xD(e);Q(!t.queryToTagMap.has(m),"View does not exist, but we have a tag");let v=hNe();t.queryToTagMap.set(m,v),t.tagToQueryMap.set(v,m)}let f=SD(t.pendingWriteTree_,i),p=Jxe(u,e,n,f,o,c);if(!h&&!s&&!r){let m=Xne(u,e);p=p.concat(dNe(t,e,m))}return p}function AD(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,u)=>{let c=ei(s,e),h=Cc(u,c);if(h)return h});return Hne(i,e,o,n,!0)}function uNe(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(h,f)=>{let p=ei(h,n);r=r||Cc(f,p)});let i=t.syncPointTree_.get(n);i?r=r||Cc(i,yt()):(i=new fD,t.syncPointTree_=t.syncPointTree_.set(n,i));let o=r!=null,s=o?new na(r,!0,!1):null,u=SD(t.pendingWriteTree_,e._path),c=Qne(i,e,u,o?s.getNode():Be.EMPTY_NODE,o);return zxe(c)}function Dg(t,e){return ere(e,t.syncPointTree_,null,SD(t.pendingWriteTree_,yt()))}function ere(t,e,n,r){if(Qe(t.path))return tre(t,e,n,r);{let i=e.get(yt());n==null&&i!=null&&(n=Cc(i,yt()));let o=[],s=Ke(t.path),u=t.operationForChild(s),c=e.children.get(s);if(c&&u){let h=n?n.getImmediateChild(s):null,f=$ne(r,s);o=o.concat(ere(u,c,h,f))}return i&&(o=o.concat(zj(i,t,r,n))),o}}function tre(t,e,n,r){let i=e.get(yt());n==null&&i!=null&&(n=Cc(i,yt()));let o=[];return e.children.inorderTraversal((s,u)=>{let c=n?n.getImmediateChild(s):null,h=$ne(r,s),f=t.operationForChild(s);f&&(o=o.concat(tre(f,u,c,h)))}),i&&(o=o.concat(zj(i,t,r,n))),o}function nre(t,e){let n=e.query,r=ow(t,n);return{hashFn:()=>($xe(e)||Be.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?sNe(t,n._path,r):oNe(t,n._path);{let o=IAe(i,n);return mD(t,n,null,o)}}}}function ow(t,e){let n=xD(e);return t.queryToTagMap.get(n)}function xD(t){return t._path.toString()+"$"+t._queryIdentifier}function Wj(t,e){return t.tagToQueryMap.get(e)}function Kj(t){let e=t.indexOf("$");return Q(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new vt(t.substr(0,e))}}function Qj(t,e,n){let r=t.syncPointTree_.get(e);Q(r,"Missing sync point for query tag that we're tracking");let i=SD(t.pendingWriteTree_,e);return zj(r,n,i,null)}function cNe(t){return t.fold((e,n,r)=>{if(n&&Ac(n))return[DD(n)];{let i=[];return n&&(i=Yne(n)),or(r,(o,s)=>{i=i.concat(s)}),i}})}function Q_(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(tNe())(t._repo,t._path):t}function lNe(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=xD(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function hNe(){return nNe++}function dNe(t,e,n){let r=e._path,i=ow(t,e),o=nre(t,n),s=t.listenProvider_.startListening(Q_(e),i,o.hashFn,o.onComplete),u=t.syncPointTree_.subtree(r);if(i)Q(!Ac(u.value),"If we're adding a query, it shouldn't be shadowed");else{let c=u.fold((h,f,p)=>{if(!Qe(h)&&f&&Ac(f))return[DD(f).query];{let m=[];return f&&(m=m.concat(Yne(f).map(v=>v.query))),or(p,(v,_)=>{m=m.concat(_)}),m}});for(let h=0;h<c.length;++h){let f=c[h];t.listenProvider_.stopListening(Q_(f),ow(t,f))}}return s}var dj=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},fj=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Zt(this.path_,e);return new t(this.syncTree_,n)}node(){return AD(this.syncTree_,this.path_)}},fNe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},sne=function(t,e,n){if(!t||typeof t!="object")return t;if(Q(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return pNe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return gNe(t[".sv"],e);Q(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},pNe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Q(!1,"Unexpected server value: "+t)}},gNe=function(t,e,n){t.hasOwnProperty("increment")||Q(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&Q(!1,"Unexpected increment value: "+r);let i=e.node();if(Q(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},rre=function(t,e,n,r){return Xj(e,new fj(n,t),r)},Yj=function(t,e,n){return Xj(t,new dj(e),n)};function Xj(t,e,n){let r=t.getPriority().val(),i=sne(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,u=sne(s.getValue(),e,n);return u!==s.getValue()||i!==s.getPriority().val()?new vg(u,an(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new vg(i))),s.forEachChild(jt,(u,c)=>{let h=Xj(c,e.getImmediateChild(u),n);h!==c&&(o=o.updateImmediateChild(u,h))}),o}}var sw=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function ND(t,e){let n=e instanceof vt?e:new vt(e),r=t,i=Ke(n);for(;i!==null;){let o=cu(r.node.children,i)||{children:{},childCount:0};r=new sw(i,r,o),n=Ft(n),i=Ke(n)}return r}function zh(t){return t.node.value}function Jj(t,e){t.node.value=e,pj(t)}function ire(t){return t.node.childCount>0}function mNe(t){return zh(t)===void 0&&!ire(t)}function RD(t,e){or(t.node.children,(n,r)=>{e(new sw(n,t,r))})}function ore(t,e,n,r){n&&!r&&e(t),RD(t,i=>{ore(i,e,!0,r)}),n&&r&&e(t)}function yNe(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function pw(t){return new vt(t.parent===null?t.name:pw(t.parent)+"/"+t.name)}function pj(t){t.parent!==null&&vNe(t.parent,t.name,t)}function vNe(t,e,n){let r=mNe(n),i=Ji(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,pj(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,pj(t))}var _Ne=/[\[\].#$\/\u0000-\u001F\u007F]/,wNe=/[\[\].#$\u0000-\u001F\u007F]/,CU=10*1024*1024,MD=function(t){return typeof t=="string"&&t.length!==0&&!_Ne.test(t)},sre=function(t){return typeof t=="string"&&t.length!==0&&!wNe.test(t)},ENe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),sre(t)},aw=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!bD(t)||t&&typeof t=="object"&&Ji(t,".sv")},ra=function(t,e,n,r){r&&e===void 0||gw(ui(t,"value"),e,n)},gw=function(t,e,n){let r=n instanceof vt?new VU(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Uh(r));if(typeof e=="function")throw new Error(t+"contains a function "+Uh(r)+" with contents = "+e.toString());if(bD(e))throw new Error(t+"contains "+e.toString()+" "+Uh(r));if(typeof e=="string"&&e.length>CU/3&&vm(e)>CU)throw new Error(t+"contains a string greater than "+CU+" utf8 bytes "+Uh(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(or(e,(s,u)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!MD(s)))throw new Error(t+" contains an invalid key ("+s+") "+Uh(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);XAe(r,s),gw(t,u,r),JAe(r)}),i&&o)throw new Error(t+' contains ".value" child '+Uh(r)+" in addition to actual children.")}},INe=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];let o=X_(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!MD(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(YAe);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&ho(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},are=function(t,e,n,r){if(r&&e===void 0)return;let i=ui(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let o=[];or(e,(s,u)=>{let c=new vt(s);if(gw(i,u,Zt(n,c)),Oj(c)===".priority"&&!aw(u))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),INe(i,o)},Zj=function(t,e,n){if(!(n&&e===void 0)){if(bD(e))throw new Error(ui(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!aw(e))throw new Error(ui(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},mw=function(t,e,n,r){if(!(r&&n===void 0)&&!MD(n))throw new Error(ui(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Ag=function(t,e,n,r){if(!(r&&n===void 0)&&!sre(n))throw new Error(ui(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},bNe=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ag(t,e,n,r)},qi=function(t,e){if(Ke(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},ure=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!MD(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!ENe(n))throw new Error(ui(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var gj=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function PD(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!Fj(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function cre(t,e,n){PD(t,n),lre(t,r=>Fj(r,e))}function Hi(t,e,n){PD(t,n),lre(t,r=>ho(r,e)||ho(e,r))}function lre(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(TNe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function TNe(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Bh&&ir("event: "+n.toString()),Cg(r)}}}var hre="repo_interrupt",CNe=25,mj=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new gj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sD(),this.transactionQueueTree_=new sw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function SNe(t,e,n){if(t.stats_=kj(t.repoInfo_),t.forceRestClient_||SAe())t.server_=new QU(t.repoInfo_,(r,i,o,s)=>{ane(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>une(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Dn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Lj(t.repoInfo_,e,(r,i,o,s)=>{ane(t,r,i,o,s)},r=>{une(t,r)},r=>{DNe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=AAe(t.repoInfo_,()=>new ej(t.stats_,t.server_)),t.infoData_=new YU,t.infoSyncTree_=new gD({startListening:(r,i,o,s)=>{let u=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(u=fw(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),u},stopListening:()=>{}}),eB(t,"connected",!1),t.serverSyncTree_=new gD({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(u,c)=>{let h=s(u,c);Hi(t.eventQueue_,r._path,h)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function dre(t){let n=t.infoData_.getNode(new vt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function yw(t){return fNe({timestamp:dre(t)})}function ane(t,e,n,r,i){t.dataUpdateCount++;let o=new vt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=ym(n,h=>an(h));s=aNe(t.serverSyncTree_,o,c,i)}else{let c=an(n);s=Zne(t.serverSyncTree_,o,c,i)}else if(r){let c=ym(n,h=>an(h));s=iNe(t.serverSyncTree_,o,c)}else{let c=an(n);s=fw(t.serverSyncTree_,o,c)}let u=o;s.length>0&&(u=bg(t,o)),Hi(t.eventQueue_,u,s)}function une(t,e){eB(t,"connected",e),e===!1&&NNe(t)}function DNe(t,e){or(e,(n,r)=>{eB(t,n,r)})}function eB(t,e,n){let r=new vt("/.info/"+e),i=an(n);t.infoData_.updateSnapshot(r,i);let o=fw(t.infoSyncTree_,r,i);Hi(t.eventQueue_,r,o)}function kD(t){return t.nextWriteId_++}function ANe(t,e,n){let r=uNe(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let o=an(i).withIndex(e._queryParams.getIndex());hj(t.serverSyncTree_,e,n,!0);let s;if(e._queryParams.loadsAllData())s=fw(t.serverSyncTree_,e._path,o);else{let u=ow(t.serverSyncTree_,e);s=Zne(t.serverSyncTree_,e._path,o,u)}return Hi(t.eventQueue_,e._path,s),mD(t.serverSyncTree_,e,n,null,!0),o},i=>(xg(t,"get for query "+Dn(e)+" failed: "+i),Promise.reject(new Error(i))))}function tB(t,e,n,r,i){xg(t,"set",{path:e.toString(),value:n,priority:r});let o=yw(t),s=an(n,r),u=AD(t.serverSyncTree_,e),c=Yj(s,u,o),h=kD(t),f=Gj(t.serverSyncTree_,e,c,h,!0);PD(t.eventQueue_,f),t.server_.put(e.toString(),s.val(!0),(m,v)=>{let _=m==="ok";_||Vr("set at "+e+" failed: "+m);let E=bc(t.serverSyncTree_,h,!_);Hi(t.eventQueue_,e,E),xc(t,i,m,v)});let p=rB(t,e);bg(t,p),Hi(t.eventQueue_,p,[])}function xNe(t,e,n,r){xg(t,"update",{path:e.toString(),value:n});let i=!0,o=yw(t),s={};if(or(n,(u,c)=>{i=!1,s[u]=rre(Zt(e,u),an(c),t.serverSyncTree_,o)}),i)ir("update() called with empty data.  Don't do anything."),xc(t,r,"ok",void 0);else{let u=kD(t),c=rNe(t.serverSyncTree_,e,s,u);PD(t.eventQueue_,c),t.server_.merge(e.toString(),n,(h,f)=>{let p=h==="ok";p||Vr("update at "+e+" failed: "+h);let m=bc(t.serverSyncTree_,u,!p),v=m.length>0?bg(t,e):e;Hi(t.eventQueue_,v,m),xc(t,r,h,f)}),or(n,h=>{let f=rB(t,Zt(e,h));bg(t,f)}),Hi(t.eventQueue_,e,[])}}function NNe(t){xg(t,"onDisconnectEvents");let e=yw(t),n=sD();JU(t.onDisconnect_,yt(),(i,o)=>{let s=rre(i,o,t.serverSyncTree_,e);Sg(n,i,s)});let r=[];JU(n,yt(),(i,o)=>{r=r.concat(fw(t.serverSyncTree_,i,o));let s=rB(t,i);bg(t,s)}),t.onDisconnect_=sD(),Hi(t.eventQueue_,yt(),r)}function RNe(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&XU(t.onDisconnect_,e),xc(t,n,r,i)})}function cne(t,e,n,r){let i=an(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(o,s)=>{o==="ok"&&Sg(t.onDisconnect_,e,i),xc(t,r,o,s)})}function MNe(t,e,n,r,i){let o=an(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(s,u)=>{s==="ok"&&Sg(t.onDisconnect_,e,o),xc(t,i,s,u)})}function PNe(t,e,n,r){if(L0(n)){ir("onDisconnect().update() called with empty data.  Don't do anything."),xc(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,o)=>{i==="ok"&&or(n,(s,u)=>{let c=an(u);Sg(t.onDisconnect_,Zt(e,s),c)}),xc(t,r,i,o)})}function kNe(t,e,n){let r;Ke(e._path)===".info"?r=hj(t.infoSyncTree_,e,n):r=hj(t.serverSyncTree_,e,n),cre(t.eventQueue_,e._path,r)}function yj(t,e,n){let r;Ke(e._path)===".info"?r=mD(t.infoSyncTree_,e,n):r=mD(t.serverSyncTree_,e,n),cre(t.eventQueue_,e._path,r)}function fre(t){t.persistentConnection_&&t.persistentConnection_.interrupt(hre)}function ONe(t){t.persistentConnection_&&t.persistentConnection_.resume(hre)}function xg(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ir(n,...e)}function xc(t,e,n,r){e&&Cg(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function FNe(t,e,n,r,i,o){xg(t,"transaction on "+e);let s={path:e,update:n,onComplete:r,status:null,order:dne(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=nB(t,e,void 0);s.currentInputSnapshot=u;let c=s.update(u.val());if(c===void 0)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{gw("transaction failed: Data returned ",c,s.path),s.status=0;let h=ND(t.transactionQueueTree_,e),f=zh(h)||[];f.push(s),Jj(h,f);let p;typeof c=="object"&&c!==null&&Ji(c,".priority")?(p=cu(c,".priority"),Q(aw(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(AD(t.serverSyncTree_,e)||Be.EMPTY_NODE).getPriority().val();let m=yw(t),v=an(c,p),_=Yj(v,u,m);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=_,s.currentWriteId=kD(t);let E=Gj(t.serverSyncTree_,e,_,s.currentWriteId,s.applyLocally);Hi(t.eventQueue_,e,E),OD(t,t.transactionQueueTree_)}}function nB(t,e,n){return AD(t.serverSyncTree_,e,n)||Be.EMPTY_NODE}function OD(t,e=t.transactionQueueTree_){if(e||FD(t,e),zh(e)){let n=gre(t,e);Q(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&LNe(t,pw(e),n)}else ire(e)&&RD(e,n=>{OD(t,n)})}function LNe(t,e,n){let r=n.map(h=>h.currentWriteId),i=nB(t,e,r),o=i,s=i.hash();for(let h=0;h<n.length;h++){let f=n[h];Q(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;let p=ei(e,f.path);o=o.updateChild(p,f.currentOutputSnapshotRaw)}let u=o.val(!0),c=e;t.server_.put(c.toString(),u,h=>{xg(t,"transaction put response",{path:c.toString(),status:h});let f=[];if(h==="ok"){let p=[];for(let m=0;m<n.length;m++)n[m].status=2,f=f.concat(bc(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&p.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();FD(t,ND(t.transactionQueueTree_,e)),OD(t,t.transactionQueueTree_),Hi(t.eventQueue_,e,f);for(let m=0;m<p.length;m++)Cg(p[m])}else{if(h==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{Vr("transaction at "+c.toString()+" failed: "+h);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=h}bg(t,e)}},s)}function bg(t,e){let n=pre(t,e),r=pw(n),i=gre(t,n);return VNe(t,i,r),r}function VNe(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){let c=e[u],h=ei(n,c.path),f=!1,p;if(Q(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)f=!0,p=c.abortReason,i=i.concat(bc(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=CNe)f=!0,p="maxretry",i=i.concat(bc(t.serverSyncTree_,c.currentWriteId,!0));else{let m=nB(t,c.path,s);c.currentInputSnapshot=m;let v=e[u].update(m.val());if(v!==void 0){gw("transaction failed: Data returned ",v,c.path);let _=an(v);typeof v=="object"&&v!=null&&Ji(v,".priority")||(_=_.updatePriority(m.getPriority()));let b=c.currentWriteId,T=yw(t),S=Yj(_,m,T);c.currentOutputSnapshotRaw=_,c.currentOutputSnapshotResolved=S,c.currentWriteId=kD(t),s.splice(s.indexOf(b),1),i=i.concat(Gj(t.serverSyncTree_,c.path,S,c.currentWriteId,c.applyLocally)),i=i.concat(bc(t.serverSyncTree_,b,!0))}else f=!0,p="nodata",i=i.concat(bc(t.serverSyncTree_,c.currentWriteId,!0))}Hi(t.eventQueue_,n,i),i=[],f&&(e[u].status=2,function(m){setTimeout(m,Math.floor(0))}(e[u].unwatcher),e[u].onComplete&&(p==="nodata"?r.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):r.push(()=>e[u].onComplete(new Error(p),!1,null))))}FD(t,t.transactionQueueTree_);for(let u=0;u<r.length;u++)Cg(r[u]);OD(t,t.transactionQueueTree_)}function pre(t,e){let n,r=t.transactionQueueTree_;for(n=Ke(e);n!==null&&zh(r)===void 0;)r=ND(r,n),e=Ft(e),n=Ke(e);return r}function gre(t,e){let n=[];return mre(t,e,n),n.sort((r,i)=>r.order-i.order),n}function mre(t,e,n){let r=zh(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);RD(e,i=>{mre(t,i,n)})}function FD(t,e){let n=zh(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Jj(e,n.length>0?n:void 0)}RD(e,r=>{FD(t,r)})}function rB(t,e){let n=pw(pre(t,e)),r=ND(t.transactionQueueTree_,e);return yNe(r,i=>{SU(t,i)}),SU(t,r),ore(r,i=>{SU(t,i)}),n}function SU(t,e){let n=zh(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(Q(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(Q(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(bc(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?Jj(e,void 0):n.length=o+1,Hi(t.eventQueue_,pw(e),i);for(let s=0;s<r.length;s++)Cg(r[s])}}function UNe(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function jNe(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Vr(`Invalid query segment '${n}' in query '${t}'`)}return e}var vj=function(t,e){let n=BNe(t),r=n.namespace;n.domain==="firebase.com"&&ta(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ta("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||yAe();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new JS(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new vt(n.pathString)}},BNe=function(t){let e="",n="",r="",i="",o="",s=!0,u="https",c=443;if(typeof t=="string"){let h=t.indexOf("//");h>=0&&(u=t.substring(0,h-1),t=t.substring(h+2));let f=t.indexOf("/");f===-1&&(f=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(f,p)),f<p&&(i=UNe(t.substring(f,p)));let m=jNe(t.substring(Math.min(t.length,p)));h=e.indexOf(":"),h>=0?(s=u==="https"||u==="wss",c=parseInt(e.substring(h+1),10)):h=e.length;let v=e.slice(0,h);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{let _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),o=r}"ns"in m&&(o=m.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:i,namespace:o}};var lne="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",qNe=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=lne.charAt(n%64),n=Math.floor(n/64);Q(n===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=lne.charAt(e[i]);return Q(s.length===20,"nextPushId: Length should be 20."),s}}();var yD=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Dn(this.snapshot.exportVal())}},vD=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var uw=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var _D=class{constructor(e,n){this._repo=e,this._path=n}cancel(){let e=new Xn;return RNe(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){qi("OnDisconnect.remove",this._path);let e=new Xn;return cne(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){qi("OnDisconnect.set",this._path),ra("OnDisconnect.set",e,this._path,!1);let n=new Xn;return cne(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){qi("OnDisconnect.setWithPriority",this._path),ra("OnDisconnect.setWithPriority",e,this._path,!1),Zj("OnDisconnect.setWithPriority",n,!1);let r=new Xn;return MNe(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){qi("OnDisconnect.update",this._path),are("OnDisconnect.update",e,this._path,!1);let n=new Xn;return PNe(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};var ni=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Qe(this._path)?null:Oj(this._path)}get ref(){return new $i(this._repo,this._path)}get _queryIdentifier(){let e=Yte(this._queryParams),n=Pj(e);return n==="{}"?"default":n}get _queryObject(){return Yte(this._queryParams)}isEqual(e){if(e=Me(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Fj(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+QAe(this._path)}};function LD(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Rc(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ea){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Sc)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Ka)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===jt){if(e!=null&&!aw(e)||n!=null&&!aw(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Q(t.getIndex()instanceof J_||t.getIndex()===Uj,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function VD(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var $i=class t extends ni{constructor(e,n){super(e,n,new nw,!1)}get parent(){let e=Pne(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Tg=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new vt(e),r=Nc(this.ref,e);return new t(this._node.getChild(n),r,jt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Nc(this.ref,r),jt)))}hasChild(e){let n=new vt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function iB(t,e){return t=Me(t),t._checkNotDeleted("ref"),e!==void 0?Nc(t._root,e):t._root}function oB(t,e){t=Me(t),t._checkNotDeleted("refFromURL");let n=vj(e,t._repo.repoInfo_.nodeAdmin);ure("refFromURL",n);let r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&ta("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),iB(t,n.path.toString())}function Nc(t,e){return t=Me(t),Ke(t._path)===null?bNe("child","path",e,!1):Ag("child","path",e,!1),new $i(t._repo,Zt(t._path,e))}function yre(t,e){t=Me(t),qi("push",t._path),ra("push",e,t._path,!0);let n=dre(t._repo),r=qNe(n),i=Nc(t,r),o=Nc(t,r),s;return e!=null?s=UD(o,e).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function vre(t){return qi("remove",t._path),UD(t,null)}function UD(t,e){t=Me(t),qi("set",t._path),ra("set",e,t._path,!1);let n=new Xn;return tB(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function _re(t,e){t=Me(t),qi("setPriority",t._path),Zj("setPriority",e,!1);let n=new Xn;return tB(t._repo,Zt(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function wre(t,e,n){if(qi("setWithPriority",t._path),ra("setWithPriority",e,t._path,!1),Zj("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";let r=new Xn;return tB(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function Ere(t,e){are("update",e,t._path,!1);let n=new Xn;return xNe(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Ire(t){t=Me(t);let e=new uw(()=>{}),n=new cw(e);return ANe(t._repo,t,n).then(r=>new Tg(r,new $i(t._repo,t._path),t._queryParams.getIndex()))}var cw=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new yD("value",this,new Tg(e.snapshotNode,new $i(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new vD(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},wD=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new vD(this,e,n):null}createEvent(e,n){Q(e.childName!=null,"Child events should have a childName.");let r=Nc(new $i(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new yD(e.type,this,new Tg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function vw(t,e,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,h=(f,p)=>{yj(t._repo,t,u),c(f,p)};h.userCallback=n.userCallback,h.context=n.context,n=h}let s=new uw(n,o||void 0),u=e==="value"?new cw(s):new wD(e,s);return kNe(t._repo,t,u),()=>yj(t._repo,t,u)}function jD(t,e,n,r){return vw(t,"value",e,n,r)}function sB(t,e,n,r){return vw(t,"child_added",e,n,r)}function aB(t,e,n,r){return vw(t,"child_changed",e,n,r)}function uB(t,e,n,r){return vw(t,"child_moved",e,n,r)}function cB(t,e,n,r){return vw(t,"child_removed",e,n,r)}function lB(t,e,n){let r=null,i=n?new uw(n):null;e==="value"?r=new cw(i):e&&(r=new wD(e,i)),yj(t._repo,t,r)}var zi=class{},ED=class extends zi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){ra("endAt",this._value,e._path,!0);let n=KU(e._queryParams,this._value,this._key);if(VD(n),Rc(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ni(e._repo,e._path,n,e._orderByCalled)}};function bre(t,e){return mw("endAt","key",e,!0),new ED(t,e)}var _j=class extends zi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){ra("endBefore",this._value,e._path,!1);let n=pxe(e._queryParams,this._value,this._key);if(VD(n),Rc(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ni(e._repo,e._path,n,e._orderByCalled)}};function Tre(t,e){return mw("endBefore","key",e,!0),new _j(t,e)}var ID=class extends zi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){ra("startAt",this._value,e._path,!0);let n=WU(e._queryParams,this._value,this._key);if(VD(n),Rc(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ni(e._repo,e._path,n,e._orderByCalled)}};function Cre(t=null,e){return mw("startAt","key",e,!0),new ID(t,e)}var wj=class extends zi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){ra("startAfter",this._value,e._path,!1);let n=fxe(e._queryParams,this._value,this._key);if(VD(n),Rc(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ni(e._repo,e._path,n,e._orderByCalled)}};function Sre(t,e){return mw("startAfter","key",e,!0),new wj(t,e)}var Ej=class extends zi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ni(e._repo,e._path,hxe(e._queryParams,this._limit),e._orderByCalled)}};function Dre(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Ej(t)}var Ij=class extends zi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ni(e._repo,e._path,dxe(e._queryParams,this._limit),e._orderByCalled)}};function Are(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ij(t)}var bj=class extends zi{constructor(e){super(),this._path=e}_apply(e){LD(e,"orderByChild");let n=new vt(this._path);if(Qe(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new J_(n),i=TD(e._queryParams,r);return Rc(i),new ni(e._repo,e._path,i,!0)}};function xre(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ag("orderByChild","path",t,!1),new bj(t)}var Tj=class extends zi{_apply(e){LD(e,"orderByKey");let n=TD(e._queryParams,ea);return Rc(n),new ni(e._repo,e._path,n,!0)}};function Nre(){return new Tj}var Cj=class extends zi{_apply(e){LD(e,"orderByPriority");let n=TD(e._queryParams,jt);return Rc(n),new ni(e._repo,e._path,n,!0)}};function Rre(){return new Cj}var Sj=class extends zi{_apply(e){LD(e,"orderByValue");let n=TD(e._queryParams,Uj);return Rc(n),new ni(e._repo,e._path,n,!0)}};function Mre(){return new Sj}var Dj=class extends zi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){if(ra("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ED(this._value,this._key)._apply(new ID(this._value,this._key)._apply(e))}};function Pre(t,e){return mw("equalTo","key",e,!0),new Dj(t,e)}function po(t,...e){let n=Me(t);for(let r of e)n=r._apply(n);return n}Qxe($i);eNe($i);var HNe="FIREBASE_DATABASE_EMULATOR_HOST",Aj={},$Ne=!1;function zNe(t,e,n,r){t.repoInfo_=new JS(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function hB(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||ta("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ir("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=vj(o,i),u=s.repoInfo,c,h;typeof process<"u"&&process.env&&(h=process.env[HNe]),h?(c=!0,o=`http://${h}?ns=${u.namespace}`,s=vj(o,i),u=s.repoInfo):c=!s.repoInfo.secure;let f=i&&c?new G_(G_.OWNER):new MU(t.name,t.options,e);ure("Invalid Firebase Database URL",s),Qe(s.path)||ta("Database URL must point to the root of a Firebase Database (not including a child path).");let p=WNe(u,t,f,new RU(t.name,n));return new xj(p,t)}function GNe(t,e){let n=Aj[e];(!n||n[t.key]!==t)&&ta(`Database ${e}(${t.repoInfo_}) has already been deleted.`),fre(t),delete n[t.key]}function WNe(t,e,n,r){let i=Aj[e.name];i||(i={},Aj[e.name]=i);let o=i[t.toURLString()];return o&&ta("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new mj(t,$Ne,n,r),i[t.toURLString()]=o,o}var xj=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(SNe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $i(this._repo,yt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(GNe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ta("Cannot call "+e+" on a deleted database.")}};function kre(){Mne.IS_TRANSPORT_INITIALIZED&&Vr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Ore(){kre(),Y_.forceDisallow()}function Fre(){kre(),pg.forceDisallow(),Y_.forceAllow()}function Lre(t,e,n,r={}){t=Me(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&ta("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ta('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new G_(G_.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:Sd(r.mockUserToken,t.app.options.projectId);o=new G_(s)}zNe(i,e,n,o)}function Vre(t){t=Me(t),t._checkNotDeleted("goOffline"),fre(t._repo)}function Ure(t){t=Me(t),t._checkNotDeleted("goOnline"),ONe(t._repo)}function jre(t,e){pne(t,e)}function KNe(t){Mj(Dd),ha(new cr("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return hB(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),ci(Pte,kte,t),ci(Pte,kte,"esm2017")}var QNe={".sv":"timestamp"};function Bre(){return QNe}function qre(t){return{".sv":{increment:t}}}var Nj=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function Hre(t,e,n){var r;if(t=Me(t),qi("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";let i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,o=new Xn,s=(c,h,f)=>{let p=null;c?o.reject(c):(p=new Tg(f,new $i(t._repo,t._path),jt),o.resolve(new Nj(h,p)))},u=jD(t,()=>{});return FNe(t._repo,t._path,e,s,u,i),o.promise}Lj.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Lj.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};KNe();var YNe="@firebase/database-compat",XNe="1.0.2";var JNe=new lu("@firebase/database-compat"),$re=function(t){let e="FIREBASE WARNING: "+t;JNe.warn(e)};var ZNe=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(ui(t,e)+"must be a boolean.")},eRe=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ui(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var dB=class{constructor(e){this._delegate=e}cancel(e){Se("OnDisconnect.cancel",0,1,arguments.length),Hn("OnDisconnect.cancel","onComplete",e,!0);let n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){Se("OnDisconnect.remove",0,1,arguments.length),Hn("OnDisconnect.remove","onComplete",e,!0);let n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){Se("OnDisconnect.set",1,2,arguments.length),Hn("OnDisconnect.set","onComplete",n,!0);let r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){Se("OnDisconnect.setWithPriority",2,3,arguments.length),Hn("OnDisconnect.setWithPriority","onComplete",r,!0);let i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,n){if(Se("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,$re("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Hn("OnDisconnect.update","onComplete",n,!0);let r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}};var fB=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return Se("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Gh=class t{constructor(e,n){this._database=e,this._delegate=n}val(){return Se("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return Se("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return Se("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return Se("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return Se("DataSnapshot.child",0,1,arguments.length),e=String(e),Ag("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))}hasChild(e){return Se("DataSnapshot.hasChild",1,1,arguments.length),Ag("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return Se("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return Se("DataSnapshot.forEach",1,1,arguments.length),Hn("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new t(this._database,n)))}hasChildren(){return Se("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return Se("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return Se("DataSnapshot.ref",0,0,arguments.length),new Qa(this._database,this._delegate.ref)}get ref(){return this.getRef()}},BD=class t{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var o;Se("Query.on",2,4,arguments.length),Hn("Query.on","callback",n,!1);let s=t.getCancelAndContextArgs_("Query.on",r,i),u=(h,f)=>{n.call(s.context,new Gh(this.database,h),f)};u.userCallback=n,u.context=s.context;let c=(o=s.cancel)===null||o===void 0?void 0:o.bind(s.context);switch(e){case"value":return jD(this._delegate,u,c),n;case"child_added":return sB(this._delegate,u,c),n;case"child_removed":return cB(this._delegate,u,c),n;case"child_changed":return aB(this._delegate,u,c),n;case"child_moved":return uB(this._delegate,u,c),n;default:throw new Error(ui("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(Se("Query.off",0,3,arguments.length),eRe("Query.off",e,!0),Hn("Query.off","callback",n,!0),jN("Query.off","context",r,!0),n){let i=()=>{};i.userCallback=n,i.context=r,lB(this._delegate,e,i)}else lB(this._delegate,e)}get(){return Ire(this._delegate).then(e=>new Gh(this.database,e))}once(e,n,r,i){Se("Query.once",1,4,arguments.length),Hn("Query.once","callback",n,!0);let o=t.getCancelAndContextArgs_("Query.once",r,i),s=new Xn,u=(h,f)=>{let p=new Gh(this.database,h);n&&n.call(o.context,p,f),s.resolve(p)};u.userCallback=n,u.context=o.context;let c=h=>{o.cancel&&o.cancel.call(o.context,h),s.reject(h)};switch(e){case"value":jD(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":sB(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":cB(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":aB(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":uB(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(ui("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return Se("Query.limitToFirst",1,1,arguments.length),new t(this.database,po(this._delegate,Dre(e)))}limitToLast(e){return Se("Query.limitToLast",1,1,arguments.length),new t(this.database,po(this._delegate,Are(e)))}orderByChild(e){return Se("Query.orderByChild",1,1,arguments.length),new t(this.database,po(this._delegate,xre(e)))}orderByKey(){return Se("Query.orderByKey",0,0,arguments.length),new t(this.database,po(this._delegate,Nre()))}orderByPriority(){return Se("Query.orderByPriority",0,0,arguments.length),new t(this.database,po(this._delegate,Rre()))}orderByValue(){return Se("Query.orderByValue",0,0,arguments.length),new t(this.database,po(this._delegate,Mre()))}startAt(e=null,n){return Se("Query.startAt",0,2,arguments.length),new t(this.database,po(this._delegate,Cre(e,n)))}startAfter(e=null,n){return Se("Query.startAfter",0,2,arguments.length),new t(this.database,po(this._delegate,Sre(e,n)))}endAt(e=null,n){return Se("Query.endAt",0,2,arguments.length),new t(this.database,po(this._delegate,bre(e,n)))}endBefore(e=null,n){return Se("Query.endBefore",0,2,arguments.length),new t(this.database,po(this._delegate,Tre(e,n)))}equalTo(e,n){return Se("Query.equalTo",1,2,arguments.length),new t(this.database,po(this._delegate,Pre(e,n)))}toString(){return Se("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return Se("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(Se("Query.isEqual",1,1,arguments.length),!(e instanceof t)){let n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){let i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,Hn(e,"cancel",i.cancel,!0),i.context=r,jN(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(ui(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new Qa(this.database,new $i(this._delegate._repo,this._delegate._path))}},Qa=class t extends BD{constructor(e,n){super(e,new ni(n._repo,n._path,new nw,!1)),this.database=e,this._delegate=n}getKey(){return Se("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return Se("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new t(this.database,Nc(this._delegate,e))}getParent(){Se("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new t(this.database,e):null}getRoot(){return Se("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)}set(e,n){Se("Reference.set",1,2,arguments.length),Hn("Reference.set","onComplete",n,!0);let r=UD(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(Se("Reference.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,$re("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qi("Reference.update",this._delegate._path),Hn("Reference.update","onComplete",n,!0);let r=Ere(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){Se("Reference.setWithPriority",2,3,arguments.length),Hn("Reference.setWithPriority","onComplete",r,!0);let i=wre(this._delegate,e,n);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){Se("Reference.remove",0,1,arguments.length),Hn("Reference.remove","onComplete",e,!0);let n=vre(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){Se("Reference.transaction",1,3,arguments.length),Hn("Reference.transaction","transactionUpdate",e,!1),Hn("Reference.transaction","onComplete",n,!0),ZNe("Reference.transaction","applyLocally",r,!0);let i=Hre(this._delegate,e,{applyLocally:r}).then(o=>new fB(o.committed,new Gh(this.database,o.snapshot)));return n&&i.then(o=>n(null,o.committed,o.snapshot),o=>n(o,!1,null)),i}setPriority(e,n){Se("Reference.setPriority",1,2,arguments.length),Hn("Reference.setPriority","onComplete",n,!0);let r=_re(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){Se("Reference.push",0,2,arguments.length),Hn("Reference.push","onComplete",n,!0);let r=yre(this._delegate,e),i=r.then(s=>new t(this.database,s));n&&i.then(()=>n(null),s=>n(s));let o=new t(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return qi("Reference.onDisconnect",this._delegate._path),new dB(new _D(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var Wh=class{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Ore,forceLongPolling:Fre}}useEmulator(e,n,r={}){Lre(this._delegate,e,n,r)}ref(e){if(Se("database.ref",0,1,arguments.length),e instanceof Qa){let n=oB(this._delegate,e.toString());return new Qa(this,n)}else{let n=iB(this._delegate,e);return new Qa(this,n)}}refFromURL(e){Se("database.refFromURL",1,1,arguments.length);let r=oB(this._delegate,e);return new Qa(this,r)}goOffline(){return Se("database.goOffline",0,0,arguments.length),Vre(this._delegate)}goOnline(){return Se("database.goOnline",0,0,arguments.length),Ure(this._delegate)}};Wh.ServerValue={TIMESTAMP:Bre(),increment:t=>qre(t)};function tRe({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:o,nodeAdmin:s=!1}){Mj(n);let u=new BN("database-standalone"),c=new V0("auth-internal",u);c.setComponent(new cr("auth-internal",()=>r,"PRIVATE"));let h;return i&&(h=new V0("app-check-internal",u),h.setComponent(new cr("app-check-internal",()=>i,"PRIVATE"))),{instance:new Wh(hB(t,c,h,e,s),t),namespace:o}}var nRe=Object.freeze({__proto__:null,initStandalone:tRe});var rRe=Wh.ServerValue;function iRe(t){t.INTERNAL.registerComponent(new cr("database-compat",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Wh(i,r)},"PUBLIC").setServiceProps({Reference:Qa,Query:BD,Database:Wh,DataSnapshot:Gh,enableLogging:jre,INTERNAL:nRe,ServerValue:rRe}).setMultipleInstances(!0)),t.registerVersion(YNe,XNe)}iRe(nn);function _w(t,e,n="on",r=fa){return new Ve(i=>{let o=null;return o=t[n](e,(s,u)=>{r.schedule(()=>{i.next({snapshot:s,prevKey:u})}),n==="once"&&r.schedule(()=>i.complete())},s=>{r.schedule(()=>i.error(s))}),n==="on"?{unsubscribe(){o!=null&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(le(i=>{let{snapshot:o,prevKey:s}=i,u=null;return o.exists()&&(u=o.key),{type:e,payload:o,prevKey:s,key:u}}),Tm())}function oRe(t){return typeof t=="string"}function sRe(t){return typeof t.exportVal=="function"}function Qre(t){return t==null}function Yre(t){return typeof t.set=="function"}function zre(t,e){return Yre(e)?e:t.ref(e)}function Xre(t,e){if(oRe(t))return e.stringCase();if(Yre(t))return e.firebaseCase();if(sRe(t))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}function Jre(t){return(Qre(t)||t.length===0)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Zre(t,e,n){e=Jre(e);let r=e.map(i=>_w(t,i,"on",n));return jd(...r)}function aRe(t,e,n){let r=Zre(t,e).pipe(ds((i,o)=>[...i,o],[]));return cRe(t,r,n)}function uRe(t,e){return _w(t,"value","on",e).pipe(le(n=>{let r;return n.payload.forEach(i=>(r=i.key,!1)),{data:n,lastKeyToLoad:r}}))}function cRe(t,e,n){return uRe(t,n).pipe(hR(e),le(([i,o])=>{let s=i.lastKeyToLoad,u=o.map(c=>c.key);return{actions:o,lastKeyToLoad:s,loadedKeys:u}}),cR(i=>i.loadedKeys.indexOf(i.lastKeyToLoad)===-1),le(i=>i.actions))}function Gre(t,e){return function(r,i){return Xre(r,{stringCase:()=>t.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function lRe(t){return function(n){return n?Xre(n,{stringCase:()=>t.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):t.remove()}}function hRe(t,e,n){return _w(t,"value","once",n).pipe(Tt(r=>{let i=[pe(r)];return e.forEach(o=>i.push(_w(t,o,"on",n))),jd(...i).pipe(ds(fRe,[]))}),Im())}function eie(t,e){let n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function dRe(t,e){if(Qre(e))return 0;{let n=eie(t,e);return n===-1?t.length:n+1}}function fRe(t,e){var u;let{payload:n,prevKey:r,key:i}=e,o=eie(t,i),s=dRe(t,r);switch(e.type){case"value":if((u=e.payload)!=null&&u.exists()){let c=null;e.payload.forEach(h=>{let f={payload:h,type:"value",prevKey:c,key:h.key};return c=h.key,t=[...t,f],!1})}return t;case"child_added":if(o>-1){let c=t[o-1];((c==null?void 0:c.key)||null)!==r&&(t=t.filter(h=>h.payload.key!==n.key),t.splice(s,0,e))}else{if(r==null)return[e,...t];t=t.slice(),t.splice(s,0,e)}return t;case"child_removed":return t.filter(c=>c.payload.key!==n.key);case"child_changed":return t.map(c=>c.payload.key===i?e:c);case"child_moved":if(o>-1){let c=t.splice(o,1)[0];return t=t.slice(),t.splice(s,0,c),t}return t;default:return t}}function Wre(t,e,n){return e=Jre(e),hRe(t,e,n)}function pRe(t,e){let n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Gre(r,"update"),set:Gre(r,"set"),push:i=>r.push(i),remove:lRe(r),snapshotChanges(i){return Wre(t,i,n).pipe(Qt)},stateChanges(i){return Zre(t,i,n).pipe(Qt)},auditTrail(i){return aRe(t,i,n).pipe(Qt)},valueChanges(i,o){return Wre(t,i,n).pipe(le(u=>u.map(c=>o&&o.idField?Xe(X({},c.payload.val()),{[o.idField]:c.key}):c.payload.val())),Qt)}}}function Kre(t,e){return function(){return _w(t,"value","on",e)}}function gRe(t,e){return{query:t,snapshotChanges(){return Kre(t,e.schedulers.outsideAngular)().pipe(Qt)},update(n){return t.ref.update(n)},set(n){return t.ref.set(n)},remove(){return t.ref.remove()},valueChanges(){return Kre(t,e.schedulers.outsideAngular)().pipe(Qt,le(r=>r.payload.exists()?r.payload.val():null))}}}var mRe=new J("angularfire2.realtimeDatabaseURL"),yRe=new J("angularfire2.database.use-emulator"),vRe=(()=>{let e=class e{constructor(r,i,o,s,u,c,h,f,p,m,v,_,E,b,T){R(this,"schedulers");R(this,"database");this.schedulers=c;let S=h,A=xa(r,u,i);f&&Sy(A,u,p,v,_,E,m,b),this.database=Mu(`${A.name}.database.${o}`,"AngularFireDatabase",A.name,()=>{let x=u.runOutsideAngular(()=>A.database(o||void 0));return S&&x.useEmulator(...S),x},[S])}list(r,i){let o=this.schedulers.ngZone.runOutsideAngular(()=>zre(this.database,r)),s=o;return i&&(s=i(o)),pRe(s,this)}object(r){let i=this.schedulers.ngZone.runOutsideAngular(()=>zre(this.database,r));return gRe(i,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}};R(e,"\u0275fac",function(i){return new(i||e)(M(Ns),M(Rs,8),M(mRe,8),M(Gn),M(ke),M(Nu),M(yRe,8),M(Na,8),M(wy,8),M(Ey,8),M(Iy,8),M(by,8),M(Ty,8),M(Cy,8),M(Fo,8))}),R(e,"\u0275prov",Y({token:e,factory:e.\u0275fac,providedIn:"any"}));let t=e;return t})(),tie=(()=>{let e=class e{constructor(){nn.registerVersion("angularfire",Lo.full,"rtdb-compat")}};R(e,"\u0275fac",function(i){return new(i||e)}),R(e,"\u0275mod",ct({type:e})),R(e,"\u0275inj",ut({providers:[vRe]}));let t=e;return t})();var qD={production:!0,firebaseConfig:{apiKey:"AIzaSyDVrlLHmklvWSbVKs-Gx6GgMTpXs-q9pFw",authDomain:"spicy-sam-2ac84.firebaseapp.com",databaseURL:"https://spicy-sam-2ac84-default-rtdb.firebaseio.com",projectId:"spicy-sam-2ac84",storageBucket:"spicy-sam-2ac84.appspot.com",messagingSenderId:"384023288020",appId:"1:384023288020:web:e960888ca568d32ab50341",measurementId:"G-BCF5VE9XMV"}};var _Re=(()=>{class t{transform(n){return Object.keys(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=Lm({name:"keys",type:t,pure:!0}),t})();var nie=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ct({type:t}),t.\u0275inj=ut({providers:[_Re],imports:[[ff,_C,wC]]}),t})();function rie(t){return new z(3e3,!1)}function wRe(){return new z(3100,!1)}function ERe(){return new z(3101,!1)}function IRe(t){return new z(3001,!1)}function bRe(t){return new z(3003,!1)}function TRe(t){return new z(3004,!1)}function CRe(t,e){return new z(3005,!1)}function SRe(){return new z(3006,!1)}function DRe(){return new z(3007,!1)}function ARe(t,e){return new z(3008,!1)}function xRe(t){return new z(3002,!1)}function NRe(t,e,n,r,i){return new z(3010,!1)}function RRe(){return new z(3011,!1)}function MRe(){return new z(3012,!1)}function PRe(){return new z(3200,!1)}function kRe(){return new z(3202,!1)}function ORe(){return new z(3013,!1)}function FRe(t){return new z(3014,!1)}function LRe(t){return new z(3015,!1)}function VRe(t){return new z(3016,!1)}function URe(t,e){return new z(3404,!1)}function jRe(t){return new z(3502,!1)}function BRe(t){return new z(3503,!1)}function qRe(){return new z(3300,!1)}function HRe(t){return new z(3504,!1)}function $Re(t){return new z(3301,!1)}function zRe(t,e){return new z(3302,!1)}function GRe(t){return new z(3303,!1)}function WRe(t,e){return new z(3400,!1)}function KRe(t){return new z(3401,!1)}function QRe(t){return new z(3402,!1)}function YRe(t,e){return new z(3505,!1)}function Mc(t){switch(t.length){case 0:return new Ec;case 1:return t[0];default:return new O_(t)}}function yie(t,e,n=new Map,r=new Map){let i=[],o=[],s=-1,u=null;if(e.forEach(c=>{let h=c.get("offset"),f=h==s,p=f&&u||new Map;c.forEach((m,v)=>{let _=v,E=m;if(v!=="offset")switch(_=t.normalizePropertyName(_,i),E){case LS:E=n.get(v);break;case Ys:E=r.get(v);break;default:E=t.normalizeStyleValue(v,_,E,i);break}p.set(_,E)}),f||o.push(p),u=p,s=h}),i.length)throw jRe(i);return o}function OB(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&pB(n,"start",t)));break;case"done":t.onDone(()=>r(n&&pB(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&pB(n,"destroy",t)));break}}function pB(t,e,n){let r=n.totalTime,i=!!n.disabled,o=FB(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,r==null?t.totalTime:r,i),s=t._data;return s!=null&&(o._data=s),o}function FB(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Wi(t,e,n){let r=t.get(e);return r||t.set(e,r=n),r}function iie(t){let e=t.indexOf(":"),n=t.substring(1,e),r=t.slice(e+1);return[n,r]}var XRe=typeof document>"u"?null:document.documentElement;function LB(t){let e=t.parentNode||t.host||null;return e===XRe?null:e}function JRe(t){return t.substring(1,6)=="ebkit"}var Kh=null,oie=!1;function ZRe(t){Kh||(Kh=eMe()||{},oie=Kh.style?"WebkitAppearance"in Kh.style:!1);let e=!0;return Kh.style&&!JRe(t)&&(e=t in Kh.style,!e&&oie&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Kh.style)),e}function eMe(){return typeof document<"u"?document.body:null}function vie(t,e){for(;e;){if(e===t)return!0;e=LB(e)}return!1}function _ie(t,e,n){if(n)return Array.from(t.querySelectorAll(e));let r=t.querySelector(e);return r?[r]:[]}var VB=(()=>{let e=class e{validateStyleProperty(r){return ZRe(r)}matchesElement(r,i){return!1}containsElement(r,i){return vie(r,i)}getParentElement(r){return LB(r)}query(r,i,o){return _ie(r,i,o)}computeStyle(r,i,o){return o||""}animate(r,i,o,s,u,c=[],h){return new Ec(o,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})(),Sw=(()=>{let e=class e{};e.NOOP=new VB;let t=e;return t})(),Xh=class{};var tMe=1e3,wie="{{",nMe="}}",Eie="ng-enter",wB="ng-leave",HD="ng-trigger",KD=".ng-trigger",sie="ng-animating",EB=".ng-animating";function Ya(t){if(typeof t=="number")return t;let e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:IB(parseFloat(e[1]),e[2])}function IB(t,e){switch(e){case"s":return t*tMe;default:return t}}function QD(t,e,n){return t.hasOwnProperty("duration")?t:rMe(t,e,n)}function rMe(t,e,n){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,o=0,s="";if(typeof t=="string"){let u=t.match(r);if(u===null)return e.push(rie(t)),{duration:0,delay:0,easing:""};i=IB(parseFloat(u[1]),u[2]);let c=u[3];c!=null&&(o=IB(parseFloat(c),u[4]));let h=u[5];h&&(s=h)}else i=t;if(!n){let u=!1,c=e.length;i<0&&(e.push(wRe()),u=!0),o<0&&(e.push(ERe()),u=!0),u&&e.splice(c,0,rie(t))}return{duration:i,delay:o,easing:s}}function Dw(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Iie(t){let e=new Map;return Object.keys(t).forEach(n=>{let r=t[n];e.set(n,r)}),e}function iMe(t){return t.length?t[0]instanceof Map?t:t.map(e=>Iie(e)):[]}function Rg(t,e=new Map,n){if(n)for(let[r,i]of n)e.set(r,i);for(let[r,i]of t)e.set(r,i);return e}function ia(t,e,n){e.forEach((r,i)=>{let o=UB(i);n&&!n.has(i)&&n.set(i,t.style[o]),t.style[o]=r})}function Yh(t,e){e.forEach((n,r)=>{let i=UB(r);t.style[i]=""})}function ww(t){return Array.isArray(t)?t.length==1?t[0]:Lee(t):t}function oMe(t,e,n){let r=e.params||{},i=bie(t);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||n.push(IRe(o))})}var bB=new RegExp(`${wie}\\s*(.+?)\\s*${nMe}`,"g");function bie(t){let e=[];if(typeof t=="string"){let n;for(;n=bB.exec(t);)e.push(n[1]);bB.lastIndex=0}return e}function Iw(t,e,n){let r=t.toString(),i=r.replace(bB,(o,s)=>{let u=e[s];return u==null&&(n.push(bRe(s)),u=""),u.toString()});return i==r?t:i}function YD(t){let e=[],n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}var sMe=/-+([a-z0-9])/g;function UB(t){return t.replace(sMe,(...e)=>e[1].toUpperCase())}function aMe(t,e){return t===0||e===0}function uMe(t,e,n){if(n.size&&e.length){let r=e[0],i=[];if(n.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(u=>s.set(u,Tie(t,u)))}}return e}function Gi(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw TRe(e.type)}}function Tie(t,e){return window.getComputedStyle(t)[e]}var cMe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),XD=class extends Xh{normalizePropertyName(e,n){return UB(e)}normalizeStyleValue(e,n,r,i){let o="",s=r.toString().trim();if(cMe.has(n)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let u=r.match(/^[+-]?[\d\.]+([a-z]*)$/);u&&u[1].length==0&&i.push(CRe(e,r))}return s+o}};var JD="*";function lMe(t,e){let n=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(r=>hMe(r,n,e)):n.push(t),n}function hMe(t,e,n){if(t[0]==":"){let c=dMe(t,n);if(typeof c=="function"){e.push(c);return}t=c}let r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return n.push(LRe(t)),e;let i=r[1],o=r[2],s=r[3];e.push(aie(i,s));let u=i==JD&&s==JD;o[0]=="<"&&!u&&e.push(aie(s,i))}function dMe(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,r)=>parseFloat(r)>parseFloat(n);case":decrement":return(n,r)=>parseFloat(r)<parseFloat(n);default:return e.push(VRe(t)),"* => *"}}var $D=new Set(["true","1"]),zD=new Set(["false","0"]);function aie(t,e){let n=$D.has(t)||zD.has(t),r=$D.has(e)||zD.has(e);return(i,o)=>{let s=t==JD||t==i,u=e==JD||e==o;return!s&&n&&typeof i=="boolean"&&(s=i?$D.has(t):zD.has(t)),!u&&r&&typeof o=="boolean"&&(u=o?$D.has(e):zD.has(e)),s&&u}}var Cie=":self",fMe=new RegExp(`s*${Cie}s*,?`,"g");function Sie(t,e,n,r){return new TB(t).build(e,n,r)}var uie="",TB=class{constructor(e){this._driver=e}build(e,n,r){let i=new CB(n);return this._resetContextStyleTimingState(i),Gi(this,ww(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=uie,e.collectedStyles=new Map,e.collectedStyles.set(uie,new Map),e.currentTime=0}visitTrigger(e,n){let r=n.queryCount=0,i=n.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&n.errors.push(SRe()),e.definitions.forEach(u=>{if(this._resetContextStyleTimingState(n),u.type==0){let c=u,h=c.name;h.toString().split(/\s*,\s*/).forEach(f=>{c.name=f,o.push(this.visitState(c,n))}),c.name=h}else if(u.type==1){let c=this.visitTransition(u,n);r+=c.queryCount,i+=c.depCount,s.push(c)}else n.errors.push(DRe())}),{type:7,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,n){let r=this.visitStyle(e.styles,n),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};if(r.styles.forEach(u=>{u instanceof Map&&u.forEach(c=>{bie(c).forEach(h=>{s.hasOwnProperty(h)||o.add(h)})})}),o.size){let u=YD(o.values());n.errors.push(ARe(e.name,u))}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let r=Gi(this,ww(e.animation),n);return{type:1,matchers:lMe(e.expr,n.errors),animation:r,queryCount:n.queryCount,depCount:n.depCount,options:Qh(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(r=>Gi(this,r,n)),options:Qh(e.options)}}visitGroup(e,n){let r=n.currentTime,i=0,o=e.steps.map(s=>{n.currentTime=r;let u=Gi(this,s,n);return i=Math.max(i,n.currentTime),u});return n.currentTime=i,{type:3,steps:o,options:Qh(e.options)}}visitAnimate(e,n){let r=yMe(e.timings,n.errors);n.currentAnimateTimings=r;let i,o=e.styles?e.styles:Fh({});if(o.type==5)i=this.visitKeyframes(o,n);else{let s=e.styles,u=!1;if(!s){u=!0;let h={};r.easing&&(h.easing=r.easing),s=Fh(h)}n.currentTime+=r.duration+r.delay;let c=this.visitStyle(s,n);c.isEmptyStep=u,i=c}return n.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,n){let r=this._makeStyleAst(e,n);return this._validateStyleAst(r,n),r}_makeStyleAst(e,n){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let u of i)typeof u=="string"?u===Ys?r.push(u):n.errors.push(xRe(u)):r.push(Iie(u));let o=!1,s=null;return r.forEach(u=>{if(u instanceof Map&&(u.has("easing")&&(s=u.get("easing"),u.delete("easing")),!o)){for(let c of u.values())if(c.toString().indexOf(wie)>=0){o=!0;break}}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,n){let r=n.currentAnimateTimings,i=n.currentTime,o=n.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((u,c)=>{let h=n.collectedStyles.get(n.currentQuerySelector),f=h.get(c),p=!0;f&&(o!=i&&o>=f.startTime&&i<=f.endTime&&(n.errors.push(NRe(c,f.startTime,f.endTime,o,i)),p=!1),o=f.startTime),p&&h.set(c,{startTime:o,endTime:i}),n.options&&oMe(u,n.options,n.errors)})})}visitKeyframes(e,n){let r={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(RRe()),r;let i=1,o=0,s=[],u=!1,c=!1,h=0,f=e.steps.map(T=>{let S=this._makeStyleAst(T,n),A=S.offset!=null?S.offset:mMe(S.styles),x=0;return A!=null&&(o++,x=S.offset=A),c=c||x<0||x>1,u=u||x<h,h=x,s.push(x),S});c&&n.errors.push(MRe()),u&&n.errors.push(PRe());let p=e.steps.length,m=0;o>0&&o<p?n.errors.push(kRe()):o==0&&(m=i/(p-1));let v=p-1,_=n.currentTime,E=n.currentAnimateTimings,b=E.duration;return f.forEach((T,S)=>{let A=m>0?S==v?1:m*S:s[S],x=A*b;n.currentTime=_+E.delay+x,E.duration=x,this._validateStyleAst(T,n),T.offset=A,r.styles.push(T)}),r}visitReference(e,n){return{type:8,animation:Gi(this,ww(e.animation),n),options:Qh(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:Qh(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:Qh(e.options)}}visitQuery(e,n){let r=n.currentQuerySelector,i=e.options||{};n.queryCount++,n.currentQuery=e;let[o,s]=pMe(e.selector);n.currentQuerySelector=r.length?r+" "+o:o,Wi(n.collectedStyles,n.currentQuerySelector,new Map);let u=Gi(this,ww(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:u,originalSelector:e.selector,options:Qh(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(ORe());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:QD(e.timings,n.errors,!0);return{type:12,animation:Gi(this,ww(e.animation),n),timings:r,options:null}}};function pMe(t){let e=!!t.split(/\s*,\s*/).find(n=>n==Cie);return e&&(t=t.replace(fMe,"")),t=t.replace(/@\*/g,KD).replace(/@\w+/g,n=>KD+"-"+n.slice(1)).replace(/:animating/g,EB),[t,e]}function gMe(t){return t?Dw(t):null}var CB=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function mMe(t){if(typeof t=="string")return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){let r=n;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function yMe(t,e){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let o=QD(t,e).duration;return gB(o,0,"")}let n=t;if(n.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=gB(0,0,"");return o.dynamic=!0,o.strValue=n,o}let i=QD(n,e);return gB(i.duration,i.delay,i.easing)}function Qh(t){return t?(t=Dw(t),t.params&&(t.params=gMe(t.params))):t={},t}function gB(t,e,n){return{duration:t,delay:e,easing:n}}function jB(t,e,n,r,i,o,s=null,u=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:u}}var bw=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},vMe=1,_Me=":enter",wMe=new RegExp(_Me,"g"),EMe=":leave",IMe=new RegExp(EMe,"g");function Die(t,e,n,r,i,o=new Map,s=new Map,u,c,h=[]){return new SB().buildKeyframes(t,e,n,r,i,o,s,u,c,h)}var SB=class{buildKeyframes(e,n,r,i,o,s,u,c,h,f=[]){h=h||new bw;let p=new DB(e,n,h,i,o,f,[]);p.options=c;let m=c.delay?Ya(c.delay):0;p.currentTimeline.delayNextStep(m),p.currentTimeline.setStyles([s],null,p.errors,c),Gi(this,r,p);let v=p.timelines.filter(_=>_.containsAnimation());if(v.length&&u.size){let _;for(let E=v.length-1;E>=0;E--){let b=v[E];if(b.element===n){_=b;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([u],null,p.errors,c)}return v.length?v.map(_=>_.buildKeyframes()):[jB(n,[],[],[],0,m,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let r=n.subInstructions.get(n.element);if(r){let i=n.createSubContext(e.options),o=n.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&n.transformIntoNewTimeline(s)}n.previousNode=e}visitAnimateRef(e,n){let r=n.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,r),this.visitReference(e.animation,r),n.transformIntoNewTimeline(r.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,r){var i;for(let o of e){let s=o==null?void 0:o.delay;if(s){let u=typeof s=="number"?s:Ya(Iw(s,(i=o==null?void 0:o.params)!=null?i:{},n.errors));r.delayNextStep(u)}}}_visitSubInstructions(e,n,r){let o=n.currentTimeline.currentTime,s=r.duration!=null?Ya(r.duration):null,u=r.delay!=null?Ya(r.delay):null;return s!==0&&e.forEach(c=>{let h=n.appendInstructionToTimeline(c,s,u);o=Math.max(o,h.duration+h.delay)}),o}visitReference(e,n){n.updateOptions(e.options,!0),Gi(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let r=n.subContextCount,i=n,o=e.options;if(o&&(o.params||o.delay)&&(i=n.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==6&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=ZD);let s=Ya(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>Gi(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let r=[],i=n.currentTimeline.currentTime,o=e.options&&e.options.delay?Ya(e.options.delay):0;e.steps.forEach(s=>{let u=n.createSubContext(e.options);o&&u.delayNextStep(o),Gi(this,s,u),i=Math.max(i,u.currentTimeline.currentTime),r.push(u.currentTimeline)}),r.forEach(s=>n.currentTimeline.mergeTimelineCollectedStyles(s)),n.transformIntoNewTimeline(i),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let r=e.strValue,i=n.params?Iw(r,n.params,n.errors):r;return QD(i,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let r=n.currentAnimateTimings=this._visitTiming(e.timings,n),i=n.currentTimeline;r.delay&&(n.incrementTime(r.delay),i.snapshotCurrentStyles());let o=e.style;o.type==5?this.visitKeyframes(o,n):(n.incrementTime(r.duration),this.visitStyle(o,n),i.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let r=n.currentTimeline,i=n.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let r=n.currentAnimateTimings,i=n.currentTimeline.duration,o=r.duration,u=n.createSubContext().currentTimeline;u.easing=r.easing,e.styles.forEach(c=>{let h=c.offset||0;u.forwardTime(h*o),u.setStyles(c.styles,c.easing,n.errors,n.options),u.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(u),n.transformIntoNewTimeline(i+o),n.previousNode=e}visitQuery(e,n){let r=n.currentTimeline.currentTime,i=e.options||{},o=i.delay?Ya(i.delay):0;o&&(n.previousNode.type===6||r==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=ZD);let s=r,u=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,n.errors);n.currentQueryTotal=u.length;let c=null;u.forEach((h,f)=>{n.currentQueryIndex=f;let p=n.createSubContext(e.options,h);o&&p.delayNextStep(o),h===n.element&&(c=p.currentTimeline),Gi(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe();let m=p.currentTimeline.currentTime;s=Math.max(s,m)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(s),c&&(n.currentTimeline.mergeTimelineCollectedStyles(c),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let r=n.parentContext,i=n.currentTimeline,o=e.timings,s=Math.abs(o.duration),u=s*(n.currentQueryTotal-1),c=s*n.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=u-c;break;case"full":c=r.currentStaggerTime;break}let f=n.currentTimeline;c&&f.delayNextStep(c);let p=f.currentTime;Gi(this,e.animation,n),n.previousNode=e,r.currentStaggerTime=i.currentTime-p+(i.startTime-r.currentTimeline.startTime)}},ZD={},DB=class t{constructor(e,n,r,i,o,s,u,c){this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=u,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ZD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new eA(this._driver,n,0),u.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Ya(r.duration)),r.delay!=null&&(i.delay=Ya(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(u=>{(!n||!s.hasOwnProperty(u))&&(s[u]=Iw(o[u],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let r=e.params={};Object.keys(n).forEach(i=>{r[i]=n[i]})}}return e}createSubContext(e=null,n,r){let i=n||this.element,o=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=ZD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,r){let i={duration:n!=null?n:e.duration,delay:this.currentTimeline.currentTime+(r!=null?r:0)+e.delay,easing:""},o=new AB(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,r,i,o,s){let u=[];if(i&&u.push(this.element),e.length>0){e=e.replace(wMe,"."+this._enterClassName),e=e.replace(IMe,"."+this._leaveClassName);let c=r!=1,h=this._driver.query(this.element,e,c);r!==0&&(h=r<0?h.slice(h.length+r,h.length):h.slice(0,r)),u.push(...h)}return!o&&u.length==0&&s.push(FRe(n)),u}},eA=class t{constructor(e,n,r,i){this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=vMe,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,r]of this._globalTimelineStyles)this._backFill.set(n,r||Ys),this._currentKeyframe.set(n,Ys);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,r,i){var u;n&&this._previousKeyframe.set("easing",n);let o=i&&i.params||{},s=bMe(e,this._globalTimelineStyles);for(let[c,h]of s){let f=Iw(h,o,r);this._pendingStyles.set(c,f),this._localTimelineStyles.has(c)||this._backFill.set(c,(u=this._globalTimelineStyles.get(c))!=null?u:Ys),this._updateStyle(c,f)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,r)=>{let i=this._styleSummary.get(r);(!i||n.time>i.time)&&this._updateStyle(r,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((u,c)=>{let h=Rg(u,new Map,this._backFill);h.forEach((f,p)=>{f===LS?e.add(p):f===Ys&&n.add(p)}),r||h.set("offset",c/this.duration),i.push(h)});let o=e.size?YD(e.values()):[],s=n.size?YD(n.values()):[];if(r){let u=i[0],c=new Map(u);u.set("offset",0),c.set("offset",1),i=[u,c]}return jB(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},AB=class extends eA{constructor(e,n,r,i,o,s,u=!1){super(e,n,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=u,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&n){let o=[],s=r+n,u=n/s,c=Rg(e[0]);c.set("offset",0),o.push(c);let h=Rg(e[0]);h.set("offset",cie(u)),o.push(h);let f=e.length-1;for(let p=1;p<=f;p++){let m=Rg(e[p]),v=m.get("offset"),_=n+v*r;m.set("offset",cie(_/s)),o.push(m)}r=s,n=0,i="",e=o}return jB(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}};function cie(t,e=3){let n=Math.pow(10,e-1);return Math.round(t*n)/n}function bMe(t,e){let n=new Map,r;return t.forEach(i=>{if(i==="*"){r=r||e.keys();for(let o of r)n.set(o,Ys)}else Rg(i,n)}),n}function lie(t,e,n,r,i,o,s,u,c,h,f,p,m){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:u,queriedElements:c,preStyleProps:h,postStyleProps:f,totalTime:p,errors:m}}var mB={},tA=class{constructor(e,n,r){this._triggerName=e,this.ast=n,this._stateStyles=r}match(e,n,r,i){return TMe(this.ast.matchers,e,n,r,i)}buildStyles(e,n,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e==null?void 0:e.toString())||i),i?i.buildStyles(n,r):new Map}build(e,n,r,i,o,s,u,c,h,f){var ge;let p=[],m=this.ast.options&&this.ast.options.params||mB,v=u&&u.params||mB,_=this.buildStyles(r,v,p),E=c&&c.params||mB,b=this.buildStyles(i,E,p),T=new Set,S=new Map,A=new Map,x=i==="void",H={params:CMe(E,m),delay:(ge=this.ast.options)==null?void 0:ge.delay},N=f?[]:Die(e,n,this.ast.animation,o,s,_,b,H,h,p),ie=0;if(N.forEach(en=>{ie=Math.max(en.duration+en.delay,ie)}),p.length)return lie(n,this._triggerName,r,i,x,_,b,[],[],S,A,ie,p);N.forEach(en=>{let D=en.element,Xa=Wi(S,D,new Set);en.preStyleProps.forEach(Ja=>Xa.add(Ja));let mo=Wi(A,D,new Set);en.postStyleProps.forEach(Ja=>mo.add(Ja)),D!==n&&T.add(D)});let Ye=YD(T.values());return lie(n,this._triggerName,r,i,x,_,b,N,Ye,S,A,ie)}};function TMe(t,e,n,r,i){return t.some(o=>o(e,n,r,i))}function CMe(t,e){let n=Dw(e);for(let r in t)t.hasOwnProperty(r)&&t[r]!=null&&(n[r]=t[r]);return n}var xB=class{constructor(e,n,r){this.styles=e,this.defaultParams=n,this.normalizer=r}buildStyles(e,n){let r=new Map,i=Dw(this.defaultParams);return Object.keys(e).forEach(o=>{let s=e[o];s!==null&&(i[o]=s)}),this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,u)=>{s&&(s=Iw(s,i,n));let c=this.normalizer.normalizePropertyName(u,n);s=this.normalizer.normalizeStyleValue(u,c,s,n),r.set(u,s)})}),r}};function SMe(t,e,n){return new NB(t,e,n)}var NB=class{constructor(e,n,r){this.name=e,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states=new Map,n.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new xB(i.style,o,r))}),hie(this.states,"true","1"),hie(this.states,"false","0"),n.transitions.forEach(i=>{this.transitionFactories.push(new tA(e,i,this.states))}),this.fallbackTransition=DMe(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,r,i){return this.transitionFactories.find(s=>s.match(e,n,r,i))||null}matchStyles(e,n,r){return this.fallbackTransition.buildStyles(e,n,r)}};function DMe(t,e,n){let o={type:1,animation:{type:2,steps:[],options:null},matchers:[(s,u)=>!0],options:null,queryCount:0,depCount:0};return new tA(t,o,e)}function hie(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}var AMe=new bw,RB=class{constructor(e,n,r){this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){let r=[],i=[],o=Sie(this._driver,n,r,i);if(r.length)throw BRe(r);i.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,n,r){let i=e.element,o=yie(this._normalizer,e.keyframes,n,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,n,r={}){let i=[],o=this._animations.get(e),s,u=new Map;if(o?(s=Die(this._driver,n,o,Eie,wB,new Map,new Map,r,AMe,i),s.forEach(f=>{let p=Wi(u,f.element,new Map);f.postStyleProps.forEach(m=>p.set(m,null))})):(i.push(qRe()),s=[]),i.length)throw HRe(i);u.forEach((f,p)=>{f.forEach((m,v)=>{f.set(v,this._driver.computeStyle(p,v,Ys))})});let c=s.map(f=>{let p=u.get(f.element);return this._buildPlayer(f,new Map,p)}),h=Mc(c);return this._playersById.set(e,h),h.onDestroy(()=>this.destroy(e)),this.players.push(h),h}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let r=this.players.indexOf(n);r>=0&&this.players.splice(r,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw $Re(e);return n}listen(e,n,r,i){let o=FB(n,"","","");return OB(this._getPlayer(e),r,o,i),()=>{}}command(e,n,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(e,n,s);return}let o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},die="ng-animate-queued",xMe=".ng-animate-queued",yB="ng-animate-disabled",NMe=".ng-animate-disabled",RMe="ng-star-inserted",MMe=".ng-star-inserted",PMe=[],Aie={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},kMe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Zo="__ng_removed",Tw=class{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=FMe(i),r){let o=Dw(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let r=this.options.params;Object.keys(n).forEach(i=>{r[i]==null&&(r[i]=n[i])})}}},Ew="void",vB=new Tw(Ew),MB=class{constructor(e,n,r){this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,go(n,this._hostClassName)}listen(e,n,r,i){if(!this._triggers.has(n))throw zRe(r,n);if(r==null||r.length==0)throw GRe(n);if(!LMe(r))throw WRe(r,n);let o=Wi(this._elementListeners,e,[]),s={name:n,phase:r,callback:i};o.push(s);let u=Wi(this._engine.statesByElement,e,new Map);return u.has(n)||(go(e,HD),go(e,HD+"-"+n),u.set(n,vB)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(n)||u.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw KRe(e);return n}trigger(e,n,r,i=!0){let o=this._getTrigger(n),s=new Cw(this.id,n,e),u=this._engine.statesByElement.get(e);u||(go(e,HD),go(e,HD+"-"+n),this._engine.statesByElement.set(e,u=new Map));let c=u.get(n),h=new Tw(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&h.absorbOptions(c.options),u.set(n,h),c||(c=vB),!(h.value===Ew)&&c.value===h.value){if(!jMe(c.params,h.params)){let E=[],b=o.matchStyles(c.value,c.params,E),T=o.matchStyles(h.value,h.params,E);E.length?this._engine.reportError(E):this._engine.afterFlush(()=>{Yh(e,b),ia(e,T)})}return}let m=Wi(this._engine.playersByElement,e,[]);m.forEach(E=>{E.namespaceId==this.id&&E.triggerName==n&&E.queued&&E.destroy()});let v=o.matchTransition(c.value,h.value,e,h.params),_=!1;if(!v){if(!i)return;v=o.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:v,fromState:c,toState:h,player:s,isFallbackTransition:_}),_||(go(e,die),s.onStart(()=>{Ng(e,die)})),s.onDone(()=>{let E=this.players.indexOf(s);E>=0&&this.players.splice(E,1);let b=this._engine.playersByElement.get(e);if(b){let T=b.indexOf(s);T>=0&&b.splice(T,1)}}),this.players.push(s),m.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,r)=>{this._elementListeners.set(r,n.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let r=this._engine.driver.query(e,KD,!0);r.forEach(i=>{if(i[Zo])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,n,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,n,r,i){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let u=[];if(o.forEach((c,h)=>{if(s.set(h,c.value),this._triggers.has(h)){let f=this.trigger(e,h,Ew,i);f&&u.push(f)}}),u.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,s),r&&Mc(u).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(n&&r){let i=new Set;n.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let c=this._triggers.get(s).fallbackTransition,h=r.get(s)||vB,f=new Tw(Ew),p=new Cw(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:h,toState:f,player:p,isFallbackTransition:!0})})}}removeNode(e,n){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,n);else{let o=e[Zo];(!o||o===Aie)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,n))}}insertNode(e,n){go(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(u=>{if(u.name==r.triggerName){let c=FB(o,r.triggerName,r.fromState.value,r.toState.value);c._data=e,OB(r.player,u.phase,c,u.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):n.push(r)}),this._queue=[],n.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},PB=class{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,r){this.bodyNode=e,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,n){let r=new MB(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(r,n):(this.newHostElements.set(n,r),this.collectEnterElement(n)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,n){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,u=this.driver.getParentElement(n);for(;u;){let c=i.get(u);if(c){let h=r.indexOf(c);r.splice(h+1,0,e),s=!0;break}u=this.driver.getParentElement(u)}s||r.unshift(e)}else r.push(e);return i.set(n,e),e}register(e,n){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,n)),r}registerTrigger(e,n,r){let i=this._namespaceLookup[e];i&&i.register(n,r)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&n.add(o)}}return n}trigger(e,n,r,i){if(GD(n)){let o=this._fetchNamespace(e);if(o)return o.trigger(n,r,i),!0}return!1}insertNode(e,n,r,i){if(!GD(n))return;let o=n[Zo];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(n);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(n,r)}i&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),go(e,yB)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ng(e,yB))}removeNode(e,n,r){if(GD(n)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(n,r):this.markElementAsRemoved(e,n,!1,r);let o=this.namespacesByHostElement.get(n);o&&o.id!==e&&o.removeNode(n,r)}else this._onRemovalComplete(n,r)}markElementAsRemoved(e,n,r,i,o){this.collectedLeaveElements.push(n),n[Zo]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,n,r,i,o){return GD(n)?this._fetchNamespace(e).listen(n,r,i,o):()=>{}}_buildInstruction(e,n,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,n,o)}destroyInnerAnimations(e){let n=this.driver.query(e,KD,!0);n.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,EB,!0),n.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Mc(this.players).onDone(()=>e());e()})}processLeaveNode(e){var r;let n=e[Zo];if(n&&n.setForRemoval){if(e[Zo]=Aie,n.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}(r=e.classList)!=null&&r.contains(yB)&&this.markElementAsDisabled(e,!1),this.driver.query(e,NMe,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];go(i,RMe)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{n=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],n.length?Mc(n).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw QRe(e)}_flushAnimations(e,n){let r=new bw,i=[],o=new Map,s=[],u=new Map,c=new Map,h=new Map,f=new Set;this.disabledNodes.forEach(se=>{f.add(se);let me=this.driver.query(se,xMe,!0);for(let be=0;be<me.length;be++)f.add(me[be])});let p=this.bodyNode,m=Array.from(this.statesByElement.keys()),v=gie(m,this.collectedEnterElements),_=new Map,E=0;v.forEach((se,me)=>{let be=Eie+E++;_.set(me,be),se.forEach(Ce=>go(Ce,be))});let b=[],T=new Set,S=new Set;for(let se=0;se<this.collectedLeaveElements.length;se++){let me=this.collectedLeaveElements[se],be=me[Zo];be&&be.setForRemoval&&(b.push(me),T.add(me),be.hasAnimation?this.driver.query(me,MMe,!0).forEach(Ce=>T.add(Ce)):S.add(me))}let A=new Map,x=gie(m,Array.from(T));x.forEach((se,me)=>{let be=wB+E++;A.set(me,be),se.forEach(Ce=>go(Ce,be))}),e.push(()=>{v.forEach((se,me)=>{let be=_.get(me);se.forEach(Ce=>Ng(Ce,be))}),x.forEach((se,me)=>{let be=A.get(me);se.forEach(Ce=>Ng(Ce,be))}),b.forEach(se=>{this.processLeaveNode(se)})});let H=[],N=[];for(let se=this._namespaceList.length-1;se>=0;se--)this._namespaceList[se].drainQueuedTransitions(n).forEach(be=>{let Ce=be.player,Bt=be.element;if(H.push(Ce),this.collectedEnterElements.length){let Cn=Bt[Zo];if(Cn&&Cn.setForMove){if(Cn.previousTriggersValues&&Cn.previousTriggersValues.has(be.triggerName)){let es=Cn.previousTriggersValues.get(be.triggerName),rt=this.statesByElement.get(be.element);if(rt&&rt.has(be.triggerName)){let Zh=rt.get(be.triggerName);Zh.value=es,rt.set(be.triggerName,Zh)}}Ce.destroy();return}}let sr=!p||!this.driver.containsElement(p,Bt),ar=A.get(Bt),yo=_.get(Bt),Lt=this._buildInstruction(be,r,yo,ar,sr);if(Lt.errors&&Lt.errors.length){N.push(Lt);return}if(sr){Ce.onStart(()=>Yh(Bt,Lt.fromStyles)),Ce.onDestroy(()=>ia(Bt,Lt.toStyles)),i.push(Ce);return}if(be.isFallbackTransition){Ce.onStart(()=>Yh(Bt,Lt.fromStyles)),Ce.onDestroy(()=>ia(Bt,Lt.toStyles)),i.push(Ce);return}let Pg=[];Lt.timelines.forEach(Cn=>{Cn.stretchStartingKeyframe=!0,this.disabledNodes.has(Cn.element)||Pg.push(Cn)}),Lt.timelines=Pg,r.append(Bt,Lt.timelines);let sA={instruction:Lt,player:Ce,element:Bt};s.push(sA),Lt.queriedElements.forEach(Cn=>Wi(u,Cn,[]).push(Ce)),Lt.preStyleProps.forEach((Cn,es)=>{if(Cn.size){let rt=c.get(es);rt||c.set(es,rt=new Set),Cn.forEach((Zh,kg)=>rt.add(kg))}}),Lt.postStyleProps.forEach((Cn,es)=>{let rt=h.get(es);rt||h.set(es,rt=new Set),Cn.forEach((Zh,kg)=>rt.add(kg))})});if(N.length){let se=[];N.forEach(me=>{se.push(YRe(me.triggerName,me.errors))}),H.forEach(me=>me.destroy()),this.reportError(se)}let ie=new Map,Ye=new Map;s.forEach(se=>{let me=se.element;r.has(me)&&(Ye.set(me,me),this._beforeAnimationBuild(se.player.namespaceId,se.instruction,ie))}),i.forEach(se=>{let me=se.element;this._getPreviousPlayers(me,!1,se.namespaceId,se.triggerName,null).forEach(Ce=>{Wi(ie,me,[]).push(Ce),Ce.destroy()})});let ge=b.filter(se=>mie(se,c,h)),en=new Map;pie(en,this.driver,S,h,Ys).forEach(se=>{mie(se,c,h)&&ge.push(se)});let Xa=new Map;v.forEach((se,me)=>{pie(Xa,this.driver,new Set(se),c,LS)}),ge.forEach(se=>{var Ce,Bt;let me=en.get(se),be=Xa.get(se);en.set(se,new Map([...(Ce=me==null?void 0:me.entries())!=null?Ce:[],...(Bt=be==null?void 0:be.entries())!=null?Bt:[]]))});let mo=[],Ja=[],Jh={};s.forEach(se=>{let{element:me,player:be,instruction:Ce}=se;if(r.has(me)){if(f.has(me)){be.onDestroy(()=>ia(me,Ce.toStyles)),be.disabled=!0,be.overrideTotalTime(Ce.totalTime),i.push(be);return}let Bt=Jh;if(Ye.size>1){let ar=me,yo=[];for(;ar=ar.parentNode;){let Lt=Ye.get(ar);if(Lt){Bt=Lt;break}yo.push(ar)}yo.forEach(Lt=>Ye.set(Lt,Bt))}let sr=this._buildAnimation(be.namespaceId,Ce,ie,o,Xa,en);if(be.setRealPlayer(sr),Bt===Jh)mo.push(be);else{let ar=this.playersByElement.get(Bt);ar&&ar.length&&(be.parentPlayer=Mc(ar)),i.push(be)}}else Yh(me,Ce.fromStyles),be.onDestroy(()=>ia(me,Ce.toStyles)),Ja.push(be),f.has(me)&&i.push(be)}),Ja.forEach(se=>{let me=o.get(se.element);if(me&&me.length){let be=Mc(me);se.setRealPlayer(be)}}),i.forEach(se=>{se.parentPlayer?se.syncPlayerEvents(se.parentPlayer):se.destroy()});for(let se=0;se<b.length;se++){let me=b[se],be=me[Zo];if(Ng(me,wB),be&&be.hasAnimation)continue;let Ce=[];if(u.size){let sr=u.get(me);sr&&sr.length&&Ce.push(...sr);let ar=this.driver.query(me,EB,!0);for(let yo=0;yo<ar.length;yo++){let Lt=u.get(ar[yo]);Lt&&Lt.length&&Ce.push(...Lt)}}let Bt=Ce.filter(sr=>!sr.destroyed);Bt.length?VMe(this,me,Bt):this.processLeaveNode(me)}return b.length=0,mo.forEach(se=>{this.players.push(se),se.onDone(()=>{se.destroy();let me=this.players.indexOf(se);this.players.splice(me,1)}),se.play()}),mo}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,r,i,o){let s=[];if(n){let u=this.playersByQueriedElement.get(e);u&&(s=u)}else{let u=this.playersByElement.get(e);if(u){let c=!o||o==Ew;u.forEach(h=>{h.queued||!c&&h.triggerName!=i||s.push(h)})}}return(r||i)&&(s=s.filter(u=>!(r&&r!=u.namespaceId||i&&i!=u.triggerName))),s}_beforeAnimationBuild(e,n,r){let i=n.triggerName,o=n.element,s=n.isRemovalTransition?void 0:e,u=n.isRemovalTransition?void 0:i;for(let c of n.timelines){let h=c.element,f=h!==o,p=Wi(r,h,[]);this._getPreviousPlayers(h,f,s,u,n.toState).forEach(v=>{let _=v.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),v.destroy(),p.push(v)})}Yh(o,n.fromStyles)}_buildAnimation(e,n,r,i,o,s){let u=n.triggerName,c=n.element,h=[],f=new Set,p=new Set,m=n.timelines.map(_=>{let E=_.element;f.add(E);let b=E[Zo];if(b&&b.removedBeforeQueried)return new Ec(_.duration,_.delay);let T=E!==c,S=UMe((r.get(E)||PMe).map(ie=>ie.getRealPlayer())).filter(ie=>{let Ye=ie;return Ye.element?Ye.element===E:!1}),A=o.get(E),x=s.get(E),H=yie(this._normalizer,_.keyframes,A,x),N=this._buildPlayer(_,H,S);if(_.subTimeline&&i&&p.add(E),T){let ie=new Cw(e,u,E);ie.setRealPlayer(N),h.push(ie)}return N});h.forEach(_=>{Wi(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>OMe(this.playersByQueriedElement,_.element,_))}),f.forEach(_=>go(_,sie));let v=Mc(m);return v.onDestroy(()=>{f.forEach(_=>Ng(_,sie)),ia(c,n.toStyles)}),p.forEach(_=>{Wi(i,_,[]).push(v)}),v}_buildPlayer(e,n,r){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,r):new Ec(e.duration,e.delay)}},Cw=class{constructor(e,n,r){this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new Ec,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,r)=>{n.forEach(i=>OB(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){Wi(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function OMe(t,e,n){let r=t.get(e);if(r){if(r.length){let i=r.indexOf(n);r.splice(i,1)}r.length==0&&t.delete(e)}return r}function FMe(t){return t!=null?t:null}function GD(t){return t&&t.nodeType===1}function LMe(t){return t=="start"||t=="done"}function fie(t,e){let n=t.style.display;return t.style.display=e!=null?e:"none",n}function pie(t,e,n,r,i){let o=[];n.forEach(c=>o.push(fie(c)));let s=[];r.forEach((c,h)=>{let f=new Map;c.forEach(p=>{let m=e.computeStyle(h,p,i);f.set(p,m),(!m||m.length==0)&&(h[Zo]=kMe,s.push(h))}),t.set(h,f)});let u=0;return n.forEach(c=>fie(c,o[u++])),s}function gie(t,e){let n=new Map;if(t.forEach(u=>n.set(u,[])),e.length==0)return n;let r=1,i=new Set(e),o=new Map;function s(u){if(!u)return r;let c=o.get(u);if(c)return c;let h=u.parentNode;return n.has(h)?c=h:i.has(h)?c=r:c=s(h),o.set(u,c),c}return e.forEach(u=>{let c=s(u);c!==r&&n.get(c).push(u)}),n}function go(t,e){var n;(n=t.classList)==null||n.add(e)}function Ng(t,e){var n;(n=t.classList)==null||n.remove(e)}function VMe(t,e,n){Mc(n).onDone(()=>t.processLeaveNode(e))}function UMe(t){let e=[];return xie(t,e),e}function xie(t,e){for(let n=0;n<t.length;n++){let r=t[n];r instanceof O_?xie(r.players,e):e.push(r)}}function jMe(t,e){let n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){let o=n[i];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}function mie(t,e,n){let r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(o=>i.add(o)):e.set(t,r),n.delete(t),!0}var Mg=class{constructor(e,n,r){this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new PB(e.body,n,r),this._timelineEngine=new RB(e.body,n,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,n,r,i,o){let s=e+"-"+i,u=this._triggerCache[s];if(!u){let c=[],h=[],f=Sie(this._driver,o,c,h);if(c.length)throw URe(i,c);h.length&&void 0,u=SMe(i,f,this._normalizer),this._triggerCache[s]=u}this._transitionEngine.registerTrigger(n,i,u)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,r,i){this._transitionEngine.insertNode(e,n,r,i)}onRemove(e,n,r){this._transitionEngine.removeNode(e,n,r)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,r,i){if(r.charAt(0)=="@"){let[o,s]=iie(r),u=i;this._timelineEngine.command(o,n,s,u)}else this._transitionEngine.trigger(e,n,r,i)}listen(e,n,r,i,o){if(r.charAt(0)=="@"){let[s,u]=iie(r);return this._timelineEngine.listen(s,n,u,o)}return this._transitionEngine.listen(e,n,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function BMe(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=_B(e[0]),e.length>1&&(r=_B(e[e.length-1]))):e instanceof Map&&(n=_B(e)),n||r?new qMe(t,n,r):null}var qMe=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._startStyles=i,this._endStyles=o,this._state=0;let s=e.initialStylesByElement.get(r);s||e.initialStylesByElement.set(r,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ia(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ia(this._element,this._initialStyles),this._endStyles&&(ia(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(Yh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Yh(this._element,this._endStyles),this._endStyles=null),ia(this._element,this._initialStyles),this._state=3)}};e.initialStylesByElement=new WeakMap;let t=e;return t})();function _B(t){let e=null;return t.forEach((n,r)=>{HMe(r)&&(e=e||new Map,e.set(r,n))}),e}function HMe(t){return t==="display"||t==="position"}var nA=class{constructor(e,n,r,i){this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(r=>{n.push(Object.fromEntries(r))}),n}_triggerWebAnimation(e,n,r){return e.animate(this._convertKeyframesToObject(n),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){var e;return+((e=this.domPlayer.currentTime)!=null?e:0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Tie(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},rA=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return vie(e,n)}getParentElement(e){return LB(e)}query(e,n,r){return _ie(e,n,r)}computeStyle(e,n,r){return window.getComputedStyle(e)[n]}animate(e,n,r,i,o,s=[]){let u=i==0?"both":"forwards",c={duration:r,delay:i,fill:u};o&&(c.easing=o);let h=new Map,f=s.filter(v=>v instanceof nA);aMe(r,i)&&f.forEach(v=>{v.currentSnapshot.forEach((_,E)=>h.set(E,_))});let p=iMe(n).map(v=>Rg(v));p=uMe(e,p,h);let m=BMe(e,p);return new nA(e,p,c,m)}};var WD="@",Nie="@.disabled",iA=class{constructor(e,n,r,i){this.namespaceId=e,this.delegate=n,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){var n,r;(r=(n=this.delegate).destroyNode)==null||r.call(n,e)}destroy(){var e;this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),(e=this._onDestroy)==null||e.call(this)}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,r,i=!0){this.delegate.insertBefore(e,n,r),this.engine.onInsert(this.namespaceId,n,e,i)}removeChild(e,n,r){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,r,i){this.delegate.setAttribute(e,n,r,i)}removeAttribute(e,n,r){this.delegate.removeAttribute(e,n,r)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,r,i){this.delegate.setStyle(e,n,r,i)}removeStyle(e,n,r){this.delegate.removeStyle(e,n,r)}setProperty(e,n,r){n.charAt(0)==WD&&n==Nie?this.disableAnimations(e,!!r):this.delegate.setProperty(e,n,r)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,r){return this.delegate.listen(e,n,r)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},kB=class extends iA{constructor(e,n,r,i,o){super(n,r,i,o),this.factory=e,this.namespaceId=n}setProperty(e,n,r){n.charAt(0)==WD?n.charAt(1)=="."&&n==Nie?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,n.slice(1),r):this.delegate.setProperty(e,n,r)}listen(e,n,r){if(n.charAt(0)==WD){let i=$Me(e),o=n.slice(1),s="";return o.charAt(0)!=WD&&([o,s]=zMe(o)),this.engine.listen(this.namespaceId,i,o,s,u=>{let c=u._data||-1;this.factory.scheduleListenerCallback(c,r,u)})}return this.delegate.listen(e,n,r)}};function $Me(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function zMe(t){let e=t.indexOf("."),n=t.substring(0,e),r=t.slice(e+1);return[n,r]}var oA=class{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(i,o)=>{let s=o==null?void 0:o.parentNode(i);s&&o.removeChild(s,i)}}createRenderer(e,n){var h;let r="",i=this.delegate.createRenderer(e,n);if(!e||!((h=n==null?void 0:n.data)!=null&&h.animation)){let f=this._rendererCache,p=f.get(i);if(!p){let m=()=>f.delete(i);p=new iA(r,i,this.engine,m),f.set(i,p)}return p}let o=n.id,s=n.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let u=f=>{Array.isArray(f)?f.forEach(u):this.engine.registerTrigger(o,s,e,f.name,f)};return n.data.animation.forEach(u),new kB(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,u]=o;s(u)}),this._animationCallbacksBuffer=[]})}),i.push([n,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var WMe=(()=>{let e=class e extends Mg{constructor(r,i,o,s){super(r,i,o)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(i){return new(i||e)(M(qt),M(Sw),M(Xh),M(xi))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let t=e;return t})();function KMe(){return new XD}function QMe(t,e,n){return new oA(t,e,n)}var Mie=[{provide:Xh,useFactory:KMe},{provide:Mg,useClass:WMe},{provide:fl,useFactory:QMe,deps:[FI,Mg,ke]}],Rie=[{provide:Sw,useFactory:()=>new rA},{provide:WM,useValue:"BrowserAnimations"},...Mie],YMe=[{provide:Sw,useClass:VB},{provide:WM,useValue:"NoopAnimations"},...Mie],Pie=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:r.disableAnimations?YMe:Rie}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=ut({providers:Rie,imports:[VI]});let t=e;return t})();var kie=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ct({type:e,bootstrap:[Y6]}),e.\u0275inj=ut({imports:[Bee.forRoot(),ff,VI,Wee,h5.initializeApp(qD.firebaseConfig),d5,c7,Mte,tie,wC,_C,nie,XW,Pie]});let t=e;return t})();qD.production&&void 0;i6().bootstrapModule(kie).catch(t=>console.error(t));
